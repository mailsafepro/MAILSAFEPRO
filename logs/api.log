2025-12-07 18:53:14.685 | INFO | no-id | Using custom nameservers: ['8.8.8.8', '8.8.4.4']
2025-12-07 18:53:59.802 | INFO | no-id | Using custom nameservers: ['8.8.8.8', '8.8.4.4']
2025-12-07 18:55:46.954 | INFO | no-id | Using custom nameservers: ['8.8.8.8', '8.8.4.4']
2025-12-07 18:56:26.968 | INFO | no-id | Using custom nameservers: ['8.8.8.8', '8.8.4.4']
2025-12-07 18:56:27.218 | DEBUG | no-id | Prometheus registry cleaned for development mode
2025-12-07 18:56:27.223 | INFO | no-id | üîá Console tracing disabled in development (reducing log noise)
2025-12-07 18:56:27.223 | INFO | no-id | ‚ÑπÔ∏è No tracing exporter configured (development mode)
2025-12-07 18:56:27.224 | INFO | no-id | üîá OpenTelemetry verbose logging disabled in development
2025-12-07 18:56:27.224 | SUCCESS | no-id | ‚úÖ FastAPI instrumented for tracing
2025-12-07 18:56:27.224 | SUCCESS | no-id | ‚úÖ Redis instrumented for tracing
2025-12-07 18:56:27.225 | SUCCESS | no-id | ‚úÖ HTTP client instrumented for tracing
2025-12-07 18:56:27.225 | SUCCESS | no-id | üîç Distributed tracing initialized for mailsafepro-api
2025-12-07 18:56:27.248 | INFO | no-id | Exception handlers registered successfully
2025-12-07 18:56:27.249 | INFO | no-id | üöÄ Starting API server in development environment
2025-12-07 18:56:27.249 | INFO | no-id | Attempting to connect to Redis: redis://redis:6379/0...
2025-12-07 18:56:27.256 | SUCCESS | no-id | ‚úÖ Redis connection established successfully
2025-12-07 18:56:27.256 | INFO | no-id | Attempting to initialize ARQ Redis pool...
2025-12-07 18:56:27.257 | SUCCESS | no-id | ‚úÖ ARQ Redis pool initialized successfully
2025-12-07 18:56:27.257 | INFO | no-id | üî• Warming up connection pools...
2025-12-07 18:56:27.260 | DEBUG | no-id | ‚úÖ Redis pool warmed (10 connections)
2025-12-07 18:56:27.277 | DEBUG | no-id | ‚úÖ DNS cache warmed (8 domains)
2025-12-07 18:56:27.277 | SUCCESS | no-id | ‚úÖ Connection pools warmed up
2025-12-07 18:56:27.278 | INFO | no-id | üîß Initializing application services...
2025-12-07 18:56:27.279 | INFO | no-id | UnifiedCache initialized
2025-12-07 18:56:27.279 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 18:56:27.279 | INFO | no-id | ‚úÖ Redis client injected into validation layer
2025-12-07 18:56:27.279 | INFO | no-id | ‚úÖ Redis client configured in health manager
2025-12-07 18:56:27.282 | INFO | no-id | üì¶ Cached 8 disposable domains
2025-12-07 18:56:27.284 | INFO | no-id | üî• Starting cache warming for popular email domains...
2025-12-07 18:56:27.284 | INFO | no-id | üî• Starting background cache warming
2025-12-07 18:56:27.284 | INFO | no-id | ‚úÖ Background cache warming started
2025-12-07 18:56:27.284 | SUCCESS | no-id | ‚úÖ Cache warming initialized successfully
2025-12-07 18:56:27.284 | SUCCESS | no-id | ‚úÖ Background tasks started
2025-12-07 18:56:27.284 | SUCCESS | no-id | ‚úÖ API server started successfully in 0.04s
2025-12-07 18:56:27.285 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 18:56:27.285 | DEBUG | no-id | Running background maintenance tasks
2025-12-07 18:56:27.285 | INFO | no-id | üî• Warming Tier 1: 11 domains (TTL: 7200s)
2025-12-07 18:56:27.285 | INFO | no-id | üî• Warming Tier 2: 18 domains (TTL: 10800s)
2025-12-07 18:56:27.285 | INFO | no-id | üî• Warming Tier 3: 21 domains (TTL: 21600s)
2025-12-07 18:56:27.285 | INFO | no-id | üî• Warming Tier 4: 17 domains (TTL: 43200s)
2025-12-07 18:56:27.285 | DEBUG | no-id | Warming cache for domain: gmail.com
2025-12-07 18:56:27.285 | DEBUG | no-id | Warming cache for domain: googlemail.com
2025-12-07 18:56:27.285 | DEBUG | no-id | Warming cache for domain: outlook.com
2025-12-07 18:56:27.285 | DEBUG | no-id | Warming cache for domain: hotmail.com
2025-12-07 18:56:27.286 | DEBUG | no-id | Warming cache for domain: live.com
2025-12-07 18:56:27.286 | DEBUG | no-id | Warming cache for domain: yahoo.com
2025-12-07 18:56:27.286 | DEBUG | no-id | Warming cache for domain: ymail.com
2025-12-07 18:56:27.286 | DEBUG | no-id | Warming cache for domain: yahoomail.com
2025-12-07 18:56:27.286 | DEBUG | no-id | Warming cache for domain: icloud.com
2025-12-07 18:56:27.286 | DEBUG | no-id | Warming cache for domain: me.com
2025-12-07 18:56:27.286 | DEBUG | no-id | Warming cache for domain: aol.com
2025-12-07 18:56:27.286 | DEBUG | no-id | Warming cache for domain: mail.ru
2025-12-07 18:56:27.286 | DEBUG | no-id | Warming cache for domain: yandex.ru
2025-12-07 18:56:27.287 | DEBUG | no-id | Warming cache for domain: yandex.com
2025-12-07 18:56:27.287 | DEBUG | no-id | Warming cache for domain: qq.com
2025-12-07 18:56:27.287 | DEBUG | no-id | Warming cache for domain: 163.com
2025-12-07 18:56:27.287 | DEBUG | no-id | Warming cache for domain: 126.com
2025-12-07 18:56:27.287 | DEBUG | no-id | Warming cache for domain: protonmail.com
2025-12-07 18:56:27.287 | DEBUG | no-id | Warming cache for domain: proton.me
2025-12-07 18:56:27.288 | DEBUG | no-id | Warming cache for domain: zoho.com
2025-12-07 18:56:27.288 | DEBUG | no-id | Warming cache for domain: fastmail.com
2025-12-07 18:56:27.288 | DEBUG | no-id | Warming cache for domain: fastmail.fm
2025-12-07 18:56:27.288 | DEBUG | no-id | Warming cache for domain: tutanota.com
2025-12-07 18:56:27.288 | DEBUG | no-id | Warming cache for domain: tuta.io
2025-12-07 18:56:27.288 | DEBUG | no-id | Warming cache for domain: mailbox.org
2025-12-07 18:56:27.289 | DEBUG | no-id | Warming cache for domain: seznam.cz
2025-12-07 18:56:27.289 | DEBUG | no-id | Warming cache for domain: orange.fr
2025-12-07 18:56:27.289 | DEBUG | no-id | Warming cache for domain: wanadoo.fr
2025-12-07 18:56:27.289 | DEBUG | no-id | Warming cache for domain: libero.it
2025-12-07 18:56:27.289 | DEBUG | no-id | Warming cache for domain: virgilio.it
2025-12-07 18:56:27.289 | DEBUG | no-id | Warming cache for domain: btinternet.com
2025-12-07 18:56:27.289 | DEBUG | no-id | Warming cache for domain: sky.com
2025-12-07 18:56:27.290 | DEBUG | no-id | Warming cache for domain: talktalk.net
2025-12-07 18:56:27.290 | DEBUG | no-id | Warming cache for domain: o2.co.uk
2025-12-07 18:56:27.290 | DEBUG | no-id | Warming cache for domain: ntlworld.com
2025-12-07 18:56:27.290 | DEBUG | no-id | Warming cache for domain: live.co.uk
2025-12-07 18:56:27.290 | DEBUG | no-id | Warming cache for domain: live.fr
2025-12-07 18:56:27.290 | DEBUG | no-id | Warming cache for domain: live.de
2025-12-07 18:56:27.290 | DEBUG | no-id | Warming cache for domain: gmx.de
2025-12-07 18:56:27.290 | DEBUG | no-id | Warming cache for domain: gmx.at
2025-12-07 18:56:27.308 | INFO | no-id | ‚úÖ Warmed cache for outlook.com (TTL: 7200s)
2025-12-07 18:56:27.308 | INFO | no-id | ‚úÖ Warmed cache for ymail.com (TTL: 7200s)
2025-12-07 18:56:27.309 | INFO | no-id | ‚úÖ Warmed cache for hotmail.com (TTL: 7200s)
2025-12-07 18:56:27.311 | INFO | no-id | ‚úÖ Warmed cache for qq.com (TTL: 10800s)
2025-12-07 18:56:27.312 | INFO | no-id | ‚úÖ Warmed cache for wanadoo.fr (TTL: 21600s)
2025-12-07 18:56:27.312 | INFO | no-id | ‚úÖ Warmed cache for fastmail.fm (TTL: 21600s)
2025-12-07 18:56:27.312 | INFO | no-id | ‚úÖ Warmed cache for yandex.com (TTL: 10800s)
2025-12-07 18:56:27.312 | INFO | no-id | ‚úÖ Warmed cache for fastmail.com (TTL: 21600s)
2025-12-07 18:56:27.314 | INFO | no-id | ‚úÖ Warmed cache for 163.com (TTL: 10800s)
2025-12-07 18:56:27.315 | INFO | no-id | ‚úÖ Warmed cache for tutanota.com (TTL: 21600s)
2025-12-07 18:56:27.316 | INFO | no-id | ‚úÖ Warmed cache for talktalk.net (TTL: 43200s)
2025-12-07 18:56:27.320 | INFO | no-id | ‚úÖ Warmed cache for live.fr (TTL: 43200s)
2025-12-07 18:56:27.320 | WARNING | no-id | No MX records found for yahoomail.com
2025-12-07 18:56:27.323 | INFO | no-id | ‚úÖ Warmed cache for googlemail.com (TTL: 7200s)
2025-12-07 18:56:27.323 | INFO | no-id | ‚úÖ Warmed cache for gmail.com (TTL: 7200s)
2025-12-07 18:56:27.325 | INFO | no-id | ‚úÖ Warmed cache for gmx.at (TTL: 43200s)
2025-12-07 18:56:27.327 | INFO | no-id | ‚úÖ Warmed cache for icloud.com (TTL: 7200s)
2025-12-07 18:56:27.328 | INFO | no-id | ‚úÖ Warmed cache for libero.it (TTL: 21600s)
2025-12-07 18:56:27.331 | INFO | no-id | ‚úÖ Warmed cache for proton.me (TTL: 10800s)
2025-12-07 18:56:27.331 | INFO | no-id | ‚úÖ Warmed cache for yahoo.com (TTL: 7200s)
2025-12-07 18:56:27.331 | INFO | no-id | ‚úÖ Warmed cache for me.com (TTL: 7200s)
2025-12-07 18:56:27.331 | INFO | no-id | ‚úÖ Warmed cache for yandex.ru (TTL: 10800s)
2025-12-07 18:56:27.332 | INFO | no-id | ‚úÖ Warmed cache for aol.com (TTL: 10800s)
2025-12-07 18:56:27.332 | INFO | no-id | ‚úÖ Warmed cache for orange.fr (TTL: 21600s)
2025-12-07 18:56:27.332 | INFO | no-id | ‚úÖ Warmed cache for sky.com (TTL: 43200s)
2025-12-07 18:56:27.334 | INFO | no-id | ‚úÖ Warmed cache for mailbox.org (TTL: 21600s)
2025-12-07 18:56:27.338 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.281s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:56:27.338 | INFO | no-id | ‚úÖ Warmed cache for gmx.de (TTL: 43200s)
2025-12-07 18:56:27.338 | INFO | no-id | ‚úÖ Warmed cache for live.co.uk (TTL: 43200s)
2025-12-07 18:56:27.339 | INFO | no-id | ‚úÖ Warmed cache for live.de (TTL: 43200s)
2025-12-07 18:56:27.341 | INFO | no-id | ‚úÖ Warmed cache for ntlworld.com (TTL: 43200s)
2025-12-07 18:56:27.346 | INFO | no-id | ‚úÖ Warmed cache for live.com (TTL: 7200s)
2025-12-07 18:56:27.346 | INFO | no-id | ‚úÖ Warmed cache for virgilio.it (TTL: 21600s)
2025-12-07 18:56:27.350 | INFO | no-id | ‚úÖ Warmed cache for btinternet.com (TTL: 43200s)
2025-12-07 18:56:27.353 | INFO | no-id | ‚úÖ Warmed cache for seznam.cz (TTL: 21600s)
2025-12-07 18:56:27.370 | INFO | no-id | ‚úÖ Warmed cache for tuta.io (TTL: 21600s)
2025-12-07 18:56:27.372 | INFO | no-id | ‚úÖ Warmed cache for protonmail.com (TTL: 10800s)
2025-12-07 18:56:27.384 | INFO | no-id | ‚úÖ Warmed cache for mail.ru (TTL: 10800s)
2025-12-07 18:56:27.444 | INFO | no-id | ‚úÖ Warmed cache for zoho.com (TTL: 10800s)
2025-12-07 18:56:27.446 | DEBUG | no-id | Warming cache for domain: mac.com
2025-12-07 18:56:27.463 | INFO | no-id | ‚úÖ Warmed cache for mac.com (TTL: 7200s)
2025-12-07 18:56:27.464 | INFO | no-id | ‚úÖ Tier 1 warming complete: 10/11 successful
2025-12-07 18:56:27.470 | DEBUG | no-id | Warming cache for domain: optonline.net
2025-12-07 18:56:27.470 | DEBUG | no-id | Warming cache for domain: verizon.net
2025-12-07 18:56:27.470 | DEBUG | no-id | Warming cache for domain: bellsouth.net
2025-12-07 18:56:27.471 | DEBUG | no-id | Warming cache for domain: att.net
2025-12-07 18:56:27.471 | DEBUG | no-id | Warming cache for domain: comcast.net
2025-12-07 18:56:27.471 | DEBUG | no-id | Warming cache for domain: sbcglobal.net
2025-12-07 18:56:27.471 | DEBUG | no-id | Warming cache for domain: cox.net
2025-12-07 18:56:27.471 | DEBUG | no-id | Warming cache for domain: charter.net
2025-12-07 18:56:27.471 | DEBUG | no-id | Warming cache for domain: rediffmail.com
2025-12-07 18:56:27.472 | DEBUG | no-id | Warming cache for domain: inbox.com
2025-12-07 18:56:27.483 | INFO | no-id | ‚úÖ Warmed cache for charter.net (TTL: 21600s)
2025-12-07 18:56:27.483 | INFO | no-id | ‚úÖ Warmed cache for att.net (TTL: 21600s)
2025-12-07 18:56:27.484 | INFO | no-id | ‚úÖ Warmed cache for optonline.net (TTL: 21600s)
2025-12-07 18:56:27.484 | INFO | no-id | ‚úÖ Warmed cache for bellsouth.net (TTL: 21600s)
2025-12-07 18:56:27.484 | INFO | no-id | ‚úÖ Warmed cache for sbcglobal.net (TTL: 21600s)
2025-12-07 18:56:27.484 | INFO | no-id | ‚úÖ Warmed cache for comcast.net (TTL: 21600s)
2025-12-07 18:56:27.484 | INFO | no-id | ‚úÖ Warmed cache for cox.net (TTL: 21600s)
2025-12-07 18:56:27.486 | INFO | no-id | ‚úÖ Warmed cache for inbox.com (TTL: 21600s)
2025-12-07 18:56:27.527 | INFO | no-id | ‚úÖ Warmed cache for 126.com (TTL: 10800s)
2025-12-07 18:56:27.527 | INFO | no-id | ‚úÖ Warmed cache for rediffmail.com (TTL: 21600s)
2025-12-07 18:56:27.565 | INFO | no-id | ‚úÖ Warmed cache for verizon.net (TTL: 21600s)
2025-12-07 18:56:27.623 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 18:56:27.629 | DEBUG | no-id | Warming cache for domain: zohomail.com
2025-12-07 18:56:27.629 | DEBUG | no-id | Warming cache for domain: gmx.com
2025-12-07 18:56:27.629 | DEBUG | no-id | Warming cache for domain: gmx.net
2025-12-07 18:56:27.630 | DEBUG | no-id | Warming cache for domain: web.de
2025-12-07 18:56:27.630 | DEBUG | no-id | Warming cache for domain: t-online.de
2025-12-07 18:56:27.630 | DEBUG | no-id | Warming cache for domain: naver.com
2025-12-07 18:56:27.630 | DEBUG | no-id | Warming cache for domain: hanmail.net
2025-12-07 18:56:27.630 | DEBUG | no-id | Warming cache for domain: daum.net
2025-12-07 18:56:27.632 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.547s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:56:27.640 | INFO | no-id | ‚úÖ Warmed cache for gmx.com (TTL: 10800s)
2025-12-07 18:56:27.642 | INFO | no-id | ‚úÖ Warmed cache for hanmail.net (TTL: 10800s)
2025-12-07 18:56:27.657 | INFO | no-id | ‚úÖ Warmed cache for t-online.de (TTL: 10800s)
2025-12-07 18:56:27.659 | INFO | no-id | ‚úÖ Warmed cache for web.de (TTL: 10800s)
2025-12-07 18:56:27.660 | INFO | no-id | ‚úÖ Warmed cache for gmx.net (TTL: 10800s)
2025-12-07 18:56:27.664 | DEBUG | no-id | Warming cache for domain: email.com
2025-12-07 18:56:27.672 | INFO | no-id | ‚úÖ Warmed cache for email.com (TTL: 21600s)
2025-12-07 18:56:27.673 | INFO | no-id | ‚úÖ Tier 3 warming complete: 21/21 successful
2025-12-07 18:56:27.684 | INFO | no-id | ‚úÖ Warmed cache for zohomail.com (TTL: 10800s)
2025-12-07 18:56:27.923 | INFO | no-id | ‚úÖ Warmed cache for daum.net (TTL: 10800s)
2025-12-07 18:56:27.933 | INFO | no-id | ‚úÖ Warmed cache for naver.com (TTL: 10800s)
2025-12-07 18:56:27.933 | INFO | no-id | ‚úÖ Tier 2 warming complete: 18/18 successful
2025-12-07 18:56:28.185 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 18:56:28.197 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.105s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:56:29.305 | DEBUG | no-id | Async MX primary failed for o2.co.uk: (1, 'DNS server returned answer with no data')
2025-12-07 18:56:29.345 | DEBUG | no-id | Retry 1/3 for _query_mx_fallback sleeping 0.257s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:56:29.603 | DEBUG | no-id | Retrying _query_mx_fallback attempt 2/3
2025-12-07 18:56:29.619 | DEBUG | no-id | Retry 2/3 for _query_mx_fallback sleeping 0.534s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:56:30.156 | DEBUG | no-id | Retrying _query_mx_fallback attempt 3/3
2025-12-07 18:56:30.173 | DEBUG | no-id | Retry 3/3 for _query_mx_fallback sleeping 1.145s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:56:31.321 | DEBUG | no-id | Fallback MX query failed for o2.co.uk: The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:56:31.340 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.272s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:56:31.615 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 18:56:31.629 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.588s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:56:32.222 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 18:56:32.234 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.051s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:56:33.291 | DEBUG | no-id | Async MX primary failed for o2.co.uk: (1, 'DNS server returned answer with no data')
2025-12-07 18:56:33.311 | DEBUG | no-id | Retry 1/3 for _query_mx_fallback sleeping 0.291s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:56:33.607 | DEBUG | no-id | Retrying _query_mx_fallback attempt 2/3
2025-12-07 18:56:33.624 | DEBUG | no-id | Retry 2/3 for _query_mx_fallback sleeping 0.607s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:56:34.235 | DEBUG | no-id | Retrying _query_mx_fallback attempt 3/3
2025-12-07 18:56:34.302 | DEBUG | no-id | Retry 3/3 for _query_mx_fallback sleeping 1.097s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:56:35.101 | INFO | no-id | Rate limit check | IP: 172.20.0.1 | Path: /auth/login
2025-12-07 18:56:35.102 | INFO | no-id | Redis available: True
2025-12-07 18:56:35.103 | INFO | no-id | Created circuit breaker: Redis Cache
2025-12-07 18:56:35.103 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 18:56:35.108 | INFO | no-id | Rate limit result | Allowed: True | Current: 1 | Limit: 1000
2025-12-07 18:56:35.117 | DEBUG | no-id | No Bearer token in Authorization header
2025-12-07 18:56:35.119 | WARNING | no-id | Validation Error | Count: 1 | Details: [{"field": "body", "message": "Input should be a valid dictionary or object to extract fields from", "type": "model_attributes_type", "input": "username=tes***@e***.com&password=[REDACTED]"}] | Trace: None | Plan: UNKNOWN | Path: /auth/login
2025-12-07 18:56:35.401 | DEBUG | no-id | Fallback MX query failed for o2.co.uk: The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:56:35.401 | WARNING | no-id | No MX records found for o2.co.uk
2025-12-07 18:56:35.508 | DEBUG | no-id | Warming cache for domain: gmx.ch
2025-12-07 18:56:35.509 | DEBUG | no-id | Warming cache for domain: freenet.de
2025-12-07 18:56:35.509 | DEBUG | no-id | Warming cache for domain: arcor.de
2025-12-07 18:56:35.510 | DEBUG | no-id | Warming cache for domain: laposte.net
2025-12-07 18:56:35.510 | DEBUG | no-id | Warming cache for domain: sfr.fr
2025-12-07 18:56:35.510 | DEBUG | no-id | Warming cache for domain: tiscali.it
2025-12-07 18:56:35.511 | DEBUG | no-id | Warming cache for domain: tiscali.co.uk
2025-12-07 18:56:35.527 | INFO | no-id | ‚úÖ Warmed cache for arcor.de (TTL: 43200s)
2025-12-07 18:56:35.528 | INFO | no-id | ‚úÖ Warmed cache for tiscali.it (TTL: 43200s)
2025-12-07 18:56:35.529 | INFO | no-id | ‚úÖ Warmed cache for gmx.ch (TTL: 43200s)
2025-12-07 18:56:35.534 | INFO | no-id | ‚úÖ Warmed cache for freenet.de (TTL: 43200s)
2025-12-07 18:56:35.544 | INFO | no-id | ‚úÖ Warmed cache for sfr.fr (TTL: 43200s)
2025-12-07 18:56:35.558 | INFO | no-id | ‚úÖ Warmed cache for tiscali.co.uk (TTL: 43200s)
2025-12-07 18:56:35.566 | INFO | no-id | ‚úÖ Warmed cache for laposte.net (TTL: 43200s)
2025-12-07 18:56:35.566 | INFO | no-id | ‚úÖ Tier 4 warming complete: 16/17 successful
2025-12-07 18:56:35.566 | INFO | no-id | ‚úÖ Cache warming complete in 8.28s | Total warmed: 65 | Failures: 2
2025-12-07 18:57:35.573 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 18:57:35.587 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 18:57:35.588 | DEBUG | no-id | Tier 2 not due for warming yet
2025-12-07 18:57:35.588 | DEBUG | no-id | Tier 3 not due for warming yet
2025-12-07 18:57:35.588 | DEBUG | no-id | Tier 4 not due for warming yet
2025-12-07 18:57:35.589 | INFO | no-id | ‚úÖ Cache warming complete in 0.02s | Total warmed: 65 | Failures: 2
2025-12-07 18:58:35.591 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 18:58:35.607 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 18:58:35.608 | DEBUG | no-id | Tier 2 not due for warming yet
2025-12-07 18:58:35.608 | DEBUG | no-id | Tier 3 not due for warming yet
2025-12-07 18:58:35.608 | DEBUG | no-id | Tier 4 not due for warming yet
2025-12-07 18:58:35.609 | INFO | no-id | ‚úÖ Cache warming complete in 0.02s | Total warmed: 65 | Failures: 2
2025-12-07 18:58:51.654 | INFO | no-id | üõë Shutting down API server...
2025-12-07 18:58:51.658 | INFO | no-id | üîß Shutting down services...
2025-12-07 18:58:51.659 | INFO | no-id | Stopping cache warming...
2025-12-07 18:58:51.660 | INFO | no-id | Shutting down tracing...
2025-12-07 18:58:51.660 | INFO | no-id | ‚úÖ Tracing shut down cleanly
2025-12-07 18:58:51.661 | INFO | no-id | Stopping background cache warming
2025-12-07 18:58:51.662 | INFO | no-id | ‚úÖ Background cache warming stopped
2025-12-07 18:58:51.662 | SUCCESS | no-id | ‚úÖ All services shut down cleanly
2025-12-07 18:58:51.664 | INFO | no-id | ‚úÖ Redis connection closed
2025-12-07 18:58:51.665 | INFO | no-id | ‚úÖ ARQ pool closed
2025-12-07 18:58:51.666 | SUCCESS | no-id | üëã API server stopped cleanly
2025-12-07 18:58:51.670 | INFO | no-id | Background tasks cancelled
2025-12-07 18:58:52.853 | INFO | no-id | Using custom nameservers: ['8.8.8.8', '8.8.4.4']
2025-12-07 18:58:53.100 | DEBUG | no-id | Prometheus registry cleaned for development mode
2025-12-07 18:58:53.106 | INFO | no-id | üîá Console tracing disabled in development (reducing log noise)
2025-12-07 18:58:53.106 | INFO | no-id | ‚ÑπÔ∏è No tracing exporter configured (development mode)
2025-12-07 18:58:53.106 | INFO | no-id | üîá OpenTelemetry verbose logging disabled in development
2025-12-07 18:58:53.106 | SUCCESS | no-id | ‚úÖ FastAPI instrumented for tracing
2025-12-07 18:58:53.107 | SUCCESS | no-id | ‚úÖ Redis instrumented for tracing
2025-12-07 18:58:53.107 | SUCCESS | no-id | ‚úÖ HTTP client instrumented for tracing
2025-12-07 18:58:53.107 | SUCCESS | no-id | üîç Distributed tracing initialized for mailsafepro-api
2025-12-07 18:58:53.129 | INFO | no-id | Exception handlers registered successfully
2025-12-07 18:58:53.130 | INFO | no-id | üöÄ Starting API server in development environment
2025-12-07 18:58:53.130 | INFO | no-id | Attempting to connect to Redis: redis://redis:6379/0...
2025-12-07 18:58:53.138 | SUCCESS | no-id | ‚úÖ Redis connection established successfully
2025-12-07 18:58:53.138 | INFO | no-id | Attempting to initialize ARQ Redis pool...
2025-12-07 18:58:53.139 | SUCCESS | no-id | ‚úÖ ARQ Redis pool initialized successfully
2025-12-07 18:58:53.139 | INFO | no-id | üî• Warming up connection pools...
2025-12-07 18:58:53.142 | DEBUG | no-id | ‚úÖ Redis pool warmed (10 connections)
2025-12-07 18:58:53.156 | DEBUG | no-id | ‚úÖ DNS cache warmed (8 domains)
2025-12-07 18:58:53.156 | SUCCESS | no-id | ‚úÖ Connection pools warmed up
2025-12-07 18:58:53.157 | INFO | no-id | üîß Initializing application services...
2025-12-07 18:58:53.158 | INFO | no-id | UnifiedCache initialized
2025-12-07 18:58:53.158 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 18:58:53.158 | INFO | no-id | ‚úÖ Redis client injected into validation layer
2025-12-07 18:58:53.158 | INFO | no-id | ‚úÖ Redis client configured in health manager
2025-12-07 18:58:53.159 | INFO | no-id | üì¶ Cached 8 disposable domains
2025-12-07 18:58:53.159 | INFO | no-id | üî• Starting cache warming for popular email domains...
2025-12-07 18:58:53.160 | INFO | no-id | üî• Starting background cache warming
2025-12-07 18:58:53.160 | INFO | no-id | ‚úÖ Background cache warming started
2025-12-07 18:58:53.160 | SUCCESS | no-id | ‚úÖ Cache warming initialized successfully
2025-12-07 18:58:53.160 | SUCCESS | no-id | ‚úÖ Background tasks started
2025-12-07 18:58:53.160 | SUCCESS | no-id | ‚úÖ API server started successfully in 0.03s
2025-12-07 18:58:53.160 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 18:58:53.160 | DEBUG | no-id | Running background maintenance tasks
2025-12-07 18:58:53.160 | INFO | no-id | üî• Warming Tier 1: 11 domains (TTL: 7200s)
2025-12-07 18:58:53.161 | INFO | no-id | üî• Warming Tier 2: 18 domains (TTL: 10800s)
2025-12-07 18:58:53.161 | INFO | no-id | üî• Warming Tier 3: 21 domains (TTL: 21600s)
2025-12-07 18:58:53.161 | INFO | no-id | üî• Warming Tier 4: 17 domains (TTL: 43200s)
2025-12-07 18:58:53.161 | DEBUG | no-id | Warming cache for domain: gmail.com
2025-12-07 18:58:53.161 | DEBUG | no-id | Warming cache for domain: googlemail.com
2025-12-07 18:58:53.161 | DEBUG | no-id | Warming cache for domain: outlook.com
2025-12-07 18:58:53.161 | DEBUG | no-id | Warming cache for domain: hotmail.com
2025-12-07 18:58:53.161 | DEBUG | no-id | Warming cache for domain: live.com
2025-12-07 18:58:53.161 | DEBUG | no-id | Warming cache for domain: yahoo.com
2025-12-07 18:58:53.161 | DEBUG | no-id | Warming cache for domain: ymail.com
2025-12-07 18:58:53.162 | DEBUG | no-id | Warming cache for domain: yahoomail.com
2025-12-07 18:58:53.162 | DEBUG | no-id | Warming cache for domain: icloud.com
2025-12-07 18:58:53.162 | DEBUG | no-id | Warming cache for domain: me.com
2025-12-07 18:58:53.162 | DEBUG | no-id | Warming cache for domain: aol.com
2025-12-07 18:58:53.162 | DEBUG | no-id | Warming cache for domain: mail.ru
2025-12-07 18:58:53.162 | DEBUG | no-id | Warming cache for domain: yandex.ru
2025-12-07 18:58:53.162 | DEBUG | no-id | Warming cache for domain: yandex.com
2025-12-07 18:58:53.163 | DEBUG | no-id | Warming cache for domain: qq.com
2025-12-07 18:58:53.163 | DEBUG | no-id | Warming cache for domain: 163.com
2025-12-07 18:58:53.163 | DEBUG | no-id | Warming cache for domain: 126.com
2025-12-07 18:58:53.163 | DEBUG | no-id | Warming cache for domain: protonmail.com
2025-12-07 18:58:53.163 | DEBUG | no-id | Warming cache for domain: proton.me
2025-12-07 18:58:53.163 | DEBUG | no-id | Warming cache for domain: zoho.com
2025-12-07 18:58:53.163 | DEBUG | no-id | Warming cache for domain: fastmail.com
2025-12-07 18:58:53.164 | DEBUG | no-id | Warming cache for domain: fastmail.fm
2025-12-07 18:58:53.164 | DEBUG | no-id | Warming cache for domain: tutanota.com
2025-12-07 18:58:53.164 | DEBUG | no-id | Warming cache for domain: tuta.io
2025-12-07 18:58:53.164 | DEBUG | no-id | Warming cache for domain: mailbox.org
2025-12-07 18:58:53.164 | DEBUG | no-id | Warming cache for domain: seznam.cz
2025-12-07 18:58:53.164 | DEBUG | no-id | Warming cache for domain: orange.fr
2025-12-07 18:58:53.164 | DEBUG | no-id | Warming cache for domain: wanadoo.fr
2025-12-07 18:58:53.165 | DEBUG | no-id | Warming cache for domain: libero.it
2025-12-07 18:58:53.165 | DEBUG | no-id | Warming cache for domain: virgilio.it
2025-12-07 18:58:53.165 | DEBUG | no-id | Warming cache for domain: btinternet.com
2025-12-07 18:58:53.165 | DEBUG | no-id | Warming cache for domain: sky.com
2025-12-07 18:58:53.165 | DEBUG | no-id | Warming cache for domain: talktalk.net
2025-12-07 18:58:53.165 | DEBUG | no-id | Warming cache for domain: o2.co.uk
2025-12-07 18:58:53.166 | DEBUG | no-id | Warming cache for domain: ntlworld.com
2025-12-07 18:58:53.166 | DEBUG | no-id | Warming cache for domain: live.co.uk
2025-12-07 18:58:53.166 | DEBUG | no-id | Warming cache for domain: live.fr
2025-12-07 18:58:53.166 | DEBUG | no-id | Warming cache for domain: live.de
2025-12-07 18:58:53.167 | DEBUG | no-id | Warming cache for domain: gmx.de
2025-12-07 18:58:53.167 | DEBUG | no-id | Warming cache for domain: gmx.at
2025-12-07 18:58:53.179 | INFO | no-id | ‚úÖ Warmed cache for ymail.com (TTL: 7200s)
2025-12-07 18:58:53.183 | INFO | no-id | ‚úÖ Warmed cache for hotmail.com (TTL: 7200s)
2025-12-07 18:58:53.185 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.307s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:58:53.188 | INFO | no-id | ‚úÖ Warmed cache for fastmail.com (TTL: 21600s)
2025-12-07 18:58:53.188 | INFO | no-id | ‚úÖ Warmed cache for fastmail.fm (TTL: 21600s)
2025-12-07 18:58:53.191 | INFO | no-id | ‚úÖ Warmed cache for tutanota.com (TTL: 21600s)
2025-12-07 18:58:53.192 | INFO | no-id | ‚úÖ Warmed cache for live.co.uk (TTL: 43200s)
2025-12-07 18:58:53.193 | INFO | no-id | ‚úÖ Warmed cache for ntlworld.com (TTL: 43200s)
2025-12-07 18:58:53.216 | INFO | no-id | ‚úÖ Warmed cache for yandex.com (TTL: 10800s)
2025-12-07 18:58:53.216 | INFO | no-id | ‚úÖ Warmed cache for qq.com (TTL: 10800s)
2025-12-07 18:58:53.219 | WARNING | no-id | No MX records found for yahoomail.com
2025-12-07 18:58:53.220 | INFO | no-id | ‚úÖ Warmed cache for wanadoo.fr (TTL: 21600s)
2025-12-07 18:58:53.220 | INFO | no-id | ‚úÖ Warmed cache for gmx.at (TTL: 43200s)
2025-12-07 18:58:53.220 | INFO | no-id | ‚úÖ Warmed cache for googlemail.com (TTL: 7200s)
2025-12-07 18:58:53.220 | INFO | no-id | ‚úÖ Warmed cache for gmail.com (TTL: 7200s)
2025-12-07 18:58:53.220 | INFO | no-id | ‚úÖ Warmed cache for outlook.com (TTL: 7200s)
2025-12-07 18:58:53.221 | INFO | no-id | ‚úÖ Warmed cache for live.de (TTL: 43200s)
2025-12-07 18:58:53.221 | INFO | no-id | ‚úÖ Warmed cache for talktalk.net (TTL: 43200s)
2025-12-07 18:58:53.224 | INFO | no-id | ‚úÖ Warmed cache for btinternet.com (TTL: 43200s)
2025-12-07 18:58:53.231 | INFO | no-id | ‚úÖ Warmed cache for seznam.cz (TTL: 21600s)
2025-12-07 18:58:53.231 | INFO | no-id | ‚úÖ Warmed cache for live.fr (TTL: 43200s)
2025-12-07 18:58:53.232 | INFO | no-id | ‚úÖ Warmed cache for icloud.com (TTL: 7200s)
2025-12-07 18:58:53.232 | INFO | no-id | ‚úÖ Warmed cache for yahoo.com (TTL: 7200s)
2025-12-07 18:58:53.232 | INFO | no-id | ‚úÖ Warmed cache for yandex.ru (TTL: 10800s)
2025-12-07 18:58:53.233 | INFO | no-id | ‚úÖ Warmed cache for virgilio.it (TTL: 21600s)
2025-12-07 18:58:53.233 | INFO | no-id | ‚úÖ Warmed cache for orange.fr (TTL: 21600s)
2025-12-07 18:58:53.234 | INFO | no-id | ‚úÖ Warmed cache for libero.it (TTL: 21600s)
2025-12-07 18:58:53.234 | INFO | no-id | ‚úÖ Warmed cache for proton.me (TTL: 10800s)
2025-12-07 18:58:53.234 | INFO | no-id | ‚úÖ Warmed cache for me.com (TTL: 7200s)
2025-12-07 18:58:53.234 | INFO | no-id | ‚úÖ Warmed cache for protonmail.com (TTL: 10800s)
2025-12-07 18:58:53.235 | INFO | no-id | ‚úÖ Warmed cache for gmx.de (TTL: 43200s)
2025-12-07 18:58:53.237 | INFO | no-id | ‚úÖ Warmed cache for mailbox.org (TTL: 21600s)
2025-12-07 18:58:53.239 | INFO | no-id | ‚úÖ Warmed cache for tuta.io (TTL: 21600s)
2025-12-07 18:58:53.244 | INFO | no-id | ‚úÖ Warmed cache for live.com (TTL: 7200s)
2025-12-07 18:58:53.249 | INFO | no-id | ‚úÖ Warmed cache for mail.ru (TTL: 10800s)
2025-12-07 18:58:53.254 | INFO | no-id | ‚úÖ Warmed cache for aol.com (TTL: 10800s)
2025-12-07 18:58:53.277 | INFO | no-id | ‚úÖ Warmed cache for sky.com (TTL: 43200s)
2025-12-07 18:58:53.306 | INFO | no-id | ‚úÖ Warmed cache for zoho.com (TTL: 10800s)
2025-12-07 18:58:53.337 | INFO | no-id | ‚úÖ Warmed cache for 126.com (TTL: 10800s)
2025-12-07 18:58:53.339 | DEBUG | no-id | Warming cache for domain: optonline.net
2025-12-07 18:58:53.339 | DEBUG | no-id | Warming cache for domain: verizon.net
2025-12-07 18:58:53.339 | DEBUG | no-id | Warming cache for domain: bellsouth.net
2025-12-07 18:58:53.339 | DEBUG | no-id | Warming cache for domain: att.net
2025-12-07 18:58:53.340 | DEBUG | no-id | Warming cache for domain: comcast.net
2025-12-07 18:58:53.340 | DEBUG | no-id | Warming cache for domain: sbcglobal.net
2025-12-07 18:58:53.340 | DEBUG | no-id | Warming cache for domain: cox.net
2025-12-07 18:58:53.340 | DEBUG | no-id | Warming cache for domain: charter.net
2025-12-07 18:58:53.340 | DEBUG | no-id | Warming cache for domain: rediffmail.com
2025-12-07 18:58:53.341 | DEBUG | no-id | Warming cache for domain: inbox.com
2025-12-07 18:58:53.343 | DEBUG | no-id | Warming cache for domain: mac.com
2025-12-07 18:58:53.353 | INFO | no-id | ‚úÖ Warmed cache for optonline.net (TTL: 21600s)
2025-12-07 18:58:53.353 | INFO | no-id | ‚úÖ Warmed cache for cox.net (TTL: 21600s)
2025-12-07 18:58:53.353 | INFO | no-id | ‚úÖ Warmed cache for charter.net (TTL: 21600s)
2025-12-07 18:58:53.353 | INFO | no-id | ‚úÖ Warmed cache for sbcglobal.net (TTL: 21600s)
2025-12-07 18:58:53.355 | INFO | no-id | ‚úÖ Warmed cache for rediffmail.com (TTL: 21600s)
2025-12-07 18:58:53.355 | INFO | no-id | ‚úÖ Warmed cache for comcast.net (TTL: 21600s)
2025-12-07 18:58:53.355 | INFO | no-id | ‚úÖ Warmed cache for bellsouth.net (TTL: 21600s)
2025-12-07 18:58:53.356 | INFO | no-id | ‚úÖ Warmed cache for inbox.com (TTL: 21600s)
2025-12-07 18:58:53.362 | INFO | no-id | ‚úÖ Warmed cache for mac.com (TTL: 7200s)
2025-12-07 18:58:53.363 | INFO | no-id | ‚úÖ Tier 1 warming complete: 10/11 successful
2025-12-07 18:58:53.435 | INFO | no-id | ‚úÖ Warmed cache for verizon.net (TTL: 21600s)
2025-12-07 18:58:53.463 | INFO | no-id | ‚úÖ Warmed cache for att.net (TTL: 21600s)
2025-12-07 18:58:53.491 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 18:58:53.501 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.623s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:58:53.510 | INFO | no-id | ‚úÖ Warmed cache for 163.com (TTL: 10800s)
2025-12-07 18:58:53.565 | DEBUG | no-id | Warming cache for domain: email.com
2025-12-07 18:58:53.575 | INFO | no-id | ‚úÖ Warmed cache for email.com (TTL: 21600s)
2025-12-07 18:58:53.575 | INFO | no-id | ‚úÖ Tier 3 warming complete: 21/21 successful
2025-12-07 18:58:53.616 | DEBUG | no-id | Warming cache for domain: zohomail.com
2025-12-07 18:58:53.616 | DEBUG | no-id | Warming cache for domain: gmx.com
2025-12-07 18:58:53.616 | DEBUG | no-id | Warming cache for domain: gmx.net
2025-12-07 18:58:53.616 | DEBUG | no-id | Warming cache for domain: web.de
2025-12-07 18:58:53.617 | DEBUG | no-id | Warming cache for domain: t-online.de
2025-12-07 18:58:53.617 | DEBUG | no-id | Warming cache for domain: naver.com
2025-12-07 18:58:53.617 | DEBUG | no-id | Warming cache for domain: hanmail.net
2025-12-07 18:58:53.617 | DEBUG | no-id | Warming cache for domain: daum.net
2025-12-07 18:58:53.631 | INFO | no-id | ‚úÖ Warmed cache for zohomail.com (TTL: 10800s)
2025-12-07 18:58:53.631 | INFO | no-id | ‚úÖ Warmed cache for gmx.com (TTL: 10800s)
2025-12-07 18:58:53.646 | INFO | no-id | ‚úÖ Warmed cache for t-online.de (TTL: 10800s)
2025-12-07 18:58:53.647 | INFO | no-id | ‚úÖ Warmed cache for gmx.net (TTL: 10800s)
2025-12-07 18:58:53.649 | INFO | no-id | ‚úÖ Warmed cache for web.de (TTL: 10800s)
2025-12-07 18:58:53.667 | INFO | no-id | ‚úÖ Warmed cache for naver.com (TTL: 10800s)
2025-12-07 18:58:53.884 | INFO | no-id | ‚úÖ Warmed cache for daum.net (TTL: 10800s)
2025-12-07 18:58:53.907 | INFO | no-id | ‚úÖ Warmed cache for hanmail.net (TTL: 10800s)
2025-12-07 18:58:53.907 | INFO | no-id | ‚úÖ Tier 2 warming complete: 18/18 successful
2025-12-07 18:58:54.125 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 18:58:54.140 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.235s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:58:55.379 | DEBUG | no-id | Async MX primary failed for o2.co.uk: (1, 'DNS server returned answer with no data')
2025-12-07 18:58:55.404 | DEBUG | no-id | Retry 1/3 for _query_mx_fallback sleeping 0.280s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:58:55.687 | DEBUG | no-id | Retrying _query_mx_fallback attempt 2/3
2025-12-07 18:58:55.703 | DEBUG | no-id | Retry 2/3 for _query_mx_fallback sleeping 0.603s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:58:56.311 | DEBUG | no-id | Retrying _query_mx_fallback attempt 3/3
2025-12-07 18:58:56.332 | DEBUG | no-id | Retry 3/3 for _query_mx_fallback sleeping 1.164s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:58:57.499 | DEBUG | no-id | Fallback MX query failed for o2.co.uk: The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:58:57.518 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.320s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:58:57.840 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 18:58:57.854 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.617s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:58:58.473 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 18:58:58.487 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.181s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:58:59.672 | DEBUG | no-id | Async MX primary failed for o2.co.uk: (1, 'DNS server returned answer with no data')
2025-12-07 18:58:59.691 | DEBUG | no-id | Retry 1/3 for _query_mx_fallback sleeping 0.263s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:58:59.959 | DEBUG | no-id | Retrying _query_mx_fallback attempt 2/3
2025-12-07 18:58:59.986 | DEBUG | no-id | Retry 2/3 for _query_mx_fallback sleeping 0.627s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:59:00.619 | DEBUG | no-id | Retrying _query_mx_fallback attempt 3/3
2025-12-07 18:59:00.638 | DEBUG | no-id | Retry 3/3 for _query_mx_fallback sleeping 1.259s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:59:01.902 | DEBUG | no-id | Fallback MX query failed for o2.co.uk: The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:59:01.903 | WARNING | no-id | No MX records found for o2.co.uk
2025-12-07 18:59:02.005 | DEBUG | no-id | Warming cache for domain: gmx.ch
2025-12-07 18:59:02.007 | DEBUG | no-id | Warming cache for domain: freenet.de
2025-12-07 18:59:02.008 | DEBUG | no-id | Warming cache for domain: arcor.de
2025-12-07 18:59:02.008 | DEBUG | no-id | Warming cache for domain: laposte.net
2025-12-07 18:59:02.009 | DEBUG | no-id | Warming cache for domain: sfr.fr
2025-12-07 18:59:02.009 | DEBUG | no-id | Warming cache for domain: tiscali.it
2025-12-07 18:59:02.010 | DEBUG | no-id | Warming cache for domain: tiscali.co.uk
2025-12-07 18:59:02.033 | INFO | no-id | ‚úÖ Warmed cache for arcor.de (TTL: 43200s)
2025-12-07 18:59:02.033 | INFO | no-id | ‚úÖ Warmed cache for freenet.de (TTL: 43200s)
2025-12-07 18:59:02.034 | INFO | no-id | ‚úÖ Warmed cache for tiscali.it (TTL: 43200s)
2025-12-07 18:59:02.034 | INFO | no-id | ‚úÖ Warmed cache for gmx.ch (TTL: 43200s)
2025-12-07 18:59:02.054 | INFO | no-id | ‚úÖ Warmed cache for tiscali.co.uk (TTL: 43200s)
2025-12-07 18:59:02.069 | INFO | no-id | ‚úÖ Warmed cache for sfr.fr (TTL: 43200s)
2025-12-07 18:59:02.080 | INFO | no-id | ‚úÖ Warmed cache for laposte.net (TTL: 43200s)
2025-12-07 18:59:02.081 | INFO | no-id | ‚úÖ Tier 4 warming complete: 16/17 successful
2025-12-07 18:59:02.081 | INFO | no-id | ‚úÖ Cache warming complete in 8.92s | Total warmed: 65 | Failures: 2
2025-12-07 18:59:08.521 | INFO | no-id | üõë Shutting down API server...
2025-12-07 18:59:08.526 | INFO | no-id | üîß Shutting down services...
2025-12-07 18:59:08.526 | INFO | no-id | Stopping cache warming...
2025-12-07 18:59:08.526 | INFO | no-id | Shutting down tracing...
2025-12-07 18:59:08.527 | INFO | no-id | ‚úÖ Tracing shut down cleanly
2025-12-07 18:59:08.528 | INFO | no-id | Stopping background cache warming
2025-12-07 18:59:08.528 | INFO | no-id | ‚úÖ Background cache warming stopped
2025-12-07 18:59:08.529 | SUCCESS | no-id | ‚úÖ All services shut down cleanly
2025-12-07 18:59:08.530 | INFO | no-id | ‚úÖ Redis connection closed
2025-12-07 18:59:08.535 | INFO | no-id | ‚úÖ ARQ pool closed
2025-12-07 18:59:08.536 | SUCCESS | no-id | üëã API server stopped cleanly
2025-12-07 18:59:08.539 | INFO | no-id | Background tasks cancelled
2025-12-07 18:59:09.649 | INFO | no-id | Using custom nameservers: ['8.8.8.8', '8.8.4.4']
2025-12-07 18:59:09.894 | DEBUG | no-id | Prometheus registry cleaned for development mode
2025-12-07 18:59:09.900 | INFO | no-id | üîá Console tracing disabled in development (reducing log noise)
2025-12-07 18:59:09.900 | INFO | no-id | ‚ÑπÔ∏è No tracing exporter configured (development mode)
2025-12-07 18:59:09.900 | INFO | no-id | üîá OpenTelemetry verbose logging disabled in development
2025-12-07 18:59:09.901 | SUCCESS | no-id | ‚úÖ FastAPI instrumented for tracing
2025-12-07 18:59:09.901 | SUCCESS | no-id | ‚úÖ Redis instrumented for tracing
2025-12-07 18:59:09.901 | SUCCESS | no-id | ‚úÖ HTTP client instrumented for tracing
2025-12-07 18:59:09.902 | SUCCESS | no-id | üîç Distributed tracing initialized for mailsafepro-api
2025-12-07 18:59:09.924 | INFO | no-id | Exception handlers registered successfully
2025-12-07 18:59:09.925 | INFO | no-id | üöÄ Starting API server in development environment
2025-12-07 18:59:09.926 | INFO | no-id | Attempting to connect to Redis: redis://redis:6379/0...
2025-12-07 18:59:09.933 | SUCCESS | no-id | ‚úÖ Redis connection established successfully
2025-12-07 18:59:09.933 | INFO | no-id | Attempting to initialize ARQ Redis pool...
2025-12-07 18:59:09.934 | SUCCESS | no-id | ‚úÖ ARQ Redis pool initialized successfully
2025-12-07 18:59:09.934 | INFO | no-id | üî• Warming up connection pools...
2025-12-07 18:59:09.937 | DEBUG | no-id | ‚úÖ Redis pool warmed (10 connections)
2025-12-07 18:59:09.949 | DEBUG | no-id | ‚úÖ DNS cache warmed (8 domains)
2025-12-07 18:59:09.950 | SUCCESS | no-id | ‚úÖ Connection pools warmed up
2025-12-07 18:59:09.951 | INFO | no-id | üîß Initializing application services...
2025-12-07 18:59:09.951 | INFO | no-id | UnifiedCache initialized
2025-12-07 18:59:09.952 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 18:59:09.952 | INFO | no-id | ‚úÖ Redis client injected into validation layer
2025-12-07 18:59:09.952 | INFO | no-id | ‚úÖ Redis client configured in health manager
2025-12-07 18:59:09.953 | INFO | no-id | üì¶ Cached 8 disposable domains
2025-12-07 18:59:09.953 | INFO | no-id | üî• Starting cache warming for popular email domains...
2025-12-07 18:59:09.953 | INFO | no-id | üî• Starting background cache warming
2025-12-07 18:59:09.953 | INFO | no-id | ‚úÖ Background cache warming started
2025-12-07 18:59:09.953 | SUCCESS | no-id | ‚úÖ Cache warming initialized successfully
2025-12-07 18:59:09.953 | SUCCESS | no-id | ‚úÖ Background tasks started
2025-12-07 18:59:09.953 | SUCCESS | no-id | ‚úÖ API server started successfully in 0.03s
2025-12-07 18:59:09.954 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 18:59:09.954 | DEBUG | no-id | Running background maintenance tasks
2025-12-07 18:59:09.954 | INFO | no-id | üî• Warming Tier 1: 11 domains (TTL: 7200s)
2025-12-07 18:59:09.954 | INFO | no-id | üî• Warming Tier 2: 18 domains (TTL: 10800s)
2025-12-07 18:59:09.954 | INFO | no-id | üî• Warming Tier 3: 21 domains (TTL: 21600s)
2025-12-07 18:59:09.954 | INFO | no-id | üî• Warming Tier 4: 17 domains (TTL: 43200s)
2025-12-07 18:59:09.954 | DEBUG | no-id | Warming cache for domain: gmail.com
2025-12-07 18:59:09.954 | DEBUG | no-id | Warming cache for domain: googlemail.com
2025-12-07 18:59:09.954 | DEBUG | no-id | Warming cache for domain: outlook.com
2025-12-07 18:59:09.955 | DEBUG | no-id | Warming cache for domain: hotmail.com
2025-12-07 18:59:09.955 | DEBUG | no-id | Warming cache for domain: live.com
2025-12-07 18:59:09.955 | DEBUG | no-id | Warming cache for domain: yahoo.com
2025-12-07 18:59:09.955 | DEBUG | no-id | Warming cache for domain: ymail.com
2025-12-07 18:59:09.955 | DEBUG | no-id | Warming cache for domain: yahoomail.com
2025-12-07 18:59:09.955 | DEBUG | no-id | Warming cache for domain: icloud.com
2025-12-07 18:59:09.955 | DEBUG | no-id | Warming cache for domain: me.com
2025-12-07 18:59:09.955 | DEBUG | no-id | Warming cache for domain: aol.com
2025-12-07 18:59:09.956 | DEBUG | no-id | Warming cache for domain: mail.ru
2025-12-07 18:59:09.956 | DEBUG | no-id | Warming cache for domain: yandex.ru
2025-12-07 18:59:09.956 | DEBUG | no-id | Warming cache for domain: yandex.com
2025-12-07 18:59:09.956 | DEBUG | no-id | Warming cache for domain: qq.com
2025-12-07 18:59:09.956 | DEBUG | no-id | Warming cache for domain: 163.com
2025-12-07 18:59:09.956 | DEBUG | no-id | Warming cache for domain: 126.com
2025-12-07 18:59:09.957 | DEBUG | no-id | Warming cache for domain: protonmail.com
2025-12-07 18:59:09.957 | DEBUG | no-id | Warming cache for domain: proton.me
2025-12-07 18:59:09.957 | DEBUG | no-id | Warming cache for domain: zoho.com
2025-12-07 18:59:09.957 | DEBUG | no-id | Warming cache for domain: fastmail.com
2025-12-07 18:59:09.957 | DEBUG | no-id | Warming cache for domain: fastmail.fm
2025-12-07 18:59:09.958 | DEBUG | no-id | Warming cache for domain: tutanota.com
2025-12-07 18:59:09.958 | DEBUG | no-id | Warming cache for domain: tuta.io
2025-12-07 18:59:09.958 | DEBUG | no-id | Warming cache for domain: mailbox.org
2025-12-07 18:59:09.958 | DEBUG | no-id | Warming cache for domain: seznam.cz
2025-12-07 18:59:09.959 | DEBUG | no-id | Warming cache for domain: orange.fr
2025-12-07 18:59:09.959 | DEBUG | no-id | Warming cache for domain: wanadoo.fr
2025-12-07 18:59:09.959 | DEBUG | no-id | Warming cache for domain: libero.it
2025-12-07 18:59:09.959 | DEBUG | no-id | Warming cache for domain: virgilio.it
2025-12-07 18:59:09.959 | DEBUG | no-id | Warming cache for domain: btinternet.com
2025-12-07 18:59:09.959 | DEBUG | no-id | Warming cache for domain: sky.com
2025-12-07 18:59:09.960 | DEBUG | no-id | Warming cache for domain: talktalk.net
2025-12-07 18:59:09.960 | DEBUG | no-id | Warming cache for domain: o2.co.uk
2025-12-07 18:59:09.960 | DEBUG | no-id | Warming cache for domain: ntlworld.com
2025-12-07 18:59:09.960 | DEBUG | no-id | Warming cache for domain: live.co.uk
2025-12-07 18:59:09.961 | DEBUG | no-id | Warming cache for domain: live.fr
2025-12-07 18:59:09.961 | DEBUG | no-id | Warming cache for domain: live.de
2025-12-07 18:59:09.961 | DEBUG | no-id | Warming cache for domain: gmx.de
2025-12-07 18:59:09.962 | DEBUG | no-id | Warming cache for domain: gmx.at
2025-12-07 18:59:09.977 | INFO | no-id | ‚úÖ Warmed cache for ymail.com (TTL: 7200s)
2025-12-07 18:59:09.977 | INFO | no-id | ‚úÖ Warmed cache for hotmail.com (TTL: 7200s)
2025-12-07 18:59:09.979 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.297s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:59:09.980 | INFO | no-id | ‚úÖ Warmed cache for outlook.com (TTL: 7200s)
2025-12-07 18:59:09.980 | INFO | no-id | ‚úÖ Warmed cache for fastmail.com (TTL: 21600s)
2025-12-07 18:59:09.981 | INFO | no-id | ‚úÖ Warmed cache for 163.com (TTL: 10800s)
2025-12-07 18:59:09.982 | INFO | no-id | ‚úÖ Warmed cache for live.co.uk (TTL: 43200s)
2025-12-07 18:59:09.982 | INFO | no-id | ‚úÖ Warmed cache for btinternet.com (TTL: 43200s)
2025-12-07 18:59:09.985 | INFO | no-id | ‚úÖ Warmed cache for live.de (TTL: 43200s)
2025-12-07 18:59:09.985 | INFO | no-id | ‚úÖ Warmed cache for talktalk.net (TTL: 43200s)
2025-12-07 18:59:09.986 | INFO | no-id | ‚úÖ Warmed cache for fastmail.fm (TTL: 21600s)
2025-12-07 18:59:09.986 | INFO | no-id | ‚úÖ Warmed cache for ntlworld.com (TTL: 43200s)
2025-12-07 18:59:09.988 | INFO | no-id | ‚úÖ Warmed cache for gmx.at (TTL: 43200s)
2025-12-07 18:59:09.989 | INFO | no-id | ‚úÖ Warmed cache for seznam.cz (TTL: 21600s)
2025-12-07 18:59:09.989 | INFO | no-id | ‚úÖ Warmed cache for live.fr (TTL: 43200s)
2025-12-07 18:59:09.990 | INFO | no-id | ‚úÖ Warmed cache for wanadoo.fr (TTL: 21600s)
2025-12-07 18:59:09.990 | INFO | no-id | ‚úÖ Warmed cache for qq.com (TTL: 10800s)
2025-12-07 18:59:09.990 | INFO | no-id | ‚úÖ Warmed cache for 126.com (TTL: 10800s)
2025-12-07 18:59:09.991 | WARNING | no-id | No MX records found for yahoomail.com
2025-12-07 18:59:09.994 | INFO | no-id | ‚úÖ Warmed cache for gmail.com (TTL: 7200s)
2025-12-07 18:59:09.994 | INFO | no-id | ‚úÖ Warmed cache for icloud.com (TTL: 7200s)
2025-12-07 18:59:09.994 | INFO | no-id | ‚úÖ Warmed cache for orange.fr (TTL: 21600s)
2025-12-07 18:59:09.995 | INFO | no-id | ‚úÖ Warmed cache for yahoo.com (TTL: 7200s)
2025-12-07 18:59:09.995 | INFO | no-id | ‚úÖ Warmed cache for libero.it (TTL: 21600s)
2025-12-07 18:59:09.995 | INFO | no-id | ‚úÖ Warmed cache for me.com (TTL: 7200s)
2025-12-07 18:59:09.996 | INFO | no-id | ‚úÖ Warmed cache for aol.com (TTL: 10800s)
2025-12-07 18:59:09.996 | INFO | no-id | ‚úÖ Warmed cache for yandex.ru (TTL: 10800s)
2025-12-07 18:59:09.997 | INFO | no-id | ‚úÖ Warmed cache for gmx.de (TTL: 43200s)
2025-12-07 18:59:09.997 | INFO | no-id | ‚úÖ Warmed cache for mailbox.org (TTL: 21600s)
2025-12-07 18:59:09.998 | INFO | no-id | ‚úÖ Warmed cache for virgilio.it (TTL: 21600s)
2025-12-07 18:59:10.000 | INFO | no-id | ‚úÖ Warmed cache for protonmail.com (TTL: 10800s)
2025-12-07 18:59:10.000 | INFO | no-id | ‚úÖ Warmed cache for sky.com (TTL: 43200s)
2025-12-07 18:59:10.004 | INFO | no-id | ‚úÖ Warmed cache for proton.me (TTL: 10800s)
2025-12-07 18:59:10.004 | INFO | no-id | ‚úÖ Warmed cache for tuta.io (TTL: 21600s)
2025-12-07 18:59:10.004 | INFO | no-id | ‚úÖ Warmed cache for tutanota.com (TTL: 21600s)
2025-12-07 18:59:10.007 | INFO | no-id | ‚úÖ Warmed cache for live.com (TTL: 7200s)
2025-12-07 18:59:10.033 | INFO | no-id | ‚úÖ Warmed cache for googlemail.com (TTL: 7200s)
2025-12-07 18:59:10.040 | INFO | no-id | ‚úÖ Warmed cache for yandex.com (TTL: 10800s)
2025-12-07 18:59:10.052 | INFO | no-id | ‚úÖ Warmed cache for mail.ru (TTL: 10800s)
2025-12-07 18:59:10.104 | DEBUG | no-id | Warming cache for domain: optonline.net
2025-12-07 18:59:10.104 | DEBUG | no-id | Warming cache for domain: verizon.net
2025-12-07 18:59:10.104 | DEBUG | no-id | Warming cache for domain: bellsouth.net
2025-12-07 18:59:10.105 | DEBUG | no-id | Warming cache for domain: att.net
2025-12-07 18:59:10.105 | DEBUG | no-id | Warming cache for domain: comcast.net
2025-12-07 18:59:10.105 | DEBUG | no-id | Warming cache for domain: sbcglobal.net
2025-12-07 18:59:10.105 | DEBUG | no-id | Warming cache for domain: cox.net
2025-12-07 18:59:10.105 | DEBUG | no-id | Warming cache for domain: charter.net
2025-12-07 18:59:10.106 | DEBUG | no-id | Warming cache for domain: rediffmail.com
2025-12-07 18:59:10.106 | DEBUG | no-id | Warming cache for domain: inbox.com
2025-12-07 18:59:10.116 | INFO | no-id | ‚úÖ Warmed cache for verizon.net (TTL: 21600s)
2025-12-07 18:59:10.116 | INFO | no-id | ‚úÖ Warmed cache for comcast.net (TTL: 21600s)
2025-12-07 18:59:10.119 | INFO | no-id | ‚úÖ Warmed cache for charter.net (TTL: 21600s)
2025-12-07 18:59:10.119 | INFO | no-id | ‚úÖ Warmed cache for bellsouth.net (TTL: 21600s)
2025-12-07 18:59:10.119 | INFO | no-id | ‚úÖ Warmed cache for att.net (TTL: 21600s)
2025-12-07 18:59:10.120 | INFO | no-id | ‚úÖ Warmed cache for cox.net (TTL: 21600s)
2025-12-07 18:59:10.120 | INFO | no-id | ‚úÖ Warmed cache for rediffmail.com (TTL: 21600s)
2025-12-07 18:59:10.122 | INFO | no-id | ‚úÖ Warmed cache for inbox.com (TTL: 21600s)
2025-12-07 18:59:10.132 | DEBUG | no-id | Warming cache for domain: mac.com
2025-12-07 18:59:10.138 | INFO | no-id | ‚úÖ Warmed cache for sbcglobal.net (TTL: 21600s)
2025-12-07 18:59:10.138 | INFO | no-id | ‚úÖ Warmed cache for zoho.com (TTL: 10800s)
2025-12-07 18:59:10.148 | INFO | no-id | ‚úÖ Warmed cache for mac.com (TTL: 7200s)
2025-12-07 18:59:10.149 | INFO | no-id | ‚úÖ Tier 1 warming complete: 10/11 successful
2025-12-07 18:59:10.195 | INFO | no-id | ‚úÖ Warmed cache for optonline.net (TTL: 21600s)
2025-12-07 18:59:10.241 | DEBUG | no-id | Warming cache for domain: zohomail.com
2025-12-07 18:59:10.241 | DEBUG | no-id | Warming cache for domain: gmx.com
2025-12-07 18:59:10.241 | DEBUG | no-id | Warming cache for domain: gmx.net
2025-12-07 18:59:10.242 | DEBUG | no-id | Warming cache for domain: web.de
2025-12-07 18:59:10.242 | DEBUG | no-id | Warming cache for domain: t-online.de
2025-12-07 18:59:10.242 | DEBUG | no-id | Warming cache for domain: naver.com
2025-12-07 18:59:10.242 | DEBUG | no-id | Warming cache for domain: hanmail.net
2025-12-07 18:59:10.242 | DEBUG | no-id | Warming cache for domain: daum.net
2025-12-07 18:59:10.255 | INFO | no-id | ‚úÖ Warmed cache for hanmail.net (TTL: 10800s)
2025-12-07 18:59:10.255 | INFO | no-id | ‚úÖ Warmed cache for gmx.com (TTL: 10800s)
2025-12-07 18:59:10.255 | INFO | no-id | ‚úÖ Warmed cache for zohomail.com (TTL: 10800s)
2025-12-07 18:59:10.271 | INFO | no-id | ‚úÖ Warmed cache for t-online.de (TTL: 10800s)
2025-12-07 18:59:10.271 | INFO | no-id | ‚úÖ Warmed cache for gmx.net (TTL: 10800s)
2025-12-07 18:59:10.271 | INFO | no-id | ‚úÖ Warmed cache for web.de (TTL: 10800s)
2025-12-07 18:59:10.276 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 18:59:10.285 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.561s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:59:10.288 | INFO | no-id | ‚úÖ Warmed cache for naver.com (TTL: 10800s)
2025-12-07 18:59:10.294 | DEBUG | no-id | Warming cache for domain: email.com
2025-12-07 18:59:10.304 | INFO | no-id | ‚úÖ Warmed cache for email.com (TTL: 21600s)
2025-12-07 18:59:10.304 | INFO | no-id | ‚úÖ Tier 3 warming complete: 21/21 successful
2025-12-07 18:59:10.506 | INFO | no-id | ‚úÖ Warmed cache for daum.net (TTL: 10800s)
2025-12-07 18:59:10.508 | INFO | no-id | ‚úÖ Tier 2 warming complete: 18/18 successful
2025-12-07 18:59:10.851 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 18:59:10.865 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.072s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:59:11.938 | DEBUG | no-id | Async MX primary failed for o2.co.uk: (1, 'DNS server returned answer with no data')
2025-12-07 18:59:11.962 | DEBUG | no-id | Retry 1/3 for _query_mx_fallback sleeping 0.268s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:59:12.236 | DEBUG | no-id | Retrying _query_mx_fallback attempt 2/3
2025-12-07 18:59:12.251 | DEBUG | no-id | Retry 2/3 for _query_mx_fallback sleeping 0.584s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:59:12.835 | DEBUG | no-id | Retrying _query_mx_fallback attempt 3/3
2025-12-07 18:59:12.943 | DEBUG | no-id | Retry 3/3 for _query_mx_fallback sleeping 1.171s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:59:14.118 | DEBUG | no-id | Fallback MX query failed for o2.co.uk: The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:59:14.133 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.286s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:59:14.422 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 18:59:14.435 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.609s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:59:15.049 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 18:59:15.062 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.217s due to (1, 'DNS server returned answer with no data')
2025-12-07 18:59:16.280 | DEBUG | no-id | Async MX primary failed for o2.co.uk: (1, 'DNS server returned answer with no data')
2025-12-07 18:59:16.296 | DEBUG | no-id | Retry 1/3 for _query_mx_fallback sleeping 0.323s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:59:16.621 | DEBUG | no-id | Retrying _query_mx_fallback attempt 2/3
2025-12-07 18:59:16.635 | DEBUG | no-id | Retry 2/3 for _query_mx_fallback sleeping 0.561s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:59:17.197 | DEBUG | no-id | Retrying _query_mx_fallback attempt 3/3
2025-12-07 18:59:17.210 | DEBUG | no-id | Retry 3/3 for _query_mx_fallback sleeping 1.043s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:59:18.257 | DEBUG | no-id | Fallback MX query failed for o2.co.uk: The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 18:59:18.262 | WARNING | no-id | No MX records found for o2.co.uk
2025-12-07 18:59:18.369 | DEBUG | no-id | Warming cache for domain: gmx.ch
2025-12-07 18:59:18.373 | DEBUG | no-id | Warming cache for domain: freenet.de
2025-12-07 18:59:18.374 | DEBUG | no-id | Warming cache for domain: arcor.de
2025-12-07 18:59:18.375 | DEBUG | no-id | Warming cache for domain: laposte.net
2025-12-07 18:59:18.376 | DEBUG | no-id | Warming cache for domain: sfr.fr
2025-12-07 18:59:18.376 | DEBUG | no-id | Warming cache for domain: tiscali.it
2025-12-07 18:59:18.377 | DEBUG | no-id | Warming cache for domain: tiscali.co.uk
2025-12-07 18:59:18.400 | INFO | no-id | ‚úÖ Warmed cache for freenet.de (TTL: 43200s)
2025-12-07 18:59:18.401 | INFO | no-id | ‚úÖ Warmed cache for arcor.de (TTL: 43200s)
2025-12-07 18:59:18.401 | INFO | no-id | ‚úÖ Warmed cache for tiscali.co.uk (TTL: 43200s)
2025-12-07 18:59:18.403 | INFO | no-id | ‚úÖ Warmed cache for gmx.ch (TTL: 43200s)
2025-12-07 18:59:18.417 | INFO | no-id | ‚úÖ Warmed cache for sfr.fr (TTL: 43200s)
2025-12-07 18:59:18.417 | INFO | no-id | ‚úÖ Warmed cache for laposte.net (TTL: 43200s)
2025-12-07 18:59:18.436 | INFO | no-id | ‚úÖ Warmed cache for tiscali.it (TTL: 43200s)
2025-12-07 18:59:18.436 | INFO | no-id | ‚úÖ Tier 4 warming complete: 16/17 successful
2025-12-07 18:59:18.436 | INFO | no-id | ‚úÖ Cache warming complete in 8.48s | Total warmed: 65 | Failures: 2
2025-12-07 18:59:59.790 | INFO | no-id | üõë Shutting down API server...
2025-12-07 18:59:59.793 | INFO | no-id | üîß Shutting down services...
2025-12-07 18:59:59.793 | INFO | no-id | Stopping cache warming...
2025-12-07 18:59:59.793 | INFO | no-id | Shutting down tracing...
2025-12-07 18:59:59.794 | INFO | no-id | ‚úÖ Tracing shut down cleanly
2025-12-07 18:59:59.794 | INFO | no-id | Stopping background cache warming
2025-12-07 18:59:59.795 | INFO | no-id | ‚úÖ Background cache warming stopped
2025-12-07 18:59:59.795 | SUCCESS | no-id | ‚úÖ All services shut down cleanly
2025-12-07 18:59:59.796 | INFO | no-id | ‚úÖ Redis connection closed
2025-12-07 18:59:59.797 | INFO | no-id | ‚úÖ ARQ pool closed
2025-12-07 18:59:59.798 | SUCCESS | no-id | üëã API server stopped cleanly
2025-12-07 18:59:59.799 | INFO | no-id | Background tasks cancelled
2025-12-07 19:00:01.355 | INFO | no-id | Using custom nameservers: ['8.8.8.8', '8.8.4.4']
2025-12-07 19:00:01.605 | DEBUG | no-id | Prometheus registry cleaned for development mode
2025-12-07 19:00:01.609 | INFO | no-id | üîá Console tracing disabled in development (reducing log noise)
2025-12-07 19:00:01.610 | INFO | no-id | ‚ÑπÔ∏è No tracing exporter configured (development mode)
2025-12-07 19:00:01.610 | INFO | no-id | üîá OpenTelemetry verbose logging disabled in development
2025-12-07 19:00:01.610 | SUCCESS | no-id | ‚úÖ FastAPI instrumented for tracing
2025-12-07 19:00:01.611 | SUCCESS | no-id | ‚úÖ Redis instrumented for tracing
2025-12-07 19:00:01.611 | SUCCESS | no-id | ‚úÖ HTTP client instrumented for tracing
2025-12-07 19:00:01.611 | SUCCESS | no-id | üîç Distributed tracing initialized for mailsafepro-api
2025-12-07 19:00:01.632 | INFO | no-id | Exception handlers registered successfully
2025-12-07 19:00:01.633 | INFO | no-id | üöÄ Starting API server in development environment
2025-12-07 19:00:01.634 | INFO | no-id | Attempting to connect to Redis: redis://redis:6379/0...
2025-12-07 19:00:01.641 | SUCCESS | no-id | ‚úÖ Redis connection established successfully
2025-12-07 19:00:01.642 | INFO | no-id | Attempting to initialize ARQ Redis pool...
2025-12-07 19:00:01.643 | SUCCESS | no-id | ‚úÖ ARQ Redis pool initialized successfully
2025-12-07 19:00:01.643 | INFO | no-id | üî• Warming up connection pools...
2025-12-07 19:00:01.646 | DEBUG | no-id | ‚úÖ Redis pool warmed (10 connections)
2025-12-07 19:00:01.662 | DEBUG | no-id | ‚úÖ DNS cache warmed (8 domains)
2025-12-07 19:00:01.663 | SUCCESS | no-id | ‚úÖ Connection pools warmed up
2025-12-07 19:00:01.665 | INFO | no-id | üîß Initializing application services...
2025-12-07 19:00:01.665 | INFO | no-id | UnifiedCache initialized
2025-12-07 19:00:01.665 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 19:00:01.665 | INFO | no-id | ‚úÖ Redis client injected into validation layer
2025-12-07 19:00:01.665 | INFO | no-id | ‚úÖ Redis client configured in health manager
2025-12-07 19:00:01.667 | INFO | no-id | üì¶ Cached 8 disposable domains
2025-12-07 19:00:01.667 | INFO | no-id | üî• Starting cache warming for popular email domains...
2025-12-07 19:00:01.667 | INFO | no-id | üî• Starting background cache warming
2025-12-07 19:00:01.667 | INFO | no-id | ‚úÖ Background cache warming started
2025-12-07 19:00:01.667 | SUCCESS | no-id | ‚úÖ Cache warming initialized successfully
2025-12-07 19:00:01.668 | SUCCESS | no-id | ‚úÖ Background tasks started
2025-12-07 19:00:01.668 | SUCCESS | no-id | ‚úÖ API server started successfully in 0.03s
2025-12-07 19:00:01.668 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 19:00:01.668 | DEBUG | no-id | Running background maintenance tasks
2025-12-07 19:00:01.668 | INFO | no-id | üî• Warming Tier 1: 11 domains (TTL: 7200s)
2025-12-07 19:00:01.668 | INFO | no-id | üî• Warming Tier 2: 18 domains (TTL: 10800s)
2025-12-07 19:00:01.668 | INFO | no-id | üî• Warming Tier 3: 21 domains (TTL: 21600s)
2025-12-07 19:00:01.668 | INFO | no-id | üî• Warming Tier 4: 17 domains (TTL: 43200s)
2025-12-07 19:00:01.668 | DEBUG | no-id | Warming cache for domain: gmail.com
2025-12-07 19:00:01.668 | DEBUG | no-id | Warming cache for domain: googlemail.com
2025-12-07 19:00:01.669 | DEBUG | no-id | Warming cache for domain: outlook.com
2025-12-07 19:00:01.669 | DEBUG | no-id | Warming cache for domain: hotmail.com
2025-12-07 19:00:01.669 | DEBUG | no-id | Warming cache for domain: live.com
2025-12-07 19:00:01.669 | DEBUG | no-id | Warming cache for domain: yahoo.com
2025-12-07 19:00:01.669 | DEBUG | no-id | Warming cache for domain: ymail.com
2025-12-07 19:00:01.669 | DEBUG | no-id | Warming cache for domain: yahoomail.com
2025-12-07 19:00:01.669 | DEBUG | no-id | Warming cache for domain: icloud.com
2025-12-07 19:00:01.669 | DEBUG | no-id | Warming cache for domain: me.com
2025-12-07 19:00:01.669 | DEBUG | no-id | Warming cache for domain: aol.com
2025-12-07 19:00:01.670 | DEBUG | no-id | Warming cache for domain: mail.ru
2025-12-07 19:00:01.670 | DEBUG | no-id | Warming cache for domain: yandex.ru
2025-12-07 19:00:01.670 | DEBUG | no-id | Warming cache for domain: yandex.com
2025-12-07 19:00:01.670 | DEBUG | no-id | Warming cache for domain: qq.com
2025-12-07 19:00:01.670 | DEBUG | no-id | Warming cache for domain: 163.com
2025-12-07 19:00:01.671 | DEBUG | no-id | Warming cache for domain: 126.com
2025-12-07 19:00:01.671 | DEBUG | no-id | Warming cache for domain: protonmail.com
2025-12-07 19:00:01.671 | DEBUG | no-id | Warming cache for domain: proton.me
2025-12-07 19:00:01.671 | DEBUG | no-id | Warming cache for domain: zoho.com
2025-12-07 19:00:01.671 | DEBUG | no-id | Warming cache for domain: fastmail.com
2025-12-07 19:00:01.671 | DEBUG | no-id | Warming cache for domain: fastmail.fm
2025-12-07 19:00:01.672 | DEBUG | no-id | Warming cache for domain: tutanota.com
2025-12-07 19:00:01.672 | DEBUG | no-id | Warming cache for domain: tuta.io
2025-12-07 19:00:01.672 | DEBUG | no-id | Warming cache for domain: mailbox.org
2025-12-07 19:00:01.672 | DEBUG | no-id | Warming cache for domain: seznam.cz
2025-12-07 19:00:01.673 | DEBUG | no-id | Warming cache for domain: orange.fr
2025-12-07 19:00:01.673 | DEBUG | no-id | Warming cache for domain: wanadoo.fr
2025-12-07 19:00:01.673 | DEBUG | no-id | Warming cache for domain: libero.it
2025-12-07 19:00:01.673 | DEBUG | no-id | Warming cache for domain: virgilio.it
2025-12-07 19:00:01.674 | DEBUG | no-id | Warming cache for domain: btinternet.com
2025-12-07 19:00:01.674 | DEBUG | no-id | Warming cache for domain: sky.com
2025-12-07 19:00:01.674 | DEBUG | no-id | Warming cache for domain: talktalk.net
2025-12-07 19:00:01.674 | DEBUG | no-id | Warming cache for domain: o2.co.uk
2025-12-07 19:00:01.675 | DEBUG | no-id | Warming cache for domain: ntlworld.com
2025-12-07 19:00:01.675 | DEBUG | no-id | Warming cache for domain: live.co.uk
2025-12-07 19:00:01.675 | DEBUG | no-id | Warming cache for domain: live.fr
2025-12-07 19:00:01.675 | DEBUG | no-id | Warming cache for domain: live.de
2025-12-07 19:00:01.675 | DEBUG | no-id | Warming cache for domain: gmx.de
2025-12-07 19:00:01.676 | DEBUG | no-id | Warming cache for domain: gmx.at
2025-12-07 19:00:01.687 | INFO | no-id | ‚úÖ Warmed cache for gmail.com (TTL: 7200s)
2025-12-07 19:00:01.690 | INFO | no-id | ‚úÖ Warmed cache for ymail.com (TTL: 7200s)
2025-12-07 19:00:01.691 | INFO | no-id | ‚úÖ Warmed cache for outlook.com (TTL: 7200s)
2025-12-07 19:00:01.692 | INFO | no-id | ‚úÖ Warmed cache for hotmail.com (TTL: 7200s)
2025-12-07 19:00:01.694 | INFO | no-id | ‚úÖ Warmed cache for fastmail.fm (TTL: 21600s)
2025-12-07 19:00:01.694 | INFO | no-id | ‚úÖ Warmed cache for googlemail.com (TTL: 7200s)
2025-12-07 19:00:01.697 | INFO | no-id | ‚úÖ Warmed cache for seznam.cz (TTL: 21600s)
2025-12-07 19:00:01.697 | INFO | no-id | ‚úÖ Warmed cache for tuta.io (TTL: 21600s)
2025-12-07 19:00:01.698 | INFO | no-id | ‚úÖ Warmed cache for wanadoo.fr (TTL: 21600s)
2025-12-07 19:00:01.698 | INFO | no-id | ‚úÖ Warmed cache for live.fr (TTL: 43200s)
2025-12-07 19:00:01.699 | INFO | no-id | ‚úÖ Warmed cache for qq.com (TTL: 10800s)
2025-12-07 19:00:01.701 | INFO | no-id | ‚úÖ Warmed cache for 126.com (TTL: 10800s)
2025-12-07 19:00:01.701 | INFO | no-id | ‚úÖ Warmed cache for gmx.at (TTL: 43200s)
2025-12-07 19:00:01.702 | INFO | no-id | ‚úÖ Warmed cache for yandex.com (TTL: 10800s)
2025-12-07 19:00:01.703 | INFO | no-id | ‚úÖ Warmed cache for mail.ru (TTL: 10800s)
2025-12-07 19:00:01.705 | INFO | no-id | ‚úÖ Warmed cache for fastmail.com (TTL: 21600s)
2025-12-07 19:00:01.711 | WARNING | no-id | No MX records found for yahoomail.com
2025-12-07 19:00:01.712 | INFO | no-id | ‚úÖ Warmed cache for 163.com (TTL: 10800s)
2025-12-07 19:00:01.713 | INFO | no-id | ‚úÖ Warmed cache for live.de (TTL: 43200s)
2025-12-07 19:00:01.713 | INFO | no-id | ‚úÖ Warmed cache for live.co.uk (TTL: 43200s)
2025-12-07 19:00:01.713 | INFO | no-id | ‚úÖ Warmed cache for tutanota.com (TTL: 21600s)
2025-12-07 19:00:01.713 | INFO | no-id | ‚úÖ Warmed cache for icloud.com (TTL: 7200s)
2025-12-07 19:00:01.714 | INFO | no-id | ‚úÖ Warmed cache for me.com (TTL: 7200s)
2025-12-07 19:00:01.714 | INFO | no-id | ‚úÖ Warmed cache for virgilio.it (TTL: 21600s)
2025-12-07 19:00:01.715 | INFO | no-id | ‚úÖ Warmed cache for yahoo.com (TTL: 7200s)
2025-12-07 19:00:01.715 | INFO | no-id | ‚úÖ Warmed cache for gmx.de (TTL: 43200s)
2025-12-07 19:00:01.716 | INFO | no-id | ‚úÖ Warmed cache for aol.com (TTL: 10800s)
2025-12-07 19:00:01.716 | INFO | no-id | ‚úÖ Warmed cache for proton.me (TTL: 10800s)
2025-12-07 19:00:01.716 | INFO | no-id | ‚úÖ Warmed cache for sky.com (TTL: 43200s)
2025-12-07 19:00:01.721 | INFO | no-id | ‚úÖ Warmed cache for orange.fr (TTL: 21600s)
2025-12-07 19:00:01.721 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.317s due to (1, 'DNS server returned answer with no data')
2025-12-07 19:00:01.722 | INFO | no-id | ‚úÖ Warmed cache for protonmail.com (TTL: 10800s)
2025-12-07 19:00:01.722 | INFO | no-id | ‚úÖ Warmed cache for libero.it (TTL: 21600s)
2025-12-07 19:00:01.723 | INFO | no-id | ‚úÖ Warmed cache for ntlworld.com (TTL: 43200s)
2025-12-07 19:00:01.723 | INFO | no-id | ‚úÖ Warmed cache for zoho.com (TTL: 10800s)
2025-12-07 19:00:01.723 | INFO | no-id | ‚úÖ Warmed cache for yandex.ru (TTL: 10800s)
2025-12-07 19:00:01.725 | INFO | no-id | ‚úÖ Warmed cache for mailbox.org (TTL: 21600s)
2025-12-07 19:00:01.733 | INFO | no-id | ‚úÖ Warmed cache for live.com (TTL: 7200s)
2025-12-07 19:00:01.743 | INFO | no-id | ‚úÖ Warmed cache for talktalk.net (TTL: 43200s)
2025-12-07 19:00:01.745 | INFO | no-id | ‚úÖ Warmed cache for btinternet.com (TTL: 43200s)
2025-12-07 19:00:01.827 | DEBUG | no-id | Warming cache for domain: zohomail.com
2025-12-07 19:00:01.827 | DEBUG | no-id | Warming cache for domain: gmx.com
2025-12-07 19:00:01.828 | DEBUG | no-id | Warming cache for domain: gmx.net
2025-12-07 19:00:01.828 | DEBUG | no-id | Warming cache for domain: web.de
2025-12-07 19:00:01.828 | DEBUG | no-id | Warming cache for domain: t-online.de
2025-12-07 19:00:01.828 | DEBUG | no-id | Warming cache for domain: naver.com
2025-12-07 19:00:01.829 | DEBUG | no-id | Warming cache for domain: hanmail.net
2025-12-07 19:00:01.829 | DEBUG | no-id | Warming cache for domain: daum.net
2025-12-07 19:00:01.829 | DEBUG | no-id | Warming cache for domain: optonline.net
2025-12-07 19:00:01.829 | DEBUG | no-id | Warming cache for domain: verizon.net
2025-12-07 19:00:01.829 | DEBUG | no-id | Warming cache for domain: bellsouth.net
2025-12-07 19:00:01.829 | DEBUG | no-id | Warming cache for domain: att.net
2025-12-07 19:00:01.830 | DEBUG | no-id | Warming cache for domain: comcast.net
2025-12-07 19:00:01.830 | DEBUG | no-id | Warming cache for domain: sbcglobal.net
2025-12-07 19:00:01.830 | DEBUG | no-id | Warming cache for domain: cox.net
2025-12-07 19:00:01.830 | DEBUG | no-id | Warming cache for domain: charter.net
2025-12-07 19:00:01.830 | DEBUG | no-id | Warming cache for domain: rediffmail.com
2025-12-07 19:00:01.830 | DEBUG | no-id | Warming cache for domain: inbox.com
2025-12-07 19:00:01.832 | DEBUG | no-id | Warming cache for domain: mac.com
2025-12-07 19:00:01.844 | INFO | no-id | ‚úÖ Warmed cache for cox.net (TTL: 21600s)
2025-12-07 19:00:01.844 | INFO | no-id | ‚úÖ Warmed cache for sbcglobal.net (TTL: 21600s)
2025-12-07 19:00:01.846 | INFO | no-id | ‚úÖ Warmed cache for hanmail.net (TTL: 10800s)
2025-12-07 19:00:01.846 | INFO | no-id | ‚úÖ Warmed cache for optonline.net (TTL: 21600s)
2025-12-07 19:00:01.846 | INFO | no-id | ‚úÖ Warmed cache for comcast.net (TTL: 21600s)
2025-12-07 19:00:01.846 | INFO | no-id | ‚úÖ Warmed cache for inbox.com (TTL: 21600s)
2025-12-07 19:00:01.847 | INFO | no-id | ‚úÖ Warmed cache for zohomail.com (TTL: 10800s)
2025-12-07 19:00:01.848 | INFO | no-id | ‚úÖ Warmed cache for bellsouth.net (TTL: 21600s)
2025-12-07 19:00:01.848 | INFO | no-id | ‚úÖ Warmed cache for charter.net (TTL: 21600s)
2025-12-07 19:00:01.848 | INFO | no-id | ‚úÖ Warmed cache for verizon.net (TTL: 21600s)
2025-12-07 19:00:01.848 | INFO | no-id | ‚úÖ Warmed cache for rediffmail.com (TTL: 21600s)
2025-12-07 19:00:01.848 | INFO | no-id | ‚úÖ Warmed cache for gmx.com (TTL: 10800s)
2025-12-07 19:00:01.863 | INFO | no-id | ‚úÖ Warmed cache for gmx.net (TTL: 10800s)
2025-12-07 19:00:01.864 | INFO | no-id | ‚úÖ Warmed cache for t-online.de (TTL: 10800s)
2025-12-07 19:00:01.864 | INFO | no-id | ‚úÖ Warmed cache for mac.com (TTL: 7200s)
2025-12-07 19:00:01.865 | INFO | no-id | ‚úÖ Tier 1 warming complete: 10/11 successful
2025-12-07 19:00:01.865 | INFO | no-id | ‚úÖ Warmed cache for naver.com (TTL: 10800s)
2025-12-07 19:00:01.865 | INFO | no-id | ‚úÖ Warmed cache for web.de (TTL: 10800s)
2025-12-07 19:00:01.939 | INFO | no-id | ‚úÖ Warmed cache for att.net (TTL: 21600s)
2025-12-07 19:00:02.038 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 19:00:02.039 | DEBUG | no-id | Warming cache for domain: email.com
2025-12-07 19:00:02.047 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.629s due to (1, 'DNS server returned answer with no data')
2025-12-07 19:00:02.050 | INFO | no-id | ‚úÖ Warmed cache for email.com (TTL: 21600s)
2025-12-07 19:00:02.050 | INFO | no-id | ‚úÖ Tier 3 warming complete: 21/21 successful
2025-12-07 19:00:02.123 | INFO | no-id | ‚úÖ Warmed cache for daum.net (TTL: 10800s)
2025-12-07 19:00:02.123 | INFO | no-id | ‚úÖ Tier 2 warming complete: 18/18 successful
2025-12-07 19:00:02.678 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 19:00:02.690 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.039s due to (1, 'DNS server returned answer with no data')
2025-12-07 19:00:03.732 | DEBUG | no-id | Async MX primary failed for o2.co.uk: (1, 'DNS server returned answer with no data')
2025-12-07 19:00:03.762 | DEBUG | no-id | Retry 1/3 for _query_mx_fallback sleeping 0.264s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:04.027 | DEBUG | no-id | Retrying _query_mx_fallback attempt 2/3
2025-12-07 19:00:04.044 | DEBUG | no-id | Retry 2/3 for _query_mx_fallback sleeping 0.545s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:04.591 | DEBUG | no-id | Retrying _query_mx_fallback attempt 3/3
2025-12-07 19:00:04.603 | DEBUG | no-id | Retry 3/3 for _query_mx_fallback sleeping 1.171s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:05.778 | DEBUG | no-id | Fallback MX query failed for o2.co.uk: The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:05.825 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.254s due to (1, 'DNS server returned answer with no data')
2025-12-07 19:00:06.082 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 19:00:06.097 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.503s due to (1, 'DNS server returned answer with no data')
2025-12-07 19:00:06.605 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 19:00:06.617 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.226s due to (1, 'DNS server returned answer with no data')
2025-12-07 19:00:07.846 | DEBUG | no-id | Async MX primary failed for o2.co.uk: (1, 'DNS server returned answer with no data')
2025-12-07 19:00:07.862 | DEBUG | no-id | Retry 1/3 for _query_mx_fallback sleeping 0.275s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:08.139 | DEBUG | no-id | Retrying _query_mx_fallback attempt 2/3
2025-12-07 19:00:08.155 | DEBUG | no-id | Retry 2/3 for _query_mx_fallback sleeping 0.635s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:08.791 | DEBUG | no-id | Retrying _query_mx_fallback attempt 3/3
2025-12-07 19:00:08.867 | DEBUG | no-id | Retry 3/3 for _query_mx_fallback sleeping 1.034s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:09.902 | DEBUG | no-id | Fallback MX query failed for o2.co.uk: The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:09.902 | WARNING | no-id | No MX records found for o2.co.uk
2025-12-07 19:00:10.003 | DEBUG | no-id | Warming cache for domain: gmx.ch
2025-12-07 19:00:10.004 | DEBUG | no-id | Warming cache for domain: freenet.de
2025-12-07 19:00:10.004 | DEBUG | no-id | Warming cache for domain: arcor.de
2025-12-07 19:00:10.005 | DEBUG | no-id | Warming cache for domain: laposte.net
2025-12-07 19:00:10.005 | DEBUG | no-id | Warming cache for domain: sfr.fr
2025-12-07 19:00:10.005 | DEBUG | no-id | Warming cache for domain: tiscali.it
2025-12-07 19:00:10.006 | DEBUG | no-id | Warming cache for domain: tiscali.co.uk
2025-12-07 19:00:10.024 | INFO | no-id | ‚úÖ Warmed cache for freenet.de (TTL: 43200s)
2025-12-07 19:00:10.024 | INFO | no-id | ‚úÖ Warmed cache for tiscali.it (TTL: 43200s)
2025-12-07 19:00:10.024 | INFO | no-id | ‚úÖ Warmed cache for arcor.de (TTL: 43200s)
2025-12-07 19:00:10.032 | INFO | no-id | ‚úÖ Warmed cache for gmx.ch (TTL: 43200s)
2025-12-07 19:00:10.039 | INFO | no-id | ‚úÖ Warmed cache for sfr.fr (TTL: 43200s)
2025-12-07 19:00:10.055 | INFO | no-id | ‚úÖ Warmed cache for tiscali.co.uk (TTL: 43200s)
2025-12-07 19:00:10.065 | INFO | no-id | ‚úÖ Warmed cache for laposte.net (TTL: 43200s)
2025-12-07 19:00:10.066 | INFO | no-id | ‚úÖ Tier 4 warming complete: 16/17 successful
2025-12-07 19:00:10.066 | INFO | no-id | ‚úÖ Cache warming complete in 8.40s | Total warmed: 65 | Failures: 2
2025-12-07 19:00:18.228 | INFO | no-id | üõë Shutting down API server...
2025-12-07 19:00:18.231 | INFO | no-id | üîß Shutting down services...
2025-12-07 19:00:18.231 | INFO | no-id | Stopping cache warming...
2025-12-07 19:00:18.232 | INFO | no-id | Shutting down tracing...
2025-12-07 19:00:18.232 | INFO | no-id | ‚úÖ Tracing shut down cleanly
2025-12-07 19:00:18.233 | INFO | no-id | Stopping background cache warming
2025-12-07 19:00:18.233 | INFO | no-id | ‚úÖ Background cache warming stopped
2025-12-07 19:00:18.234 | SUCCESS | no-id | ‚úÖ All services shut down cleanly
2025-12-07 19:00:18.234 | INFO | no-id | ‚úÖ Redis connection closed
2025-12-07 19:00:18.236 | INFO | no-id | ‚úÖ ARQ pool closed
2025-12-07 19:00:18.236 | SUCCESS | no-id | üëã API server stopped cleanly
2025-12-07 19:00:18.238 | INFO | no-id | Background tasks cancelled
2025-12-07 19:00:20.074 | INFO | no-id | Using custom nameservers: ['8.8.8.8', '8.8.4.4']
2025-12-07 19:00:20.355 | DEBUG | no-id | Prometheus registry cleaned for development mode
2025-12-07 19:00:20.360 | INFO | no-id | üîá Console tracing disabled in development (reducing log noise)
2025-12-07 19:00:20.360 | INFO | no-id | ‚ÑπÔ∏è No tracing exporter configured (development mode)
2025-12-07 19:00:20.361 | INFO | no-id | üîá OpenTelemetry verbose logging disabled in development
2025-12-07 19:00:20.361 | SUCCESS | no-id | ‚úÖ FastAPI instrumented for tracing
2025-12-07 19:00:20.362 | SUCCESS | no-id | ‚úÖ Redis instrumented for tracing
2025-12-07 19:00:20.362 | SUCCESS | no-id | ‚úÖ HTTP client instrumented for tracing
2025-12-07 19:00:20.362 | SUCCESS | no-id | üîç Distributed tracing initialized for mailsafepro-api
2025-12-07 19:00:20.391 | INFO | no-id | Exception handlers registered successfully
2025-12-07 19:00:20.392 | INFO | no-id | üöÄ Starting API server in development environment
2025-12-07 19:00:20.392 | INFO | no-id | Attempting to connect to Redis: redis://redis:6379/0...
2025-12-07 19:00:20.399 | SUCCESS | no-id | ‚úÖ Redis connection established successfully
2025-12-07 19:00:20.399 | INFO | no-id | Attempting to initialize ARQ Redis pool...
2025-12-07 19:00:20.400 | SUCCESS | no-id | ‚úÖ ARQ Redis pool initialized successfully
2025-12-07 19:00:20.401 | INFO | no-id | üî• Warming up connection pools...
2025-12-07 19:00:20.403 | DEBUG | no-id | ‚úÖ Redis pool warmed (10 connections)
2025-12-07 19:00:20.418 | DEBUG | no-id | ‚úÖ DNS cache warmed (8 domains)
2025-12-07 19:00:20.418 | SUCCESS | no-id | ‚úÖ Connection pools warmed up
2025-12-07 19:00:20.420 | INFO | no-id | üîß Initializing application services...
2025-12-07 19:00:20.420 | INFO | no-id | UnifiedCache initialized
2025-12-07 19:00:20.420 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 19:00:20.420 | INFO | no-id | ‚úÖ Redis client injected into validation layer
2025-12-07 19:00:20.420 | INFO | no-id | ‚úÖ Redis client configured in health manager
2025-12-07 19:00:20.421 | INFO | no-id | üì¶ Cached 8 disposable domains
2025-12-07 19:00:20.421 | INFO | no-id | üî• Starting cache warming for popular email domains...
2025-12-07 19:00:20.421 | INFO | no-id | üî• Starting background cache warming
2025-12-07 19:00:20.421 | INFO | no-id | ‚úÖ Background cache warming started
2025-12-07 19:00:20.421 | SUCCESS | no-id | ‚úÖ Cache warming initialized successfully
2025-12-07 19:00:20.422 | SUCCESS | no-id | ‚úÖ Background tasks started
2025-12-07 19:00:20.422 | SUCCESS | no-id | ‚úÖ API server started successfully in 0.03s
2025-12-07 19:00:20.422 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 19:00:20.422 | DEBUG | no-id | Running background maintenance tasks
2025-12-07 19:00:20.422 | INFO | no-id | üî• Warming Tier 1: 11 domains (TTL: 7200s)
2025-12-07 19:00:20.422 | INFO | no-id | üî• Warming Tier 2: 18 domains (TTL: 10800s)
2025-12-07 19:00:20.422 | INFO | no-id | üî• Warming Tier 3: 21 domains (TTL: 21600s)
2025-12-07 19:00:20.422 | INFO | no-id | üî• Warming Tier 4: 17 domains (TTL: 43200s)
2025-12-07 19:00:20.423 | DEBUG | no-id | Warming cache for domain: gmail.com
2025-12-07 19:00:20.423 | DEBUG | no-id | Warming cache for domain: googlemail.com
2025-12-07 19:00:20.423 | DEBUG | no-id | Warming cache for domain: outlook.com
2025-12-07 19:00:20.423 | DEBUG | no-id | Warming cache for domain: hotmail.com
2025-12-07 19:00:20.423 | DEBUG | no-id | Warming cache for domain: live.com
2025-12-07 19:00:20.424 | DEBUG | no-id | Warming cache for domain: yahoo.com
2025-12-07 19:00:20.424 | DEBUG | no-id | Warming cache for domain: ymail.com
2025-12-07 19:00:20.424 | DEBUG | no-id | Warming cache for domain: yahoomail.com
2025-12-07 19:00:20.424 | DEBUG | no-id | Warming cache for domain: icloud.com
2025-12-07 19:00:20.424 | DEBUG | no-id | Warming cache for domain: me.com
2025-12-07 19:00:20.424 | DEBUG | no-id | Warming cache for domain: aol.com
2025-12-07 19:00:20.424 | DEBUG | no-id | Warming cache for domain: mail.ru
2025-12-07 19:00:20.425 | DEBUG | no-id | Warming cache for domain: yandex.ru
2025-12-07 19:00:20.425 | DEBUG | no-id | Warming cache for domain: yandex.com
2025-12-07 19:00:20.425 | DEBUG | no-id | Warming cache for domain: qq.com
2025-12-07 19:00:20.425 | DEBUG | no-id | Warming cache for domain: 163.com
2025-12-07 19:00:20.426 | DEBUG | no-id | Warming cache for domain: 126.com
2025-12-07 19:00:20.426 | DEBUG | no-id | Warming cache for domain: protonmail.com
2025-12-07 19:00:20.426 | DEBUG | no-id | Warming cache for domain: proton.me
2025-12-07 19:00:20.426 | DEBUG | no-id | Warming cache for domain: zoho.com
2025-12-07 19:00:20.426 | DEBUG | no-id | Warming cache for domain: fastmail.com
2025-12-07 19:00:20.427 | DEBUG | no-id | Warming cache for domain: fastmail.fm
2025-12-07 19:00:20.427 | DEBUG | no-id | Warming cache for domain: tutanota.com
2025-12-07 19:00:20.427 | DEBUG | no-id | Warming cache for domain: tuta.io
2025-12-07 19:00:20.427 | DEBUG | no-id | Warming cache for domain: mailbox.org
2025-12-07 19:00:20.428 | DEBUG | no-id | Warming cache for domain: seznam.cz
2025-12-07 19:00:20.428 | DEBUG | no-id | Warming cache for domain: orange.fr
2025-12-07 19:00:20.428 | DEBUG | no-id | Warming cache for domain: wanadoo.fr
2025-12-07 19:00:20.428 | DEBUG | no-id | Warming cache for domain: libero.it
2025-12-07 19:00:20.429 | DEBUG | no-id | Warming cache for domain: virgilio.it
2025-12-07 19:00:20.429 | DEBUG | no-id | Warming cache for domain: btinternet.com
2025-12-07 19:00:20.429 | DEBUG | no-id | Warming cache for domain: sky.com
2025-12-07 19:00:20.429 | DEBUG | no-id | Warming cache for domain: talktalk.net
2025-12-07 19:00:20.429 | DEBUG | no-id | Warming cache for domain: o2.co.uk
2025-12-07 19:00:20.430 | DEBUG | no-id | Warming cache for domain: ntlworld.com
2025-12-07 19:00:20.430 | DEBUG | no-id | Warming cache for domain: live.co.uk
2025-12-07 19:00:20.430 | DEBUG | no-id | Warming cache for domain: live.fr
2025-12-07 19:00:20.430 | DEBUG | no-id | Warming cache for domain: live.de
2025-12-07 19:00:20.431 | DEBUG | no-id | Warming cache for domain: gmx.de
2025-12-07 19:00:20.431 | DEBUG | no-id | Warming cache for domain: gmx.at
2025-12-07 19:00:20.443 | INFO | no-id | ‚úÖ Warmed cache for gmail.com (TTL: 7200s)
2025-12-07 19:00:20.449 | INFO | no-id | ‚úÖ Warmed cache for hotmail.com (TTL: 7200s)
2025-12-07 19:00:20.449 | INFO | no-id | ‚úÖ Warmed cache for outlook.com (TTL: 7200s)
2025-12-07 19:00:20.450 | INFO | no-id | ‚úÖ Warmed cache for ymail.com (TTL: 7200s)
2025-12-07 19:00:20.451 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.259s due to (1, 'DNS server returned answer with no data')
2025-12-07 19:00:20.452 | INFO | no-id | ‚úÖ Warmed cache for mail.ru (TTL: 10800s)
2025-12-07 19:00:20.455 | INFO | no-id | ‚úÖ Warmed cache for qq.com (TTL: 10800s)
2025-12-07 19:00:20.455 | INFO | no-id | ‚úÖ Warmed cache for yandex.com (TTL: 10800s)
2025-12-07 19:00:20.455 | INFO | no-id | ‚úÖ Warmed cache for 163.com (TTL: 10800s)
2025-12-07 19:00:20.492 | INFO | no-id | ‚úÖ Warmed cache for fastmail.com (TTL: 21600s)
2025-12-07 19:00:20.492 | INFO | no-id | ‚úÖ Warmed cache for fastmail.fm (TTL: 21600s)
2025-12-07 19:00:20.495 | WARNING | no-id | No MX records found for yahoomail.com
2025-12-07 19:00:20.496 | INFO | no-id | ‚úÖ Warmed cache for tuta.io (TTL: 21600s)
2025-12-07 19:00:20.496 | INFO | no-id | ‚úÖ Warmed cache for wanadoo.fr (TTL: 21600s)
2025-12-07 19:00:20.497 | INFO | no-id | ‚úÖ Warmed cache for tutanota.com (TTL: 21600s)
2025-12-07 19:00:20.497 | INFO | no-id | ‚úÖ Warmed cache for btinternet.com (TTL: 43200s)
2025-12-07 19:00:20.497 | INFO | no-id | ‚úÖ Warmed cache for talktalk.net (TTL: 43200s)
2025-12-07 19:00:20.497 | INFO | no-id | ‚úÖ Warmed cache for ntlworld.com (TTL: 43200s)
2025-12-07 19:00:20.497 | INFO | no-id | ‚úÖ Warmed cache for live.fr (TTL: 43200s)
2025-12-07 19:00:20.497 | INFO | no-id | ‚úÖ Warmed cache for live.co.uk (TTL: 43200s)
2025-12-07 19:00:20.497 | INFO | no-id | ‚úÖ Warmed cache for live.de (TTL: 43200s)
2025-12-07 19:00:20.497 | INFO | no-id | ‚úÖ Warmed cache for icloud.com (TTL: 7200s)
2025-12-07 19:00:20.498 | INFO | no-id | ‚úÖ Warmed cache for googlemail.com (TTL: 7200s)
2025-12-07 19:00:20.498 | INFO | no-id | ‚úÖ Warmed cache for gmx.at (TTL: 43200s)
2025-12-07 19:00:20.498 | INFO | no-id | ‚úÖ Warmed cache for seznam.cz (TTL: 21600s)
2025-12-07 19:00:20.498 | INFO | no-id | ‚úÖ Warmed cache for 126.com (TTL: 10800s)
2025-12-07 19:00:20.499 | INFO | no-id | ‚úÖ Warmed cache for aol.com (TTL: 10800s)
2025-12-07 19:00:20.499 | INFO | no-id | ‚úÖ Warmed cache for me.com (TTL: 7200s)
2025-12-07 19:00:20.499 | INFO | no-id | ‚úÖ Warmed cache for live.com (TTL: 7200s)
2025-12-07 19:00:20.500 | INFO | no-id | ‚úÖ Warmed cache for zoho.com (TTL: 10800s)
2025-12-07 19:00:20.500 | INFO | no-id | ‚úÖ Warmed cache for yahoo.com (TTL: 7200s)
2025-12-07 19:00:20.501 | INFO | no-id | ‚úÖ Warmed cache for yandex.ru (TTL: 10800s)
2025-12-07 19:00:20.501 | INFO | no-id | ‚úÖ Warmed cache for proton.me (TTL: 10800s)
2025-12-07 19:00:20.501 | INFO | no-id | ‚úÖ Warmed cache for protonmail.com (TTL: 10800s)
2025-12-07 19:00:20.504 | INFO | no-id | ‚úÖ Warmed cache for orange.fr (TTL: 21600s)
2025-12-07 19:00:20.505 | INFO | no-id | ‚úÖ Warmed cache for libero.it (TTL: 21600s)
2025-12-07 19:00:20.505 | INFO | no-id | ‚úÖ Warmed cache for sky.com (TTL: 43200s)
2025-12-07 19:00:20.505 | INFO | no-id | ‚úÖ Warmed cache for gmx.de (TTL: 43200s)
2025-12-07 19:00:20.505 | INFO | no-id | ‚úÖ Warmed cache for mailbox.org (TTL: 21600s)
2025-12-07 19:00:20.543 | INFO | no-id | ‚úÖ Warmed cache for virgilio.it (TTL: 21600s)
2025-12-07 19:00:20.602 | DEBUG | no-id | Warming cache for domain: mac.com
2025-12-07 19:00:20.602 | DEBUG | no-id | Warming cache for domain: zohomail.com
2025-12-07 19:00:20.602 | DEBUG | no-id | Warming cache for domain: gmx.com
2025-12-07 19:00:20.602 | DEBUG | no-id | Warming cache for domain: gmx.net
2025-12-07 19:00:20.602 | DEBUG | no-id | Warming cache for domain: web.de
2025-12-07 19:00:20.602 | DEBUG | no-id | Warming cache for domain: t-online.de
2025-12-07 19:00:20.602 | DEBUG | no-id | Warming cache for domain: naver.com
2025-12-07 19:00:20.603 | DEBUG | no-id | Warming cache for domain: hanmail.net
2025-12-07 19:00:20.603 | DEBUG | no-id | Warming cache for domain: daum.net
2025-12-07 19:00:20.614 | INFO | no-id | ‚úÖ Warmed cache for hanmail.net (TTL: 10800s)
2025-12-07 19:00:20.614 | INFO | no-id | ‚úÖ Warmed cache for gmx.com (TTL: 10800s)
2025-12-07 19:00:20.615 | INFO | no-id | ‚úÖ Warmed cache for zohomail.com (TTL: 10800s)
2025-12-07 19:00:20.617 | INFO | no-id | ‚úÖ Warmed cache for daum.net (TTL: 10800s)
2025-12-07 19:00:20.632 | INFO | no-id | ‚úÖ Warmed cache for web.de (TTL: 10800s)
2025-12-07 19:00:20.634 | INFO | no-id | ‚úÖ Warmed cache for mac.com (TTL: 7200s)
2025-12-07 19:00:20.634 | INFO | no-id | ‚úÖ Tier 1 warming complete: 10/11 successful
2025-12-07 19:00:20.634 | INFO | no-id | ‚úÖ Warmed cache for gmx.net (TTL: 10800s)
2025-12-07 19:00:20.634 | INFO | no-id | ‚úÖ Warmed cache for t-online.de (TTL: 10800s)
2025-12-07 19:00:20.643 | DEBUG | no-id | Warming cache for domain: optonline.net
2025-12-07 19:00:20.643 | DEBUG | no-id | Warming cache for domain: verizon.net
2025-12-07 19:00:20.643 | DEBUG | no-id | Warming cache for domain: bellsouth.net
2025-12-07 19:00:20.643 | DEBUG | no-id | Warming cache for domain: att.net
2025-12-07 19:00:20.643 | DEBUG | no-id | Warming cache for domain: comcast.net
2025-12-07 19:00:20.643 | DEBUG | no-id | Warming cache for domain: sbcglobal.net
2025-12-07 19:00:20.644 | DEBUG | no-id | Warming cache for domain: cox.net
2025-12-07 19:00:20.644 | DEBUG | no-id | Warming cache for domain: charter.net
2025-12-07 19:00:20.644 | DEBUG | no-id | Warming cache for domain: rediffmail.com
2025-12-07 19:00:20.644 | DEBUG | no-id | Warming cache for domain: inbox.com
2025-12-07 19:00:20.657 | INFO | no-id | ‚úÖ Warmed cache for charter.net (TTL: 21600s)
2025-12-07 19:00:20.657 | INFO | no-id | ‚úÖ Warmed cache for att.net (TTL: 21600s)
2025-12-07 19:00:20.657 | INFO | no-id | ‚úÖ Warmed cache for rediffmail.com (TTL: 21600s)
2025-12-07 19:00:20.657 | INFO | no-id | ‚úÖ Warmed cache for sbcglobal.net (TTL: 21600s)
2025-12-07 19:00:20.657 | INFO | no-id | ‚úÖ Warmed cache for comcast.net (TTL: 21600s)
2025-12-07 19:00:20.657 | INFO | no-id | ‚úÖ Warmed cache for cox.net (TTL: 21600s)
2025-12-07 19:00:20.659 | INFO | no-id | ‚úÖ Warmed cache for inbox.com (TTL: 21600s)
2025-12-07 19:00:20.659 | INFO | no-id | ‚úÖ Warmed cache for naver.com (TTL: 10800s)
2025-12-07 19:00:20.659 | INFO | no-id | ‚úÖ Tier 2 warming complete: 18/18 successful
2025-12-07 19:00:20.709 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 19:00:20.718 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.581s due to (1, 'DNS server returned answer with no data')
2025-12-07 19:00:20.731 | INFO | no-id | ‚úÖ Warmed cache for optonline.net (TTL: 21600s)
2025-12-07 19:00:20.737 | INFO | no-id | ‚úÖ Warmed cache for verizon.net (TTL: 21600s)
2025-12-07 19:00:20.747 | INFO | no-id | ‚úÖ Warmed cache for bellsouth.net (TTL: 21600s)
2025-12-07 19:00:20.848 | DEBUG | no-id | Warming cache for domain: email.com
2025-12-07 19:00:20.859 | INFO | no-id | ‚úÖ Warmed cache for email.com (TTL: 21600s)
2025-12-07 19:00:20.859 | INFO | no-id | ‚úÖ Tier 3 warming complete: 21/21 successful
2025-12-07 19:00:21.300 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 19:00:21.507 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.194s due to (1, 'DNS server returned answer with no data')
2025-12-07 19:00:22.704 | DEBUG | no-id | Async MX primary failed for o2.co.uk: (1, 'DNS server returned answer with no data')
2025-12-07 19:00:22.762 | DEBUG | no-id | Retry 1/3 for _query_mx_fallback sleeping 0.262s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:23.028 | DEBUG | no-id | Retrying _query_mx_fallback attempt 2/3
2025-12-07 19:00:23.042 | DEBUG | no-id | Retry 2/3 for _query_mx_fallback sleeping 0.531s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:23.574 | DEBUG | no-id | Retrying _query_mx_fallback attempt 3/3
2025-12-07 19:00:23.589 | DEBUG | no-id | Retry 3/3 for _query_mx_fallback sleeping 1.173s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:24.763 | DEBUG | no-id | Fallback MX query failed for o2.co.uk: The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:24.778 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.310s due to (1, 'DNS server returned answer with no data')
2025-12-07 19:00:25.091 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 19:00:25.102 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.635s due to (1, 'DNS server returned answer with no data')
2025-12-07 19:00:25.739 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 19:00:25.766 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.298s due to (1, 'DNS server returned answer with no data')
2025-12-07 19:00:26.815 | INFO | no-id | Rate limit check | IP: 172.20.0.1 | Path: /auth/login
2025-12-07 19:00:26.816 | INFO | no-id | Redis available: True
2025-12-07 19:00:26.816 | INFO | no-id | Created circuit breaker: Redis Cache
2025-12-07 19:00:26.817 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 19:00:26.823 | INFO | no-id | Rate limit result | Allowed: True | Current: 1 | Limit: 1000
2025-12-07 19:00:26.837 | DEBUG | no-id | No Bearer token in Authorization header
2025-12-07 19:00:26.840 | WARNING | no-id | Validation Error | Count: 1 | Details: [{"field": "body.password", "message": "String should have at least 8 characters", "type": "string_too_short", "input": "Pass123"}] | Trace: None | Plan: UNKNOWN | Path: /auth/login
2025-12-07 19:00:27.068 | DEBUG | no-id | Async MX primary failed for o2.co.uk: (1, 'DNS server returned answer with no data')
2025-12-07 19:00:27.081 | DEBUG | no-id | Retry 1/3 for _query_mx_fallback sleeping 0.323s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:27.406 | DEBUG | no-id | Retrying _query_mx_fallback attempt 2/3
2025-12-07 19:00:27.423 | DEBUG | no-id | Retry 2/3 for _query_mx_fallback sleeping 0.630s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:27.933 | INFO | no-id | Rate limit check | IP: 172.20.0.1 | Path: /auth/login
2025-12-07 19:00:27.934 | INFO | no-id | Redis available: True
2025-12-07 19:00:27.935 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 19:00:27.939 | INFO | no-id | Rate limit result | Allowed: True | Current: 2 | Limit: 1000
2025-12-07 19:00:27.944 | DEBUG | no-id | No Bearer token in Authorization header
2025-12-07 19:00:27.945 | WARNING | no-id | Validation Error | Count: 1 | Details: [{"field": "body", "message": "Input should be a valid dictionary or object to extract fields from", "type": "model_attributes_type", "input": "username=fin***@e***.com&password=[REDACTED]"}] | Trace: None | Plan: UNKNOWN | Path: /auth/login
2025-12-07 19:00:28.054 | DEBUG | no-id | Retrying _query_mx_fallback attempt 3/3
2025-12-07 19:00:28.064 | DEBUG | no-id | Retry 3/3 for _query_mx_fallback sleeping 1.261s due to The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:29.013 | INFO | no-id | Rate limit check | IP: 172.20.0.1 | Path: /validate/email
2025-12-07 19:00:29.014 | INFO | no-id | Redis available: True
2025-12-07 19:00:29.015 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 19:00:29.017 | INFO | no-id | Rate limit result | Allowed: True | Current: 3 | Limit: 1000
2025-12-07 19:00:29.021 | DEBUG | no-id | Auth attempt - X-API-Key: sKKvMFH16imDtrCz_ocaBE4eeSM7dBUEn3kADR3ltQA, Authorization present: False (request: unknown)
2025-12-07 19:00:29.022 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 19:00:29.030 | INFO | no-id | Email validation | User: 4c07b2a2-943a-47f7-a37a-21377435c8ef | Plan: FREE | Email: finaltest@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 19:00:29.031 | INFO | no-id | 702664b6-ecb0-44e8-bc03-8cd1a0a40abc | Pre-validation spam trap check | Email: finaltest@example.com | Is trap: False | Confidence: 0.5
2025-12-07 19:00:29.031 | INFO | no-id | df669040-9731-4d4a-8be2-2450fed02884 | Format validation passed | Email: fin***@e***.com
2025-12-07 19:00:29.033 | INFO | no-id | df669040-9731-4d4a-8be2-2450fed02884 | Checking spam traps...
2025-12-07 19:00:29.033 | DEBUG | no-id | Spam trap check cache hit for finaltest@example.com
2025-12-07 19:00:29.033 | INFO | no-id | df669040-9731-4d4a-8be2-2450fed02884 | Spam trap check completed | is_trap=False, confidence=0.5, type=role_based
2025-12-07 19:00:29.033 | INFO | no-id | df669040-9731-4d4a-8be2-2450fed02884 | Analyzing provider...
2025-12-07 19:00:29.033 | INFO | no-id | UnifiedCache initialized
2025-12-07 19:00:29.053 | INFO | no-id | [df669040-9731-4d4a-8be2-2450fed02884] Provider analysis complete | Provider: unknown | SPF: no-spf | DKIM: not_found | Reputation: 0.1
2025-12-07 19:00:29.053 | INFO | no-id | Validating domain: example.com
2025-12-07 19:00:29.053 | WARNING | no-id | Domain validation FAILED: example.com | Error: reserved_domain | Detail: Reserved domain
2025-12-07 19:00:29.054 | INFO | no-id | Validation 702664b6-ecb0-44e8-bc03-8cd1a0a40abc completed successfully
2025-12-07 19:00:29.330 | DEBUG | no-id | Fallback MX query failed for o2.co.uk: The DNS response does not contain an answer to the question: o2.co.uk. IN MX
2025-12-07 19:00:29.332 | WARNING | no-id | No MX records found for o2.co.uk
2025-12-07 19:00:29.438 | DEBUG | no-id | Warming cache for domain: gmx.ch
2025-12-07 19:00:29.440 | DEBUG | no-id | Warming cache for domain: freenet.de
2025-12-07 19:00:29.441 | DEBUG | no-id | Warming cache for domain: arcor.de
2025-12-07 19:00:29.442 | DEBUG | no-id | Warming cache for domain: laposte.net
2025-12-07 19:00:29.442 | DEBUG | no-id | Warming cache for domain: sfr.fr
2025-12-07 19:00:29.442 | DEBUG | no-id | Warming cache for domain: tiscali.it
2025-12-07 19:00:29.443 | DEBUG | no-id | Warming cache for domain: tiscali.co.uk
2025-12-07 19:00:29.461 | INFO | no-id | ‚úÖ Warmed cache for tiscali.it (TTL: 43200s)
2025-12-07 19:00:29.461 | INFO | no-id | ‚úÖ Warmed cache for arcor.de (TTL: 43200s)
2025-12-07 19:00:29.465 | INFO | no-id | ‚úÖ Warmed cache for freenet.de (TTL: 43200s)
2025-12-07 19:00:29.467 | INFO | no-id | ‚úÖ Warmed cache for gmx.ch (TTL: 43200s)
2025-12-07 19:00:29.476 | INFO | no-id | ‚úÖ Warmed cache for sfr.fr (TTL: 43200s)
2025-12-07 19:00:29.476 | INFO | no-id | ‚úÖ Warmed cache for laposte.net (TTL: 43200s)
2025-12-07 19:00:29.489 | INFO | no-id | ‚úÖ Warmed cache for tiscali.co.uk (TTL: 43200s)
2025-12-07 19:00:29.490 | INFO | no-id | ‚úÖ Tier 4 warming complete: 16/17 successful
2025-12-07 19:00:29.490 | INFO | no-id | ‚úÖ Cache warming complete in 9.07s | Total warmed: 65 | Failures: 2
2025-12-07 19:01:29.497 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 19:01:29.501 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 19:01:29.502 | DEBUG | no-id | Tier 2 not due for warming yet
2025-12-07 19:01:29.502 | DEBUG | no-id | Tier 3 not due for warming yet
2025-12-07 19:01:29.502 | DEBUG | no-id | Tier 4 not due for warming yet
2025-12-07 19:01:29.502 | INFO | no-id | ‚úÖ Cache warming complete in 0.01s | Total warmed: 65 | Failures: 2
2025-12-07 19:02:29.506 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 19:02:29.510 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 19:02:29.511 | DEBUG | no-id | Tier 2 not due for warming yet
2025-12-07 19:02:29.511 | DEBUG | no-id | Tier 3 not due for warming yet
2025-12-07 19:02:29.511 | DEBUG | no-id | Tier 4 not due for warming yet
2025-12-07 19:02:29.511 | INFO | no-id | ‚úÖ Cache warming complete in 0.01s | Total warmed: 65 | Failures: 2
2025-12-07 19:03:29.513 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 19:03:29.515 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 19:03:29.516 | DEBUG | no-id | Tier 2 not due for warming yet
2025-12-07 19:03:29.516 | DEBUG | no-id | Tier 3 not due for warming yet
2025-12-07 19:03:29.517 | DEBUG | no-id | Tier 4 not due for warming yet
2025-12-07 19:03:29.517 | INFO | no-id | ‚úÖ Cache warming complete in 0.00s | Total warmed: 65 | Failures: 2
2025-12-07 19:04:29.522 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 19:04:29.526 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 19:04:29.527 | DEBUG | no-id | Tier 2 not due for warming yet
2025-12-07 19:04:29.527 | DEBUG | no-id | Tier 3 not due for warming yet
2025-12-07 19:04:29.528 | DEBUG | no-id | Tier 4 not due for warming yet
2025-12-07 19:04:29.528 | INFO | no-id | ‚úÖ Cache warming complete in 0.01s | Total warmed: 65 | Failures: 2
2025-12-07 19:05:29.530 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 19:05:29.535 | INFO | no-id | üî• Warming Tier 1: 11 domains (TTL: 7200s)
2025-12-07 19:05:29.535 | DEBUG | no-id | Tier 2 not due for warming yet
2025-12-07 19:05:29.536 | DEBUG | no-id | Tier 3 not due for warming yet
2025-12-07 19:05:29.536 | DEBUG | no-id | Tier 4 not due for warming yet
2025-12-07 19:05:29.536 | DEBUG | no-id | Warming cache for domain: gmail.com
2025-12-07 19:05:29.538 | DEBUG | no-id | Warming cache for domain: googlemail.com
2025-12-07 19:05:29.539 | DEBUG | no-id | Warming cache for domain: outlook.com
2025-12-07 19:05:29.539 | DEBUG | no-id | Warming cache for domain: hotmail.com
2025-12-07 19:05:29.539 | DEBUG | no-id | Warming cache for domain: live.com
2025-12-07 19:05:29.540 | DEBUG | no-id | Warming cache for domain: yahoo.com
2025-12-07 19:05:29.540 | DEBUG | no-id | Warming cache for domain: ymail.com
2025-12-07 19:05:29.540 | DEBUG | no-id | Warming cache for domain: yahoomail.com
2025-12-07 19:05:29.542 | DEBUG | no-id | Warming cache for domain: icloud.com
2025-12-07 19:05:29.542 | DEBUG | no-id | Warming cache for domain: me.com
2025-12-07 19:05:29.571 | INFO | no-id | ‚úÖ Warmed cache for outlook.com (TTL: 7200s)
2025-12-07 19:05:29.572 | INFO | no-id | ‚úÖ Warmed cache for ymail.com (TTL: 7200s)
2025-12-07 19:05:29.572 | INFO | no-id | ‚úÖ Warmed cache for hotmail.com (TTL: 7200s)
2025-12-07 19:05:29.580 | WARNING | no-id | No MX records found for yahoomail.com
2025-12-07 19:05:29.589 | INFO | no-id | ‚úÖ Warmed cache for icloud.com (TTL: 7200s)
2025-12-07 19:05:29.589 | INFO | no-id | ‚úÖ Warmed cache for yahoo.com (TTL: 7200s)
2025-12-07 19:05:29.589 | INFO | no-id | ‚úÖ Warmed cache for me.com (TTL: 7200s)
2025-12-07 19:05:29.590 | INFO | no-id | ‚úÖ Warmed cache for gmail.com (TTL: 7200s)
2025-12-07 19:05:29.591 | INFO | no-id | ‚úÖ Warmed cache for googlemail.com (TTL: 7200s)
2025-12-07 19:05:29.603 | INFO | no-id | ‚úÖ Warmed cache for live.com (TTL: 7200s)
2025-12-07 19:05:29.707 | DEBUG | no-id | Warming cache for domain: mac.com
2025-12-07 19:05:29.736 | INFO | no-id | ‚úÖ Warmed cache for mac.com (TTL: 7200s)
2025-12-07 19:05:29.736 | INFO | no-id | ‚úÖ Tier 1 warming complete: 10/11 successful
2025-12-07 19:05:29.737 | INFO | no-id | ‚úÖ Cache warming complete in 0.21s | Total warmed: 75 | Failures: 3
2025-12-07 19:06:29.747 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 19:06:29.749 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 19:06:29.749 | DEBUG | no-id | Tier 2 not due for warming yet
2025-12-07 19:06:29.749 | DEBUG | no-id | Tier 3 not due for warming yet
2025-12-07 19:06:29.750 | DEBUG | no-id | Tier 4 not due for warming yet
2025-12-07 19:06:29.750 | INFO | no-id | ‚úÖ Cache warming complete in 0.00s | Total warmed: 75 | Failures: 3
2025-12-07 19:07:29.750 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 19:07:29.754 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 19:07:29.755 | DEBUG | no-id | Tier 2 not due for warming yet
2025-12-07 19:07:29.755 | DEBUG | no-id | Tier 3 not due for warming yet
2025-12-07 19:07:29.756 | DEBUG | no-id | Tier 4 not due for warming yet
2025-12-07 19:07:29.756 | INFO | no-id | ‚úÖ Cache warming complete in 0.01s | Total warmed: 75 | Failures: 3
2025-12-07 19:08:29.760 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 19:08:29.762 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 19:08:29.762 | DEBUG | no-id | Tier 2 not due for warming yet
2025-12-07 19:08:29.763 | DEBUG | no-id | Tier 3 not due for warming yet
2025-12-07 19:08:29.763 | DEBUG | no-id | Tier 4 not due for warming yet
2025-12-07 19:08:29.763 | INFO | no-id | ‚úÖ Cache warming complete in 0.00s | Total warmed: 75 | Failures: 3
2025-12-07 19:09:29.768 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 19:09:29.773 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 19:09:29.773 | DEBUG | no-id | Tier 2 not due for warming yet
2025-12-07 19:09:29.774 | DEBUG | no-id | Tier 3 not due for warming yet
2025-12-07 19:09:29.774 | DEBUG | no-id | Tier 4 not due for warming yet
2025-12-07 19:09:29.774 | INFO | no-id | ‚úÖ Cache warming complete in 0.01s | Total warmed: 75 | Failures: 3
2025-12-07 19:10:29.780 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 19:10:29.782 | INFO | no-id | üî• Warming Tier 1: 11 domains (TTL: 7200s)
2025-12-07 19:10:29.782 | DEBUG | no-id | Tier 2 not due for warming yet
2025-12-07 19:10:29.782 | DEBUG | no-id | Tier 3 not due for warming yet
2025-12-07 19:10:29.783 | DEBUG | no-id | Tier 4 not due for warming yet
2025-12-07 19:10:29.783 | DEBUG | no-id | Warming cache for domain: gmail.com
2025-12-07 19:10:29.784 | DEBUG | no-id | Warming cache for domain: googlemail.com
2025-12-07 19:10:29.785 | DEBUG | no-id | Warming cache for domain: outlook.com
2025-12-07 19:10:29.785 | DEBUG | no-id | Warming cache for domain: hotmail.com
2025-12-07 19:10:29.786 | DEBUG | no-id | Warming cache for domain: live.com
2025-12-07 19:10:29.786 | DEBUG | no-id | Warming cache for domain: yahoo.com
2025-12-07 19:10:29.786 | DEBUG | no-id | Warming cache for domain: ymail.com
2025-12-07 19:10:29.787 | DEBUG | no-id | Warming cache for domain: yahoomail.com
2025-12-07 19:10:29.787 | DEBUG | no-id | Warming cache for domain: icloud.com
2025-12-07 19:10:29.787 | DEBUG | no-id | Warming cache for domain: me.com
2025-12-07 19:10:29.807 | INFO | no-id | ‚úÖ Warmed cache for outlook.com (TTL: 7200s)
2025-12-07 19:10:29.817 | WARNING | no-id | No MX records found for yahoomail.com
2025-12-07 19:10:29.826 | INFO | no-id | ‚úÖ Warmed cache for gmail.com (TTL: 7200s)
2025-12-07 19:10:29.827 | INFO | no-id | ‚úÖ Warmed cache for hotmail.com (TTL: 7200s)
2025-12-07 19:10:29.827 | INFO | no-id | ‚úÖ Warmed cache for icloud.com (TTL: 7200s)
2025-12-07 19:10:29.828 | INFO | no-id | ‚úÖ Warmed cache for me.com (TTL: 7200s)
2025-12-07 19:10:29.837 | INFO | no-id | ‚úÖ Warmed cache for ymail.com (TTL: 7200s)
2025-12-07 19:10:29.842 | INFO | no-id | ‚úÖ Warmed cache for live.com (TTL: 7200s)
2025-12-07 19:10:29.843 | INFO | no-id | ‚úÖ Warmed cache for googlemail.com (TTL: 7200s)
2025-12-07 19:10:29.850 | INFO | no-id | ‚úÖ Warmed cache for yahoo.com (TTL: 7200s)
2025-12-07 19:10:29.953 | DEBUG | no-id | Warming cache for domain: mac.com
2025-12-07 19:10:30.044 | INFO | no-id | ‚úÖ Warmed cache for mac.com (TTL: 7200s)
2025-12-07 19:10:30.044 | INFO | no-id | ‚úÖ Tier 1 warming complete: 10/11 successful
2025-12-07 19:10:30.044 | INFO | no-id | ‚úÖ Cache warming complete in 0.26s | Total warmed: 85 | Failures: 4
2025-12-07 19:11:30.046 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 19:11:30.050 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 19:11:30.050 | DEBUG | no-id | Tier 2 not due for warming yet
2025-12-07 19:11:30.051 | DEBUG | no-id | Tier 3 not due for warming yet
2025-12-07 19:11:30.051 | DEBUG | no-id | Tier 4 not due for warming yet
2025-12-07 19:11:30.051 | INFO | no-id | ‚úÖ Cache warming complete in 0.01s | Total warmed: 85 | Failures: 4
2025-12-07 19:11:57.826 | INFO | no-id | üõë Shutting down API server...
2025-12-07 19:11:57.829 | INFO | no-id | üîß Shutting down services...
2025-12-07 19:11:57.830 | INFO | no-id | Stopping cache warming...
2025-12-07 19:11:57.830 | INFO | no-id | Shutting down tracing...
2025-12-07 19:11:57.831 | INFO | no-id | ‚úÖ Tracing shut down cleanly
2025-12-07 19:11:57.831 | INFO | no-id | Stopping background cache warming
2025-12-07 19:11:57.832 | INFO | no-id | ‚úÖ Background cache warming stopped
2025-12-07 19:11:57.832 | SUCCESS | no-id | ‚úÖ All services shut down cleanly
2025-12-07 19:11:57.832 | INFO | no-id | ‚úÖ Redis connection closed
2025-12-07 19:11:57.833 | INFO | no-id | ‚úÖ ARQ pool closed
2025-12-07 19:11:57.833 | SUCCESS | no-id | üëã API server stopped cleanly
2025-12-07 19:11:57.836 | INFO | no-id | Background tasks cancelled
2025-12-07 20:41:32.556 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:41:33.625 | INFO | no-id | üîá Console tracing disabled in development (reducing log noise)
2025-12-07 20:41:33.625 | INFO | no-id | ‚ÑπÔ∏è No tracing exporter configured (development mode)
2025-12-07 20:41:33.625 | INFO | no-id | üîá OpenTelemetry verbose logging disabled in development
2025-12-07 20:41:33.625 | SUCCESS | no-id | ‚úÖ FastAPI instrumented for tracing
2025-12-07 20:41:33.626 | SUCCESS | no-id | ‚úÖ Redis instrumented for tracing
2025-12-07 20:41:33.627 | SUCCESS | no-id | ‚úÖ HTTP client instrumented for tracing
2025-12-07 20:41:33.627 | SUCCESS | no-id | üîç Distributed tracing initialized for mailsafepro-api
2025-12-07 20:41:33.711 | INFO | no-id | Exception handlers registered successfully
2025-12-07 20:42:08.142 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:42:09.074 | INFO | no-id | üîá Console tracing disabled in development (reducing log noise)
2025-12-07 20:42:09.074 | INFO | no-id | ‚ÑπÔ∏è No tracing exporter configured (development mode)
2025-12-07 20:42:09.075 | INFO | no-id | üîá OpenTelemetry verbose logging disabled in development
2025-12-07 20:42:09.075 | SUCCESS | no-id | ‚úÖ FastAPI instrumented for tracing
2025-12-07 20:42:09.076 | SUCCESS | no-id | ‚úÖ Redis instrumented for tracing
2025-12-07 20:42:09.076 | SUCCESS | no-id | ‚úÖ HTTP client instrumented for tracing
2025-12-07 20:42:09.076 | SUCCESS | no-id | üîç Distributed tracing initialized for mailsafepro-api
2025-12-07 20:42:09.113 | INFO | no-id | Exception handlers registered successfully
2025-12-07 20:43:41.611 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:43:42.552 | INFO | no-id | üîá Console tracing disabled in development (reducing log noise)
2025-12-07 20:43:42.553 | INFO | no-id | ‚ÑπÔ∏è No tracing exporter configured (development mode)
2025-12-07 20:43:42.553 | INFO | no-id | üîá OpenTelemetry verbose logging disabled in development
2025-12-07 20:43:42.553 | SUCCESS | no-id | ‚úÖ FastAPI instrumented for tracing
2025-12-07 20:43:42.554 | SUCCESS | no-id | ‚úÖ Redis instrumented for tracing
2025-12-07 20:43:42.555 | SUCCESS | no-id | ‚úÖ HTTP client instrumented for tracing
2025-12-07 20:43:42.555 | SUCCESS | no-id | üîç Distributed tracing initialized for mailsafepro-api
2025-12-07 20:43:42.590 | INFO | no-id | Exception handlers registered successfully
2025-12-07 20:43:42.955 | WARNING | no-id | ‚ö†Ô∏è  Abuse detected: Same email validated 25 times
2025-12-07 20:43:42.960 | WARNING | no-id | ‚ö†Ô∏è  Abuse detected: Rapid request spike
2025-12-07 20:43:42.965 | ERROR | no-id | üö® HONEYPOT TRIGGERED
2025-12-07 20:43:43.404 | DEBUG | no-id | Creating API key | User: %s | Plan: %s | Name: %s
2025-12-07 20:43:43.405 | INFO | no-id | API key created successfully
2025-12-07 20:43:43.417 | ERROR | no-id | Unexpected error in key creation | User: %s | Error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x105d95d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x105d95bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x106122810>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x106122810>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x105e5c040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x106122810>
           ‚îî <function wrap_session at 0x105e37f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x106122810>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x105e5c040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
    ‚îî <_pytest.config.Config object at 0x106122810>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_create_api_key_max_keys_exceeded>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>, 'nextitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>, 'nextitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_max_keys_exceeded>, <Function test_create_api_key_redis_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ               ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îî <function runtestprotocol at 0x105e37100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x105e374c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_create_api_key_max_keys_exceeded' when='setup' outcome='passe...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_create_api_key_max_keys_exceeded>
           ‚îî <function call_runtest_hook at 0x105e376a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x105e37920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e582980>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_create_api_key_max_keys_exceeded>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_max_keys_exceeded>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x105e9e2a0>
    ‚îî <Function test_create_api_key_max_keys_exceeded>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îÇ    ‚îî <property object at 0x105db1a80>
    ‚îî <Function test_create_api_key_max_keys_exceeded>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_max_keys_exceeded>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e5ca510>, 'app': <fastapi.applications.FastAPI object at 0x10e5ce590>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_create_api_key_max_keys_exceeded at 0x10e682e80>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-35' coro=<TestAPIKeyEndpoints.test_create_api_key_max_keys_exceeded() running at /Users/pablo/Deskto...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x1070f2840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1070f27a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1070f45e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x1070893a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...3090>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...3090>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...3090>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...3090>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 326, in test_create_api_key_max_keys_exceeded
    response = await client.post("/api-keys", json=key_data.model_dump())
                     ‚îÇ      ‚îÇ                      ‚îÇ        ‚îî <function BaseModel.model_dump at 0x10808ee80>
                     ‚îÇ      ‚îÇ                      ‚îî APIKeyCreateRequest(name='Test Key', scopes=['read'])
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x108dcc360>
                     ‚îî <httpx.AsyncClient object at 0x10e5ca510>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x108dc3ce0>
                 ‚îî <httpx.AsyncClient object at 0x10e5ca510>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x108dae0d0>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x108dae0d0>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x108dc3ec0>
                 ‚îî <httpx.AsyncClient object at 0x10e5ca510>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x108dc3f60>
                     ‚îî <httpx.AsyncClient object at 0x10e5ca510>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x108dcc040>
                     ‚îî <httpx.AsyncClient object at 0x10e5ca510>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x108dcc0e0>
                     ‚îî <httpx.AsyncClient object at 0x10e5ca510>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x108b242c0>
                     ‚îî <httpx.ASGITransport object at 0x10e4b99d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e677920>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e677b00>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e5ce590>
          ‚îî <httpx.ASGITransport object at 0x10e4b99d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e677920>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e677b00>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e677920>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e677b00>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e526250>
          ‚îî <fastapi.applications.FastAPI object at 0x10e5ce590>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e677880>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e677b00>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e525bd0>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e526250>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e677880>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e677b00>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e5264d0>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e5cf310>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e525bd0>
          ‚îî <function wrap_app_handling_exceptions at 0x108a34f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e677740>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e677b00>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <fastapi.routing.APIRouter object at 0x10e5cf310>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e677740>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e677b00>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e5cf310>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e5cf310>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e677740>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e677b00>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ     ‚îî <function Route.handle at 0x108a36700>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e677740>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e677b00>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e680040>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e677740>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e677b00>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e524c50>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e677420>
          ‚îî <function wrap_app_handling_exceptions at 0x108a34f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e6774c0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e677b00>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e677420>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e524c50>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e6800e0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x108a34860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140223, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function create_api_key at 0x10c721ee0>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10e5f2e10>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 382, in create_api_key
    await enforce_rate_limit(redis, bucket=f"ak:create:{user_id}", limit=5, window=60)
          ‚îÇ                  ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e5f3090>,db=0>>>
          ‚îî <function enforce_rate_limit at 0x10c3dbd80>

  File "/Users/pablo/Desktop/toni/app/auth.py", line 246, in enforce_rate_limit
    local_res = await redis.eval(LUA_RATE_LIMIT, 1, local_key, str(window))
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ              ‚îî 60
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî 'rl:6132e8e512e36d5a54499518ce8f3f146307b77a3575291087f40f05c1ab1ae0'
                      ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal window = tonumber(ARGV[1])\nlocal now = redis.call('TIME')[1]\nlocal current = redis.call('INCR...
                      ‚îÇ     ‚îî <AsyncMock id='4535915856'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e5f3090>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî ResponseError(b'max_keys_exceeded')

redis.exceptions.ResponseError: b'max_keys_exceeded'
2025-12-07 20:43:43.451 | ERROR | no-id | Unexpected error in key creation | User: %s | Error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x105d95d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x105d95bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x106122810>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x106122810>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x105e5c040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x106122810>
           ‚îî <function wrap_session at 0x105e37f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x106122810>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x105e5c040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
    ‚îî <_pytest.config.Config object at 0x106122810>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_create_api_key_redis_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_redis_error>, 'nextitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_redis_error>, 'nextitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_redis_error>, <Function test_create_api_key_unexpected_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ               ‚îî <Function test_create_api_key_redis_error>
    ‚îî <function runtestprotocol at 0x105e37100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x105e374c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_create_api_key_redis_error' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_create_api_key_redis_error>
           ‚îî <function call_runtest_hook at 0x105e376a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x105e37920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e582980>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_create_api_key_redis_error>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_redis_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x105e9e2a0>
    ‚îî <Function test_create_api_key_redis_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ    ‚îî <property object at 0x105db1a80>
    ‚îî <Function test_create_api_key_redis_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_redis_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e8b4d90>, 'app': <fastapi.applications.FastAPI object at 0x10e89dcd0>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_create_api_key_redis_error at 0x10e8a31a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-40' coro=<TestAPIKeyEndpoints.test_create_api_key_redis_error() running at /Users/pablo/Desktop/toni...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x1070f2840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1070f27a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1070f45e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x1070893a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...d990>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...d990>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...d990>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...d990>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 345, in test_create_api_key_redis_error
    response = await client.post("/api-keys", json=key_data.model_dump())
                     ‚îÇ      ‚îÇ                      ‚îÇ        ‚îî <function BaseModel.model_dump at 0x10808ee80>
                     ‚îÇ      ‚îÇ                      ‚îî APIKeyCreateRequest(name='Test Key', scopes=['read'])
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x108dcc360>
                     ‚îî <httpx.AsyncClient object at 0x10e8b4d90>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x108dc3ce0>
                 ‚îî <httpx.AsyncClient object at 0x10e8b4d90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x108dae0d0>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x108dae0d0>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x108dc3ec0>
                 ‚îî <httpx.AsyncClient object at 0x10e8b4d90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x108dc3f60>
                     ‚îî <httpx.AsyncClient object at 0x10e8b4d90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x108dcc040>
                     ‚îî <httpx.AsyncClient object at 0x10e8b4d90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x108dcc0e0>
                     ‚îî <httpx.AsyncClient object at 0x10e8b4d90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x108b242c0>
                     ‚îî <httpx.ASGITransport object at 0x10e8b4c90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e7afba0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e7af9c0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e89dcd0>
          ‚îî <httpx.ASGITransport object at 0x10e8b4c90>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e7afba0>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e7af9c0>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e7afba0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e7af9c0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e8b75d0>
          ‚îî <fastapi.applications.FastAPI object at 0x10e89dcd0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e7af920>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e7af9c0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e8b7590>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e8b75d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e7af920>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e7af9c0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8b7550>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e89d790>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e8b7590>
          ‚îî <function wrap_app_handling_exceptions at 0x108a34f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e677420>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e7af9c0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <fastapi.routing.APIRouter object at 0x10e89d790>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e677420>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e7af9c0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e89d790>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e89d790>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e677420>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e7af9c0>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ     ‚îî <function Route.handle at 0x108a36700>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e677420>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e7af9c0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e8a0040>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e677420>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e7af9c0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8b7650>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e6772e0>
          ‚îî <function wrap_app_handling_exceptions at 0x108a34f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e677740>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e7af9c0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e6772e0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8b7650>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e8a00e0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x108a34860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140223, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function create_api_key at 0x10c721ee0>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10e524ed0>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 382, in create_api_key
    await enforce_rate_limit(redis, bucket=f"ak:create:{user_id}", limit=5, window=60)
          ‚îÇ                  ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e89d990>,db=0>>>
          ‚îî <function enforce_rate_limit at 0x10c3dbd80>

  File "/Users/pablo/Desktop/toni/app/auth.py", line 246, in enforce_rate_limit
    local_res = await redis.eval(LUA_RATE_LIMIT, 1, local_key, str(window))
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ              ‚îî 60
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî 'rl:6132e8e512e36d5a54499518ce8f3f146307b77a3575291087f40f05c1ab1ae0'
                      ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal window = tonumber(ARGV[1])\nlocal now = redis.call('TIME')[1]\nlocal current = redis.call('INCR...
                      ‚îÇ     ‚îî <AsyncMock id='4538981072'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e89d990>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî ResponseError(b'Generic Error')

redis.exceptions.ResponseError: b'Generic Error'
2025-12-07 20:43:43.474 | ERROR | no-id | Unexpected error in key creation | User: %s | Error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x105d95d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x105d95bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x106122810>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x106122810>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x105e5c040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x106122810>
           ‚îî <function wrap_session at 0x105e37f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x106122810>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x105e5c040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
    ‚îî <_pytest.config.Config object at 0x106122810>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_list_api_keys_endpoint>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_create_api_key_unexpected_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_unexpected_error>, 'nextitem': <Function test_list_api_keys_endpoint>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_unexpected_error>, 'nextitem': <Function test_list_api_keys_endpoint>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_unexpected_error>, <Function test_list_api_keys_endpoint>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_list_api_keys_endpoint>
    ‚îÇ               ‚îî <Function test_create_api_key_unexpected_error>
    ‚îî <function runtestprotocol at 0x105e37100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x105e374c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_create_api_key_unexpected_error' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_create_api_key_unexpected_error>
           ‚îî <function call_runtest_hook at 0x105e376a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x105e37920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x1071937e0>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_create_api_key_unexpected_error>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_unexpected_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x105e9e2a0>
    ‚îî <Function test_create_api_key_unexpected_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ    ‚îî <property object at 0x105db1a80>
    ‚îî <Function test_create_api_key_unexpected_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_unexpected_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e8d3250>, 'app': <fastapi.applications.FastAPI object at 0x10e8bf990>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_create_api_key_unexpected_error at 0x10e8d8ea0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-45' coro=<TestAPIKeyEndpoints.test_create_api_key_unexpected_error() running at /Users/pablo/Desktop...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x1070f2840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1070f27a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1070f45e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x1070893a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...fcd0>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...fcd0>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...fcd0>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...fcd0>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 362, in test_create_api_key_unexpected_error
    response = await client.post("/api-keys", json={"name": "Test Key"})
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x108dcc360>
                     ‚îî <httpx.AsyncClient object at 0x10e8d3250>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x108dc3ce0>
                 ‚îî <httpx.AsyncClient object at 0x10e8d3250>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x108dae0d0>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x108dae0d0>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x108dc3ec0>
                 ‚îî <httpx.AsyncClient object at 0x10e8d3250>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x108dc3f60>
                     ‚îî <httpx.AsyncClient object at 0x10e8d3250>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x108dcc040>
                     ‚îî <httpx.AsyncClient object at 0x10e8d3250>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x108dcc0e0>
                     ‚îî <httpx.AsyncClient object at 0x10e8d3250>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x108b242c0>
                     ‚îî <httpx.ASGITransport object at 0x10e8d2f50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e7afba0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x105932ca0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e8bf990>
          ‚îî <httpx.ASGITransport object at 0x10e8d2f50>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e7afba0>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x105932ca0>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e7afba0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x105932ca0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e8c0f90>
          ‚îî <fastapi.applications.FastAPI object at 0x10e8bf990>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e7af920>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x105932ca0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e8c0fd0>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e8c0f90>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e7af920>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x105932ca0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8d0390>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e8bf910>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e8c0fd0>
          ‚îî <function wrap_app_handling_exceptions at 0x108a34f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e7afb00>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x105932ca0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <fastapi.routing.APIRouter object at 0x10e8bf910>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e7afb00>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x105932ca0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e8bf910>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e8bf910>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e7afb00>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x105932ca0>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ     ‚îî <function Route.handle at 0x108a36700>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e7afb00>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x105932ca0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e8a1c60>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e7afb00>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x105932ca0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8c1c50>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e7af740>
          ‚îî <function wrap_app_handling_exceptions at 0x108a34f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e7af420>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x105932ca0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e7af740>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8c1c50>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e8a1da0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x108a34860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140223, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function create_api_key at 0x10c721ee0>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10e877250>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 382, in create_api_key
    await enforce_rate_limit(redis, bucket=f"ak:create:{user_id}", limit=5, window=60)
          ‚îÇ                  ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e8bfcd0>,db=0>>>
          ‚îî <function enforce_rate_limit at 0x10c3dbd80>

  File "/Users/pablo/Desktop/toni/app/auth.py", line 246, in enforce_rate_limit
    local_res = await redis.eval(LUA_RATE_LIMIT, 1, local_key, str(window))
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ              ‚îî 60
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî 'rl:6132e8e512e36d5a54499518ce8f3f146307b77a3575291087f40f05c1ab1ae0'
                      ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal window = tonumber(ARGV[1])\nlocal now = redis.call('TIME')[1]\nlocal current = redis.call('INCR...
                      ‚îÇ     ‚îî <AsyncMock id='4539154640'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e8bfcd0>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Unexpected')

Exception: Unexpected
2025-12-07 20:43:43.519 | ERROR | no-id | Corrupted or invalid key data format for %s
2025-12-07 20:43:43.519 | WARNING | no-id | Missing key data for hash: %s
2025-12-07 20:43:43.533 | ERROR | no-id | Critical error listing API keys: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x105d95d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x105d95bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x106122810>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x106122810>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x105e5c040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x106122810>
           ‚îî <function wrap_session at 0x105e37f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x106122810>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x105e5c040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
    ‚îî <_pytest.config.Config object at 0x106122810>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_revoke_api_key_endpoint>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_list_api_keys_exception>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_list_api_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_list_api_keys_exception>, 'nextitem': <Function test_revoke_api_key_endpoint>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_list_api_keys_exception>, 'nextitem': <Function test_revoke_api_key_endpoint>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_list_api_keys_exception>, <Function test_revoke_api_key_endpoint>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_revoke_api_key_endpoint>
    ‚îÇ               ‚îî <Function test_list_api_keys_exception>
    ‚îî <function runtestprotocol at 0x105e37100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_list_api_keys_exception>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x105e374c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_list_api_keys_exception' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_list_api_keys_exception>
           ‚îî <function call_runtest_hook at 0x105e376a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x105e37920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e7af6a0>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_list_api_keys_exception>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_list_api_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x105e9e2a0>
    ‚îî <Function test_list_api_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_list_api_keys_exception>
    ‚îÇ    ‚îî <property object at 0x105db1a80>
    ‚îî <Function test_list_api_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_list_api_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e928a90>, 'app': <fastapi.applications.FastAPI object at 0x10e920dd0>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_list_api_keys_exception at 0x10e91d8a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-65' coro=<TestAPIKeyEndpoints.test_list_api_keys_exception() running at /Users/pablo/Desktop/toni/te...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x1070f2840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1070f27a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1070f45e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x1070893a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...07d0>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...07d0>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...07d0>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...07d0>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 462, in test_list_api_keys_exception
    response = await client.get("/api-keys")
                     ‚îÇ      ‚îî <function AsyncClient.get at 0x108dcc180>
                     ‚îî <httpx.AsyncClient object at 0x10e928a90>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1786, in get
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x108dc3ce0>
                 ‚îî <httpx.AsyncClient object at 0x10e928a90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x108dae0d0>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x108dae0d0>
                 ‚îÇ    ‚îÇ    ‚îî <Request('GET', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x108dc3ec0>
                 ‚îî <httpx.AsyncClient object at 0x10e928a90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x108dc3f60>
                     ‚îî <httpx.AsyncClient object at 0x10e928a90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x108dcc040>
                     ‚îî <httpx.AsyncClient object at 0x10e928a90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x108dcc0e0>
                     ‚îî <httpx.AsyncClient object at 0x10e928a90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x108b242c0>
                     ‚îî <httpx.ASGITransport object at 0x10e928990>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e5e9300>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e5e9a80>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e920dd0>
          ‚îî <httpx.ASGITransport object at 0x10e928990>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e5e9300>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e5e9a80>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e5e9300>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e5e9a80>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e926c90>
          ‚îî <fastapi.applications.FastAPI object at 0x10e920dd0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e5e8d60>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e5e9a80>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e9241d0>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e926c90>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e5e8d60>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e5e9a80>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e926c10>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e9203d0>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e9241d0>
          ‚îî <function wrap_app_handling_exceptions at 0x108a34f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e8d9e40>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e5e9a80>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <fastapi.routing.APIRouter object at 0x10e9203d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e8d9e40>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e5e9a80>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e9203d0>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e9203d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e8d9e40>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e5e9a80>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ     ‚îî <function Route.handle at 0x108a36700>
          ‚îî APIRoute(path='/api-keys', name='list_api_keys', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e8d9e40>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e5e9a80>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e8d8900>
          ‚îî APIRoute(path='/api-keys', name='list_api_keys', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e8d9e40>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e5e9a80>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e9243d0>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e8da340>
          ‚îî <function wrap_app_handling_exceptions at 0x108a34f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e8da480>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e5e9a80>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e8da340>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e9243d0>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e8d87c0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x108a34860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140223, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function list_api_keys at 0x10c722700>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10e927dd0>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 555, in list_api_keys
    api_key_hashes = await redis.smembers(f"api_keys:{client_hash}")
                           ‚îÇ     ‚îî <AsyncMock id='4539455440'>
                           ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e9207d0>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Redis failure')

Exception: Redis failure
2025-12-07 20:43:43.555 | WARNING | no-id | API key action
2025-12-07 20:43:43.555 | WARNING | no-id | API key revoked
2025-12-07 20:43:43.608 | INFO | no-id | API key rotated successfully
2025-12-07 20:43:43.674 | INFO | no-id | User data synchronization completed
2025-12-07 20:43:43.686 | WARNING | no-id | ADMIN ACTION: repair_data invoked
2025-12-07 20:43:43.712 | WARNING | no-id | ADMIN ACTION: repair_data invoked
2025-12-07 20:43:43.712 | ERROR | no-id | Critical error in data repair: %s
2025-12-07 20:43:43.725 | INFO | no-id | Plan synchronization completed
2025-12-07 20:43:43.740 | ERROR | no-id | Plan synchronization failed: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x105d95d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x105d95bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x106122810>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x106122810>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x105e5c040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x106122810>
           ‚îî <function wrap_session at 0x105e37f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x106122810>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x105e5c040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
    ‚îî <_pytest.config.Config object at 0x106122810>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_get_usage_endpoint_jwt>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_sync_plan_keys_exception>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_sync_plan_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_sync_plan_keys_exception>, 'nextitem': <Function test_get_usage_endpoint_jwt>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_sync_plan_keys_exception>, 'nextitem': <Function test_get_usage_endpoint_jwt>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_sync_plan_keys_exception>, <Function test_get_usage_endpoint_jwt>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_get_usage_endpoint_jwt>
    ‚îÇ               ‚îî <Function test_sync_plan_keys_exception>
    ‚îî <function runtestprotocol at 0x105e37100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_sync_plan_keys_exception>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x105e374c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_sync_plan_keys_exception' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_sync_plan_keys_exception>
           ‚îî <function call_runtest_hook at 0x105e376a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x105e37920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e681760>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_sync_plan_keys_exception>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_sync_plan_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x105e9e2a0>
    ‚îî <Function test_sync_plan_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_sync_plan_keys_exception>
    ‚îÇ    ‚îî <property object at 0x105db1a80>
    ‚îî <Function test_sync_plan_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_sync_plan_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e8fead0>, 'app': <fastapi.applications.FastAPI object at 0x10e956010>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_sync_plan_keys_exception at 0x10e9f0fe0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-140' coro=<TestAPIKeyEndpoints.test_sync_plan_keys_exception() running at /Users/pablo/Desktop/toni/...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x1070f2840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1070f27a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1070f45e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x1070893a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...4050>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...4050>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...4050>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...4050>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 803, in test_sync_plan_keys_exception
    response = await client.post("/api-keys/sync-plan-keys")
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x108dcc360>
                     ‚îî <httpx.AsyncClient object at 0x10e8fead0>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x108dc3ce0>
                 ‚îî <httpx.AsyncClient object at 0x10e8fead0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x108dae0d0>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x108dae0d0>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys/sync-plan-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x108dc3ec0>
                 ‚îî <httpx.AsyncClient object at 0x10e8fead0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x108dc3f60>
                     ‚îî <httpx.AsyncClient object at 0x10e8fead0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x108dcc040>
                     ‚îî <httpx.AsyncClient object at 0x10e8fead0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys/sync-plan-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x108dcc0e0>
                     ‚îî <httpx.AsyncClient object at 0x10e8fead0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys/sync-plan-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x108b242c0>
                     ‚îî <httpx.ASGITransport object at 0x10e8fec50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e9f1440>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9f13a0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e956010>
          ‚îî <httpx.ASGITransport object at 0x10e8fec50>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e9f1440>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9f13a0>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e9f1440>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9f13a0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e9eee10>
          ‚îî <fastapi.applications.FastAPI object at 0x10e956010>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e9f16c0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9f13a0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e9eedd0>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e9eee10>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e9f16c0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9f13a0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e9eed90>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e954090>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e9eedd0>
          ‚îî <function wrap_app_handling_exceptions at 0x108a34f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e9f18a0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9f13a0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îî <fastapi.routing.APIRouter object at 0x10e954090>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e9f18a0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9f13a0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e954090>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e954090>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e9f18a0>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9f13a0>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ     ‚îî <function Route.handle at 0x108a36700>
          ‚îî APIRoute(path='/api-keys/sync-plan-keys', name='sync_plan_keys', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e9f18a0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9f13a0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e971940>
          ‚îî APIRoute(path='/api-keys/sync-plan-keys', name='sync_plan_keys', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e9f18a0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9f13a0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e9eed50>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e9f1940>
          ‚îî <function wrap_app_handling_exceptions at 0x108a34f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e9f1a80>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9f13a0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e9f1940>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e9eed50>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e972020>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x108a34860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140223, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function sync_plan_keys at 0x10c722a20>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10e8e1890>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 717, in sync_plan_keys
    user_plan = await redis.hget(user_key, "plan")
                      ‚îÇ     ‚îÇ    ‚îî 'user:user123'
                      ‚îÇ     ‚îî <AsyncMock id='4540258448'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e954050>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Sync plan failed')

Exception: Sync plan failed
2025-12-07 20:43:43.810 | ERROR | no-id | Usage retrieval error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x105d95d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x105d95bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x106122810>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x106122810>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x105e5c040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x106122810>
           ‚îî <function wrap_session at 0x105e37f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x106122810>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x105e5c040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
    ‚îî <_pytest.config.Config object at 0x106122810>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=26 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_max_keys_per_user>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_get_usage_exception>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_get_usage_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_get_usage_exception>, 'nextitem': <Function test_max_keys_per_user>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_get_usage_exception>, 'nextitem': <Function test_max_keys_per_user>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_get_usage_exception>, <Function test_max_keys_per_user>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_max_keys_per_user>
    ‚îÇ               ‚îî <Function test_get_usage_exception>
    ‚îî <function runtestprotocol at 0x105e37100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_get_usage_exception>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x105e374c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_get_usage_exception' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_get_usage_exception>
           ‚îî <function call_runtest_hook at 0x105e376a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x105e37920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e8d8860>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_get_usage_exception>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_get_usage_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x105e9e2a0>
    ‚îî <Function test_get_usage_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_get_usage_exception>
    ‚îÇ    ‚îî <property object at 0x105db1a80>
    ‚îî <Function test_get_usage_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_get_usage_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10ec38c50>, 'app': <fastapi.applications.FastAPI object at 0x10ec263d0>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_get_usage_exception at 0x10e9f37e0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-165' coro=<TestAPIKeyEndpoints.test_get_usage_exception() running at /Users/pablo/Desktop/toni/tests...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x1070f2840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1070f27a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1070f45e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x1070893a0>
    ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future cancelled>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 935, in test_get_usage_exception
    response = await client.get("/api-keys/usage")
                     ‚îÇ      ‚îî <function AsyncClient.get at 0x108dcc180>
                     ‚îî <httpx.AsyncClient object at 0x10ec38c50>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1786, in get
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x108dc3ce0>
                 ‚îî <httpx.AsyncClient object at 0x10ec38c50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x108dae0d0>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x108dae0d0>
                 ‚îÇ    ‚îÇ    ‚îî <Request('GET', 'http://test/api-keys/usage')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x108dc3ec0>
                 ‚îî <httpx.AsyncClient object at 0x10ec38c50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x108dc3f60>
                     ‚îî <httpx.AsyncClient object at 0x10ec38c50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x108dcc040>
                     ‚îî <httpx.AsyncClient object at 0x10ec38c50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys/usage')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x108dcc0e0>
                     ‚îî <httpx.AsyncClient object at 0x10ec38c50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys/usage')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x108b242c0>
                     ‚îî <httpx.ASGITransport object at 0x10ec38950>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e91f380>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e91f100>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10ec263d0>
          ‚îî <httpx.ASGITransport object at 0x10ec38950>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e91f380>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e91f100>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e91f380>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e91f100>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10ec3b4d0>
          ‚îî <fastapi.applications.FastAPI object at 0x10ec263d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10ec1c400>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e91f100>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10ec3b490>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10ec3b4d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10ec1c400>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e91f100>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10ec3b450>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10ec25650>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10ec3b490>
          ‚îî <function wrap_app_handling_exceptions at 0x108a34f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ec1e660>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e91f100>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <fastapi.routing.APIRouter object at 0x10ec25650>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ec1e660>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e91f100>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10ec25650>>
          ‚îî <fastapi.routing.APIRouter object at 0x10ec25650>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ec1e660>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e91f100>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ     ‚îî <function Route.handle at 0x108a36700>
          ‚îî APIRoute(path='/api-keys/usage', name='get_usage', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ec1e660>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e91f100>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e9f2980>
          ‚îî APIRoute(path='/api-keys/usage', name='get_usage', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ec1e660>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e91f100>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10ec3b410>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10ec1e700>
          ‚îî <function wrap_app_handling_exceptions at 0x108a34f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ec1e520>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e91f100>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10ec1e700>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10ec3b410>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e9f2de0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x108a34860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140223, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function get_usage at 0x10c73cf40>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10ec38490>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 985, in get_usage
    plan_raw = await redis.hget(user_key, "plan")
                     ‚îÇ     ‚îÇ    ‚îî 'user:user123'
                     ‚îÇ     ‚îî <AsyncMock id='4542667408'>
                     ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10ec259d0>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Redis error')

Exception: Redis error
2025-12-07 20:43:48.378 | INFO | no-id | Login attempt for: %s
2025-12-07 20:43:48.380 | INFO | no-id | Login successful for user: fae2a25d-72f4-46f6-a1ae-92d37ae45891
2025-12-07 20:43:48.391 | INFO | no-id | Login attempt for: %s
2025-12-07 20:43:48.392 | WARNING | no-id | Login failed: Invalid password for tes***@***
2025-12-07 20:43:48.403 | INFO | no-id | Login attempt for: %s
2025-12-07 20:43:48.405 | INFO | no-id | Login successful for user: 57b495a6-6f27-41fb-95f3-7a66911b73fe
2025-12-07 20:43:48.405 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:48.406 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:43:48.417 | INFO | no-id | Login attempt for: %s
2025-12-07 20:43:48.419 | INFO | no-id | Login successful for user: 6fdc07b6-b385-496a-ac06-8087eee183b9
2025-12-07 20:43:48.420 | DEBUG | no-id | Validating refresh token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:48.421 | INFO | no-id | Token refreshed for user: 6fdc07b6... (new plan: PREMIUM)
2025-12-07 20:43:48.433 | INFO | no-id | Login attempt for: %s
2025-12-07 20:43:48.434 | INFO | no-id | Login successful for user: f8eae41d-ab13-4cbf-b26b-c299cecd18b3
2025-12-07 20:43:48.436 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:43:48.437 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:48.437 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:43:49.573 | WARNING | no-id | Attempt to verify password with empty hash
2025-12-07 20:43:49.575 | WARNING | no-id | Invalid password hash format
2025-12-07 20:43:49.587 | ERROR | no-id | Expected string for API key
2025-12-07 20:43:49.686 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:43:49.689 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:43:49.693 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:43:49.737 | INFO | no-id | Login attempt for: %s
2025-12-07 20:43:49.739 | INFO | no-id | Login successful for user: 09bf2442-2e99-477b-9eeb-a04abc896fa1
2025-12-07 20:43:49.830 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:43:49.833 | WARNING | no-id | Empty API Key (request: %s)
2025-12-07 20:43:49.836 | WARNING | no-id | Invalid API Key format (request: %s)
2025-12-07 20:43:49.840 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:43:49.843 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:43:50.069 | WARNING | no-id | Invalid password hash format
2025-12-07 20:43:50.166 | DEBUG | no-id | Decoding JWT token: fake_token...
2025-12-07 20:43:50.166 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes']
2025-12-07 20:43:50.170 | DEBUG | no-id | Auth attempt - X-API-Key: RJIGfwX7tP3nLKpLwSQaERKm_mQ1Epbdrpk273N8d0Q, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4544883024'>)
2025-12-07 20:43:50.174 | ERROR | no-id | API Key validation error (request: %s): %s
2025-12-07 20:43:50.221 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:43:50.226 | DEBUG | no-id | Decoding JWT token: fake_token...
2025-12-07 20:43:50.226 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:43:50.231 | DEBUG | no-id | Decoding JWT token: blacklisted_token...
2025-12-07 20:43:50.231 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'type']
2025-12-07 20:43:50.235 | DEBUG | no-id | Auth attempt - X-API-Key: test_key, Authorization present: False (request: test-123)
2025-12-07 20:43:50.239 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: <Mock name='mock.state.correlation_id' id='4544310864'>)
2025-12-07 20:43:50.239 | DEBUG | no-id | Bearer token present, length: 10, starts with: test_token...
2025-12-07 20:43:50.239 | DEBUG | no-id | Token validated successfully (request: <Mock name='mock.state.correlation_id' id='4544310864'>)
2025-12-07 20:43:50.242 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4546069520'>)
2025-12-07 20:43:50.242 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:43:50.324 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:43:50.328 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:43:50.332 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:43:50.335 | WARNING | no-id | Invalid API Key format (request: %s)
2025-12-07 20:43:50.338 | WARNING | no-id | Empty API Key (request: %s)
2025-12-07 20:43:50.343 | DEBUG | no-id | Decoding JWT token: fake_token...
2025-12-07 20:43:50.344 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:43:50.349 | DEBUG | no-id | Decoding JWT token: blacklisted_token...
2025-12-07 20:43:50.349 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'jti', 'type']
2025-12-07 20:43:50.353 | DEBUG | no-id | Auth attempt - X-API-Key: tFp9Rhl4MbDQNc8v13mUciv8ZkZ-EAtJgpfJyDyo_2Q, Authorization present: False (request: test-123)
2025-12-07 20:43:50.354 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:43:50.358 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: <Mock name='mock.state.correlation_id' id='4545721360'>)
2025-12-07 20:43:50.358 | DEBUG | no-id | Bearer token present, length: 8, starts with: token123...
2025-12-07 20:43:50.358 | DEBUG | no-id | Token validated successfully (request: <Mock name='mock.state.correlation_id' id='4545721360'>)
2025-12-07 20:43:50.394 | WARNING | no-id | Attempt to verify password with empty hash
2025-12-07 20:43:50.396 | WARNING | no-id | Attempt to verify password with empty hash
2025-12-07 20:43:50.398 | WARNING | no-id | Invalid password hash format
2025-12-07 20:43:50.400 | ERROR | no-id | Error verifying password: %s
2025-12-07 20:43:50.435 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:43:50.435 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:43:50.440 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:43:50.440 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:43:50.440 | WARNING | no-id | Token type mismatch: expected %s, got '%s'
2025-12-07 20:43:50.444 | DEBUG | no-id | Auth attempt - X-API-Key: test_key, Authorization present: True (request: test-123)
2025-12-07 20:43:50.448 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4544314768'>)
2025-12-07 20:43:50.448 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:43:50.504 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:43:50.507 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:43:50.537 | INFO | no-id | Login attempt for: %s
2025-12-07 20:43:50.539 | INFO | no-id | Login successful for user: 46e84bdd-3a05-4cdc-943c-ba21e306fb75
2025-12-07 20:43:50.552 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:50.553 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:43:50.554 | INFO | no-id | Plan updated: Redis=FREE vs Token=PlanEnum.PREMIUM. Using Redis.
2025-12-07 20:43:50.640 | DEBUG | no-id | Validating refresh token: valid_refresh_token...
2025-12-07 20:43:50.641 | INFO | no-id | Token refreshed for user: user123... (new plan: ENTERPRISE)
2025-12-07 20:43:50.645 | WARNING | no-id | Refresh request without token
2025-12-07 20:43:50.649 | DEBUG | no-id | Validating refresh token: revoked_token...
2025-12-07 20:43:50.650 | WARNING | no-id | Refresh token revoked: %s
2025-12-07 20:43:50.654 | DEBUG | no-id | Validating refresh token: access_token...
2025-12-07 20:43:50.655 | WARNING | no-id | Token type mismatch: expected 'refresh', got '%s'
2025-12-07 20:43:50.661 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:43:50.666 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:43:50.670 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:43:50.676 | INFO | no-id | API key rotated by admin: %s...
2025-12-07 20:43:50.725 | WARNING | no-id | Empty API Key (request: %s)
2025-12-07 20:43:50.725 | WARNING | no-id | Invalid API Key format (request: %s)
2025-12-07 20:43:50.727 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:43:50.728 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:43:50.732 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:43:50.732 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type']
2025-12-07 20:43:50.732 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:43:50.732 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type']
2025-12-07 20:43:50.736 | DEBUG | no-id | Auth attempt - X-API-Key: test_key, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4544527760'>)
2025-12-07 20:43:50.737 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: <Mock name='mock.state.correlation_id' id='4544527760'>)
2025-12-07 20:43:50.737 | DEBUG | no-id | Bearer token present, length: 5, starts with: token...
2025-12-07 20:43:50.737 | DEBUG | no-id | Token validated successfully (request: <Mock name='mock.state.correlation_id' id='4544527760'>)
2025-12-07 20:43:50.737 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4544527760'>)
2025-12-07 20:43:50.737 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:43:50.821 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:43:50.824 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:43:50.827 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:43:50.874 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:43:50.889 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:43:50.889 | ERROR | no-id | Webhook signature verification failed: Invalid signature
2025-12-07 20:43:50.905 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:43:50.905 | INFO | no-id | ‚úÖ Processing webhook: checkout.session.completed (evt_123)
2025-12-07 20:43:50.920 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:43:50.920 | WARNING | no-id | ‚ö†Ô∏è TEST MODE ONLY: Skipping Stripe signature validation
2025-12-07 20:43:50.920 | INFO | no-id | ‚úÖ Processing webhook: test.event (evt_dev)
2025-12-07 20:43:50.920 | INFO | no-id | Processing webhook event: test.event (evt_dev)
2025-12-07 20:43:50.921 | DEBUG | no-id | Acquired processing lock: processing:event:evt_dev
2025-12-07 20:43:50.921 | INFO | no-id | Unhandled event type: test.event
2025-12-07 20:43:50.922 | DEBUG | no-id | Released processing lock: processing:event:evt_dev
2025-12-07 20:43:50.936 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: unknown)
2025-12-07 20:43:50.936 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:43:50.952 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: unknown)
2025-12-07 20:43:50.953 | DEBUG | no-id | Bearer token present, length: 535, starts with: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:50.953 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:50.953 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:43:50.953 | DEBUG | no-id | Token validated successfully (request: unknown)
2025-12-07 20:43:50.968 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: unknown)
2025-12-07 20:43:50.968 | DEBUG | no-id | Bearer token present, length: 535, starts with: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:50.968 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:50.968 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:43:50.969 | DEBUG | no-id | Token validated successfully (request: unknown)
2025-12-07 20:43:50.985 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:50.986 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:43:50.986 | INFO | unknown | Creating checkout session for user user_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa, plan: PREMIUM
2025-12-07 20:43:50.988 | INFO | unknown | Checkout session created: cs_test_123
2025-12-07 20:43:51.006 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:51.007 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:43:51.022 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:51.022 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:43:51.023 | INFO | unknown | Creating checkout session for user user_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa, plan: PREMIUM
2025-12-07 20:43:51.038 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:51.038 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:43:51.040 | INFO | no-id | Plan changed to ENTERPRISE for user user_123, new tokens generated
2025-12-07 20:43:51.056 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:51.056 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:43:51.071 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:51.071 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:43:51.087 | INFO | no-id | Processing webhook event: test.event (evt_idempotent)
2025-12-07 20:43:51.088 | INFO | no-id | Event already processed: evt_idempotent
2025-12-07 20:43:51.102 | INFO | no-id | Processing webhook event: test.event (evt_busy)
2025-12-07 20:43:51.103 | INFO | no-id | Event already being processed: evt_busy
2025-12-07 20:43:51.132 | INFO | no-id | ‚úÖ Persisted user data: user_updated -> PREMIUM
2025-12-07 20:43:51.160 | INFO | no-id | Processing checkout.session.completed: cs_missing
2025-12-07 20:43:51.436 | ERROR | no-id | Stripe API error: Invalid API Key provided: sk_test_******************************************opqr
2025-12-07 20:43:51.437 | WARNING | no-id | Could not fetch session from Stripe (using webhook data): Invalid API Key provided: sk_test_******************************************opqr
2025-12-07 20:43:51.437 | ERROR | no-id | User ID not found in session metadata
2025-12-07 20:43:51.466 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:43:51.466 | ERROR | no-id | Webhook signature verification failed: Bad sig
2025-12-07 20:43:51.486 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:43:51.486 | ERROR | no-id | Webhook error: Invalid payload
2025-12-07 20:43:51.501 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:43:51.502 | ERROR | no-id | Webhook error: Boom
2025-12-07 20:43:51.511 | WARNING | no-id | Failed to parse JSON from key: Fail
2025-12-07 20:43:51.511 | WARNING | no-id | Failed to set JSON in key: Fail
2025-12-07 20:43:51.511 | WARNING | no-id | Redis list operation failed for key: Fail
2025-12-07 20:43:51.514 | WARNING | no-id | Failed to parse JSON from key: Expecting value: line 1 column 1 (char 0)
2025-12-07 20:43:51.541 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: unknown)
2025-12-07 20:43:51.541 | DEBUG | no-id | Bearer token present, length: 535, starts with: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:51.542 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:51.542 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:43:51.542 | DEBUG | no-id | Token validated successfully (request: unknown)
2025-12-07 20:43:51.543 | INFO | unknown | No user ID resolved, returning FREE plan
2025-12-07 20:43:51.558 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:43:51.558 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:43:51.559 | INFO | unknown | Creating checkout session for user user_123, plan: PREMIUM
2025-12-07 20:43:51.560 | ERROR | unknown | Stripe error creating checkout session: Stripe fail
2025-12-07 20:43:51.565 | WARNING | no-id | Could not acquire user lock for user_locked
2025-12-07 20:43:51.571 | WARNING | no-id | Stripe call attempt 1/3 failed: Connection fail
2025-12-07 20:43:52.173 | WARNING | no-id | Stripe call attempt 2/3 failed: Connection fail
2025-12-07 20:43:53.377 | WARNING | no-id | Stripe call attempt 3/3 failed: Connection fail
2025-12-07 20:43:53.389 | WARNING | no-id | Stripe call attempt 1/3 failed: Rate limit
2025-12-07 20:43:53.993 | WARNING | no-id | Stripe call attempt 2/3 failed: Rate limit
2025-12-07 20:43:55.251 | WARNING | no-id | Failed to check event processing status: evt_123
2025-12-07 20:43:55.258 | WARNING | no-id | Failed to mark event as processed: evt_123
2025-12-07 20:43:55.268 | INFO | no-id | Processing checkout.session.completed: sess_1
2025-12-07 20:43:55.269 | INFO | no-id | Session retrieved from Stripe successfully
2025-12-07 20:43:55.269 | INFO | no-id | ‚úÖ Subscription updated for user u1
2025-12-07 20:43:55.277 | INFO | no-id | Processing checkout.session.completed: sess_1
2025-12-07 20:43:55.451 | ERROR | no-id | Stripe API error: Invalid API Key provided: sk_test_******************************************opqr
2025-12-07 20:43:55.452 | WARNING | no-id | Could not fetch session from Stripe (using webhook data): Invalid API Key provided: sk_test_******************************************opqr
2025-12-07 20:43:55.452 | ERROR | no-id | User ID not found in session metadata
2025-12-07 20:43:55.476 | WARNING | no-id | Failed to get user from customer cus_1: Fail
2025-12-07 20:43:55.483 | INFO | no-id | ‚úÖ Persisted user data: u1 -> ENTERPRISE
2025-12-07 20:43:55.489 | INFO | no-id | ‚úÖ Updated subscription for user u1: PREMIUM
2025-12-07 20:43:55.497 | WARNING | no-id | Could not acquire user lock for u1
2025-12-07 20:43:55.502 | WARNING | no-id | Could not fetch subscription from Stripe, using webhook data: Stripe fail
2025-12-07 20:43:55.503 | INFO | no-id | ‚úÖ Updated subscription for user u1: PREMIUM
2025-12-07 20:43:55.508 | WARNING | no-id | Could not fetch subscription from Stripe, using webhook data: Fatal
2025-12-07 20:43:55.508 | ERROR | no-id | Failed to update user subscription u1: Parse fail
2025-12-07 20:43:55.514 | INFO | no-id | ‚úÖ Updated subscription for user u1: PREMIUM
2025-12-07 20:43:55.517 | DEBUG | no-id | Acquired test lock: test:lock
2025-12-07 20:43:55.518 | DEBUG | no-id | Released test lock: test:lock
2025-12-07 20:43:55.521 | DEBUG | no-id | Acquired test lock: test:lock2
2025-12-07 20:43:55.522 | DEBUG | no-id | Could not acquire test lock: test:lock2
2025-12-07 20:43:55.522 | DEBUG | no-id | Released test lock: test:lock2
2025-12-07 20:43:55.525 | DEBUG | no-id | Acquired test lock: test:lock3
2025-12-07 20:43:55.526 | DEBUG | no-id | Released test lock: test:lock3
2025-12-07 20:43:59.585 | INFO | no-id | Updated billing date for user u1
2025-12-07 20:43:59.595 | DEBUG | no-id | Warming cache for domain: example.com
2025-12-07 20:43:59.596 | INFO | no-id | ‚úÖ Warmed cache for example.com (TTL: 300s)
2025-12-07 20:43:59.600 | DEBUG | no-id | Warming cache for domain: invalid.com
2025-12-07 20:43:59.600 | WARNING | no-id | No MX records found for invalid.com
2025-12-07 20:43:59.604 | DEBUG | no-id | Warming cache for domain: error.com
2025-12-07 20:43:59.604 | ERROR | no-id | Failed to warm cache for error.com: DNS Error
2025-12-07 20:43:59.611 | INFO | no-id | üî• Warming Tier 1: 3 domains (TTL: 60s)
2025-12-07 20:43:59.612 | DEBUG | no-id | Warming cache for domain: d1.com
2025-12-07 20:43:59.613 | INFO | no-id | ‚úÖ Warmed cache for d1.com (TTL: 60s)
2025-12-07 20:43:59.613 | DEBUG | no-id | Warming cache for domain: d2.com
2025-12-07 20:43:59.613 | INFO | no-id | ‚úÖ Warmed cache for d2.com (TTL: 60s)
2025-12-07 20:43:59.715 | DEBUG | no-id | Warming cache for domain: d3.com
2025-12-07 20:43:59.715 | INFO | no-id | ‚úÖ Warmed cache for d3.com (TTL: 60s)
2025-12-07 20:43:59.715 | INFO | no-id | ‚úÖ Tier 1 warming complete: 3/3 successful
2025-12-07 20:43:59.721 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 20:43:59.722 | INFO | no-id | üî• Warming Tier 1: 1 domains (TTL: 60s)
2025-12-07 20:43:59.722 | DEBUG | no-id | Warming cache for domain: d1.com
2025-12-07 20:43:59.723 | INFO | no-id | ‚úÖ Warmed cache for d1.com (TTL: 60s)
2025-12-07 20:43:59.723 | INFO | no-id | ‚úÖ Tier 1 warming complete: 1/1 successful
2025-12-07 20:43:59.729 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 20:43:59.730 | INFO | no-id | ‚úÖ Cache warming complete in 0.00s | Total warmed: 0 | Failures: 0
2025-12-07 20:43:59.735 | INFO | no-id | üî• Starting background cache warming
2025-12-07 20:43:59.735 | INFO | no-id | ‚úÖ Background cache warming started
2025-12-07 20:43:59.836 | INFO | no-id | Stopping background cache warming
2025-12-07 20:43:59.837 | INFO | no-id | ‚úÖ Background cache warming stopped
2025-12-07 20:43:59.875 | DEBUG | no-id | Warming cache for domain: example.com
2025-12-07 20:43:59.875 | ERROR | no-id | Failed to warm cache for example.com: 'str' object has no attribute 'preference'
2025-12-07 20:43:59.878 | DEBUG | no-id | Warming cache for domain: example.com
2025-12-07 20:43:59.879 | WARNING | no-id | No MX records found for example.com
2025-12-07 20:43:59.881 | DEBUG | no-id | Skipping domain example.com due to repeated failures
2025-12-07 20:43:59.884 | DEBUG | no-id | Warming cache for domain: example.com
2025-12-07 20:43:59.884 | ERROR | no-id | Failed to warm cache for example.com: DNS error
2025-12-07 20:43:59.888 | DEBUG | no-id | Warming cache for domain: example.com
2025-12-07 20:43:59.888 | ERROR | no-id | Failed to warm cache for example.com: 'str' object has no attribute 'preference'
2025-12-07 20:43:59.891 | INFO | no-id | üî• Warming Tier 1: 2 domains (TTL: 3600s)
2025-12-07 20:43:59.891 | INFO | no-id | ‚úÖ Tier 1 warming complete: 2/2 successful
2025-12-07 20:43:59.894 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 20:43:59.897 | INFO | no-id | üî• Warming Tier 1: 1 domains (TTL: 3600s)
2025-12-07 20:43:59.897 | INFO | no-id | ‚úÖ Tier 1 warming complete: 1/1 successful
2025-12-07 20:43:59.899 | INFO | no-id | üî• Warming Tier 1: 2 domains (TTL: 3600s)
2025-12-07 20:43:59.899 | ERROR | no-id | Task failed: Error
2025-12-07 20:43:59.900 | INFO | no-id | ‚úÖ Tier 1 warming complete: 1/2 successful
2025-12-07 20:43:59.902 | INFO | no-id | üî• Warming Tier 1: 5 domains (TTL: 3600s)
2025-12-07 20:44:00.138 | INFO | no-id | ‚úÖ Tier 1 warming complete: 5/5 successful
2025-12-07 20:44:00.144 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 20:44:00.144 | INFO | no-id | ‚úÖ Cache warming complete in 0.00s | Total warmed: 0 | Failures: 0
2025-12-07 20:44:00.156 | INFO | no-id | Stopping background cache warming
2025-12-07 20:44:00.156 | INFO | no-id | ‚úÖ Background cache warming stopped
2025-12-07 20:44:00.174 | INFO | no-id | Created circuit breaker: TEST_SERVICE Service
2025-12-07 20:44:00.176 | INFO | no-id | Created circuit breaker: SMTP Service
2025-12-07 20:44:00.177 | INFO | no-id | Created circuit breaker: TEST_FAILURES Service
2025-12-07 20:44:00.178 | DEBUG | no-id | Circuit breaker failure: TEST_FAILURES Service
2025-12-07 20:44:00.178 | DEBUG | no-id | Circuit breaker failure: TEST_FAILURES Service
2025-12-07 20:44:00.178 | DEBUG | no-id | Circuit breaker failure: TEST_FAILURES Service
2025-12-07 20:44:00.178 | DEBUG | no-id | Circuit breaker failure: TEST_FAILURES Service
2025-12-07 20:44:00.178 | DEBUG | no-id | Circuit breaker failure: TEST_FAILURES Service
2025-12-07 20:44:00.178 | WARNING | no-id | Circuit breaker state change: TEST_FAILURES Service
2025-12-07 20:44:00.180 | INFO | no-id | Created circuit breaker: STATS_TEST Service
2025-12-07 20:44:00.182 | INFO | no-id | Created circuit breaker: RESET_TEST Service
2025-12-07 20:44:00.182 | DEBUG | no-id | Circuit breaker failure: RESET_TEST Service
2025-12-07 20:44:00.182 | DEBUG | no-id | Circuit breaker failure: RESET_TEST Service
2025-12-07 20:44:00.182 | DEBUG | no-id | Circuit breaker failure: RESET_TEST Service
2025-12-07 20:44:00.182 | DEBUG | no-id | Circuit breaker failure: RESET_TEST Service
2025-12-07 20:44:00.182 | DEBUG | no-id | Circuit breaker failure: RESET_TEST Service
2025-12-07 20:44:00.182 | WARNING | no-id | Circuit breaker state change: RESET_TEST Service
2025-12-07 20:44:00.183 | WARNING | no-id | Circuit breaker state change: RESET_TEST Service
2025-12-07 20:44:00.183 | INFO | no-id | Manually reset circuit breaker: reset_test
2025-12-07 20:44:00.185 | INFO | no-id | Created circuit breaker: DNS Resolution
2025-12-07 20:44:01.738 | INFO | no-id | Login attempt for: %s
2025-12-07 20:44:01.740 | INFO | no-id | Login successful for user: 7f571790-21d5-4131-8df8-44ba5d0b72ca
2025-12-07 20:44:01.741 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:44:01.741 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:44:01.742 | DEBUG | no-id | Creating API key | User: %s | Plan: %s | Name: %s
2025-12-07 20:44:01.743 | INFO | no-id | API key created successfully
2025-12-07 20:44:01.744 | DEBUG | no-id | Auth attempt - X-API-Key: BaET7LqUsP1ImMf3Qf5I51jn-FYJsVkNyG_Ak2161QA, Authorization present: False (request: unknown)
2025-12-07 20:44:01.744 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:44:01.748 | INFO | no-id | Email validation | User: 7f571790-21d5-4131-8df8-44ba5d0b72ca | Plan: FREE | Email: check@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:01.748 | INFO | no-id | a9e7e17e-1d77-4020-bc8d-af3018458c06 | Pre-validation spam trap check | Email: check@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:01.748 | INFO | no-id | Validation a9e7e17e-1d77-4020-bc8d-af3018458c06 completed successfully
2025-12-07 20:44:01.749 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: unknown)
2025-12-07 20:44:01.749 | DEBUG | no-id | Bearer token present, length: 456, starts with: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:44:01.749 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:44:01.749 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:44:01.750 | DEBUG | no-id | Token validated successfully (request: unknown)
2025-12-07 20:44:01.751 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:44:01.752 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:44:01.752 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:44:01.760 | WARNING | no-id | SMTP configuration incomplete. Email notifications will be logged instead of sent.
2025-12-07 20:44:01.770 | INFO | no-id | Email sent successfully to recipient@test.com
2025-12-07 20:44:01.778 | INFO | no-id | Email sent successfully to recipient@test.com
2025-12-07 20:44:01.784 | WARNING | no-id | SMTP configuration incomplete. Email notifications will be logged instead of sent.
2025-12-07 20:44:01.785 | ERROR | no-id | Error loading email template: File not found
2025-12-07 20:44:01.789 | WARNING | no-id | SMTP configuration incomplete. Email notifications will be logged instead of sent.
2025-12-07 20:44:01.815 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:01.815 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:01.819 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:01.819 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:01.823 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:01.824 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:01.827 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:01.827 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:01.831 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:01.831 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:01.840 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:44:01.841 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:44:01.841 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:44:01.841 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:44:01.843 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:01.843 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:01.843 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:01.845 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:01.845 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:02.281 | DEBUG | no-id | Retry 1/5 for eventual_success sleeping 0.011s due to Temporary failure
2025-12-07 20:44:02.293 | DEBUG | no-id | Retrying eventual_success attempt 2/5
2025-12-07 20:44:02.293 | DEBUG | no-id | Retry 2/5 for eventual_success sleeping 0.023s due to Temporary failure
2025-12-07 20:44:02.317 | DEBUG | no-id | Retrying eventual_success attempt 3/5
2025-12-07 20:44:02.320 | DEBUG | no-id | Retry 1/3 for always_fail sleeping 0.013s due to Always fails
2025-12-07 20:44:02.334 | DEBUG | no-id | Retrying always_fail attempt 2/3
2025-12-07 20:44:02.334 | DEBUG | no-id | Retry 2/3 for always_fail sleeping 0.026s due to Always fails
2025-12-07 20:44:02.361 | DEBUG | no-id | Retrying always_fail attempt 3/3
2025-12-07 20:44:02.361 | DEBUG | no-id | Retry 3/3 for always_fail sleeping 0.049s due to Always fails
2025-12-07 20:44:02.415 | DEBUG | no-id | Retry 1/5 for fail_twice sleeping 0.010s due to Fail 1
2025-12-07 20:44:02.427 | DEBUG | no-id | Retrying fail_twice attempt 2/5
2025-12-07 20:44:02.427 | DEBUG | no-id | Retry 2/5 for fail_twice sleeping 0.026s due to Fail 2
2025-12-07 20:44:02.454 | DEBUG | no-id | Retrying fail_twice attempt 3/5
2025-12-07 20:44:02.458 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:02.464 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:02.466 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.304s due to Primary failed
2025-12-07 20:44:02.773 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:44:02.774 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.566s due to Primary failed
2025-12-07 20:44:03.343 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:44:03.345 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.136s due to Primary failed
2025-12-07 20:44:04.483 | DEBUG | no-id | Async MX primary failed for example.com: Primary failed
2025-12-07 20:44:04.495 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:04.500 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.309s due to No MX
2025-12-07 20:44:04.812 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:44:04.814 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.603s due to No MX
2025-12-07 20:44:05.418 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:44:05.420 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.267s due to No MX
2025-12-07 20:44:06.690 | DEBUG | no-id | Async MX primary failed for example.com: No MX
2025-12-07 20:44:06.693 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.271s due to No MX fallback
2025-12-07 20:44:06.966 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:44:06.968 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.594s due to No MX fallback
2025-12-07 20:44:07.564 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:44:07.566 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.137s due to No MX fallback
2025-12-07 20:44:08.705 | DEBUG | no-id | Fallback MX query failed for example.com: No MX fallback
2025-12-07 20:44:08.744 | DEBUG | no-id | [SPF] Found for example.com: v=spf1 include:_spf.google.com ~all...
2025-12-07 20:44:08.751 | DEBUG | no-id | SPF check failed for example.com: DNS error
2025-12-07 20:44:09.937 | WARNING | no-id | SMTP check timeout for %s
2025-12-07 20:44:09.950 | ERROR | no-id | SMTP wrapper unexpected error: %s
2025-12-07 20:44:09.996 | ERROR | no-id | Sync domain check failed for %s: %s
2025-12-07 20:44:10.006 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:10.010 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:10.014 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:10.019 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136950.0196311 due to 5 failures
2025-12-07 20:44:10.021 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136950.021661 due to 5 failures
2025-12-07 20:44:10.021 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136950.021854 due to 6 failures
2025-12-07 20:44:10.021 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136950.02196 due to 7 failures
2025-12-07 20:44:10.022 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136950.0220501 due to 8 failures
2025-12-07 20:44:10.022 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136950.022134 due to 9 failures
2025-12-07 20:44:10.022 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136950.022217 due to 10 failures
2025-12-07 20:44:10.024 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:10.026 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:10.028 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.262s due to Primary failed
2025-12-07 20:44:10.292 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:44:10.293 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.609s due to Primary failed
2025-12-07 20:44:10.905 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:44:10.906 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.133s due to Primary failed
2025-12-07 20:44:12.042 | DEBUG | no-id | Async TXT primary failed for example.com: Primary failed
2025-12-07 20:44:12.053 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:12.154 | DEBUG | no-id | WHOIS blocked for 1.2.3.4 by circuit breaker
2025-12-07 20:44:12.157 | DEBUG | no-id | [SPF] Found for example.com: v=spf1 include:_spf.google.com ~all...
2025-12-07 20:44:12.160 | DEBUG | no-id | SPF check failed for example.com: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.162 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:44:12.163 | INFO | no-id | [DKIM] Found for example.com with selector 'google'
2025-12-07 20:44:12.165 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:44:12.165 | DEBUG | no-id | [DKIM] Selector 'google' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.166 | DEBUG | no-id | [DKIM] Trying selector 'default' for example.com: default._domainkey.example.com
2025-12-07 20:44:12.166 | DEBUG | no-id | [DKIM] Selector 'default' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.166 | DEBUG | no-id | [DKIM] Trying selector 'selector1' for example.com: selector1._domainkey.example.com
2025-12-07 20:44:12.166 | DEBUG | no-id | [DKIM] Selector 'selector1' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.166 | DEBUG | no-id | [DKIM] Trying selector 'selector2' for example.com: selector2._domainkey.example.com
2025-12-07 20:44:12.167 | DEBUG | no-id | [DKIM] Selector 'selector2' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.167 | DEBUG | no-id | [DKIM] Trying selector 's1' for example.com: s1._domainkey.example.com
2025-12-07 20:44:12.167 | DEBUG | no-id | [DKIM] Selector 's1' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.167 | DEBUG | no-id | [DKIM] Trying selector 's2' for example.com: s2._domainkey.example.com
2025-12-07 20:44:12.167 | DEBUG | no-id | [DKIM] Selector 's2' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.168 | DEBUG | no-id | [DKIM] Trying selector 's201709' for example.com: s201709._domainkey.example.com
2025-12-07 20:44:12.168 | DEBUG | no-id | [DKIM] Selector 's201709' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.168 | DEBUG | no-id | [DKIM] Trying selector 's202003' for example.com: s202003._domainkey.example.com
2025-12-07 20:44:12.168 | DEBUG | no-id | [DKIM] Selector 's202003' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.168 | DEBUG | no-id | [DKIM] Trying selector 'k1' for example.com: k1._domainkey.example.com
2025-12-07 20:44:12.169 | DEBUG | no-id | [DKIM] Selector 'k1' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.169 | DEBUG | no-id | [DKIM] Trying selector 'k2' for example.com: k2._domainkey.example.com
2025-12-07 20:44:12.169 | DEBUG | no-id | [DKIM] Selector 'k2' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.169 | DEBUG | no-id | [DKIM] Trying selector 'mail' for example.com: mail._domainkey.example.com
2025-12-07 20:44:12.169 | DEBUG | no-id | [DKIM] Selector 'mail' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.170 | DEBUG | no-id | [DKIM] Trying selector 'dkim' for example.com: dkim._domainkey.example.com
2025-12-07 20:44:12.170 | DEBUG | no-id | [DKIM] Selector 'dkim' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.170 | DEBUG | no-id | [DKIM] Trying selector 'amazonses' for example.com: amazonses._domainkey.example.com
2025-12-07 20:44:12.170 | DEBUG | no-id | [DKIM] Selector 'amazonses' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.170 | DEBUG | no-id | [DKIM] Trying selector 'sendgrid' for example.com: sendgrid._domainkey.example.com
2025-12-07 20:44:12.171 | DEBUG | no-id | [DKIM] Selector 'sendgrid' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.171 | DEBUG | no-id | [DKIM] No selectors found for example.com
2025-12-07 20:44:12.174 | DEBUG | no-id | [DMARC] Found for example.com: v=DMARC1; p=reject; rua=mailto:dmarc@example.com...
2025-12-07 20:44:12.176 | DEBUG | no-id | DMARC check failed for example.com: The DNS response does not contain an answer to the question.
2025-12-07 20:44:12.389 | DEBUG | no-id | Concurrency limit for PREMIUM: 5
2025-12-07 20:44:12.390 | DEBUG | no-id | Current concurrency for user123: 5, limit: 5
2025-12-07 20:44:12.394 | DEBUG | no-id | Concurrency limit for PREMIUM: 5
2025-12-07 20:44:12.394 | DEBUG | no-id | Current concurrency for user123: 2, limit: 5
2025-12-07 20:44:12.397 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:44:13.572 | ERROR | no-id | API Exception | Type: %s | Status: %d | Detail: %s | Trace: %s | Plan: %s | Path: %s
2025-12-07 20:44:13.575 | ERROR | no-id | API Exception | Type: %s | Status: %d | Detail: %s | Trace: %s | Plan: %s | Path: %s
2025-12-07 20:44:13.578 | DEBUG | no-id | No Bearer token in Authorization header
2025-12-07 20:44:13.580 | WARNING | no-id | Validation Error | Count: 1 | Details: [{"field": "body.email", "message": "Invalid email", "type": "value_error", "input": "invalid-email"}] | Trace: test-correlation-123 | Plan: UNKNOWN | Path: /test
2025-12-07 20:44:13.583 | DEBUG | no-id | Extracted plan from JWT: ENTERPRISE
2025-12-07 20:44:13.583 | WARNING | no-id | Validation Error | Count: 1 | Details: [{"field": "body.test", "message": "error", "type": "error", "input": null}] | Trace: test-correlation-123 | Plan: ENTERPRISE | Path: /test
2025-12-07 20:44:13.586 | CRITICAL | no-id | Unhandled Exception | Type: %s | Detail: %s | Trace: %s | Plan: %s | Path: %s
%s
2025-12-07 20:44:13.590 | CRITICAL | no-id | Unhandled Exception | Type: %s | Detail: %s | Trace: %s | Plan: %s | Path: %s
%s
2025-12-07 20:44:13.597 | DEBUG | no-id | Could not extract plan from JWT: DecodeError: Not enough segments
2025-12-07 20:44:13.603 | DEBUG | no-id | Failed to record error metrics: Metrics error
2025-12-07 20:44:13.608 | INFO | no-id | Exception handlers registered successfully
2025-12-07 20:44:14.092 | DEBUG | no-id | Stored idempotent response
2025-12-07 20:44:14.094 | INFO | no-id | Idempotent response returned
2025-12-07 20:44:14.094 | INFO | no-id | Idempotent replay for key: 9557c43e-40dd-4ee8-af76-3dfdea17ff74
2025-12-07 20:44:14.106 | DEBUG | no-id | Stored idempotent response
2025-12-07 20:44:14.107 | WARNING | no-id | Idempotency key reused with different request body
2025-12-07 20:44:14.140 | INFO | no-id | Email validation | User: user123 | Plan: PREMIUM | Email: test@example.com | Env: production | SMTP: True | DNS: False
2025-12-07 20:44:14.141 | INFO | no-id | a6e8d20a-bdd6-44e2-9fee-6dd6d9d80907 | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:44:14.141 | INFO | no-id | Validation a6e8d20a-bdd6-44e2-9fee-6dd6d9d80907 completed successfully
2025-12-07 20:44:14.171 | INFO | no-id | Batch validation requested by: user123 (Plan: PREMIUM)
2025-12-07 20:44:14.172 | INFO | no-id | Usage incremented for user123: -> 2
2025-12-07 20:44:14.188 | INFO | no-id | Upload requested by: user123 - File: test.csv
2025-12-07 20:44:14.190 | INFO | no-id | Usage incremented for user123: -> 2
2025-12-07 20:44:14.222 | INFO | no-id | Job queued 1499cc3e-9f25-4395-8623-7707a32a1c90 by user-123
2025-12-07 20:44:14.228 | INFO | no-id | Job queued 1132e6f2-affd-4722-b199-641aa3f14e70 by user-123
2025-12-07 20:44:14.241 | INFO | no-id | Job queued 29f8d5aa-832c-443d-8c1c-3d385d4b996d by free-user
2025-12-07 20:44:14.396 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: unknown)
2025-12-07 20:44:14.397 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:44:14.628 | INFO | no-id | GET /test ‚Üí 200
2025-12-07 20:44:14.675 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: True | DNS: True
2025-12-07 20:44:14.675 | INFO | no-id | 7d9b46c5-1f0d-4be2-9df0-7405a80608e7 | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:14.675 | INFO | no-id | 443ab40f-f2a1-4d2d-a417-419fba026237 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:14.678 | INFO | no-id | 443ab40f-f2a1-4d2d-a417-419fba026237 | Checking spam traps...
2025-12-07 20:44:14.678 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:14.678 | INFO | no-id | 443ab40f-f2a1-4d2d-a417-419fba026237 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:14.678 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:14.679 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:18.142 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:18.143 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:18.143 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:18.143 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:18.143775Z', 'risk_level': 'low'}
2025-12-07 20:44:18.144 | INFO | no-id | [443ab40f-f2a1-4d2d-a417-419fba026237] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:18.144 | INFO | no-id | 443ab40f-f2a1-4d2d-a417-419fba026237 | Analyzing provider...
2025-12-07 20:44:18.144 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:18.144 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:18.144 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:18.145 | INFO | no-id | [443ab40f-f2a1-4d2d-a417-419fba026237] Role email check | Is role: False | Type: None
2025-12-07 20:44:18.145 | DEBUG | no-id | [SMTP] Starting validation for user@example.com on mx.example.com
2025-12-07 20:44:18.146 | INFO | no-id | [SMTP] Validation complete: user@example.com | Exists: True | Host: mx.example.com
2025-12-07 20:44:18.146 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:18.146 | ERROR | no-id | [443ab40f-f2a1-4d2d-a417-419fba026237] Catch-all detection error: detect_catch_all_domain() got an unexpected keyword argument 'redis'
2025-12-07 20:44:18.147 | INFO | no-id | [443ab40f-f2a1-4d2d-a417-419fba026237] Unified risk scoring | Score: 0/100 | Level: low | Confidence: 50.00% | Factors: {}
2025-12-07 20:44:18.147 | INFO | no-id | Validation 443ab40f-f2a1-4d2d-a417-419fba026237 completed successfully
2025-12-07 20:44:18.148 | INFO | no-id | Validation 7d9b46c5-1f0d-4be2-9df0-7405a80608e7 completed successfully
2025-12-07 20:44:18.172 | INFO | no-id | Batch validation requested by: user-1 (Plan: PREMIUM)
2025-12-07 20:44:18.173 | INFO | no-id | 940b88c8-945e-4c46-8507-4e5f7c52a88d | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:18.176 | INFO | no-id | 940b88c8-945e-4c46-8507-4e5f7c52a88d | Checking spam traps...
2025-12-07 20:44:18.177 | INFO | no-id | 940b88c8-945e-4c46-8507-4e5f7c52a88d | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:18.177 | INFO | no-id | 1097d807-6662-40ed-a12c-10c456bf8acd | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:18.180 | INFO | no-id | 1097d807-6662-40ed-a12c-10c456bf8acd | Checking spam traps...
2025-12-07 20:44:18.180 | INFO | no-id | 1097d807-6662-40ed-a12c-10c456bf8acd | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:18.180 | INFO | no-id | 4f1efa03-e689-49ee-bdec-78bc0ee8280d | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:18.183 | INFO | no-id | 4f1efa03-e689-49ee-bdec-78bc0ee8280d | Checking spam traps...
2025-12-07 20:44:18.184 | INFO | no-id | 4f1efa03-e689-49ee-bdec-78bc0ee8280d | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:18.184 | INFO | no-id | 46cd9e06-0080-48c9-bd6c-a850ff8ef0e7 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:18.187 | INFO | no-id | 46cd9e06-0080-48c9-bd6c-a850ff8ef0e7 | Checking spam traps...
2025-12-07 20:44:18.187 | INFO | no-id | 46cd9e06-0080-48c9-bd6c-a850ff8ef0e7 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:18.187 | INFO | no-id | edb0f984-2911-4138-828a-512f14338609 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:18.190 | INFO | no-id | edb0f984-2911-4138-828a-512f14338609 | Checking spam traps...
2025-12-07 20:44:18.190 | INFO | no-id | edb0f984-2911-4138-828a-512f14338609 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:18.190 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:18.191 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:18.191 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:18.191 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:18.191 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:18.191 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:18.208 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:18.223 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:18.237 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:18.252 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:18.799 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:18.800 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:18.800 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:18.801 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:18.800891Z', 'risk_level': 'low'}
2025-12-07 20:44:18.801 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:18.801 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:18.802 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:18.802 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:18.802178Z', 'risk_level': 'low'}
2025-12-07 20:44:18.803 | INFO | no-id | [1097d807-6662-40ed-a12c-10c456bf8acd] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:18.803 | INFO | no-id | 1097d807-6662-40ed-a12c-10c456bf8acd | Analyzing provider...
2025-12-07 20:44:18.803 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:18.804 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:18.804 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:18.804 | INFO | no-id | [1097d807-6662-40ed-a12c-10c456bf8acd] Role email check | Is role: False | Type: None
2025-12-07 20:44:18.805 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:18.805 | DEBUG | no-id | [1097d807-6662-40ed-a12c-10c456bf8acd] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:18.805 | INFO | no-id | [1097d807-6662-40ed-a12c-10c456bf8acd] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:18.806 | INFO | no-id | Validation 1097d807-6662-40ed-a12c-10c456bf8acd completed successfully
2025-12-07 20:44:18.806 | INFO | no-id | [4f1efa03-e689-49ee-bdec-78bc0ee8280d] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:18.806 | INFO | no-id | 4f1efa03-e689-49ee-bdec-78bc0ee8280d | Analyzing provider...
2025-12-07 20:44:18.806 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:18.806 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:18.807 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:18.807 | INFO | no-id | [4f1efa03-e689-49ee-bdec-78bc0ee8280d] Role email check | Is role: False | Type: None
2025-12-07 20:44:18.807 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:18.807 | DEBUG | no-id | [4f1efa03-e689-49ee-bdec-78bc0ee8280d] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:18.807 | INFO | no-id | [4f1efa03-e689-49ee-bdec-78bc0ee8280d] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:18.808 | INFO | no-id | Validation 4f1efa03-e689-49ee-bdec-78bc0ee8280d completed successfully
2025-12-07 20:44:18.808 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:18.808 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:18.808 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:18.809 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:18.808871Z', 'risk_level': 'low'}
2025-12-07 20:44:18.809 | INFO | no-id | [940b88c8-945e-4c46-8507-4e5f7c52a88d] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:18.809 | INFO | no-id | 940b88c8-945e-4c46-8507-4e5f7c52a88d | Analyzing provider...
2025-12-07 20:44:18.809 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:18.809 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:18.810 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:18.810 | INFO | no-id | [940b88c8-945e-4c46-8507-4e5f7c52a88d] Role email check | Is role: False | Type: None
2025-12-07 20:44:18.810 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:18.810 | DEBUG | no-id | [940b88c8-945e-4c46-8507-4e5f7c52a88d] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:18.810 | INFO | no-id | [940b88c8-945e-4c46-8507-4e5f7c52a88d] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:18.811 | INFO | no-id | Validation 940b88c8-945e-4c46-8507-4e5f7c52a88d completed successfully
2025-12-07 20:44:19.531 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:19.532 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:19.532 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:19.533 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:19.532690Z', 'risk_level': 'low'}
2025-12-07 20:44:19.533 | INFO | no-id | [edb0f984-2911-4138-828a-512f14338609] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:19.534 | INFO | no-id | edb0f984-2911-4138-828a-512f14338609 | Analyzing provider...
2025-12-07 20:44:19.534 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:19.534 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:19.534 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:19.535 | INFO | no-id | [edb0f984-2911-4138-828a-512f14338609] Role email check | Is role: False | Type: None
2025-12-07 20:44:19.535 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:19.535 | DEBUG | no-id | [edb0f984-2911-4138-828a-512f14338609] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:19.535 | INFO | no-id | [edb0f984-2911-4138-828a-512f14338609] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:19.536 | INFO | no-id | Validation edb0f984-2911-4138-828a-512f14338609 completed successfully
2025-12-07 20:44:19.551 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:19.551 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:19.551 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:19.552 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:19.551865Z', 'risk_level': 'low'}
2025-12-07 20:44:19.552 | INFO | no-id | [46cd9e06-0080-48c9-bd6c-a850ff8ef0e7] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:19.552 | INFO | no-id | 46cd9e06-0080-48c9-bd6c-a850ff8ef0e7 | Analyzing provider...
2025-12-07 20:44:19.553 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:19.553 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:19.553 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:19.554 | INFO | no-id | [46cd9e06-0080-48c9-bd6c-a850ff8ef0e7] Role email check | Is role: False | Type: None
2025-12-07 20:44:19.554 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:19.554 | DEBUG | no-id | [46cd9e06-0080-48c9-bd6c-a850ff8ef0e7] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:19.554 | INFO | no-id | [46cd9e06-0080-48c9-bd6c-a850ff8ef0e7] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:19.555 | INFO | no-id | Validation 46cd9e06-0080-48c9-bd6c-a850ff8ef0e7 completed successfully
2025-12-07 20:44:19.556 | ERROR | no-id | Error incrementing usage for user-1: 'FakeRedis' object has no attribute 'incrby'
2025-12-07 20:44:19.589 | INFO | no-id | Upload requested by: user-1 - File: emails.csv
2025-12-07 20:44:19.589 | INFO | no-id | 5e13b128-90e1-43cb-bfe3-d67e43b68bc9 | Format validation passed | Email: u***@e***.com
2025-12-07 20:44:19.593 | INFO | no-id | 5e13b128-90e1-43cb-bfe3-d67e43b68bc9 | Checking spam traps...
2025-12-07 20:44:19.593 | INFO | no-id | 5e13b128-90e1-43cb-bfe3-d67e43b68bc9 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:19.593 | INFO | no-id | d7326f71-5fb9-439b-8b12-c9cabbc209f8 | Format validation passed | Email: u***@e***.com
2025-12-07 20:44:19.597 | INFO | no-id | d7326f71-5fb9-439b-8b12-c9cabbc209f8 | Checking spam traps...
2025-12-07 20:44:19.597 | INFO | no-id | d7326f71-5fb9-439b-8b12-c9cabbc209f8 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:19.597 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for u***@e***.com
2025-12-07 20:44:19.597 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for u***@e***.com
2025-12-07 20:44:19.597 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:19.615 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:19.963 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:19.964 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:19.964 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:19.965 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:19.964574Z', 'risk_level': 'low'}
2025-12-07 20:44:19.965 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:19.965 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:19.965 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:19.966 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:19.965842Z', 'risk_level': 'low'}
2025-12-07 20:44:19.966 | INFO | no-id | [d7326f71-5fb9-439b-8b12-c9cabbc209f8] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:19.966 | INFO | no-id | d7326f71-5fb9-439b-8b12-c9cabbc209f8 | Analyzing provider...
2025-12-07 20:44:19.966 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:19.967 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:19.967 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:19.967 | INFO | no-id | [d7326f71-5fb9-439b-8b12-c9cabbc209f8] Role email check | Is role: False | Type: None
2025-12-07 20:44:19.968 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:19.968 | DEBUG | no-id | [d7326f71-5fb9-439b-8b12-c9cabbc209f8] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:19.968 | INFO | no-id | [d7326f71-5fb9-439b-8b12-c9cabbc209f8] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:19.969 | INFO | no-id | Validation d7326f71-5fb9-439b-8b12-c9cabbc209f8 completed successfully
2025-12-07 20:44:19.969 | INFO | no-id | [5e13b128-90e1-43cb-bfe3-d67e43b68bc9] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:19.970 | INFO | no-id | 5e13b128-90e1-43cb-bfe3-d67e43b68bc9 | Analyzing provider...
2025-12-07 20:44:19.970 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:19.970 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:19.970 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:19.970 | INFO | no-id | [5e13b128-90e1-43cb-bfe3-d67e43b68bc9] Role email check | Is role: False | Type: None
2025-12-07 20:44:19.970 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:19.971 | DEBUG | no-id | [5e13b128-90e1-43cb-bfe3-d67e43b68bc9] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:19.971 | INFO | no-id | [5e13b128-90e1-43cb-bfe3-d67e43b68bc9] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:19.971 | INFO | no-id | Validation 5e13b128-90e1-43cb-bfe3-d67e43b68bc9 completed successfully
2025-12-07 20:44:19.972 | ERROR | no-id | Error incrementing usage for user-1: 'FakeRedis' object has no attribute 'incrby'
2025-12-07 20:44:20.029 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user1@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:20.030 | DEBUG | no-id | Spam trap check cache hit for user1@example.com
2025-12-07 20:44:20.030 | INFO | no-id | 9d46a2c1-1f7a-48b6-b593-2530e0fc2052 | Pre-validation spam trap check | Email: user1@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:20.030 | INFO | no-id | 51964068-e3ce-4c71-bee9-2ab25bdb76d3 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:20.033 | INFO | no-id | 51964068-e3ce-4c71-bee9-2ab25bdb76d3 | Checking spam traps...
2025-12-07 20:44:20.033 | DEBUG | no-id | Spam trap check cache hit for user1@example.com
2025-12-07 20:44:20.033 | INFO | no-id | 51964068-e3ce-4c71-bee9-2ab25bdb76d3 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:20.034 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user2@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:20.034 | DEBUG | no-id | Spam trap check cache hit for user2@example.com
2025-12-07 20:44:20.034 | INFO | no-id | 98e433ce-1869-4c41-a42f-9e6709a7f915 | Pre-validation spam trap check | Email: user2@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:20.034 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:20.034 | INFO | no-id | 18b18bab-49a6-4d9a-b178-3fa56324f81e | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:20.037 | INFO | no-id | 18b18bab-49a6-4d9a-b178-3fa56324f81e | Checking spam traps...
2025-12-07 20:44:20.037 | DEBUG | no-id | Spam trap check cache hit for user2@example.com
2025-12-07 20:44:20.037 | INFO | no-id | 18b18bab-49a6-4d9a-b178-3fa56324f81e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:20.038 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:20.038 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:20.054 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:20.278 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:20.279 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:20.279 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:20.279 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:20.279583Z', 'risk_level': 'low'}
2025-12-07 20:44:20.280 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:20.280 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:20.280 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:20.280 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:20.280583Z', 'risk_level': 'low'}
2025-12-07 20:44:20.280 | INFO | no-id | [18b18bab-49a6-4d9a-b178-3fa56324f81e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:20.281 | INFO | no-id | 18b18bab-49a6-4d9a-b178-3fa56324f81e | Analyzing provider...
2025-12-07 20:44:20.281 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:20.281 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:20.281 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:20.281 | INFO | no-id | [18b18bab-49a6-4d9a-b178-3fa56324f81e] Role email check | Is role: False | Type: None
2025-12-07 20:44:20.282 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:20.282 | DEBUG | no-id | [18b18bab-49a6-4d9a-b178-3fa56324f81e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:20.282 | INFO | no-id | [18b18bab-49a6-4d9a-b178-3fa56324f81e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:20.282 | INFO | no-id | Validation 18b18bab-49a6-4d9a-b178-3fa56324f81e completed successfully
2025-12-07 20:44:20.283 | INFO | no-id | [51964068-e3ce-4c71-bee9-2ab25bdb76d3] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:20.283 | INFO | no-id | 51964068-e3ce-4c71-bee9-2ab25bdb76d3 | Analyzing provider...
2025-12-07 20:44:20.283 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:20.283 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:20.283 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:20.284 | INFO | no-id | [51964068-e3ce-4c71-bee9-2ab25bdb76d3] Role email check | Is role: False | Type: None
2025-12-07 20:44:20.284 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:20.284 | DEBUG | no-id | [51964068-e3ce-4c71-bee9-2ab25bdb76d3] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:20.284 | INFO | no-id | [51964068-e3ce-4c71-bee9-2ab25bdb76d3] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:20.284 | INFO | no-id | Validation 51964068-e3ce-4c71-bee9-2ab25bdb76d3 completed successfully
2025-12-07 20:44:20.285 | INFO | no-id | Validation 98e433ce-1869-4c41-a42f-9e6709a7f915 completed successfully
2025-12-07 20:44:20.285 | INFO | no-id | Validation 9d46a2c1-1f7a-48b6-b593-2530e0fc2052 completed successfully
2025-12-07 20:44:20.307 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:20.308 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:20.308 | INFO | no-id | 142d297e-06b7-436a-963f-93b205cd8e86 | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:20.308 | INFO | no-id | ea558387-c9ee-416d-9a6a-7589b3e4ad8c | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:20.311 | INFO | no-id | ea558387-c9ee-416d-9a6a-7589b3e4ad8c | Checking spam traps...
2025-12-07 20:44:20.312 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:20.312 | INFO | no-id | ea558387-c9ee-416d-9a6a-7589b3e4ad8c | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:20.312 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:20.312 | WARNING | no-id | [HIBP] Cache error: boom
2025-12-07 20:44:20.312 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:20.653 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:20.654 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:20.655 | WARNING | no-id | [HIBP] Cache save failed: 'Broken' object has no attribute 'setex'
2025-12-07 20:44:20.655 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:20.655416Z', 'risk_level': 'low'}
2025-12-07 20:44:20.656 | INFO | no-id | [ea558387-c9ee-416d-9a6a-7589b3e4ad8c] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:20.656 | INFO | no-id | ea558387-c9ee-416d-9a6a-7589b3e4ad8c | Analyzing provider...
2025-12-07 20:44:20.657 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:20.657 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:20.658 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:20.658 | INFO | no-id | [ea558387-c9ee-416d-9a6a-7589b3e4ad8c] Role email check | Is role: False | Type: None
2025-12-07 20:44:20.658 | DEBUG | no-id | Cache check failed: boom
2025-12-07 20:44:20.659 | DEBUG | no-id | [ea558387-c9ee-416d-9a6a-7589b3e4ad8c] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:20.659 | INFO | no-id | [ea558387-c9ee-416d-9a6a-7589b3e4ad8c] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:20.660 | INFO | no-id | Validation ea558387-c9ee-416d-9a6a-7589b3e4ad8c completed successfully
2025-12-07 20:44:20.661 | DEBUG | no-id | Error cleaning up concurrency limits: boom
2025-12-07 20:44:20.661 | INFO | no-id | Validation 142d297e-06b7-436a-963f-93b205cd8e86 completed successfully
2025-12-07 20:44:20.688 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:20.689 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:20.689 | INFO | no-id | d62ac887-b0b0-49b9-9bae-7250b9018392 | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:20.690 | INFO | no-id | ac13396f-85a8-4bcb-8319-230d61c71fe2 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:20.693 | INFO | no-id | ac13396f-85a8-4bcb-8319-230d61c71fe2 | Checking spam traps...
2025-12-07 20:44:20.693 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:20.694 | INFO | no-id | ac13396f-85a8-4bcb-8319-230d61c71fe2 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:20.694 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:20.694 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:20.959 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:20.960 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:20.960 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:20.961 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:20.960637Z', 'risk_level': 'low'}
2025-12-07 20:44:20.961 | INFO | no-id | [ac13396f-85a8-4bcb-8319-230d61c71fe2] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:20.962 | INFO | no-id | ac13396f-85a8-4bcb-8319-230d61c71fe2 | Analyzing provider...
2025-12-07 20:44:20.962 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:20.962 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:20.963 | ERROR | no-id | Unexpected error validating domain example.com: DNS timeout
2025-12-07 20:44:20.964 | INFO | no-id | Validation d62ac887-b0b0-49b9-9bae-7250b9018392 completed successfully
2025-12-07 20:44:20.993 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: True | DNS: False
2025-12-07 20:44:20.994 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:20.994 | INFO | no-id | b62ee87d-c3c3-4e37-b9cd-b9a8269402c1 | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:20.994 | INFO | no-id | 10af4d58-4f42-40c7-af2c-38009ac23b32 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:20.998 | INFO | no-id | 10af4d58-4f42-40c7-af2c-38009ac23b32 | Checking spam traps...
2025-12-07 20:44:20.999 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:20.999 | INFO | no-id | 10af4d58-4f42-40c7-af2c-38009ac23b32 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:20.999 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:20.999 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:22.296 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:22.297 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:22.298 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:22.298 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:22.298452Z', 'risk_level': 'low'}
2025-12-07 20:44:22.299 | INFO | no-id | [10af4d58-4f42-40c7-af2c-38009ac23b32] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:22.300 | INFO | no-id | 10af4d58-4f42-40c7-af2c-38009ac23b32 | Analyzing provider...
2025-12-07 20:44:22.300 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:22.300 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:22.301 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:22.301 | INFO | no-id | [10af4d58-4f42-40c7-af2c-38009ac23b32] Role email check | Is role: False | Type: None
2025-12-07 20:44:22.302 | DEBUG | no-id | [SMTP] Starting validation for user@example.com on mx.example.com
2025-12-07 20:44:22.302 | ERROR | no-id | [SMTP] Error for user@example.com: ECONNREFUSED
2025-12-07 20:44:22.303 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:22.303 | ERROR | no-id | [10af4d58-4f42-40c7-af2c-38009ac23b32] Catch-all detection error: detect_catch_all_domain() got an unexpected keyword argument 'redis'
2025-12-07 20:44:22.304 | INFO | no-id | [10af4d58-4f42-40c7-af2c-38009ac23b32] Unified risk scoring | Score: 0/100 | Level: low | Confidence: 50.00% | Factors: {}
2025-12-07 20:44:22.305 | INFO | no-id | Validation 10af4d58-4f42-40c7-af2c-38009ac23b32 completed successfully
2025-12-07 20:44:22.306 | INFO | no-id | Validation b62ee87d-c3c3-4e37-b9cd-b9a8269402c1 completed successfully
2025-12-07 20:44:22.353 | INFO | no-id | Upload requested by: user-1 - File: malicious.zip
2025-12-07 20:44:22.425 | INFO | no-id | Upload requested by: user-1 - File: bomb.zip
2025-12-07 20:44:22.439 | INFO | no-id | Batch validation requested by: user-1 (Plan: FREE)
2025-12-07 20:44:22.452 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:22.452 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:22.452 | INFO | no-id | 12739d8f-f689-43e7-9464-b03c0bf1cf07 | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:22.453 | INFO | no-id | e05a5bdc-8fc9-432f-9198-45fdbcad6b27 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:22.455 | INFO | no-id | e05a5bdc-8fc9-432f-9198-45fdbcad6b27 | Checking spam traps...
2025-12-07 20:44:22.456 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:22.456 | INFO | no-id | e05a5bdc-8fc9-432f-9198-45fdbcad6b27 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:22.456 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:22.456 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:22.708 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:22.709 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:22.709 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:22.710 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:22.709946Z', 'risk_level': 'low'}
2025-12-07 20:44:22.710 | INFO | no-id | [e05a5bdc-8fc9-432f-9198-45fdbcad6b27] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:22.710 | INFO | no-id | e05a5bdc-8fc9-432f-9198-45fdbcad6b27 | Analyzing provider...
2025-12-07 20:44:22.711 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:22.711 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:22.711 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:22.711 | INFO | no-id | [e05a5bdc-8fc9-432f-9198-45fdbcad6b27] Role email check | Is role: False | Type: None
2025-12-07 20:44:22.712 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:22.712 | DEBUG | no-id | [e05a5bdc-8fc9-432f-9198-45fdbcad6b27] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:22.712 | INFO | no-id | [e05a5bdc-8fc9-432f-9198-45fdbcad6b27] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:22.713 | INFO | no-id | Validation e05a5bdc-8fc9-432f-9198-45fdbcad6b27 completed successfully
2025-12-07 20:44:22.713 | INFO | no-id | Validation 12739d8f-f689-43e7-9464-b03c0bf1cf07 completed successfully
2025-12-07 20:44:22.716 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:22.716 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:22.716 | INFO | no-id | 7f0dd2ec-d97d-41ec-8236-1b9f32470bca | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:22.717 | INFO | no-id | 4417aa99-04ee-49c5-bb30-0c55b1ab217b | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:22.722 | INFO | no-id | 4417aa99-04ee-49c5-bb30-0c55b1ab217b | Checking spam traps...
2025-12-07 20:44:22.723 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:22.723 | INFO | no-id | 4417aa99-04ee-49c5-bb30-0c55b1ab217b | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:22.723 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:22.723 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:22.977 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:22.977 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:22.977 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:22.978 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:22.977936Z', 'risk_level': 'low'}
2025-12-07 20:44:22.978 | INFO | no-id | [4417aa99-04ee-49c5-bb30-0c55b1ab217b] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:22.978 | INFO | no-id | 4417aa99-04ee-49c5-bb30-0c55b1ab217b | Analyzing provider...
2025-12-07 20:44:22.979 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:22.979 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:22.979 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:22.979 | INFO | no-id | [4417aa99-04ee-49c5-bb30-0c55b1ab217b] Role email check | Is role: False | Type: None
2025-12-07 20:44:22.980 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:22.980 | DEBUG | no-id | [4417aa99-04ee-49c5-bb30-0c55b1ab217b] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:22.980 | INFO | no-id | [4417aa99-04ee-49c5-bb30-0c55b1ab217b] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:22.981 | INFO | no-id | Validation 4417aa99-04ee-49c5-bb30-0c55b1ab217b completed successfully
2025-12-07 20:44:22.981 | INFO | no-id | Validation 7f0dd2ec-d97d-41ec-8236-1b9f32470bca completed successfully
2025-12-07 20:44:22.984 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:22.984 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:22.985 | INFO | no-id | 4acf2ef3-a09c-4ff5-bbc5-8086e1c2fa6c | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:22.985 | INFO | no-id | 5e24f415-e5f6-469f-aa4b-8758f4d2e876 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:22.991 | INFO | no-id | 5e24f415-e5f6-469f-aa4b-8758f4d2e876 | Checking spam traps...
2025-12-07 20:44:22.991 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:22.991 | INFO | no-id | 5e24f415-e5f6-469f-aa4b-8758f4d2e876 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:22.991 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:22.992 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.323 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:23.323 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:23.324 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:23.324 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:23.324175Z', 'risk_level': 'low'}
2025-12-07 20:44:23.324 | INFO | no-id | [5e24f415-e5f6-469f-aa4b-8758f4d2e876] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:23.325 | INFO | no-id | 5e24f415-e5f6-469f-aa4b-8758f4d2e876 | Analyzing provider...
2025-12-07 20:44:23.325 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:23.325 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:23.325 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:23.325 | INFO | no-id | [5e24f415-e5f6-469f-aa4b-8758f4d2e876] Role email check | Is role: False | Type: None
2025-12-07 20:44:23.326 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:23.326 | DEBUG | no-id | [5e24f415-e5f6-469f-aa4b-8758f4d2e876] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:23.326 | INFO | no-id | [5e24f415-e5f6-469f-aa4b-8758f4d2e876] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:23.327 | INFO | no-id | Validation 5e24f415-e5f6-469f-aa4b-8758f4d2e876 completed successfully
2025-12-07 20:44:23.327 | INFO | no-id | Validation 4acf2ef3-a09c-4ff5-bbc5-8086e1c2fa6c completed successfully
2025-12-07 20:44:23.357 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user0@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:23.357 | DEBUG | no-id | Spam trap check cache hit for user0@example.com
2025-12-07 20:44:23.357 | INFO | no-id | fa0a8118-b635-4f30-8fca-d3f411ac2d3b | Pre-validation spam trap check | Email: user0@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:23.358 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user1@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:23.358 | DEBUG | no-id | Spam trap check cache hit for user1@example.com
2025-12-07 20:44:23.358 | INFO | no-id | 0c961496-f6f5-4fe2-831e-4ab4c87b06b0 | Pre-validation spam trap check | Email: user1@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:23.358 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user3@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:23.358 | DEBUG | no-id | Spam trap check cache hit for user3@example.com
2025-12-07 20:44:23.359 | INFO | no-id | 6ab4e406-b24b-42ed-9180-7a9de4665b5c | Pre-validation spam trap check | Email: user3@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:23.359 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user2@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:23.359 | DEBUG | no-id | Spam trap check cache hit for user2@example.com
2025-12-07 20:44:23.359 | INFO | no-id | af021e9e-f73e-451b-b7be-86c7af167e67 | Pre-validation spam trap check | Email: user2@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:23.359 | INFO | no-id | 0d361386-d547-45a6-a5ec-b35f5a1a553c | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.363 | INFO | no-id | 0d361386-d547-45a6-a5ec-b35f5a1a553c | Checking spam traps...
2025-12-07 20:44:23.363 | DEBUG | no-id | Spam trap check cache hit for user0@example.com
2025-12-07 20:44:23.363 | INFO | no-id | 0d361386-d547-45a6-a5ec-b35f5a1a553c | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.363 | INFO | no-id | 05fefb3b-afc3-4e9e-b6c6-73c9c8bf4247 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.367 | INFO | no-id | 05fefb3b-afc3-4e9e-b6c6-73c9c8bf4247 | Checking spam traps...
2025-12-07 20:44:23.367 | DEBUG | no-id | Spam trap check cache hit for user1@example.com
2025-12-07 20:44:23.367 | INFO | no-id | 05fefb3b-afc3-4e9e-b6c6-73c9c8bf4247 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.368 | INFO | no-id | 7bda5177-7c6a-455a-a5f5-d1072121a275 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.371 | INFO | no-id | 7bda5177-7c6a-455a-a5f5-d1072121a275 | Checking spam traps...
2025-12-07 20:44:23.371 | DEBUG | no-id | Spam trap check cache hit for user3@example.com
2025-12-07 20:44:23.371 | INFO | no-id | 7bda5177-7c6a-455a-a5f5-d1072121a275 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.371 | INFO | no-id | cfb073a9-db02-421b-8a90-ef5d57e2e9b3 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.374 | INFO | no-id | cfb073a9-db02-421b-8a90-ef5d57e2e9b3 | Checking spam traps...
2025-12-07 20:44:23.374 | DEBUG | no-id | Spam trap check cache hit for user2@example.com
2025-12-07 20:44:23.375 | INFO | no-id | cfb073a9-db02-421b-8a90-ef5d57e2e9b3 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.375 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user4@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:23.375 | DEBUG | no-id | Spam trap check cache hit for user4@example.com
2025-12-07 20:44:23.375 | INFO | no-id | 1e7abeb0-eee9-42c6-98c3-2812735822a4 | Pre-validation spam trap check | Email: user4@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:23.375 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.375 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.376 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.376 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.376 | INFO | no-id | b885a512-5260-4fce-ad99-cb3c4d33c2d4 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.379 | INFO | no-id | b885a512-5260-4fce-ad99-cb3c4d33c2d4 | Checking spam traps...
2025-12-07 20:44:23.379 | DEBUG | no-id | Spam trap check cache hit for user4@example.com
2025-12-07 20:44:23.379 | INFO | no-id | b885a512-5260-4fce-ad99-cb3c4d33c2d4 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.379 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.379 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.396 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.411 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.425 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.440 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.700 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:23.700 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:23.701 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:23.702 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:23.701456Z', 'risk_level': 'low'}
2025-12-07 20:44:23.702 | INFO | no-id | [05fefb3b-afc3-4e9e-b6c6-73c9c8bf4247] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:23.702 | INFO | no-id | 05fefb3b-afc3-4e9e-b6c6-73c9c8bf4247 | Analyzing provider...
2025-12-07 20:44:23.703 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:23.703 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:23.704 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:23.704 | INFO | no-id | [05fefb3b-afc3-4e9e-b6c6-73c9c8bf4247] Role email check | Is role: False | Type: None
2025-12-07 20:44:23.704 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:23.705 | DEBUG | no-id | [05fefb3b-afc3-4e9e-b6c6-73c9c8bf4247] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:23.705 | INFO | no-id | [05fefb3b-afc3-4e9e-b6c6-73c9c8bf4247] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:23.706 | INFO | no-id | Validation 05fefb3b-afc3-4e9e-b6c6-73c9c8bf4247 completed successfully
2025-12-07 20:44:23.707 | INFO | no-id | Validation 0c961496-f6f5-4fe2-831e-4ab4c87b06b0 completed successfully
2025-12-07 20:44:23.717 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:23.717 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:23.717 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:23.717 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:23.717558Z', 'risk_level': 'low'}
2025-12-07 20:44:23.718 | INFO | no-id | [0d361386-d547-45a6-a5ec-b35f5a1a553c] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:23.719 | INFO | no-id | 0d361386-d547-45a6-a5ec-b35f5a1a553c | Analyzing provider...
2025-12-07 20:44:23.719 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:23.719 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:23.719 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:23.720 | INFO | no-id | [0d361386-d547-45a6-a5ec-b35f5a1a553c] Role email check | Is role: False | Type: None
2025-12-07 20:44:23.720 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:23.720 | DEBUG | no-id | [0d361386-d547-45a6-a5ec-b35f5a1a553c] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:23.720 | INFO | no-id | [0d361386-d547-45a6-a5ec-b35f5a1a553c] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:23.721 | INFO | no-id | Validation 0d361386-d547-45a6-a5ec-b35f5a1a553c completed successfully
2025-12-07 20:44:23.721 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:23.721 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:23.721 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:23.722 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:23.721981Z', 'risk_level': 'low'}
2025-12-07 20:44:23.722 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:23.722 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:23.722 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:23.722 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:23.722632Z', 'risk_level': 'low'}
2025-12-07 20:44:23.723 | INFO | no-id | Validation fa0a8118-b635-4f30-8fca-d3f411ac2d3b completed successfully
2025-12-07 20:44:23.723 | INFO | no-id | [7bda5177-7c6a-455a-a5f5-d1072121a275] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:23.723 | INFO | no-id | 7bda5177-7c6a-455a-a5f5-d1072121a275 | Analyzing provider...
2025-12-07 20:44:23.723 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:23.724 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:23.724 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:23.724 | INFO | no-id | [7bda5177-7c6a-455a-a5f5-d1072121a275] Role email check | Is role: False | Type: None
2025-12-07 20:44:23.724 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:23.724 | DEBUG | no-id | [7bda5177-7c6a-455a-a5f5-d1072121a275] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:23.724 | INFO | no-id | [7bda5177-7c6a-455a-a5f5-d1072121a275] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:23.725 | INFO | no-id | Validation 7bda5177-7c6a-455a-a5f5-d1072121a275 completed successfully
2025-12-07 20:44:23.725 | INFO | no-id | [b885a512-5260-4fce-ad99-cb3c4d33c2d4] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:23.725 | INFO | no-id | b885a512-5260-4fce-ad99-cb3c4d33c2d4 | Analyzing provider...
2025-12-07 20:44:23.725 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:23.725 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:23.726 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:23.726 | INFO | no-id | [b885a512-5260-4fce-ad99-cb3c4d33c2d4] Role email check | Is role: False | Type: None
2025-12-07 20:44:23.726 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:23.726 | DEBUG | no-id | [b885a512-5260-4fce-ad99-cb3c4d33c2d4] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:23.726 | INFO | no-id | [b885a512-5260-4fce-ad99-cb3c4d33c2d4] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:23.727 | INFO | no-id | Validation b885a512-5260-4fce-ad99-cb3c4d33c2d4 completed successfully
2025-12-07 20:44:23.727 | INFO | no-id | Validation 6ab4e406-b24b-42ed-9180-7a9de4665b5c completed successfully
2025-12-07 20:44:23.727 | INFO | no-id | Validation 1e7abeb0-eee9-42c6-98c3-2812735822a4 completed successfully
2025-12-07 20:44:23.774 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:23.774 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:23.774 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:23.775 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:23.774830Z', 'risk_level': 'low'}
2025-12-07 20:44:23.775 | INFO | no-id | [cfb073a9-db02-421b-8a90-ef5d57e2e9b3] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:23.775 | INFO | no-id | cfb073a9-db02-421b-8a90-ef5d57e2e9b3 | Analyzing provider...
2025-12-07 20:44:23.775 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:23.775 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:23.776 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:23.776 | INFO | no-id | [cfb073a9-db02-421b-8a90-ef5d57e2e9b3] Role email check | Is role: False | Type: None
2025-12-07 20:44:23.776 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:23.776 | DEBUG | no-id | [cfb073a9-db02-421b-8a90-ef5d57e2e9b3] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:23.776 | INFO | no-id | [cfb073a9-db02-421b-8a90-ef5d57e2e9b3] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:23.777 | INFO | no-id | Validation cfb073a9-db02-421b-8a90-ef5d57e2e9b3 completed successfully
2025-12-07 20:44:23.777 | INFO | no-id | Validation af021e9e-f73e-451b-b7be-86c7af167e67 completed successfully
2025-12-07 20:44:23.806 | INFO | no-id | Batch validation requested by: user-1 (Plan: ENTERPRISE)
2025-12-07 20:44:23.807 | INFO | no-id | e0a8dade-efde-4681-9952-89a3be1cc9dc | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.811 | INFO | no-id | e0a8dade-efde-4681-9952-89a3be1cc9dc | Checking spam traps...
2025-12-07 20:44:23.811 | DEBUG | no-id | Spam trap check cache hit for user0@example.com
2025-12-07 20:44:23.811 | INFO | no-id | e0a8dade-efde-4681-9952-89a3be1cc9dc | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.811 | INFO | no-id | 03ceec05-9315-40db-87a3-06ad41ce6f9a | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.814 | INFO | no-id | 03ceec05-9315-40db-87a3-06ad41ce6f9a | Checking spam traps...
2025-12-07 20:44:23.814 | DEBUG | no-id | Spam trap check cache hit for user1@example.com
2025-12-07 20:44:23.815 | INFO | no-id | 03ceec05-9315-40db-87a3-06ad41ce6f9a | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.815 | INFO | no-id | b61493ac-07e0-45c0-9a82-03d5dfa350fc | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.818 | INFO | no-id | b61493ac-07e0-45c0-9a82-03d5dfa350fc | Checking spam traps...
2025-12-07 20:44:23.818 | DEBUG | no-id | Spam trap check cache hit for user2@example.com
2025-12-07 20:44:23.819 | INFO | no-id | b61493ac-07e0-45c0-9a82-03d5dfa350fc | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.819 | INFO | no-id | 0202d091-9bb0-4dbe-b395-27624c39b3e5 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.822 | INFO | no-id | 0202d091-9bb0-4dbe-b395-27624c39b3e5 | Checking spam traps...
2025-12-07 20:44:23.822 | DEBUG | no-id | Spam trap check cache hit for user3@example.com
2025-12-07 20:44:23.822 | INFO | no-id | 0202d091-9bb0-4dbe-b395-27624c39b3e5 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.822 | INFO | no-id | 3b4b6513-9fda-4944-975d-5c832c5ca1f2 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.825 | INFO | no-id | 3b4b6513-9fda-4944-975d-5c832c5ca1f2 | Checking spam traps...
2025-12-07 20:44:23.825 | DEBUG | no-id | Spam trap check cache hit for user4@example.com
2025-12-07 20:44:23.826 | INFO | no-id | 3b4b6513-9fda-4944-975d-5c832c5ca1f2 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.826 | INFO | no-id | e3254df1-b7e7-4d25-852d-e29d8f9c4306 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.829 | INFO | no-id | e3254df1-b7e7-4d25-852d-e29d8f9c4306 | Checking spam traps...
2025-12-07 20:44:23.829 | INFO | no-id | e3254df1-b7e7-4d25-852d-e29d8f9c4306 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.829 | INFO | no-id | dd0f063f-e92c-4aa3-9261-2e1b41344a6e | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.832 | INFO | no-id | dd0f063f-e92c-4aa3-9261-2e1b41344a6e | Checking spam traps...
2025-12-07 20:44:23.832 | INFO | no-id | dd0f063f-e92c-4aa3-9261-2e1b41344a6e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.832 | INFO | no-id | a052ed65-f3be-49dd-b536-0a2be60eb109 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.835 | INFO | no-id | a052ed65-f3be-49dd-b536-0a2be60eb109 | Checking spam traps...
2025-12-07 20:44:23.835 | INFO | no-id | a052ed65-f3be-49dd-b536-0a2be60eb109 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.835 | INFO | no-id | 727d4b77-647d-4f71-b24a-03fe02ebde5a | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.838 | INFO | no-id | 727d4b77-647d-4f71-b24a-03fe02ebde5a | Checking spam traps...
2025-12-07 20:44:23.838 | INFO | no-id | 727d4b77-647d-4f71-b24a-03fe02ebde5a | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.838 | INFO | no-id | 2531e440-2d8c-4781-8e9b-f0936a50f8b9 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:23.841 | INFO | no-id | 2531e440-2d8c-4781-8e9b-f0936a50f8b9 | Checking spam traps...
2025-12-07 20:44:23.841 | INFO | no-id | 2531e440-2d8c-4781-8e9b-f0936a50f8b9 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:23.842 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.842 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.842 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.842 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.842 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.842 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.842 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.842 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.843 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.843 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:23.843 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.858 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.873 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.887 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.901 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.915 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.930 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.944 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.959 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:23.973 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.193 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.194 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.195 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.195 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.194976Z', 'risk_level': 'low'}
2025-12-07 20:44:24.195 | INFO | no-id | [0202d091-9bb0-4dbe-b395-27624c39b3e5] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.196 | INFO | no-id | 0202d091-9bb0-4dbe-b395-27624c39b3e5 | Analyzing provider...
2025-12-07 20:44:24.196 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.196 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.196 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.197 | INFO | no-id | [0202d091-9bb0-4dbe-b395-27624c39b3e5] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.197 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.197 | DEBUG | no-id | [0202d091-9bb0-4dbe-b395-27624c39b3e5] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.197 | INFO | no-id | [0202d091-9bb0-4dbe-b395-27624c39b3e5] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.198 | INFO | no-id | Validation 0202d091-9bb0-4dbe-b395-27624c39b3e5 completed successfully
2025-12-07 20:44:24.201 | INFO | no-id | 0c6ec7c9-d16e-44e0-9bff-e46eebc3b5ba | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.207 | INFO | no-id | 0c6ec7c9-d16e-44e0-9bff-e46eebc3b5ba | Checking spam traps...
2025-12-07 20:44:24.207 | INFO | no-id | 0c6ec7c9-d16e-44e0-9bff-e46eebc3b5ba | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.208 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.209 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.209 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.209 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.209 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.209544Z', 'risk_level': 'low'}
2025-12-07 20:44:24.209 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.234 | INFO | no-id | [3b4b6513-9fda-4944-975d-5c832c5ca1f2] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.235 | INFO | no-id | 3b4b6513-9fda-4944-975d-5c832c5ca1f2 | Analyzing provider...
2025-12-07 20:44:24.235 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.235 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.235 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.235 | INFO | no-id | [3b4b6513-9fda-4944-975d-5c832c5ca1f2] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.235 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.235 | DEBUG | no-id | [3b4b6513-9fda-4944-975d-5c832c5ca1f2] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.235 | INFO | no-id | [3b4b6513-9fda-4944-975d-5c832c5ca1f2] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.236 | INFO | no-id | Validation 3b4b6513-9fda-4944-975d-5c832c5ca1f2 completed successfully
2025-12-07 20:44:24.236 | INFO | no-id | b24b8e01-1d3f-4457-bf1a-f5190ff2e78f | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.240 | INFO | no-id | b24b8e01-1d3f-4457-bf1a-f5190ff2e78f | Checking spam traps...
2025-12-07 20:44:24.240 | INFO | no-id | b24b8e01-1d3f-4457-bf1a-f5190ff2e78f | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.249 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.251 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.268 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.268 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.268 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.268 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.268739Z', 'risk_level': 'low'}
2025-12-07 20:44:24.268 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.269 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.269 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.269 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.269095Z', 'risk_level': 'low'}
2025-12-07 20:44:24.269 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.269 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.269 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.269 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.269429Z', 'risk_level': 'low'}
2025-12-07 20:44:24.269 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.269 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.269 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.269 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.269756Z', 'risk_level': 'low'}
2025-12-07 20:44:24.269 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.270 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.270 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.270 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.270088Z', 'risk_level': 'low'}
2025-12-07 20:44:24.270 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.270 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.270 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.270 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.270405Z', 'risk_level': 'low'}
2025-12-07 20:44:24.270 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.270 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.270 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.270 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.270725Z', 'risk_level': 'low'}
2025-12-07 20:44:24.271 | INFO | no-id | [e0a8dade-efde-4681-9952-89a3be1cc9dc] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.271 | INFO | no-id | e0a8dade-efde-4681-9952-89a3be1cc9dc | Analyzing provider...
2025-12-07 20:44:24.271 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.271 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.272 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.272 | INFO | no-id | [e0a8dade-efde-4681-9952-89a3be1cc9dc] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.272 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.272 | DEBUG | no-id | [e0a8dade-efde-4681-9952-89a3be1cc9dc] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.272 | INFO | no-id | [e0a8dade-efde-4681-9952-89a3be1cc9dc] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.272 | INFO | no-id | Validation e0a8dade-efde-4681-9952-89a3be1cc9dc completed successfully
2025-12-07 20:44:24.272 | INFO | no-id | [a052ed65-f3be-49dd-b536-0a2be60eb109] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.272 | INFO | no-id | a052ed65-f3be-49dd-b536-0a2be60eb109 | Analyzing provider...
2025-12-07 20:44:24.272 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.272 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.273 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.273 | INFO | no-id | [a052ed65-f3be-49dd-b536-0a2be60eb109] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.273 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.273 | DEBUG | no-id | [a052ed65-f3be-49dd-b536-0a2be60eb109] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.273 | INFO | no-id | [a052ed65-f3be-49dd-b536-0a2be60eb109] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.273 | INFO | no-id | Validation a052ed65-f3be-49dd-b536-0a2be60eb109 completed successfully
2025-12-07 20:44:24.273 | INFO | no-id | [e3254df1-b7e7-4d25-852d-e29d8f9c4306] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.273 | INFO | no-id | e3254df1-b7e7-4d25-852d-e29d8f9c4306 | Analyzing provider...
2025-12-07 20:44:24.273 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.274 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.274 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.274 | INFO | no-id | [e3254df1-b7e7-4d25-852d-e29d8f9c4306] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.274 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.274 | DEBUG | no-id | [e3254df1-b7e7-4d25-852d-e29d8f9c4306] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.274 | INFO | no-id | [e3254df1-b7e7-4d25-852d-e29d8f9c4306] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.274 | INFO | no-id | Validation e3254df1-b7e7-4d25-852d-e29d8f9c4306 completed successfully
2025-12-07 20:44:24.274 | INFO | no-id | [2531e440-2d8c-4781-8e9b-f0936a50f8b9] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.274 | INFO | no-id | 2531e440-2d8c-4781-8e9b-f0936a50f8b9 | Analyzing provider...
2025-12-07 20:44:24.274 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.274 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.275 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.275 | INFO | no-id | [2531e440-2d8c-4781-8e9b-f0936a50f8b9] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.275 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.275 | DEBUG | no-id | [2531e440-2d8c-4781-8e9b-f0936a50f8b9] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.275 | INFO | no-id | [2531e440-2d8c-4781-8e9b-f0936a50f8b9] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.275 | INFO | no-id | Validation 2531e440-2d8c-4781-8e9b-f0936a50f8b9 completed successfully
2025-12-07 20:44:24.275 | INFO | no-id | [03ceec05-9315-40db-87a3-06ad41ce6f9a] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.275 | INFO | no-id | 03ceec05-9315-40db-87a3-06ad41ce6f9a | Analyzing provider...
2025-12-07 20:44:24.275 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.275 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.275 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.276 | INFO | no-id | [03ceec05-9315-40db-87a3-06ad41ce6f9a] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.276 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.276 | DEBUG | no-id | [03ceec05-9315-40db-87a3-06ad41ce6f9a] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.276 | INFO | no-id | [03ceec05-9315-40db-87a3-06ad41ce6f9a] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.276 | INFO | no-id | Validation 03ceec05-9315-40db-87a3-06ad41ce6f9a completed successfully
2025-12-07 20:44:24.276 | INFO | no-id | [b61493ac-07e0-45c0-9a82-03d5dfa350fc] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.276 | INFO | no-id | b61493ac-07e0-45c0-9a82-03d5dfa350fc | Analyzing provider...
2025-12-07 20:44:24.276 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.276 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.276 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.276 | INFO | no-id | [b61493ac-07e0-45c0-9a82-03d5dfa350fc] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.277 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.277 | DEBUG | no-id | [b61493ac-07e0-45c0-9a82-03d5dfa350fc] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.277 | INFO | no-id | [b61493ac-07e0-45c0-9a82-03d5dfa350fc] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.277 | INFO | no-id | Validation b61493ac-07e0-45c0-9a82-03d5dfa350fc completed successfully
2025-12-07 20:44:24.277 | INFO | no-id | [dd0f063f-e92c-4aa3-9261-2e1b41344a6e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.277 | INFO | no-id | dd0f063f-e92c-4aa3-9261-2e1b41344a6e | Analyzing provider...
2025-12-07 20:44:24.277 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.278 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.278 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.278 | INFO | no-id | [dd0f063f-e92c-4aa3-9261-2e1b41344a6e] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.278 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.278 | DEBUG | no-id | [dd0f063f-e92c-4aa3-9261-2e1b41344a6e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.278 | INFO | no-id | [dd0f063f-e92c-4aa3-9261-2e1b41344a6e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.278 | INFO | no-id | Validation dd0f063f-e92c-4aa3-9261-2e1b41344a6e completed successfully
2025-12-07 20:44:24.278 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.278 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.278 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.278 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.278901Z', 'risk_level': 'low'}
2025-12-07 20:44:24.279 | INFO | no-id | 08cbbdb7-28c3-40f4-909b-07de0bdcda5a | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.281 | INFO | no-id | 08cbbdb7-28c3-40f4-909b-07de0bdcda5a | Checking spam traps...
2025-12-07 20:44:24.281 | INFO | no-id | 08cbbdb7-28c3-40f4-909b-07de0bdcda5a | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.282 | INFO | no-id | d1c01b49-39e8-42db-b743-c975b3afbac3 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.284 | INFO | no-id | d1c01b49-39e8-42db-b743-c975b3afbac3 | Checking spam traps...
2025-12-07 20:44:24.284 | INFO | no-id | d1c01b49-39e8-42db-b743-c975b3afbac3 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.284 | INFO | no-id | 5c00befc-a4f0-4e03-bf6c-bfba4d79647b | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.287 | INFO | no-id | 5c00befc-a4f0-4e03-bf6c-bfba4d79647b | Checking spam traps...
2025-12-07 20:44:24.287 | INFO | no-id | 5c00befc-a4f0-4e03-bf6c-bfba4d79647b | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.287 | INFO | no-id | 2ae0bd48-a29e-497e-b590-f32bc42c7d32 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.290 | INFO | no-id | 2ae0bd48-a29e-497e-b590-f32bc42c7d32 | Checking spam traps...
2025-12-07 20:44:24.290 | INFO | no-id | 2ae0bd48-a29e-497e-b590-f32bc42c7d32 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.290 | INFO | no-id | 44729f1f-deef-475f-aa84-4003800991a7 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.293 | INFO | no-id | 44729f1f-deef-475f-aa84-4003800991a7 | Checking spam traps...
2025-12-07 20:44:24.293 | INFO | no-id | 44729f1f-deef-475f-aa84-4003800991a7 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.293 | INFO | no-id | 87efb35b-3d65-46bd-8043-dbf3e2e5481b | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.296 | INFO | no-id | 87efb35b-3d65-46bd-8043-dbf3e2e5481b | Checking spam traps...
2025-12-07 20:44:24.296 | INFO | no-id | 87efb35b-3d65-46bd-8043-dbf3e2e5481b | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.296 | INFO | no-id | 52a47a41-ecdf-40a9-81eb-5159237af78d | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.298 | INFO | no-id | 52a47a41-ecdf-40a9-81eb-5159237af78d | Checking spam traps...
2025-12-07 20:44:24.298 | INFO | no-id | 52a47a41-ecdf-40a9-81eb-5159237af78d | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.298 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.299 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.299 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.299 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.299 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.299 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.299 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.299 | INFO | no-id | [727d4b77-647d-4f71-b24a-03fe02ebde5a] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.300 | INFO | no-id | 727d4b77-647d-4f71-b24a-03fe02ebde5a | Analyzing provider...
2025-12-07 20:44:24.300 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.300 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.300 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.300 | INFO | no-id | [727d4b77-647d-4f71-b24a-03fe02ebde5a] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.300 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.300 | DEBUG | no-id | [727d4b77-647d-4f71-b24a-03fe02ebde5a] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.300 | INFO | no-id | [727d4b77-647d-4f71-b24a-03fe02ebde5a] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.301 | INFO | no-id | Validation 727d4b77-647d-4f71-b24a-03fe02ebde5a completed successfully
2025-12-07 20:44:24.301 | INFO | no-id | cdd0b01a-0eda-40a4-bd66-5a7c8c457e9b | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.303 | INFO | no-id | cdd0b01a-0eda-40a4-bd66-5a7c8c457e9b | Checking spam traps...
2025-12-07 20:44:24.304 | INFO | no-id | cdd0b01a-0eda-40a4-bd66-5a7c8c457e9b | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.304 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.304 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.319 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.334 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.348 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.363 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.377 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.391 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.412 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.611 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.612 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.612 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.612 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.612692Z', 'risk_level': 'low'}
2025-12-07 20:44:24.613 | INFO | no-id | [b24b8e01-1d3f-4457-bf1a-f5190ff2e78f] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.613 | INFO | no-id | b24b8e01-1d3f-4457-bf1a-f5190ff2e78f | Analyzing provider...
2025-12-07 20:44:24.614 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.614 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.614 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.615 | INFO | no-id | [b24b8e01-1d3f-4457-bf1a-f5190ff2e78f] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.615 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.615 | DEBUG | no-id | [b24b8e01-1d3f-4457-bf1a-f5190ff2e78f] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.615 | INFO | no-id | [b24b8e01-1d3f-4457-bf1a-f5190ff2e78f] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.616 | INFO | no-id | Validation b24b8e01-1d3f-4457-bf1a-f5190ff2e78f completed successfully
2025-12-07 20:44:24.619 | INFO | no-id | 55f3fac9-5b9d-4f8d-81c6-3e2fe72630eb | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.624 | INFO | no-id | 55f3fac9-5b9d-4f8d-81c6-3e2fe72630eb | Checking spam traps...
2025-12-07 20:44:24.624 | INFO | no-id | 55f3fac9-5b9d-4f8d-81c6-3e2fe72630eb | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.625 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.625 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.626 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.626 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.626 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.626202Z', 'risk_level': 'low'}
2025-12-07 20:44:24.626 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.651 | INFO | no-id | [0c6ec7c9-d16e-44e0-9bff-e46eebc3b5ba] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.651 | INFO | no-id | 0c6ec7c9-d16e-44e0-9bff-e46eebc3b5ba | Analyzing provider...
2025-12-07 20:44:24.651 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.651 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.651 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.651 | INFO | no-id | [0c6ec7c9-d16e-44e0-9bff-e46eebc3b5ba] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.651 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.651 | DEBUG | no-id | [0c6ec7c9-d16e-44e0-9bff-e46eebc3b5ba] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.652 | INFO | no-id | [0c6ec7c9-d16e-44e0-9bff-e46eebc3b5ba] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.652 | INFO | no-id | Validation 0c6ec7c9-d16e-44e0-9bff-e46eebc3b5ba completed successfully
2025-12-07 20:44:24.653 | INFO | no-id | d2034721-1bef-4b7c-8994-37a855412a99 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.656 | INFO | no-id | d2034721-1bef-4b7c-8994-37a855412a99 | Checking spam traps...
2025-12-07 20:44:24.656 | INFO | no-id | d2034721-1bef-4b7c-8994-37a855412a99 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.662 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.664 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.681 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.682 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.682 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.682 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.682088Z', 'risk_level': 'low'}
2025-12-07 20:44:24.682 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.682 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.682 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.682 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.682447Z', 'risk_level': 'low'}
2025-12-07 20:44:24.682 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.682 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.682 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.682 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.682784Z', 'risk_level': 'low'}
2025-12-07 20:44:24.683 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.683 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.683 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.683 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.683166Z', 'risk_level': 'low'}
2025-12-07 20:44:24.683 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.683 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.683 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.683 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.683489Z', 'risk_level': 'low'}
2025-12-07 20:44:24.683 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.683 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.683 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.683 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.683804Z', 'risk_level': 'low'}
2025-12-07 20:44:24.684 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.684 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.684 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.684 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.684715Z', 'risk_level': 'low'}
2025-12-07 20:44:24.685 | INFO | no-id | [2ae0bd48-a29e-497e-b590-f32bc42c7d32] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.685 | INFO | no-id | 2ae0bd48-a29e-497e-b590-f32bc42c7d32 | Analyzing provider...
2025-12-07 20:44:24.685 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.685 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.685 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.685 | INFO | no-id | [2ae0bd48-a29e-497e-b590-f32bc42c7d32] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.685 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.685 | DEBUG | no-id | [2ae0bd48-a29e-497e-b590-f32bc42c7d32] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.685 | INFO | no-id | [2ae0bd48-a29e-497e-b590-f32bc42c7d32] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.686 | INFO | no-id | Validation 2ae0bd48-a29e-497e-b590-f32bc42c7d32 completed successfully
2025-12-07 20:44:24.686 | INFO | no-id | [5c00befc-a4f0-4e03-bf6c-bfba4d79647b] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.686 | INFO | no-id | 5c00befc-a4f0-4e03-bf6c-bfba4d79647b | Analyzing provider...
2025-12-07 20:44:24.686 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.686 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.686 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.686 | INFO | no-id | [5c00befc-a4f0-4e03-bf6c-bfba4d79647b] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.686 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.686 | DEBUG | no-id | [5c00befc-a4f0-4e03-bf6c-bfba4d79647b] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.686 | INFO | no-id | [5c00befc-a4f0-4e03-bf6c-bfba4d79647b] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.687 | INFO | no-id | Validation 5c00befc-a4f0-4e03-bf6c-bfba4d79647b completed successfully
2025-12-07 20:44:24.687 | INFO | no-id | [d1c01b49-39e8-42db-b743-c975b3afbac3] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.687 | INFO | no-id | d1c01b49-39e8-42db-b743-c975b3afbac3 | Analyzing provider...
2025-12-07 20:44:24.687 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.687 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.687 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.687 | INFO | no-id | [d1c01b49-39e8-42db-b743-c975b3afbac3] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.687 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.687 | DEBUG | no-id | [d1c01b49-39e8-42db-b743-c975b3afbac3] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.687 | INFO | no-id | [d1c01b49-39e8-42db-b743-c975b3afbac3] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.687 | INFO | no-id | Validation d1c01b49-39e8-42db-b743-c975b3afbac3 completed successfully
2025-12-07 20:44:24.688 | INFO | no-id | [08cbbdb7-28c3-40f4-909b-07de0bdcda5a] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.688 | INFO | no-id | 08cbbdb7-28c3-40f4-909b-07de0bdcda5a | Analyzing provider...
2025-12-07 20:44:24.688 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.688 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.688 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.688 | INFO | no-id | [08cbbdb7-28c3-40f4-909b-07de0bdcda5a] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.688 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.688 | DEBUG | no-id | [08cbbdb7-28c3-40f4-909b-07de0bdcda5a] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.688 | INFO | no-id | [08cbbdb7-28c3-40f4-909b-07de0bdcda5a] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.688 | INFO | no-id | Validation 08cbbdb7-28c3-40f4-909b-07de0bdcda5a completed successfully
2025-12-07 20:44:24.689 | INFO | no-id | [87efb35b-3d65-46bd-8043-dbf3e2e5481b] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.689 | INFO | no-id | 87efb35b-3d65-46bd-8043-dbf3e2e5481b | Analyzing provider...
2025-12-07 20:44:24.689 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.689 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.689 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.689 | INFO | no-id | [87efb35b-3d65-46bd-8043-dbf3e2e5481b] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.689 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.689 | DEBUG | no-id | [87efb35b-3d65-46bd-8043-dbf3e2e5481b] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.689 | INFO | no-id | [87efb35b-3d65-46bd-8043-dbf3e2e5481b] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.689 | INFO | no-id | Validation 87efb35b-3d65-46bd-8043-dbf3e2e5481b completed successfully
2025-12-07 20:44:24.689 | INFO | no-id | [52a47a41-ecdf-40a9-81eb-5159237af78d] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.689 | INFO | no-id | 52a47a41-ecdf-40a9-81eb-5159237af78d | Analyzing provider...
2025-12-07 20:44:24.690 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.690 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.690 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.690 | INFO | no-id | [52a47a41-ecdf-40a9-81eb-5159237af78d] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.690 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.690 | DEBUG | no-id | [52a47a41-ecdf-40a9-81eb-5159237af78d] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.690 | INFO | no-id | [52a47a41-ecdf-40a9-81eb-5159237af78d] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.690 | INFO | no-id | Validation 52a47a41-ecdf-40a9-81eb-5159237af78d completed successfully
2025-12-07 20:44:24.690 | INFO | no-id | 8470ae9d-1c3d-4220-b1a2-bae46f922cda | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.693 | INFO | no-id | 8470ae9d-1c3d-4220-b1a2-bae46f922cda | Checking spam traps...
2025-12-07 20:44:24.693 | INFO | no-id | 8470ae9d-1c3d-4220-b1a2-bae46f922cda | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.693 | INFO | no-id | 46eacd19-1b94-4f49-b4ca-59d2f43d527d | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.696 | INFO | no-id | 46eacd19-1b94-4f49-b4ca-59d2f43d527d | Checking spam traps...
2025-12-07 20:44:24.696 | INFO | no-id | 46eacd19-1b94-4f49-b4ca-59d2f43d527d | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.696 | INFO | no-id | 2c3834db-246c-494b-8ddc-c427e9b09544 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.699 | INFO | no-id | 2c3834db-246c-494b-8ddc-c427e9b09544 | Checking spam traps...
2025-12-07 20:44:24.699 | INFO | no-id | 2c3834db-246c-494b-8ddc-c427e9b09544 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.699 | INFO | no-id | d698c4b6-7406-49da-943a-0f22a27adcea | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.702 | INFO | no-id | d698c4b6-7406-49da-943a-0f22a27adcea | Checking spam traps...
2025-12-07 20:44:24.702 | INFO | no-id | d698c4b6-7406-49da-943a-0f22a27adcea | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.702 | INFO | no-id | c492f662-5dea-4be2-b543-e0d1d891ade3 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.705 | INFO | no-id | c492f662-5dea-4be2-b543-e0d1d891ade3 | Checking spam traps...
2025-12-07 20:44:24.705 | INFO | no-id | c492f662-5dea-4be2-b543-e0d1d891ade3 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.705 | INFO | no-id | a411cecf-546c-49d9-95d4-002f05bbb3c7 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.707 | INFO | no-id | a411cecf-546c-49d9-95d4-002f05bbb3c7 | Checking spam traps...
2025-12-07 20:44:24.707 | INFO | no-id | a411cecf-546c-49d9-95d4-002f05bbb3c7 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.707 | INFO | no-id | [cdd0b01a-0eda-40a4-bd66-5a7c8c457e9b] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.708 | INFO | no-id | cdd0b01a-0eda-40a4-bd66-5a7c8c457e9b | Analyzing provider...
2025-12-07 20:44:24.708 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.708 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.708 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.708 | INFO | no-id | [cdd0b01a-0eda-40a4-bd66-5a7c8c457e9b] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.708 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.708 | DEBUG | no-id | [cdd0b01a-0eda-40a4-bd66-5a7c8c457e9b] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.709 | INFO | no-id | [cdd0b01a-0eda-40a4-bd66-5a7c8c457e9b] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.709 | INFO | no-id | Validation cdd0b01a-0eda-40a4-bd66-5a7c8c457e9b completed successfully
2025-12-07 20:44:24.709 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.709 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.709 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.709 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.709 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.710 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.710 | INFO | no-id | 5c7cd980-7bbd-4d76-b1f8-5efacb836b65 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.712 | INFO | no-id | 5c7cd980-7bbd-4d76-b1f8-5efacb836b65 | Checking spam traps...
2025-12-07 20:44:24.712 | INFO | no-id | 5c7cd980-7bbd-4d76-b1f8-5efacb836b65 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.713 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.713 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.728 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.743 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.758 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.772 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.787 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.809 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:24.826 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:24.826 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:24.827 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.827 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:24.827045Z', 'risk_level': 'low'}
2025-12-07 20:44:24.827 | INFO | no-id | [44729f1f-deef-475f-aa84-4003800991a7] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:24.827 | INFO | no-id | 44729f1f-deef-475f-aa84-4003800991a7 | Analyzing provider...
2025-12-07 20:44:24.827 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:24.827 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:24.827 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:24.828 | INFO | no-id | [44729f1f-deef-475f-aa84-4003800991a7] Role email check | Is role: False | Type: None
2025-12-07 20:44:24.828 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:24.828 | DEBUG | no-id | [44729f1f-deef-475f-aa84-4003800991a7] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:24.828 | INFO | no-id | [44729f1f-deef-475f-aa84-4003800991a7] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:24.828 | INFO | no-id | Validation 44729f1f-deef-475f-aa84-4003800991a7 completed successfully
2025-12-07 20:44:24.829 | INFO | no-id | 2e161bd3-c76b-4243-952d-0cf6113700de | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:24.831 | INFO | no-id | 2e161bd3-c76b-4243-952d-0cf6113700de | Checking spam traps...
2025-12-07 20:44:24.831 | INFO | no-id | 2e161bd3-c76b-4243-952d-0cf6113700de | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:24.832 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:24.833 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.021 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.021 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.021 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.022 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.021938Z', 'risk_level': 'low'}
2025-12-07 20:44:25.022 | INFO | no-id | [d2034721-1bef-4b7c-8994-37a855412a99] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.022 | INFO | no-id | d2034721-1bef-4b7c-8994-37a855412a99 | Analyzing provider...
2025-12-07 20:44:25.022 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.023 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.023 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.023 | INFO | no-id | [d2034721-1bef-4b7c-8994-37a855412a99] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.023 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.024 | DEBUG | no-id | [d2034721-1bef-4b7c-8994-37a855412a99] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.024 | INFO | no-id | [d2034721-1bef-4b7c-8994-37a855412a99] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.024 | INFO | no-id | Validation d2034721-1bef-4b7c-8994-37a855412a99 completed successfully
2025-12-07 20:44:25.025 | INFO | no-id | 45fde04b-fba3-4f3b-a190-e4d30ee2b566 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.030 | INFO | no-id | 45fde04b-fba3-4f3b-a190-e4d30ee2b566 | Checking spam traps...
2025-12-07 20:44:25.031 | INFO | no-id | 45fde04b-fba3-4f3b-a190-e4d30ee2b566 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.031 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.033 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.057 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.058 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.058 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.058 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.058252Z', 'risk_level': 'low'}
2025-12-07 20:44:25.062 | INFO | no-id | [55f3fac9-5b9d-4f8d-81c6-3e2fe72630eb] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.063 | INFO | no-id | 55f3fac9-5b9d-4f8d-81c6-3e2fe72630eb | Analyzing provider...
2025-12-07 20:44:25.063 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.063 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.063 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.063 | INFO | no-id | [55f3fac9-5b9d-4f8d-81c6-3e2fe72630eb] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.063 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.063 | DEBUG | no-id | [55f3fac9-5b9d-4f8d-81c6-3e2fe72630eb] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.063 | INFO | no-id | [55f3fac9-5b9d-4f8d-81c6-3e2fe72630eb] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.064 | INFO | no-id | Validation 55f3fac9-5b9d-4f8d-81c6-3e2fe72630eb completed successfully
2025-12-07 20:44:25.067 | INFO | no-id | a225602c-35ce-4792-8da0-b186812a6052 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.070 | INFO | no-id | a225602c-35ce-4792-8da0-b186812a6052 | Checking spam traps...
2025-12-07 20:44:25.070 | INFO | no-id | a225602c-35ce-4792-8da0-b186812a6052 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.070 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.070 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.071 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.071 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.071 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.071190Z', 'risk_level': 'low'}
2025-12-07 20:44:25.071 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.071 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.071 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.071 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.071583Z', 'risk_level': 'low'}
2025-12-07 20:44:25.071 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.071 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.072 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.072 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.072027Z', 'risk_level': 'low'}
2025-12-07 20:44:25.072 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.072 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.072 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.072 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.072410Z', 'risk_level': 'low'}
2025-12-07 20:44:25.073 | INFO | no-id | [5c7cd980-7bbd-4d76-b1f8-5efacb836b65] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.073 | INFO | no-id | 5c7cd980-7bbd-4d76-b1f8-5efacb836b65 | Analyzing provider...
2025-12-07 20:44:25.073 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.073 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.073 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.073 | INFO | no-id | [5c7cd980-7bbd-4d76-b1f8-5efacb836b65] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.074 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.074 | DEBUG | no-id | [5c7cd980-7bbd-4d76-b1f8-5efacb836b65] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.074 | INFO | no-id | [5c7cd980-7bbd-4d76-b1f8-5efacb836b65] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.074 | INFO | no-id | Validation 5c7cd980-7bbd-4d76-b1f8-5efacb836b65 completed successfully
2025-12-07 20:44:25.074 | INFO | no-id | [2e161bd3-c76b-4243-952d-0cf6113700de] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.074 | INFO | no-id | 2e161bd3-c76b-4243-952d-0cf6113700de | Analyzing provider...
2025-12-07 20:44:25.074 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.074 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.074 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.075 | INFO | no-id | [2e161bd3-c76b-4243-952d-0cf6113700de] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.075 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.075 | DEBUG | no-id | [2e161bd3-c76b-4243-952d-0cf6113700de] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.075 | INFO | no-id | [2e161bd3-c76b-4243-952d-0cf6113700de] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.075 | INFO | no-id | Validation 2e161bd3-c76b-4243-952d-0cf6113700de completed successfully
2025-12-07 20:44:25.075 | INFO | no-id | [c492f662-5dea-4be2-b543-e0d1d891ade3] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.075 | INFO | no-id | c492f662-5dea-4be2-b543-e0d1d891ade3 | Analyzing provider...
2025-12-07 20:44:25.075 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.075 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.076 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.076 | INFO | no-id | [c492f662-5dea-4be2-b543-e0d1d891ade3] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.076 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.076 | DEBUG | no-id | [c492f662-5dea-4be2-b543-e0d1d891ade3] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.076 | INFO | no-id | [c492f662-5dea-4be2-b543-e0d1d891ade3] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.076 | INFO | no-id | Validation c492f662-5dea-4be2-b543-e0d1d891ade3 completed successfully
2025-12-07 20:44:25.076 | INFO | no-id | [2c3834db-246c-494b-8ddc-c427e9b09544] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.076 | INFO | no-id | 2c3834db-246c-494b-8ddc-c427e9b09544 | Analyzing provider...
2025-12-07 20:44:25.076 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.076 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.077 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.077 | INFO | no-id | [2c3834db-246c-494b-8ddc-c427e9b09544] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.077 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.077 | DEBUG | no-id | [2c3834db-246c-494b-8ddc-c427e9b09544] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.077 | INFO | no-id | [2c3834db-246c-494b-8ddc-c427e9b09544] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.077 | INFO | no-id | Validation 2c3834db-246c-494b-8ddc-c427e9b09544 completed successfully
2025-12-07 20:44:25.077 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.077 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.078 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.078 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.078013Z', 'risk_level': 'low'}
2025-12-07 20:44:25.078 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.078 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.078 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.078 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.078376Z', 'risk_level': 'low'}
2025-12-07 20:44:25.078 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.095 | INFO | no-id | 775ace9a-7071-4b4a-8430-4d625b98e26f | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.097 | INFO | no-id | 775ace9a-7071-4b4a-8430-4d625b98e26f | Checking spam traps...
2025-12-07 20:44:25.097 | INFO | no-id | 775ace9a-7071-4b4a-8430-4d625b98e26f | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.097 | INFO | no-id | ec2aa404-ce2f-4655-b42f-77a4d520591e | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.100 | INFO | no-id | ec2aa404-ce2f-4655-b42f-77a4d520591e | Checking spam traps...
2025-12-07 20:44:25.100 | INFO | no-id | ec2aa404-ce2f-4655-b42f-77a4d520591e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.100 | INFO | no-id | a225661e-5e2c-4404-8c50-b96798324186 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.103 | INFO | no-id | a225661e-5e2c-4404-8c50-b96798324186 | Checking spam traps...
2025-12-07 20:44:25.103 | INFO | no-id | a225661e-5e2c-4404-8c50-b96798324186 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.103 | INFO | no-id | b6c79306-3a29-4c87-9fc8-4202fa626c17 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.106 | INFO | no-id | b6c79306-3a29-4c87-9fc8-4202fa626c17 | Checking spam traps...
2025-12-07 20:44:25.106 | INFO | no-id | b6c79306-3a29-4c87-9fc8-4202fa626c17 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.106 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.106 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.107 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.107 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.107 | INFO | no-id | [8470ae9d-1c3d-4220-b1a2-bae46f922cda] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.107 | INFO | no-id | 8470ae9d-1c3d-4220-b1a2-bae46f922cda | Analyzing provider...
2025-12-07 20:44:25.107 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.107 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.107 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.107 | INFO | no-id | [8470ae9d-1c3d-4220-b1a2-bae46f922cda] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.108 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.108 | DEBUG | no-id | [8470ae9d-1c3d-4220-b1a2-bae46f922cda] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.108 | INFO | no-id | [8470ae9d-1c3d-4220-b1a2-bae46f922cda] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.108 | INFO | no-id | Validation 8470ae9d-1c3d-4220-b1a2-bae46f922cda completed successfully
2025-12-07 20:44:25.108 | INFO | no-id | [a411cecf-546c-49d9-95d4-002f05bbb3c7] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.108 | INFO | no-id | a411cecf-546c-49d9-95d4-002f05bbb3c7 | Analyzing provider...
2025-12-07 20:44:25.108 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.108 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.108 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.109 | INFO | no-id | [a411cecf-546c-49d9-95d4-002f05bbb3c7] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.109 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.109 | DEBUG | no-id | [a411cecf-546c-49d9-95d4-002f05bbb3c7] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.109 | INFO | no-id | [a411cecf-546c-49d9-95d4-002f05bbb3c7] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.109 | INFO | no-id | Validation a411cecf-546c-49d9-95d4-002f05bbb3c7 completed successfully
2025-12-07 20:44:25.109 | INFO | no-id | 43bab159-8246-482a-a2e7-92d61de768a7 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.112 | INFO | no-id | 43bab159-8246-482a-a2e7-92d61de768a7 | Checking spam traps...
2025-12-07 20:44:25.112 | INFO | no-id | 43bab159-8246-482a-a2e7-92d61de768a7 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.112 | INFO | no-id | b651ae5b-455c-4fdb-896b-fc41fe01ba7e | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.115 | INFO | no-id | b651ae5b-455c-4fdb-896b-fc41fe01ba7e | Checking spam traps...
2025-12-07 20:44:25.115 | INFO | no-id | b651ae5b-455c-4fdb-896b-fc41fe01ba7e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.115 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.115 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.116 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.131 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.146 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.160 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.176 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.190 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.213 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.213 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.213 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.213 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.213618Z', 'risk_level': 'low'}
2025-12-07 20:44:25.213 | INFO | no-id | [46eacd19-1b94-4f49-b4ca-59d2f43d527d] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.214 | INFO | no-id | 46eacd19-1b94-4f49-b4ca-59d2f43d527d | Analyzing provider...
2025-12-07 20:44:25.214 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.214 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.214 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.214 | INFO | no-id | [46eacd19-1b94-4f49-b4ca-59d2f43d527d] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.214 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.214 | DEBUG | no-id | [46eacd19-1b94-4f49-b4ca-59d2f43d527d] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.214 | INFO | no-id | [46eacd19-1b94-4f49-b4ca-59d2f43d527d] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.215 | INFO | no-id | Validation 46eacd19-1b94-4f49-b4ca-59d2f43d527d completed successfully
2025-12-07 20:44:25.215 | INFO | no-id | 1377dd19-29f9-4177-8fcf-38238419d6ff | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.218 | INFO | no-id | 1377dd19-29f9-4177-8fcf-38238419d6ff | Checking spam traps...
2025-12-07 20:44:25.218 | INFO | no-id | 1377dd19-29f9-4177-8fcf-38238419d6ff | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.218 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.219 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.416 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.416 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.417 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.417 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.417179Z', 'risk_level': 'low'}
2025-12-07 20:44:25.417 | INFO | no-id | [45fde04b-fba3-4f3b-a190-e4d30ee2b566] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.418 | INFO | no-id | 45fde04b-fba3-4f3b-a190-e4d30ee2b566 | Analyzing provider...
2025-12-07 20:44:25.418 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.418 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.419 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.419 | INFO | no-id | [45fde04b-fba3-4f3b-a190-e4d30ee2b566] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.419 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.419 | DEBUG | no-id | [45fde04b-fba3-4f3b-a190-e4d30ee2b566] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.420 | INFO | no-id | [45fde04b-fba3-4f3b-a190-e4d30ee2b566] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.420 | INFO | no-id | Validation 45fde04b-fba3-4f3b-a190-e4d30ee2b566 completed successfully
2025-12-07 20:44:25.421 | INFO | no-id | 201e4d94-b1d6-4454-9358-cb1e731f3582 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.426 | INFO | no-id | 201e4d94-b1d6-4454-9358-cb1e731f3582 | Checking spam traps...
2025-12-07 20:44:25.426 | INFO | no-id | 201e4d94-b1d6-4454-9358-cb1e731f3582 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.427 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.427 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.456 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.456 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.456 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.456 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.456612Z', 'risk_level': 'low'}
2025-12-07 20:44:25.456 | INFO | no-id | [a225661e-5e2c-4404-8c50-b96798324186] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.457 | INFO | no-id | a225661e-5e2c-4404-8c50-b96798324186 | Analyzing provider...
2025-12-07 20:44:25.457 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.457 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.457 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.457 | INFO | no-id | [a225661e-5e2c-4404-8c50-b96798324186] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.457 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.457 | DEBUG | no-id | [a225661e-5e2c-4404-8c50-b96798324186] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.457 | INFO | no-id | [a225661e-5e2c-4404-8c50-b96798324186] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.458 | INFO | no-id | Validation a225661e-5e2c-4404-8c50-b96798324186 completed successfully
2025-12-07 20:44:25.458 | INFO | no-id | 43c2cf7e-fe11-4324-9a9a-59e666ca78ab | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.461 | INFO | no-id | 43c2cf7e-fe11-4324-9a9a-59e666ca78ab | Checking spam traps...
2025-12-07 20:44:25.461 | INFO | no-id | 43c2cf7e-fe11-4324-9a9a-59e666ca78ab | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.462 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.462 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.484 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.484 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.484 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.484 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.484782Z', 'risk_level': 'low'}
2025-12-07 20:44:25.484 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.485 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.485 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.485 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.485152Z', 'risk_level': 'low'}
2025-12-07 20:44:25.485 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.485 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.485 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.485 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.485507Z', 'risk_level': 'low'}
2025-12-07 20:44:25.487 | INFO | no-id | [b6c79306-3a29-4c87-9fc8-4202fa626c17] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.487 | INFO | no-id | b6c79306-3a29-4c87-9fc8-4202fa626c17 | Analyzing provider...
2025-12-07 20:44:25.487 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.487 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.487 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.487 | INFO | no-id | [b6c79306-3a29-4c87-9fc8-4202fa626c17] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.487 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.487 | DEBUG | no-id | [b6c79306-3a29-4c87-9fc8-4202fa626c17] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.487 | INFO | no-id | [b6c79306-3a29-4c87-9fc8-4202fa626c17] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.488 | INFO | no-id | Validation b6c79306-3a29-4c87-9fc8-4202fa626c17 completed successfully
2025-12-07 20:44:25.488 | INFO | no-id | [ec2aa404-ce2f-4655-b42f-77a4d520591e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.488 | INFO | no-id | ec2aa404-ce2f-4655-b42f-77a4d520591e | Analyzing provider...
2025-12-07 20:44:25.488 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.488 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.488 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.488 | INFO | no-id | [ec2aa404-ce2f-4655-b42f-77a4d520591e] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.488 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.488 | DEBUG | no-id | [ec2aa404-ce2f-4655-b42f-77a4d520591e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.488 | INFO | no-id | [ec2aa404-ce2f-4655-b42f-77a4d520591e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.489 | INFO | no-id | Validation ec2aa404-ce2f-4655-b42f-77a4d520591e completed successfully
2025-12-07 20:44:25.489 | INFO | no-id | [a225602c-35ce-4792-8da0-b186812a6052] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.489 | INFO | no-id | a225602c-35ce-4792-8da0-b186812a6052 | Analyzing provider...
2025-12-07 20:44:25.489 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.489 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.489 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.489 | INFO | no-id | [a225602c-35ce-4792-8da0-b186812a6052] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.489 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.489 | DEBUG | no-id | [a225602c-35ce-4792-8da0-b186812a6052] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.489 | INFO | no-id | [a225602c-35ce-4792-8da0-b186812a6052] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.490 | INFO | no-id | Validation a225602c-35ce-4792-8da0-b186812a6052 completed successfully
2025-12-07 20:44:25.490 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.490 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.490 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.490 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.490358Z', 'risk_level': 'low'}
2025-12-07 20:44:25.491 | INFO | no-id | be4b6d53-f785-4f2b-af51-506aaa5b2d30 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.493 | INFO | no-id | be4b6d53-f785-4f2b-af51-506aaa5b2d30 | Checking spam traps...
2025-12-07 20:44:25.493 | INFO | no-id | be4b6d53-f785-4f2b-af51-506aaa5b2d30 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.493 | INFO | no-id | edc29fcc-b573-4baf-b05b-3751c6818624 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.496 | INFO | no-id | edc29fcc-b573-4baf-b05b-3751c6818624 | Checking spam traps...
2025-12-07 20:44:25.496 | INFO | no-id | edc29fcc-b573-4baf-b05b-3751c6818624 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.496 | INFO | no-id | 99708ff4-f040-4ed1-87d4-0078412ede1b | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.499 | INFO | no-id | 99708ff4-f040-4ed1-87d4-0078412ede1b | Checking spam traps...
2025-12-07 20:44:25.499 | INFO | no-id | 99708ff4-f040-4ed1-87d4-0078412ede1b | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.499 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.499 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.499 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.499 | INFO | no-id | [1377dd19-29f9-4177-8fcf-38238419d6ff] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.500 | INFO | no-id | 1377dd19-29f9-4177-8fcf-38238419d6ff | Analyzing provider...
2025-12-07 20:44:25.500 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.500 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.500 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.500 | INFO | no-id | [1377dd19-29f9-4177-8fcf-38238419d6ff] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.500 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.500 | DEBUG | no-id | [1377dd19-29f9-4177-8fcf-38238419d6ff] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.500 | INFO | no-id | [1377dd19-29f9-4177-8fcf-38238419d6ff] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.500 | INFO | no-id | Validation 1377dd19-29f9-4177-8fcf-38238419d6ff completed successfully
2025-12-07 20:44:25.501 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.501 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.501 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.501 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.501180Z', 'risk_level': 'low'}
2025-12-07 20:44:25.503 | INFO | no-id | 4ebcd68e-2585-4a02-aca1-cd2782e3d06e | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.505 | INFO | no-id | 4ebcd68e-2585-4a02-aca1-cd2782e3d06e | Checking spam traps...
2025-12-07 20:44:25.505 | INFO | no-id | 4ebcd68e-2585-4a02-aca1-cd2782e3d06e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.508 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.508 | INFO | no-id | [775ace9a-7071-4b4a-8430-4d625b98e26f] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.508 | INFO | no-id | 775ace9a-7071-4b4a-8430-4d625b98e26f | Analyzing provider...
2025-12-07 20:44:25.508 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.508 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.508 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.508 | INFO | no-id | [775ace9a-7071-4b4a-8430-4d625b98e26f] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.509 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.509 | DEBUG | no-id | [775ace9a-7071-4b4a-8430-4d625b98e26f] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.509 | INFO | no-id | [775ace9a-7071-4b4a-8430-4d625b98e26f] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.509 | INFO | no-id | Validation 775ace9a-7071-4b4a-8430-4d625b98e26f completed successfully
2025-12-07 20:44:25.510 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.524 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.539 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.553 | INFO | no-id | 17838961-a08a-4b13-84d2-d69ea4e73cf8 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.556 | INFO | no-id | 17838961-a08a-4b13-84d2-d69ea4e73cf8 | Checking spam traps...
2025-12-07 20:44:25.556 | INFO | no-id | 17838961-a08a-4b13-84d2-d69ea4e73cf8 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.557 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.557 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.557 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.557 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.557 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.557684Z', 'risk_level': 'low'}
2025-12-07 20:44:25.558 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.572 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.573 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.573 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.573 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.573120Z', 'risk_level': 'low'}
2025-12-07 20:44:25.573 | INFO | no-id | [43bab159-8246-482a-a2e7-92d61de768a7] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.573 | INFO | no-id | 43bab159-8246-482a-a2e7-92d61de768a7 | Analyzing provider...
2025-12-07 20:44:25.574 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.574 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.574 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.574 | INFO | no-id | [43bab159-8246-482a-a2e7-92d61de768a7] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.574 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.574 | DEBUG | no-id | [43bab159-8246-482a-a2e7-92d61de768a7] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.574 | INFO | no-id | [43bab159-8246-482a-a2e7-92d61de768a7] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.574 | INFO | no-id | Validation 43bab159-8246-482a-a2e7-92d61de768a7 completed successfully
2025-12-07 20:44:25.575 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.590 | INFO | no-id | 0a367800-bcc3-45ad-813c-8ada3f40f42f | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.592 | INFO | no-id | 0a367800-bcc3-45ad-813c-8ada3f40f42f | Checking spam traps...
2025-12-07 20:44:25.592 | INFO | no-id | 0a367800-bcc3-45ad-813c-8ada3f40f42f | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.592 | INFO | no-id | [b651ae5b-455c-4fdb-896b-fc41fe01ba7e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.592 | INFO | no-id | b651ae5b-455c-4fdb-896b-fc41fe01ba7e | Analyzing provider...
2025-12-07 20:44:25.592 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.592 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.593 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.593 | INFO | no-id | [b651ae5b-455c-4fdb-896b-fc41fe01ba7e] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.593 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.593 | DEBUG | no-id | [b651ae5b-455c-4fdb-896b-fc41fe01ba7e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.593 | INFO | no-id | [b651ae5b-455c-4fdb-896b-fc41fe01ba7e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.593 | INFO | no-id | Validation b651ae5b-455c-4fdb-896b-fc41fe01ba7e completed successfully
2025-12-07 20:44:25.600 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.600 | INFO | no-id | aa67cffc-7c33-43e2-a71f-b018d7c77d22 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.602 | INFO | no-id | aa67cffc-7c33-43e2-a71f-b018d7c77d22 | Checking spam traps...
2025-12-07 20:44:25.602 | INFO | no-id | aa67cffc-7c33-43e2-a71f-b018d7c77d22 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.603 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.603 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.619 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.747 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.748 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.748 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.748 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.748210Z', 'risk_level': 'low'}
2025-12-07 20:44:25.748 | INFO | no-id | [201e4d94-b1d6-4454-9358-cb1e731f3582] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.748 | INFO | no-id | 201e4d94-b1d6-4454-9358-cb1e731f3582 | Analyzing provider...
2025-12-07 20:44:25.749 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.749 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.749 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.749 | INFO | no-id | [201e4d94-b1d6-4454-9358-cb1e731f3582] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.749 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.749 | DEBUG | no-id | [201e4d94-b1d6-4454-9358-cb1e731f3582] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.749 | INFO | no-id | [201e4d94-b1d6-4454-9358-cb1e731f3582] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.750 | INFO | no-id | Validation 201e4d94-b1d6-4454-9358-cb1e731f3582 completed successfully
2025-12-07 20:44:25.750 | INFO | no-id | 88ca46d3-1e79-4458-8809-67c934340dab | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.754 | INFO | no-id | 88ca46d3-1e79-4458-8809-67c934340dab | Checking spam traps...
2025-12-07 20:44:25.754 | INFO | no-id | 88ca46d3-1e79-4458-8809-67c934340dab | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.755 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.755 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.812 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.812 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.812 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.813 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.812876Z', 'risk_level': 'low'}
2025-12-07 20:44:25.813 | INFO | no-id | [43c2cf7e-fe11-4324-9a9a-59e666ca78ab] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.813 | INFO | no-id | 43c2cf7e-fe11-4324-9a9a-59e666ca78ab | Analyzing provider...
2025-12-07 20:44:25.813 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.813 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.814 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.814 | INFO | no-id | [43c2cf7e-fe11-4324-9a9a-59e666ca78ab] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.814 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.814 | DEBUG | no-id | [43c2cf7e-fe11-4324-9a9a-59e666ca78ab] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.814 | INFO | no-id | [43c2cf7e-fe11-4324-9a9a-59e666ca78ab] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.814 | INFO | no-id | Validation 43c2cf7e-fe11-4324-9a9a-59e666ca78ab completed successfully
2025-12-07 20:44:25.815 | INFO | no-id | 8882bc5a-be0e-4a34-bb84-638e6d75dc25 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.818 | INFO | no-id | 8882bc5a-be0e-4a34-bb84-638e6d75dc25 | Checking spam traps...
2025-12-07 20:44:25.818 | INFO | no-id | 8882bc5a-be0e-4a34-bb84-638e6d75dc25 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.818 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.821 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.841 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.841 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.841 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.841 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.841469Z', 'risk_level': 'low'}
2025-12-07 20:44:25.845 | INFO | no-id | [be4b6d53-f785-4f2b-af51-506aaa5b2d30] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.845 | INFO | no-id | be4b6d53-f785-4f2b-af51-506aaa5b2d30 | Analyzing provider...
2025-12-07 20:44:25.845 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.846 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.846 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.846 | INFO | no-id | [be4b6d53-f785-4f2b-af51-506aaa5b2d30] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.846 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.846 | DEBUG | no-id | [be4b6d53-f785-4f2b-af51-506aaa5b2d30] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.846 | INFO | no-id | [be4b6d53-f785-4f2b-af51-506aaa5b2d30] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.846 | INFO | no-id | Validation be4b6d53-f785-4f2b-af51-506aaa5b2d30 completed successfully
2025-12-07 20:44:25.847 | INFO | no-id | fee55301-c204-4624-8410-d77628201a78 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.850 | INFO | no-id | fee55301-c204-4624-8410-d77628201a78 | Checking spam traps...
2025-12-07 20:44:25.850 | INFO | no-id | fee55301-c204-4624-8410-d77628201a78 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.850 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.850 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.850 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.850 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.850595Z', 'risk_level': 'low'}
2025-12-07 20:44:25.851 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.851 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.851 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.851 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.851 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.851634Z', 'risk_level': 'low'}
2025-12-07 20:44:25.851 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.851 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.851 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.852 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.851977Z', 'risk_level': 'low'}
2025-12-07 20:44:25.852 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.852 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.852 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.852 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.852306Z', 'risk_level': 'low'}
2025-12-07 20:44:25.852 | INFO | no-id | [99708ff4-f040-4ed1-87d4-0078412ede1b] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.852 | INFO | no-id | 99708ff4-f040-4ed1-87d4-0078412ede1b | Analyzing provider...
2025-12-07 20:44:25.853 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.853 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.853 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.853 | INFO | no-id | [99708ff4-f040-4ed1-87d4-0078412ede1b] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.853 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.853 | DEBUG | no-id | [99708ff4-f040-4ed1-87d4-0078412ede1b] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.853 | INFO | no-id | [99708ff4-f040-4ed1-87d4-0078412ede1b] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.853 | INFO | no-id | Validation 99708ff4-f040-4ed1-87d4-0078412ede1b completed successfully
2025-12-07 20:44:25.853 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.854 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.854 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.854 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.854074Z', 'risk_level': 'low'}
2025-12-07 20:44:25.854 | INFO | no-id | a52321d5-7330-4676-8ae5-d3ed4db0ba68 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.857 | INFO | no-id | a52321d5-7330-4676-8ae5-d3ed4db0ba68 | Checking spam traps...
2025-12-07 20:44:25.857 | INFO | no-id | a52321d5-7330-4676-8ae5-d3ed4db0ba68 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.857 | INFO | no-id | [edc29fcc-b573-4baf-b05b-3751c6818624] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.857 | INFO | no-id | edc29fcc-b573-4baf-b05b-3751c6818624 | Analyzing provider...
2025-12-07 20:44:25.857 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.857 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.857 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.857 | INFO | no-id | [edc29fcc-b573-4baf-b05b-3751c6818624] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.857 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.857 | DEBUG | no-id | [edc29fcc-b573-4baf-b05b-3751c6818624] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.857 | INFO | no-id | [edc29fcc-b573-4baf-b05b-3751c6818624] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.858 | INFO | no-id | Validation edc29fcc-b573-4baf-b05b-3751c6818624 completed successfully
2025-12-07 20:44:25.858 | INFO | no-id | [0a367800-bcc3-45ad-813c-8ada3f40f42f] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.858 | INFO | no-id | 0a367800-bcc3-45ad-813c-8ada3f40f42f | Analyzing provider...
2025-12-07 20:44:25.858 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.858 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.858 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.858 | INFO | no-id | [0a367800-bcc3-45ad-813c-8ada3f40f42f] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.858 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.858 | DEBUG | no-id | [0a367800-bcc3-45ad-813c-8ada3f40f42f] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.858 | INFO | no-id | [0a367800-bcc3-45ad-813c-8ada3f40f42f] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.859 | INFO | no-id | Validation 0a367800-bcc3-45ad-813c-8ada3f40f42f completed successfully
2025-12-07 20:44:25.859 | INFO | no-id | [17838961-a08a-4b13-84d2-d69ea4e73cf8] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.859 | INFO | no-id | 17838961-a08a-4b13-84d2-d69ea4e73cf8 | Analyzing provider...
2025-12-07 20:44:25.859 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.859 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.859 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.859 | INFO | no-id | [17838961-a08a-4b13-84d2-d69ea4e73cf8] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.859 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.859 | DEBUG | no-id | [17838961-a08a-4b13-84d2-d69ea4e73cf8] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.859 | INFO | no-id | [17838961-a08a-4b13-84d2-d69ea4e73cf8] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.859 | INFO | no-id | Validation 17838961-a08a-4b13-84d2-d69ea4e73cf8 completed successfully
2025-12-07 20:44:25.860 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.874 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.875 | INFO | no-id | 17591e4e-5138-4124-89da-18a5321512b7 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.877 | INFO | no-id | 17591e4e-5138-4124-89da-18a5321512b7 | Checking spam traps...
2025-12-07 20:44:25.877 | INFO | no-id | 17591e4e-5138-4124-89da-18a5321512b7 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.877 | INFO | no-id | 82b2364a-cec3-4501-bb7f-7a4470d0871c | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.880 | INFO | no-id | 82b2364a-cec3-4501-bb7f-7a4470d0871c | Checking spam traps...
2025-12-07 20:44:25.880 | INFO | no-id | 82b2364a-cec3-4501-bb7f-7a4470d0871c | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.880 | INFO | no-id | f18e3bbf-89ad-4ee1-b1e8-993968f5ede7 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.883 | INFO | no-id | f18e3bbf-89ad-4ee1-b1e8-993968f5ede7 | Checking spam traps...
2025-12-07 20:44:25.883 | INFO | no-id | f18e3bbf-89ad-4ee1-b1e8-993968f5ede7 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.883 | INFO | no-id | [4ebcd68e-2585-4a02-aca1-cd2782e3d06e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.883 | INFO | no-id | 4ebcd68e-2585-4a02-aca1-cd2782e3d06e | Analyzing provider...
2025-12-07 20:44:25.883 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.883 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.883 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.883 | INFO | no-id | [4ebcd68e-2585-4a02-aca1-cd2782e3d06e] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.883 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.883 | DEBUG | no-id | [4ebcd68e-2585-4a02-aca1-cd2782e3d06e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.883 | INFO | no-id | [4ebcd68e-2585-4a02-aca1-cd2782e3d06e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.884 | INFO | no-id | Validation 4ebcd68e-2585-4a02-aca1-cd2782e3d06e completed successfully
2025-12-07 20:44:25.884 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.884 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.884 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.885 | INFO | no-id | 721346d5-31f6-4764-b5a9-b22cb4a0237e | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.887 | INFO | no-id | 721346d5-31f6-4764-b5a9-b22cb4a0237e | Checking spam traps...
2025-12-07 20:44:25.887 | INFO | no-id | 721346d5-31f6-4764-b5a9-b22cb4a0237e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.887 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.888 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.902 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.917 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.931 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.946 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:25.968 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:25.968 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:25.968 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.968 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:25.968718Z', 'risk_level': 'low'}
2025-12-07 20:44:25.969 | INFO | no-id | [aa67cffc-7c33-43e2-a71f-b018d7c77d22] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:25.969 | INFO | no-id | aa67cffc-7c33-43e2-a71f-b018d7c77d22 | Analyzing provider...
2025-12-07 20:44:25.969 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:25.969 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:25.969 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:25.969 | INFO | no-id | [aa67cffc-7c33-43e2-a71f-b018d7c77d22] Role email check | Is role: False | Type: None
2025-12-07 20:44:25.969 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:25.970 | DEBUG | no-id | [aa67cffc-7c33-43e2-a71f-b018d7c77d22] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:25.970 | INFO | no-id | [aa67cffc-7c33-43e2-a71f-b018d7c77d22] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:25.970 | INFO | no-id | Validation aa67cffc-7c33-43e2-a71f-b018d7c77d22 completed successfully
2025-12-07 20:44:25.970 | INFO | no-id | 28bae4b7-3ca8-43bd-964c-915ac1201b24 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:25.973 | INFO | no-id | 28bae4b7-3ca8-43bd-964c-915ac1201b24 | Checking spam traps...
2025-12-07 20:44:25.973 | INFO | no-id | 28bae4b7-3ca8-43bd-964c-915ac1201b24 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:25.973 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:25.974 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.019 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.019 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.019 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.019 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.019416Z', 'risk_level': 'low'}
2025-12-07 20:44:26.019 | INFO | no-id | [88ca46d3-1e79-4458-8809-67c934340dab] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.019 | INFO | no-id | 88ca46d3-1e79-4458-8809-67c934340dab | Analyzing provider...
2025-12-07 20:44:26.019 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.020 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.020 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.020 | INFO | no-id | [88ca46d3-1e79-4458-8809-67c934340dab] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.020 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.020 | DEBUG | no-id | [88ca46d3-1e79-4458-8809-67c934340dab] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.020 | INFO | no-id | [88ca46d3-1e79-4458-8809-67c934340dab] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.020 | INFO | no-id | Validation 88ca46d3-1e79-4458-8809-67c934340dab completed successfully
2025-12-07 20:44:26.021 | INFO | no-id | 61b0e2ee-cf68-4103-a0f4-5ef116d69656 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.023 | INFO | no-id | 61b0e2ee-cf68-4103-a0f4-5ef116d69656 | Checking spam traps...
2025-12-07 20:44:26.023 | INFO | no-id | 61b0e2ee-cf68-4103-a0f4-5ef116d69656 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.024 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.028 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.057 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.057 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.057 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.057 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.057469Z', 'risk_level': 'low'}
2025-12-07 20:44:26.057 | INFO | no-id | [d698c4b6-7406-49da-943a-0f22a27adcea] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.058 | INFO | no-id | d698c4b6-7406-49da-943a-0f22a27adcea | Analyzing provider...
2025-12-07 20:44:26.058 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.058 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.058 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.058 | INFO | no-id | [d698c4b6-7406-49da-943a-0f22a27adcea] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.058 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.058 | DEBUG | no-id | [d698c4b6-7406-49da-943a-0f22a27adcea] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.058 | INFO | no-id | [d698c4b6-7406-49da-943a-0f22a27adcea] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.058 | INFO | no-id | Validation d698c4b6-7406-49da-943a-0f22a27adcea completed successfully
2025-12-07 20:44:26.061 | INFO | no-id | 65f8344b-1708-49b7-bd10-ee8107a0cefa | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.063 | INFO | no-id | 65f8344b-1708-49b7-bd10-ee8107a0cefa | Checking spam traps...
2025-12-07 20:44:26.064 | INFO | no-id | 65f8344b-1708-49b7-bd10-ee8107a0cefa | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.064 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.066 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.191 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.191 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.191 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.191 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.191705Z', 'risk_level': 'low'}
2025-12-07 20:44:26.192 | INFO | no-id | [8882bc5a-be0e-4a34-bb84-638e6d75dc25] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.192 | INFO | no-id | 8882bc5a-be0e-4a34-bb84-638e6d75dc25 | Analyzing provider...
2025-12-07 20:44:26.192 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.192 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.192 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.192 | INFO | no-id | [8882bc5a-be0e-4a34-bb84-638e6d75dc25] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.193 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.193 | DEBUG | no-id | [8882bc5a-be0e-4a34-bb84-638e6d75dc25] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.193 | INFO | no-id | [8882bc5a-be0e-4a34-bb84-638e6d75dc25] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.193 | INFO | no-id | Validation 8882bc5a-be0e-4a34-bb84-638e6d75dc25 completed successfully
2025-12-07 20:44:26.194 | INFO | no-id | 81f97a6e-8a86-4796-869f-d0a908301ee9 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.198 | INFO | no-id | 81f97a6e-8a86-4796-869f-d0a908301ee9 | Checking spam traps...
2025-12-07 20:44:26.198 | INFO | no-id | 81f97a6e-8a86-4796-869f-d0a908301ee9 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.198 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.199 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.241 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.241 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.241 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.241 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.241867Z', 'risk_level': 'low'}
2025-12-07 20:44:26.242 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.242 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.242 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.242 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.242322Z', 'risk_level': 'low'}
2025-12-07 20:44:26.242 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.243 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.243 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.243 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.243232Z', 'risk_level': 'low'}
2025-12-07 20:44:26.243 | INFO | no-id | [fee55301-c204-4624-8410-d77628201a78] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.243 | INFO | no-id | fee55301-c204-4624-8410-d77628201a78 | Analyzing provider...
2025-12-07 20:44:26.243 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.244 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.244 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.244 | INFO | no-id | [fee55301-c204-4624-8410-d77628201a78] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.244 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.244 | DEBUG | no-id | [fee55301-c204-4624-8410-d77628201a78] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.244 | INFO | no-id | [fee55301-c204-4624-8410-d77628201a78] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.244 | INFO | no-id | Validation fee55301-c204-4624-8410-d77628201a78 completed successfully
2025-12-07 20:44:26.245 | INFO | no-id | [721346d5-31f6-4764-b5a9-b22cb4a0237e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.245 | INFO | no-id | 721346d5-31f6-4764-b5a9-b22cb4a0237e | Analyzing provider...
2025-12-07 20:44:26.245 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.245 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.245 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.245 | INFO | no-id | [721346d5-31f6-4764-b5a9-b22cb4a0237e] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.245 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.245 | DEBUG | no-id | [721346d5-31f6-4764-b5a9-b22cb4a0237e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.245 | INFO | no-id | [721346d5-31f6-4764-b5a9-b22cb4a0237e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.246 | INFO | no-id | Validation 721346d5-31f6-4764-b5a9-b22cb4a0237e completed successfully
2025-12-07 20:44:26.246 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.246 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.246 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.246 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.246423Z', 'risk_level': 'low'}
2025-12-07 20:44:26.246 | INFO | no-id | e2937eb4-1a09-4d80-aa38-3531cb1bed13 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.250 | INFO | no-id | e2937eb4-1a09-4d80-aa38-3531cb1bed13 | Checking spam traps...
2025-12-07 20:44:26.250 | INFO | no-id | e2937eb4-1a09-4d80-aa38-3531cb1bed13 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.250 | INFO | no-id | 0274395c-5f11-4a7c-9002-856d9bf8adbc | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.253 | INFO | no-id | 0274395c-5f11-4a7c-9002-856d9bf8adbc | Checking spam traps...
2025-12-07 20:44:26.253 | INFO | no-id | 0274395c-5f11-4a7c-9002-856d9bf8adbc | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.254 | INFO | no-id | [28bae4b7-3ca8-43bd-964c-915ac1201b24] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.254 | INFO | no-id | 28bae4b7-3ca8-43bd-964c-915ac1201b24 | Analyzing provider...
2025-12-07 20:44:26.254 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.254 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.254 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.254 | INFO | no-id | [28bae4b7-3ca8-43bd-964c-915ac1201b24] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.254 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.254 | DEBUG | no-id | [28bae4b7-3ca8-43bd-964c-915ac1201b24] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.254 | INFO | no-id | [28bae4b7-3ca8-43bd-964c-915ac1201b24] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.255 | INFO | no-id | Validation 28bae4b7-3ca8-43bd-964c-915ac1201b24 completed successfully
2025-12-07 20:44:26.255 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.255 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.255 | INFO | no-id | 7c00b9c7-1bb8-4f88-a3fd-0bbf9541df46 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.258 | INFO | no-id | 7c00b9c7-1bb8-4f88-a3fd-0bbf9541df46 | Checking spam traps...
2025-12-07 20:44:26.258 | INFO | no-id | 7c00b9c7-1bb8-4f88-a3fd-0bbf9541df46 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.258 | INFO | no-id | [17591e4e-5138-4124-89da-18a5321512b7] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.258 | INFO | no-id | 17591e4e-5138-4124-89da-18a5321512b7 | Analyzing provider...
2025-12-07 20:44:26.259 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.259 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.259 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.259 | INFO | no-id | [17591e4e-5138-4124-89da-18a5321512b7] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.259 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.259 | DEBUG | no-id | [17591e4e-5138-4124-89da-18a5321512b7] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.259 | INFO | no-id | [17591e4e-5138-4124-89da-18a5321512b7] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.259 | INFO | no-id | Validation 17591e4e-5138-4124-89da-18a5321512b7 completed successfully
2025-12-07 20:44:26.260 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.260 | INFO | no-id | db5659c9-c9f8-42f2-8ea6-a5e43e32343a | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.263 | INFO | no-id | db5659c9-c9f8-42f2-8ea6-a5e43e32343a | Checking spam traps...
2025-12-07 20:44:26.263 | INFO | no-id | db5659c9-c9f8-42f2-8ea6-a5e43e32343a | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.263 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.263 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.279 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.295 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.309 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.329 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.329 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.330 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.330 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.330067Z', 'risk_level': 'low'}
2025-12-07 20:44:26.330 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.330 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.330 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.330 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.330477Z', 'risk_level': 'low'}
2025-12-07 20:44:26.330 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.330 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.330 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.330 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.330855Z', 'risk_level': 'low'}
2025-12-07 20:44:26.332 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.332 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.332 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.332 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.332724Z', 'risk_level': 'low'}
2025-12-07 20:44:26.333 | INFO | no-id | [65f8344b-1708-49b7-bd10-ee8107a0cefa] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.333 | INFO | no-id | 65f8344b-1708-49b7-bd10-ee8107a0cefa | Analyzing provider...
2025-12-07 20:44:26.333 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.333 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.333 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.333 | INFO | no-id | [65f8344b-1708-49b7-bd10-ee8107a0cefa] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.333 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.333 | DEBUG | no-id | [65f8344b-1708-49b7-bd10-ee8107a0cefa] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.333 | INFO | no-id | [65f8344b-1708-49b7-bd10-ee8107a0cefa] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.334 | INFO | no-id | Validation 65f8344b-1708-49b7-bd10-ee8107a0cefa completed successfully
2025-12-07 20:44:26.334 | INFO | no-id | [61b0e2ee-cf68-4103-a0f4-5ef116d69656] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.334 | INFO | no-id | 61b0e2ee-cf68-4103-a0f4-5ef116d69656 | Analyzing provider...
2025-12-07 20:44:26.334 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.334 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.334 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.334 | INFO | no-id | [61b0e2ee-cf68-4103-a0f4-5ef116d69656] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.334 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.334 | DEBUG | no-id | [61b0e2ee-cf68-4103-a0f4-5ef116d69656] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.335 | INFO | no-id | [61b0e2ee-cf68-4103-a0f4-5ef116d69656] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.335 | INFO | no-id | Validation 61b0e2ee-cf68-4103-a0f4-5ef116d69656 completed successfully
2025-12-07 20:44:26.335 | INFO | no-id | [82b2364a-cec3-4501-bb7f-7a4470d0871c] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.335 | INFO | no-id | 82b2364a-cec3-4501-bb7f-7a4470d0871c | Analyzing provider...
2025-12-07 20:44:26.335 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.335 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.335 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.335 | INFO | no-id | [82b2364a-cec3-4501-bb7f-7a4470d0871c] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.335 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.336 | DEBUG | no-id | [82b2364a-cec3-4501-bb7f-7a4470d0871c] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.336 | INFO | no-id | [82b2364a-cec3-4501-bb7f-7a4470d0871c] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.336 | INFO | no-id | Validation 82b2364a-cec3-4501-bb7f-7a4470d0871c completed successfully
2025-12-07 20:44:26.336 | INFO | no-id | e0005c33-d8ac-46a3-9751-692a5f07daa0 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.339 | INFO | no-id | e0005c33-d8ac-46a3-9751-692a5f07daa0 | Checking spam traps...
2025-12-07 20:44:26.339 | INFO | no-id | e0005c33-d8ac-46a3-9751-692a5f07daa0 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.339 | INFO | no-id | 02ebf00b-7f13-4724-9159-451afdb9d530 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.342 | INFO | no-id | 02ebf00b-7f13-4724-9159-451afdb9d530 | Checking spam traps...
2025-12-07 20:44:26.342 | INFO | no-id | 02ebf00b-7f13-4724-9159-451afdb9d530 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.342 | INFO | no-id | eb6b4496-12f0-437f-9b54-68079bdc7cd7 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.344 | INFO | no-id | eb6b4496-12f0-437f-9b54-68079bdc7cd7 | Checking spam traps...
2025-12-07 20:44:26.345 | INFO | no-id | eb6b4496-12f0-437f-9b54-68079bdc7cd7 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.345 | INFO | no-id | [a52321d5-7330-4676-8ae5-d3ed4db0ba68] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.345 | INFO | no-id | a52321d5-7330-4676-8ae5-d3ed4db0ba68 | Analyzing provider...
2025-12-07 20:44:26.345 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.345 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.345 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.345 | INFO | no-id | [a52321d5-7330-4676-8ae5-d3ed4db0ba68] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.345 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.345 | DEBUG | no-id | [a52321d5-7330-4676-8ae5-d3ed4db0ba68] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.345 | INFO | no-id | [a52321d5-7330-4676-8ae5-d3ed4db0ba68] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.346 | INFO | no-id | Validation a52321d5-7330-4676-8ae5-d3ed4db0ba68 completed successfully
2025-12-07 20:44:26.347 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.347 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.347 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.347 | INFO | no-id | cfe2c17f-1e98-4c86-9c73-fc3be0c970a1 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.350 | INFO | no-id | cfe2c17f-1e98-4c86-9c73-fc3be0c970a1 | Checking spam traps...
2025-12-07 20:44:26.350 | INFO | no-id | cfe2c17f-1e98-4c86-9c73-fc3be0c970a1 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.350 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.350 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.350 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.350 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.350458Z', 'risk_level': 'low'}
2025-12-07 20:44:26.351 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.351 | INFO | no-id | [f18e3bbf-89ad-4ee1-b1e8-993968f5ede7] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.351 | INFO | no-id | f18e3bbf-89ad-4ee1-b1e8-993968f5ede7 | Analyzing provider...
2025-12-07 20:44:26.351 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.351 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.352 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.352 | INFO | no-id | [f18e3bbf-89ad-4ee1-b1e8-993968f5ede7] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.352 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.352 | DEBUG | no-id | [f18e3bbf-89ad-4ee1-b1e8-993968f5ede7] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.352 | INFO | no-id | [f18e3bbf-89ad-4ee1-b1e8-993968f5ede7] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.352 | INFO | no-id | Validation f18e3bbf-89ad-4ee1-b1e8-993968f5ede7 completed successfully
2025-12-07 20:44:26.352 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.367 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.382 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.396 | INFO | no-id | 5e102ec9-af7b-4b39-ba2c-478d726e5e1d | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.399 | INFO | no-id | 5e102ec9-af7b-4b39-ba2c-478d726e5e1d | Checking spam traps...
2025-12-07 20:44:26.399 | INFO | no-id | 5e102ec9-af7b-4b39-ba2c-478d726e5e1d | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.400 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.421 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.422 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.506 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.506 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.506 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.506 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.506657Z', 'risk_level': 'low'}
2025-12-07 20:44:26.506 | INFO | no-id | [81f97a6e-8a86-4796-869f-d0a908301ee9] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.507 | INFO | no-id | 81f97a6e-8a86-4796-869f-d0a908301ee9 | Analyzing provider...
2025-12-07 20:44:26.507 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.507 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.507 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.507 | INFO | no-id | [81f97a6e-8a86-4796-869f-d0a908301ee9] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.507 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.507 | DEBUG | no-id | [81f97a6e-8a86-4796-869f-d0a908301ee9] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.507 | INFO | no-id | [81f97a6e-8a86-4796-869f-d0a908301ee9] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.508 | INFO | no-id | Validation 81f97a6e-8a86-4796-869f-d0a908301ee9 completed successfully
2025-12-07 20:44:26.508 | INFO | no-id | 769d91a5-5c7d-49d3-8f91-107e094522d6 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.511 | INFO | no-id | 769d91a5-5c7d-49d3-8f91-107e094522d6 | Checking spam traps...
2025-12-07 20:44:26.511 | INFO | no-id | 769d91a5-5c7d-49d3-8f91-107e094522d6 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.511 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.512 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.642 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.642 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.643 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.643 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.643130Z', 'risk_level': 'low'}
2025-12-07 20:44:26.643 | INFO | no-id | [db5659c9-c9f8-42f2-8ea6-a5e43e32343a] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.643 | INFO | no-id | db5659c9-c9f8-42f2-8ea6-a5e43e32343a | Analyzing provider...
2025-12-07 20:44:26.643 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.644 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.644 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.644 | INFO | no-id | [db5659c9-c9f8-42f2-8ea6-a5e43e32343a] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.644 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.644 | DEBUG | no-id | [db5659c9-c9f8-42f2-8ea6-a5e43e32343a] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.644 | INFO | no-id | [db5659c9-c9f8-42f2-8ea6-a5e43e32343a] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.645 | INFO | no-id | Validation db5659c9-c9f8-42f2-8ea6-a5e43e32343a completed successfully
2025-12-07 20:44:26.645 | INFO | no-id | fc2c2307-dc0c-4a65-afd4-e401589eae9c | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.650 | INFO | no-id | fc2c2307-dc0c-4a65-afd4-e401589eae9c | Checking spam traps...
2025-12-07 20:44:26.651 | INFO | no-id | fc2c2307-dc0c-4a65-afd4-e401589eae9c | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.651 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.656 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.679 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.679 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.679 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.679 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.679483Z', 'risk_level': 'low'}
2025-12-07 20:44:26.681 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.681 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.681 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.681 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.681355Z', 'risk_level': 'low'}
2025-12-07 20:44:26.681 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.681 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.681 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.681 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.681776Z', 'risk_level': 'low'}
2025-12-07 20:44:26.684 | INFO | no-id | [02ebf00b-7f13-4724-9159-451afdb9d530] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.684 | INFO | no-id | 02ebf00b-7f13-4724-9159-451afdb9d530 | Analyzing provider...
2025-12-07 20:44:26.684 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.684 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.684 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.684 | INFO | no-id | [02ebf00b-7f13-4724-9159-451afdb9d530] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.685 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.685 | DEBUG | no-id | [02ebf00b-7f13-4724-9159-451afdb9d530] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.685 | INFO | no-id | [02ebf00b-7f13-4724-9159-451afdb9d530] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.685 | INFO | no-id | Validation 02ebf00b-7f13-4724-9159-451afdb9d530 completed successfully
2025-12-07 20:44:26.686 | INFO | no-id | c586228a-ec8c-4fca-abd8-57302d611747 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.688 | INFO | no-id | c586228a-ec8c-4fca-abd8-57302d611747 | Checking spam traps...
2025-12-07 20:44:26.689 | INFO | no-id | c586228a-ec8c-4fca-abd8-57302d611747 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.689 | INFO | no-id | [cfe2c17f-1e98-4c86-9c73-fc3be0c970a1] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.689 | INFO | no-id | cfe2c17f-1e98-4c86-9c73-fc3be0c970a1 | Analyzing provider...
2025-12-07 20:44:26.689 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.689 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.689 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.689 | INFO | no-id | [cfe2c17f-1e98-4c86-9c73-fc3be0c970a1] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.689 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.689 | DEBUG | no-id | [cfe2c17f-1e98-4c86-9c73-fc3be0c970a1] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.689 | INFO | no-id | [cfe2c17f-1e98-4c86-9c73-fc3be0c970a1] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.690 | INFO | no-id | Validation cfe2c17f-1e98-4c86-9c73-fc3be0c970a1 completed successfully
2025-12-07 20:44:26.690 | INFO | no-id | [0274395c-5f11-4a7c-9002-856d9bf8adbc] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.690 | INFO | no-id | 0274395c-5f11-4a7c-9002-856d9bf8adbc | Analyzing provider...
2025-12-07 20:44:26.690 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.690 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.690 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.690 | INFO | no-id | [0274395c-5f11-4a7c-9002-856d9bf8adbc] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.690 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.690 | DEBUG | no-id | [0274395c-5f11-4a7c-9002-856d9bf8adbc] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.691 | INFO | no-id | [0274395c-5f11-4a7c-9002-856d9bf8adbc] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.691 | INFO | no-id | Validation 0274395c-5f11-4a7c-9002-856d9bf8adbc completed successfully
2025-12-07 20:44:26.691 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.692 | INFO | no-id | 961579a7-a8a8-4be1-be58-d558168ff966 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.694 | INFO | no-id | 961579a7-a8a8-4be1-be58-d558168ff966 | Checking spam traps...
2025-12-07 20:44:26.695 | INFO | no-id | 961579a7-a8a8-4be1-be58-d558168ff966 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.695 | INFO | no-id | 6b78e320-3fe4-4c07-9a54-5a2da71875cf | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.698 | INFO | no-id | 6b78e320-3fe4-4c07-9a54-5a2da71875cf | Checking spam traps...
2025-12-07 20:44:26.698 | INFO | no-id | 6b78e320-3fe4-4c07-9a54-5a2da71875cf | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.698 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.698 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.698 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.698 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.698564Z', 'risk_level': 'low'}
2025-12-07 20:44:26.698 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.699 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.699 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.699 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.699 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.699 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.699606Z', 'risk_level': 'low'}
2025-12-07 20:44:26.699 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.699 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.699 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.700 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.699959Z', 'risk_level': 'low'}
2025-12-07 20:44:26.700 | INFO | no-id | [5e102ec9-af7b-4b39-ba2c-478d726e5e1d] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.700 | INFO | no-id | 5e102ec9-af7b-4b39-ba2c-478d726e5e1d | Analyzing provider...
2025-12-07 20:44:26.700 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.700 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.700 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.700 | INFO | no-id | [5e102ec9-af7b-4b39-ba2c-478d726e5e1d] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.700 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.700 | DEBUG | no-id | [5e102ec9-af7b-4b39-ba2c-478d726e5e1d] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.700 | INFO | no-id | [5e102ec9-af7b-4b39-ba2c-478d726e5e1d] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.701 | INFO | no-id | Validation 5e102ec9-af7b-4b39-ba2c-478d726e5e1d completed successfully
2025-12-07 20:44:26.701 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.717 | INFO | no-id | 3e900a19-0c20-417f-acce-c59f57999431 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.719 | INFO | no-id | 3e900a19-0c20-417f-acce-c59f57999431 | Checking spam traps...
2025-12-07 20:44:26.719 | INFO | no-id | 3e900a19-0c20-417f-acce-c59f57999431 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.719 | INFO | no-id | [7c00b9c7-1bb8-4f88-a3fd-0bbf9541df46] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.719 | INFO | no-id | 7c00b9c7-1bb8-4f88-a3fd-0bbf9541df46 | Analyzing provider...
2025-12-07 20:44:26.720 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.720 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.720 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.720 | INFO | no-id | [7c00b9c7-1bb8-4f88-a3fd-0bbf9541df46] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.720 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.720 | DEBUG | no-id | [7c00b9c7-1bb8-4f88-a3fd-0bbf9541df46] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.720 | INFO | no-id | [7c00b9c7-1bb8-4f88-a3fd-0bbf9541df46] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.720 | INFO | no-id | Validation 7c00b9c7-1bb8-4f88-a3fd-0bbf9541df46 completed successfully
2025-12-07 20:44:26.720 | INFO | no-id | [e0005c33-d8ac-46a3-9751-692a5f07daa0] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.721 | INFO | no-id | e0005c33-d8ac-46a3-9751-692a5f07daa0 | Analyzing provider...
2025-12-07 20:44:26.721 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.721 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.721 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.721 | INFO | no-id | [e0005c33-d8ac-46a3-9751-692a5f07daa0] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.721 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.721 | DEBUG | no-id | [e0005c33-d8ac-46a3-9751-692a5f07daa0] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.721 | INFO | no-id | [e0005c33-d8ac-46a3-9751-692a5f07daa0] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.721 | INFO | no-id | Validation e0005c33-d8ac-46a3-9751-692a5f07daa0 completed successfully
2025-12-07 20:44:26.722 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.737 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.751 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.751 | INFO | no-id | 0cf317a3-539c-4dae-87a5-7c1f916fc612 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.754 | INFO | no-id | 0cf317a3-539c-4dae-87a5-7c1f916fc612 | Checking spam traps...
2025-12-07 20:44:26.754 | INFO | no-id | 0cf317a3-539c-4dae-87a5-7c1f916fc612 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.754 | INFO | no-id | f03cfe0c-eaf0-4210-9bbf-11ee2d99712b | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.757 | INFO | no-id | f03cfe0c-eaf0-4210-9bbf-11ee2d99712b | Checking spam traps...
2025-12-07 20:44:26.757 | INFO | no-id | f03cfe0c-eaf0-4210-9bbf-11ee2d99712b | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.757 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.758 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.761 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.776 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.790 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.811 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.811 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.811 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.811 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.811544Z', 'risk_level': 'low'}
2025-12-07 20:44:26.811 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.811 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.812 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.812 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.812037Z', 'risk_level': 'low'}
2025-12-07 20:44:26.813 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:26.813 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:26.813 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.813 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:26.813215Z', 'risk_level': 'low'}
2025-12-07 20:44:26.813 | INFO | no-id | [eb6b4496-12f0-437f-9b54-68079bdc7cd7] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.813 | INFO | no-id | eb6b4496-12f0-437f-9b54-68079bdc7cd7 | Analyzing provider...
2025-12-07 20:44:26.813 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.813 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.814 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.814 | INFO | no-id | [eb6b4496-12f0-437f-9b54-68079bdc7cd7] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.814 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.814 | DEBUG | no-id | [eb6b4496-12f0-437f-9b54-68079bdc7cd7] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.814 | INFO | no-id | [eb6b4496-12f0-437f-9b54-68079bdc7cd7] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.814 | INFO | no-id | Validation eb6b4496-12f0-437f-9b54-68079bdc7cd7 completed successfully
2025-12-07 20:44:26.814 | INFO | no-id | [769d91a5-5c7d-49d3-8f91-107e094522d6] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.814 | INFO | no-id | 769d91a5-5c7d-49d3-8f91-107e094522d6 | Analyzing provider...
2025-12-07 20:44:26.815 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.815 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.815 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.815 | INFO | no-id | [769d91a5-5c7d-49d3-8f91-107e094522d6] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.815 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.815 | DEBUG | no-id | [769d91a5-5c7d-49d3-8f91-107e094522d6] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.815 | INFO | no-id | [769d91a5-5c7d-49d3-8f91-107e094522d6] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.815 | INFO | no-id | Validation 769d91a5-5c7d-49d3-8f91-107e094522d6 completed successfully
2025-12-07 20:44:26.816 | INFO | no-id | 1b8bb60a-f693-4e1b-97ec-9c613692152b | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.818 | INFO | no-id | 1b8bb60a-f693-4e1b-97ec-9c613692152b | Checking spam traps...
2025-12-07 20:44:26.818 | INFO | no-id | 1b8bb60a-f693-4e1b-97ec-9c613692152b | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.819 | INFO | no-id | dffd7603-3784-406a-9353-cd4f95d6c5cc | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.821 | INFO | no-id | dffd7603-3784-406a-9353-cd4f95d6c5cc | Checking spam traps...
2025-12-07 20:44:26.821 | INFO | no-id | dffd7603-3784-406a-9353-cd4f95d6c5cc | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.821 | INFO | no-id | [e2937eb4-1a09-4d80-aa38-3531cb1bed13] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:26.821 | INFO | no-id | e2937eb4-1a09-4d80-aa38-3531cb1bed13 | Analyzing provider...
2025-12-07 20:44:26.821 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:26.821 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:26.821 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:26.822 | INFO | no-id | [e2937eb4-1a09-4d80-aa38-3531cb1bed13] Role email check | Is role: False | Type: None
2025-12-07 20:44:26.822 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:26.822 | DEBUG | no-id | [e2937eb4-1a09-4d80-aa38-3531cb1bed13] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:26.822 | INFO | no-id | [e2937eb4-1a09-4d80-aa38-3531cb1bed13] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:26.822 | INFO | no-id | Validation e2937eb4-1a09-4d80-aa38-3531cb1bed13 completed successfully
2025-12-07 20:44:26.822 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.822 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.823 | INFO | no-id | 9aee114d-aafb-41f9-b3f1-bfb5467d09e5 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:26.825 | INFO | no-id | 9aee114d-aafb-41f9-b3f1-bfb5467d09e5 | Checking spam traps...
2025-12-07 20:44:26.825 | INFO | no-id | 9aee114d-aafb-41f9-b3f1-bfb5467d09e5 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:26.825 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:26.827 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.842 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:26.857 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.046 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.046 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.046 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.046 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.046729Z', 'risk_level': 'low'}
2025-12-07 20:44:27.047 | INFO | no-id | [fc2c2307-dc0c-4a65-afd4-e401589eae9c] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.047 | INFO | no-id | fc2c2307-dc0c-4a65-afd4-e401589eae9c | Analyzing provider...
2025-12-07 20:44:27.047 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.047 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.048 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.048 | INFO | no-id | [fc2c2307-dc0c-4a65-afd4-e401589eae9c] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.048 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.048 | DEBUG | no-id | [fc2c2307-dc0c-4a65-afd4-e401589eae9c] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.049 | INFO | no-id | [fc2c2307-dc0c-4a65-afd4-e401589eae9c] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.049 | INFO | no-id | Validation fc2c2307-dc0c-4a65-afd4-e401589eae9c completed successfully
2025-12-07 20:44:27.050 | INFO | no-id | a75b4b52-7325-4ff7-a686-3ea799b7db27 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.055 | INFO | no-id | a75b4b52-7325-4ff7-a686-3ea799b7db27 | Checking spam traps...
2025-12-07 20:44:27.055 | INFO | no-id | a75b4b52-7325-4ff7-a686-3ea799b7db27 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.056 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.058 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.083 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.083 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.083 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.083 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.083494Z', 'risk_level': 'low'}
2025-12-07 20:44:27.090 | INFO | no-id | [c586228a-ec8c-4fca-abd8-57302d611747] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.090 | INFO | no-id | c586228a-ec8c-4fca-abd8-57302d611747 | Analyzing provider...
2025-12-07 20:44:27.090 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.090 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.090 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.090 | INFO | no-id | [c586228a-ec8c-4fca-abd8-57302d611747] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.090 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.091 | DEBUG | no-id | [c586228a-ec8c-4fca-abd8-57302d611747] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.091 | INFO | no-id | [c586228a-ec8c-4fca-abd8-57302d611747] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.091 | INFO | no-id | Validation c586228a-ec8c-4fca-abd8-57302d611747 completed successfully
2025-12-07 20:44:27.094 | INFO | no-id | 00f4894f-1db4-4548-b156-95b373fbb05b | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.097 | INFO | no-id | 00f4894f-1db4-4548-b156-95b373fbb05b | Checking spam traps...
2025-12-07 20:44:27.097 | INFO | no-id | 00f4894f-1db4-4548-b156-95b373fbb05b | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.097 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.097 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.097 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.098 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.098 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.098074Z', 'risk_level': 'low'}
2025-12-07 20:44:27.098 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.098 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.098 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.098 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.098526Z', 'risk_level': 'low'}
2025-12-07 20:44:27.098 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.098 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.098 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.098 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.098907Z', 'risk_level': 'low'}
2025-12-07 20:44:27.099 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.099 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.099 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.099 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.099288Z', 'risk_level': 'low'}
2025-12-07 20:44:27.099 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.099 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.099 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.099 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.099649Z', 'risk_level': 'low'}
2025-12-07 20:44:27.099 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.099 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.100 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.100 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.100027Z', 'risk_level': 'low'}
2025-12-07 20:44:27.101 | INFO | no-id | [6b78e320-3fe4-4c07-9a54-5a2da71875cf] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.101 | INFO | no-id | 6b78e320-3fe4-4c07-9a54-5a2da71875cf | Analyzing provider...
2025-12-07 20:44:27.101 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.101 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.101 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.102 | INFO | no-id | [6b78e320-3fe4-4c07-9a54-5a2da71875cf] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.102 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.102 | DEBUG | no-id | [6b78e320-3fe4-4c07-9a54-5a2da71875cf] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.102 | INFO | no-id | [6b78e320-3fe4-4c07-9a54-5a2da71875cf] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.102 | INFO | no-id | Validation 6b78e320-3fe4-4c07-9a54-5a2da71875cf completed successfully
2025-12-07 20:44:27.102 | INFO | no-id | [1b8bb60a-f693-4e1b-97ec-9c613692152b] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.102 | INFO | no-id | 1b8bb60a-f693-4e1b-97ec-9c613692152b | Analyzing provider...
2025-12-07 20:44:27.102 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.102 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.103 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.103 | INFO | no-id | [1b8bb60a-f693-4e1b-97ec-9c613692152b] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.103 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.103 | DEBUG | no-id | [1b8bb60a-f693-4e1b-97ec-9c613692152b] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.103 | INFO | no-id | [1b8bb60a-f693-4e1b-97ec-9c613692152b] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.103 | INFO | no-id | Validation 1b8bb60a-f693-4e1b-97ec-9c613692152b completed successfully
2025-12-07 20:44:27.103 | INFO | no-id | [f03cfe0c-eaf0-4210-9bbf-11ee2d99712b] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.103 | INFO | no-id | f03cfe0c-eaf0-4210-9bbf-11ee2d99712b | Analyzing provider...
2025-12-07 20:44:27.103 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.103 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.104 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.104 | INFO | no-id | [f03cfe0c-eaf0-4210-9bbf-11ee2d99712b] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.104 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.104 | DEBUG | no-id | [f03cfe0c-eaf0-4210-9bbf-11ee2d99712b] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.104 | INFO | no-id | [f03cfe0c-eaf0-4210-9bbf-11ee2d99712b] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.104 | INFO | no-id | Validation f03cfe0c-eaf0-4210-9bbf-11ee2d99712b completed successfully
2025-12-07 20:44:27.104 | INFO | no-id | [0cf317a3-539c-4dae-87a5-7c1f916fc612] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.104 | INFO | no-id | 0cf317a3-539c-4dae-87a5-7c1f916fc612 | Analyzing provider...
2025-12-07 20:44:27.104 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.104 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.105 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.105 | INFO | no-id | [0cf317a3-539c-4dae-87a5-7c1f916fc612] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.105 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.105 | DEBUG | no-id | [0cf317a3-539c-4dae-87a5-7c1f916fc612] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.105 | INFO | no-id | [0cf317a3-539c-4dae-87a5-7c1f916fc612] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.105 | INFO | no-id | Validation 0cf317a3-539c-4dae-87a5-7c1f916fc612 completed successfully
2025-12-07 20:44:27.105 | INFO | no-id | [961579a7-a8a8-4be1-be58-d558168ff966] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.105 | INFO | no-id | 961579a7-a8a8-4be1-be58-d558168ff966 | Analyzing provider...
2025-12-07 20:44:27.105 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.105 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.106 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.106 | INFO | no-id | [961579a7-a8a8-4be1-be58-d558168ff966] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.106 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.106 | DEBUG | no-id | [961579a7-a8a8-4be1-be58-d558168ff966] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.106 | INFO | no-id | [961579a7-a8a8-4be1-be58-d558168ff966] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.106 | INFO | no-id | Validation 961579a7-a8a8-4be1-be58-d558168ff966 completed successfully
2025-12-07 20:44:27.106 | INFO | no-id | [3e900a19-0c20-417f-acce-c59f57999431] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.106 | INFO | no-id | 3e900a19-0c20-417f-acce-c59f57999431 | Analyzing provider...
2025-12-07 20:44:27.106 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.106 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.107 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.107 | INFO | no-id | [3e900a19-0c20-417f-acce-c59f57999431] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.107 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.107 | DEBUG | no-id | [3e900a19-0c20-417f-acce-c59f57999431] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.107 | INFO | no-id | [3e900a19-0c20-417f-acce-c59f57999431] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.107 | INFO | no-id | Validation 3e900a19-0c20-417f-acce-c59f57999431 completed successfully
2025-12-07 20:44:27.107 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.107 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.108 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.108 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.108064Z', 'risk_level': 'low'}
2025-12-07 20:44:27.108 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.124 | INFO | no-id | ff1caa8d-af10-463d-a08a-2974f39f4cca | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.126 | INFO | no-id | ff1caa8d-af10-463d-a08a-2974f39f4cca | Checking spam traps...
2025-12-07 20:44:27.126 | INFO | no-id | ff1caa8d-af10-463d-a08a-2974f39f4cca | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.127 | INFO | no-id | 3ff25f44-6106-4980-9cdc-88fbdab93d05 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.129 | INFO | no-id | 3ff25f44-6106-4980-9cdc-88fbdab93d05 | Checking spam traps...
2025-12-07 20:44:27.129 | INFO | no-id | 3ff25f44-6106-4980-9cdc-88fbdab93d05 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.129 | INFO | no-id | d1b0acac-3235-4868-88aa-a44b2aace2b2 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.132 | INFO | no-id | d1b0acac-3235-4868-88aa-a44b2aace2b2 | Checking spam traps...
2025-12-07 20:44:27.132 | INFO | no-id | d1b0acac-3235-4868-88aa-a44b2aace2b2 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.132 | INFO | no-id | d6d919ab-0fc6-4a48-99d2-ed5c5e4710fc | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.134 | INFO | no-id | d6d919ab-0fc6-4a48-99d2-ed5c5e4710fc | Checking spam traps...
2025-12-07 20:44:27.135 | INFO | no-id | d6d919ab-0fc6-4a48-99d2-ed5c5e4710fc | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.135 | INFO | no-id | b9cf96ac-8b67-48ea-a672-ba4471703e36 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.137 | INFO | no-id | b9cf96ac-8b67-48ea-a672-ba4471703e36 | Checking spam traps...
2025-12-07 20:44:27.137 | INFO | no-id | b9cf96ac-8b67-48ea-a672-ba4471703e36 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.137 | INFO | no-id | c95e2213-b842-4e45-a0de-585a323943d1 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.140 | INFO | no-id | c95e2213-b842-4e45-a0de-585a323943d1 | Checking spam traps...
2025-12-07 20:44:27.140 | INFO | no-id | c95e2213-b842-4e45-a0de-585a323943d1 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.141 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.141 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.141 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.141 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.141 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.141 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.141 | INFO | no-id | [dffd7603-3784-406a-9353-cd4f95d6c5cc] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.142 | INFO | no-id | dffd7603-3784-406a-9353-cd4f95d6c5cc | Analyzing provider...
2025-12-07 20:44:27.142 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.142 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.142 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.142 | INFO | no-id | [dffd7603-3784-406a-9353-cd4f95d6c5cc] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.142 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.142 | DEBUG | no-id | [dffd7603-3784-406a-9353-cd4f95d6c5cc] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.142 | INFO | no-id | [dffd7603-3784-406a-9353-cd4f95d6c5cc] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.142 | INFO | no-id | Validation dffd7603-3784-406a-9353-cd4f95d6c5cc completed successfully
2025-12-07 20:44:27.143 | INFO | no-id | 2b3b34b8-b46f-491b-9549-5a8a486629b9 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.145 | INFO | no-id | 2b3b34b8-b46f-491b-9549-5a8a486629b9 | Checking spam traps...
2025-12-07 20:44:27.145 | INFO | no-id | 2b3b34b8-b46f-491b-9549-5a8a486629b9 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.146 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.146 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.146 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.146 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.146199Z', 'risk_level': 'low'}
2025-12-07 20:44:27.146 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.146 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.161 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.176 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.190 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.205 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.219 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.234 | INFO | no-id | [9aee114d-aafb-41f9-b3f1-bfb5467d09e5] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.234 | INFO | no-id | 9aee114d-aafb-41f9-b3f1-bfb5467d09e5 | Analyzing provider...
2025-12-07 20:44:27.234 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.234 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.235 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.235 | INFO | no-id | [9aee114d-aafb-41f9-b3f1-bfb5467d09e5] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.235 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.235 | DEBUG | no-id | [9aee114d-aafb-41f9-b3f1-bfb5467d09e5] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.235 | INFO | no-id | [9aee114d-aafb-41f9-b3f1-bfb5467d09e5] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.235 | INFO | no-id | Validation 9aee114d-aafb-41f9-b3f1-bfb5467d09e5 completed successfully
2025-12-07 20:44:27.247 | INFO | no-id | 14c7e04c-85bb-4cee-b7fc-9a3bebdfd29f | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.250 | INFO | no-id | 14c7e04c-85bb-4cee-b7fc-9a3bebdfd29f | Checking spam traps...
2025-12-07 20:44:27.250 | INFO | no-id | 14c7e04c-85bb-4cee-b7fc-9a3bebdfd29f | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.250 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.265 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.266 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.480 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.481 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.481 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.481 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.481661Z', 'risk_level': 'low'}
2025-12-07 20:44:27.482 | INFO | no-id | [d6d919ab-0fc6-4a48-99d2-ed5c5e4710fc] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.482 | INFO | no-id | d6d919ab-0fc6-4a48-99d2-ed5c5e4710fc | Analyzing provider...
2025-12-07 20:44:27.482 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.483 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.483 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.483 | INFO | no-id | [d6d919ab-0fc6-4a48-99d2-ed5c5e4710fc] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.483 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.483 | DEBUG | no-id | [d6d919ab-0fc6-4a48-99d2-ed5c5e4710fc] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.484 | INFO | no-id | [d6d919ab-0fc6-4a48-99d2-ed5c5e4710fc] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.484 | INFO | no-id | Validation d6d919ab-0fc6-4a48-99d2-ed5c5e4710fc completed successfully
2025-12-07 20:44:27.485 | INFO | no-id | 20760f88-08fa-49a9-b728-706317c4b314 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.490 | INFO | no-id | 20760f88-08fa-49a9-b728-706317c4b314 | Checking spam traps...
2025-12-07 20:44:27.491 | INFO | no-id | 20760f88-08fa-49a9-b728-706317c4b314 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.491 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.492 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.526 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.526 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.526 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.526 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.526449Z', 'risk_level': 'low'}
2025-12-07 20:44:27.526 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.526 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.526 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.526 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.526868Z', 'risk_level': 'low'}
2025-12-07 20:44:27.527 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.527 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.527 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.527 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.527258Z', 'risk_level': 'low'}
2025-12-07 20:44:27.527 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.527 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.527 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.527 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.527660Z', 'risk_level': 'low'}
2025-12-07 20:44:27.527 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.527 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.528 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.528 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.528032Z', 'risk_level': 'low'}
2025-12-07 20:44:27.528 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.528 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.528 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.528 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.528409Z', 'risk_level': 'low'}
2025-12-07 20:44:27.528 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.528 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.528 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.528 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.528783Z', 'risk_level': 'low'}
2025-12-07 20:44:27.528 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.529 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.529 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.529 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.529153Z', 'risk_level': 'low'}
2025-12-07 20:44:27.529 | INFO | no-id | [14c7e04c-85bb-4cee-b7fc-9a3bebdfd29f] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.529 | INFO | no-id | 14c7e04c-85bb-4cee-b7fc-9a3bebdfd29f | Analyzing provider...
2025-12-07 20:44:27.529 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.529 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.529 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.529 | INFO | no-id | [14c7e04c-85bb-4cee-b7fc-9a3bebdfd29f] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.530 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.530 | DEBUG | no-id | [14c7e04c-85bb-4cee-b7fc-9a3bebdfd29f] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.530 | INFO | no-id | [14c7e04c-85bb-4cee-b7fc-9a3bebdfd29f] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.530 | INFO | no-id | Validation 14c7e04c-85bb-4cee-b7fc-9a3bebdfd29f completed successfully
2025-12-07 20:44:27.530 | INFO | no-id | [3ff25f44-6106-4980-9cdc-88fbdab93d05] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.530 | INFO | no-id | 3ff25f44-6106-4980-9cdc-88fbdab93d05 | Analyzing provider...
2025-12-07 20:44:27.530 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.530 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.531 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.531 | INFO | no-id | [3ff25f44-6106-4980-9cdc-88fbdab93d05] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.531 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.531 | DEBUG | no-id | [3ff25f44-6106-4980-9cdc-88fbdab93d05] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.531 | INFO | no-id | [3ff25f44-6106-4980-9cdc-88fbdab93d05] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.531 | INFO | no-id | Validation 3ff25f44-6106-4980-9cdc-88fbdab93d05 completed successfully
2025-12-07 20:44:27.531 | INFO | no-id | [ff1caa8d-af10-463d-a08a-2974f39f4cca] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.531 | INFO | no-id | ff1caa8d-af10-463d-a08a-2974f39f4cca | Analyzing provider...
2025-12-07 20:44:27.531 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.532 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.532 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.532 | INFO | no-id | [ff1caa8d-af10-463d-a08a-2974f39f4cca] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.532 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.532 | DEBUG | no-id | [ff1caa8d-af10-463d-a08a-2974f39f4cca] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.532 | INFO | no-id | [ff1caa8d-af10-463d-a08a-2974f39f4cca] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.532 | INFO | no-id | Validation ff1caa8d-af10-463d-a08a-2974f39f4cca completed successfully
2025-12-07 20:44:27.532 | INFO | no-id | [2b3b34b8-b46f-491b-9549-5a8a486629b9] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.532 | INFO | no-id | 2b3b34b8-b46f-491b-9549-5a8a486629b9 | Analyzing provider...
2025-12-07 20:44:27.533 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.533 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.533 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.533 | INFO | no-id | [2b3b34b8-b46f-491b-9549-5a8a486629b9] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.533 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.533 | DEBUG | no-id | [2b3b34b8-b46f-491b-9549-5a8a486629b9] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.533 | INFO | no-id | [2b3b34b8-b46f-491b-9549-5a8a486629b9] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.533 | INFO | no-id | Validation 2b3b34b8-b46f-491b-9549-5a8a486629b9 completed successfully
2025-12-07 20:44:27.533 | INFO | no-id | [00f4894f-1db4-4548-b156-95b373fbb05b] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.534 | INFO | no-id | 00f4894f-1db4-4548-b156-95b373fbb05b | Analyzing provider...
2025-12-07 20:44:27.534 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.534 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.534 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.534 | INFO | no-id | [00f4894f-1db4-4548-b156-95b373fbb05b] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.534 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.534 | DEBUG | no-id | [00f4894f-1db4-4548-b156-95b373fbb05b] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.535 | INFO | no-id | [00f4894f-1db4-4548-b156-95b373fbb05b] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.535 | INFO | no-id | Validation 00f4894f-1db4-4548-b156-95b373fbb05b completed successfully
2025-12-07 20:44:27.535 | INFO | no-id | [c95e2213-b842-4e45-a0de-585a323943d1] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.535 | INFO | no-id | c95e2213-b842-4e45-a0de-585a323943d1 | Analyzing provider...
2025-12-07 20:44:27.535 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.535 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.536 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.536 | INFO | no-id | [c95e2213-b842-4e45-a0de-585a323943d1] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.536 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.536 | DEBUG | no-id | [c95e2213-b842-4e45-a0de-585a323943d1] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.536 | INFO | no-id | [c95e2213-b842-4e45-a0de-585a323943d1] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.536 | INFO | no-id | Validation c95e2213-b842-4e45-a0de-585a323943d1 completed successfully
2025-12-07 20:44:27.536 | INFO | no-id | [b9cf96ac-8b67-48ea-a672-ba4471703e36] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.536 | INFO | no-id | b9cf96ac-8b67-48ea-a672-ba4471703e36 | Analyzing provider...
2025-12-07 20:44:27.537 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.537 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.537 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.537 | INFO | no-id | [b9cf96ac-8b67-48ea-a672-ba4471703e36] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.537 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.537 | DEBUG | no-id | [b9cf96ac-8b67-48ea-a672-ba4471703e36] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.537 | INFO | no-id | [b9cf96ac-8b67-48ea-a672-ba4471703e36] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.538 | INFO | no-id | Validation b9cf96ac-8b67-48ea-a672-ba4471703e36 completed successfully
2025-12-07 20:44:27.538 | INFO | no-id | [d1b0acac-3235-4868-88aa-a44b2aace2b2] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.538 | INFO | no-id | d1b0acac-3235-4868-88aa-a44b2aace2b2 | Analyzing provider...
2025-12-07 20:44:27.538 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.538 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.538 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.538 | INFO | no-id | [d1b0acac-3235-4868-88aa-a44b2aace2b2] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.539 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.539 | DEBUG | no-id | [d1b0acac-3235-4868-88aa-a44b2aace2b2] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.539 | INFO | no-id | [d1b0acac-3235-4868-88aa-a44b2aace2b2] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.539 | INFO | no-id | Validation d1b0acac-3235-4868-88aa-a44b2aace2b2 completed successfully
2025-12-07 20:44:27.539 | INFO | no-id | b7fcd0d7-cb17-426b-b270-6399aed9306c | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.542 | INFO | no-id | b7fcd0d7-cb17-426b-b270-6399aed9306c | Checking spam traps...
2025-12-07 20:44:27.542 | INFO | no-id | b7fcd0d7-cb17-426b-b270-6399aed9306c | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.543 | INFO | no-id | d2bf77dc-dc97-4f05-9f74-02c40131ffd9 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.545 | INFO | no-id | d2bf77dc-dc97-4f05-9f74-02c40131ffd9 | Checking spam traps...
2025-12-07 20:44:27.545 | INFO | no-id | d2bf77dc-dc97-4f05-9f74-02c40131ffd9 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.546 | INFO | no-id | c9954d3b-a8ab-4fec-a10f-8ef7af72eda9 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.548 | INFO | no-id | c9954d3b-a8ab-4fec-a10f-8ef7af72eda9 | Checking spam traps...
2025-12-07 20:44:27.548 | INFO | no-id | c9954d3b-a8ab-4fec-a10f-8ef7af72eda9 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.549 | INFO | no-id | 1eb9c539-fbea-4231-a284-bdc3103f3e69 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.551 | INFO | no-id | 1eb9c539-fbea-4231-a284-bdc3103f3e69 | Checking spam traps...
2025-12-07 20:44:27.551 | INFO | no-id | 1eb9c539-fbea-4231-a284-bdc3103f3e69 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.552 | INFO | no-id | 0752b3fb-474e-407e-8285-3a804d27c0ec | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.554 | INFO | no-id | 0752b3fb-474e-407e-8285-3a804d27c0ec | Checking spam traps...
2025-12-07 20:44:27.554 | INFO | no-id | 0752b3fb-474e-407e-8285-3a804d27c0ec | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.555 | INFO | no-id | c48d46a7-1ae4-495c-92c6-6950cf34b32f | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.557 | INFO | no-id | c48d46a7-1ae4-495c-92c6-6950cf34b32f | Checking spam traps...
2025-12-07 20:44:27.557 | INFO | no-id | c48d46a7-1ae4-495c-92c6-6950cf34b32f | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.557 | INFO | no-id | d7be866b-7229-480e-abd4-199530a18e37 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.560 | INFO | no-id | d7be866b-7229-480e-abd4-199530a18e37 | Checking spam traps...
2025-12-07 20:44:27.560 | INFO | no-id | d7be866b-7229-480e-abd4-199530a18e37 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.560 | INFO | no-id | c08232be-d4e3-4b91-91ce-ade36a2050d2 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.563 | INFO | no-id | c08232be-d4e3-4b91-91ce-ade36a2050d2 | Checking spam traps...
2025-12-07 20:44:27.563 | INFO | no-id | c08232be-d4e3-4b91-91ce-ade36a2050d2 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.563 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.563 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.563 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.563 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.563 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.564 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.564 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.564 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.564 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.579 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.593 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.608 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.623 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.637 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.652 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.666 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.690 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.690 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.690 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.690 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.690738Z', 'risk_level': 'low'}
2025-12-07 20:44:27.691 | INFO | no-id | [a75b4b52-7325-4ff7-a686-3ea799b7db27] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.691 | INFO | no-id | a75b4b52-7325-4ff7-a686-3ea799b7db27 | Analyzing provider...
2025-12-07 20:44:27.691 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.691 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.691 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.691 | INFO | no-id | [a75b4b52-7325-4ff7-a686-3ea799b7db27] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.692 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.692 | DEBUG | no-id | [a75b4b52-7325-4ff7-a686-3ea799b7db27] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.692 | INFO | no-id | [a75b4b52-7325-4ff7-a686-3ea799b7db27] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.692 | INFO | no-id | Validation a75b4b52-7325-4ff7-a686-3ea799b7db27 completed successfully
2025-12-07 20:44:27.692 | INFO | no-id | 494d1131-b112-4585-a1fb-d66c13371b61 | Format validation passed | Email: use***@e***.com
2025-12-07 20:44:27.695 | INFO | no-id | 494d1131-b112-4585-a1fb-d66c13371b61 | Checking spam traps...
2025-12-07 20:44:27.695 | INFO | no-id | 494d1131-b112-4585-a1fb-d66c13371b61 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:44:27.695 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:44:27.697 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:27.886 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.886 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.887 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.887 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.887136Z', 'risk_level': 'low'}
2025-12-07 20:44:27.887 | INFO | no-id | [20760f88-08fa-49a9-b728-706317c4b314] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.888 | INFO | no-id | 20760f88-08fa-49a9-b728-706317c4b314 | Analyzing provider...
2025-12-07 20:44:27.888 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.888 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.888 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.889 | INFO | no-id | [20760f88-08fa-49a9-b728-706317c4b314] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.889 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.889 | DEBUG | no-id | [20760f88-08fa-49a9-b728-706317c4b314] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.889 | INFO | no-id | [20760f88-08fa-49a9-b728-706317c4b314] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.890 | INFO | no-id | Validation 20760f88-08fa-49a9-b728-706317c4b314 completed successfully
2025-12-07 20:44:27.893 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.893 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.893 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.893 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.893635Z', 'risk_level': 'low'}
2025-12-07 20:44:27.894 | INFO | no-id | [c9954d3b-a8ab-4fec-a10f-8ef7af72eda9] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.894 | INFO | no-id | c9954d3b-a8ab-4fec-a10f-8ef7af72eda9 | Analyzing provider...
2025-12-07 20:44:27.894 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.894 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.894 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.895 | INFO | no-id | [c9954d3b-a8ab-4fec-a10f-8ef7af72eda9] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.895 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.895 | DEBUG | no-id | [c9954d3b-a8ab-4fec-a10f-8ef7af72eda9] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.895 | INFO | no-id | [c9954d3b-a8ab-4fec-a10f-8ef7af72eda9] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.896 | INFO | no-id | Validation c9954d3b-a8ab-4fec-a10f-8ef7af72eda9 completed successfully
2025-12-07 20:44:27.909 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.909 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.910 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.910 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.910146Z', 'risk_level': 'low'}
2025-12-07 20:44:27.910 | INFO | no-id | [0752b3fb-474e-407e-8285-3a804d27c0ec] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.910 | INFO | no-id | 0752b3fb-474e-407e-8285-3a804d27c0ec | Analyzing provider...
2025-12-07 20:44:27.910 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.911 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.911 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.911 | INFO | no-id | [0752b3fb-474e-407e-8285-3a804d27c0ec] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.911 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.911 | DEBUG | no-id | [0752b3fb-474e-407e-8285-3a804d27c0ec] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.912 | INFO | no-id | [0752b3fb-474e-407e-8285-3a804d27c0ec] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.912 | INFO | no-id | Validation 0752b3fb-474e-407e-8285-3a804d27c0ec completed successfully
2025-12-07 20:44:27.920 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.920 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.920 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.920 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.920536Z', 'risk_level': 'low'}
2025-12-07 20:44:27.921 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.921 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.921 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.921 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.921577Z', 'risk_level': 'low'}
2025-12-07 20:44:27.922 | INFO | no-id | [c08232be-d4e3-4b91-91ce-ade36a2050d2] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.922 | INFO | no-id | c08232be-d4e3-4b91-91ce-ade36a2050d2 | Analyzing provider...
2025-12-07 20:44:27.922 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.922 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.922 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.922 | INFO | no-id | [c08232be-d4e3-4b91-91ce-ade36a2050d2] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.923 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.923 | DEBUG | no-id | [c08232be-d4e3-4b91-91ce-ade36a2050d2] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.923 | INFO | no-id | [c08232be-d4e3-4b91-91ce-ade36a2050d2] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.923 | INFO | no-id | Validation c08232be-d4e3-4b91-91ce-ade36a2050d2 completed successfully
2025-12-07 20:44:27.923 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.924 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.924 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.924 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.924190Z', 'risk_level': 'low'}
2025-12-07 20:44:27.924 | INFO | no-id | [1eb9c539-fbea-4231-a284-bdc3103f3e69] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.924 | INFO | no-id | 1eb9c539-fbea-4231-a284-bdc3103f3e69 | Analyzing provider...
2025-12-07 20:44:27.924 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.925 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.925 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.925 | INFO | no-id | [1eb9c539-fbea-4231-a284-bdc3103f3e69] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.925 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.925 | DEBUG | no-id | [1eb9c539-fbea-4231-a284-bdc3103f3e69] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.925 | INFO | no-id | [1eb9c539-fbea-4231-a284-bdc3103f3e69] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.926 | INFO | no-id | Validation 1eb9c539-fbea-4231-a284-bdc3103f3e69 completed successfully
2025-12-07 20:44:27.926 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.926 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.926 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.926 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.926450Z', 'risk_level': 'low'}
2025-12-07 20:44:27.926 | INFO | no-id | [494d1131-b112-4585-a1fb-d66c13371b61] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.926 | INFO | no-id | 494d1131-b112-4585-a1fb-d66c13371b61 | Analyzing provider...
2025-12-07 20:44:27.926 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.927 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.927 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.927 | INFO | no-id | [494d1131-b112-4585-a1fb-d66c13371b61] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.927 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.927 | DEBUG | no-id | [494d1131-b112-4585-a1fb-d66c13371b61] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.927 | INFO | no-id | [494d1131-b112-4585-a1fb-d66c13371b61] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.927 | INFO | no-id | Validation 494d1131-b112-4585-a1fb-d66c13371b61 completed successfully
2025-12-07 20:44:27.928 | INFO | no-id | [d2bf77dc-dc97-4f05-9f74-02c40131ffd9] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.928 | INFO | no-id | d2bf77dc-dc97-4f05-9f74-02c40131ffd9 | Analyzing provider...
2025-12-07 20:44:27.928 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.928 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.928 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.928 | INFO | no-id | [d2bf77dc-dc97-4f05-9f74-02c40131ffd9] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.929 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.929 | DEBUG | no-id | [d2bf77dc-dc97-4f05-9f74-02c40131ffd9] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.929 | INFO | no-id | [d2bf77dc-dc97-4f05-9f74-02c40131ffd9] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.929 | INFO | no-id | Validation d2bf77dc-dc97-4f05-9f74-02c40131ffd9 completed successfully
2025-12-07 20:44:27.932 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.932 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.932 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.932 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.932576Z', 'risk_level': 'low'}
2025-12-07 20:44:27.933 | INFO | no-id | [d7be866b-7229-480e-abd4-199530a18e37] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.933 | INFO | no-id | d7be866b-7229-480e-abd4-199530a18e37 | Analyzing provider...
2025-12-07 20:44:27.933 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.933 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.933 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.933 | INFO | no-id | [d7be866b-7229-480e-abd4-199530a18e37] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.934 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.934 | DEBUG | no-id | [d7be866b-7229-480e-abd4-199530a18e37] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.934 | INFO | no-id | [d7be866b-7229-480e-abd4-199530a18e37] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.934 | INFO | no-id | Validation d7be866b-7229-480e-abd4-199530a18e37 completed successfully
2025-12-07 20:44:27.940 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:27.940 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:27.940 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.940 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:27.940531Z', 'risk_level': 'low'}
2025-12-07 20:44:27.940 | INFO | no-id | [b7fcd0d7-cb17-426b-b270-6399aed9306c] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:27.941 | INFO | no-id | b7fcd0d7-cb17-426b-b270-6399aed9306c | Analyzing provider...
2025-12-07 20:44:27.941 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:27.941 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:27.941 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:27.941 | INFO | no-id | [b7fcd0d7-cb17-426b-b270-6399aed9306c] Role email check | Is role: False | Type: None
2025-12-07 20:44:27.941 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:27.941 | DEBUG | no-id | [b7fcd0d7-cb17-426b-b270-6399aed9306c] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:27.941 | INFO | no-id | [b7fcd0d7-cb17-426b-b270-6399aed9306c] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:27.942 | INFO | no-id | Validation b7fcd0d7-cb17-426b-b270-6399aed9306c completed successfully
2025-12-07 20:44:28.008 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:28.009 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:28.009 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:28.009 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:28.009270Z', 'risk_level': 'low'}
2025-12-07 20:44:28.009 | INFO | no-id | [c48d46a7-1ae4-495c-92c6-6950cf34b32f] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:28.010 | INFO | no-id | c48d46a7-1ae4-495c-92c6-6950cf34b32f | Analyzing provider...
2025-12-07 20:44:28.010 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:44:28.010 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:28.010 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:44:28.010 | INFO | no-id | [c48d46a7-1ae4-495c-92c6-6950cf34b32f] Role email check | Is role: False | Type: None
2025-12-07 20:44:28.011 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:44:28.011 | DEBUG | no-id | [c48d46a7-1ae4-495c-92c6-6950cf34b32f] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:28.011 | INFO | no-id | [c48d46a7-1ae4-495c-92c6-6950cf34b32f] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:44:28.011 | INFO | no-id | Validation c48d46a7-1ae4-495c-92c6-6950cf34b32f completed successfully
2025-12-07 20:44:28.012 | ERROR | no-id | Error incrementing usage for user-1: 'FakeRedis' object has no attribute 'incrby'
2025-12-07 20:44:28.033 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:44:28.033 | INFO | no-id | Redis available: False
2025-12-07 20:44:28.034 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:28.039 | INFO | no-id | Email validation | User: test_user | Plan: PREMIUM | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:28.040 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:44:28.040 | INFO | no-id | 423056e6-d462-460d-bbbb-807196c2f93e | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:44:28.087 | INFO | no-id | 5fa37bd4-c94e-4eef-8deb-acf2e3e7f9ea | Format validation passed | Email: tes***@e***.com
2025-12-07 20:44:28.089 | INFO | no-id | 5fa37bd4-c94e-4eef-8deb-acf2e3e7f9ea | Checking spam traps...
2025-12-07 20:44:28.089 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:44:28.089 | INFO | no-id | 5fa37bd4-c94e-4eef-8deb-acf2e3e7f9ea | Spam trap check completed | is_trap=False, confidence=0.5, type=role_based
2025-12-07 20:44:28.090 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for tes***@e***.com
2025-12-07 20:44:28.090 | INFO | no-id | [HIBP] Cache HIT for tes***@e***.com
2025-12-07 20:44:28.090 | WARNING | no-id | [HIBP] Cache error: 'int' object does not support item assignment
2025-12-07 20:44:28.090 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:28.312 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:28.313 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:28.318 | INFO | no-id | [HIBP] Result cached
2025-12-07 20:44:28.318 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:28.314157Z', 'risk_level': 'low'}
2025-12-07 20:44:28.319 | INFO | no-id | [5fa37bd4-c94e-4eef-8deb-acf2e3e7f9ea] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:28.320 | INFO | no-id | 5fa37bd4-c94e-4eef-8deb-acf2e3e7f9ea | Analyzing provider...
2025-12-07 20:44:28.320 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:28.322 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.271s due to Task <Task pending name='Task-1867' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:28.594 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 20:44:28.596 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.589s due to Task <Task pending name='Task-1867' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:29.187 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 20:44:29.189 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.063s due to Task <Task pending name='Task-1867' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:30.253 | DEBUG | no-id | Async MX primary failed for example.com: Task <Task pending name='Task-1867' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:30.275 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.261s due to Task <Task pending name='Task-1867' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:811> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:30.322 | ERROR | no-id | Internal analysis failed: 
2025-12-07 20:44:30.323 | WARNING | no-id | Provider analysis timeout for test@example.com after 5.0s
2025-12-07 20:44:30.324 | INFO | no-id | [5fa37bd4-c94e-4eef-8deb-acf2e3e7f9ea] Provider analysis complete | Provider: generic | SPF: no-spf | DKIM: not_found | Reputation: 0.5
2025-12-07 20:44:30.324 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:30.333 | WARNING | no-id | Domain validation FAILED: example.com | Error: disposable_domain | Detail: Disposable domain: example.com
2025-12-07 20:44:30.336 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:44:30.337 | INFO | no-id | Validation 423056e6-d462-460d-bbbb-807196c2f93e completed successfully
2025-12-07 20:44:30.398 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch
2025-12-07 20:44:30.398 | INFO | no-id | Redis available: False
2025-12-07 20:44:30.398 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:30.431 | DEBUG | no-id | No Bearer token in Authorization header
2025-12-07 20:44:30.469 | WARNING | no-id | Validation Error | Count: 1 | Details: [{"field": "body.emails", "message": "List should have at most 1000 items after validation, not 500000", "type": "too_long", "input": ["test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test | Trace: None | Plan: UNKNOWN | Path: /validate/batch
2025-12-07 20:44:30.565 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:44:30.572 | INFO | no-id | Redis available: False
2025-12-07 20:44:30.572 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:30.576 | INFO | no-id | Email validation | User: test_user | Plan: PREMIUM | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:30.577 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:44:30.577 | INFO | no-id | 36d639d8-ba0b-4a47-8d60-180bbd868e57 | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:44:30.617 | INFO | no-id | 524e6503-ba4d-4ef6-aa01-40ce636594fd | Format validation passed | Email: tes***@e***.com
2025-12-07 20:44:30.620 | INFO | no-id | 524e6503-ba4d-4ef6-aa01-40ce636594fd | Checking spam traps...
2025-12-07 20:44:30.620 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:44:30.620 | INFO | no-id | 524e6503-ba4d-4ef6-aa01-40ce636594fd | Spam trap check completed | is_trap=False, confidence=0.5, type=role_based
2025-12-07 20:44:30.621 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for tes***@e***.com
2025-12-07 20:44:30.621 | INFO | no-id | [HIBP] Cache HIT for tes***@e***.com
2025-12-07 20:44:30.621 | WARNING | no-id | [HIBP] Cache error: 'int' object does not support item assignment
2025-12-07 20:44:30.621 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:30.862 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:30.863 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:30.866 | INFO | no-id | [HIBP] Result cached
2025-12-07 20:44:30.867 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:30.863693Z', 'risk_level': 'low'}
2025-12-07 20:44:30.867 | INFO | no-id | [524e6503-ba4d-4ef6-aa01-40ce636594fd] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:30.867 | INFO | no-id | 524e6503-ba4d-4ef6-aa01-40ce636594fd | Analyzing provider...
2025-12-07 20:44:30.868 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:30.869 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.316s due to Task <Task pending name='Task-1947' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:31.186 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 20:44:31.188 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.545s due to Task <Task pending name='Task-1947' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:31.735 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 20:44:31.737 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.039s due to Task <Task pending name='Task-1947' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:32.778 | DEBUG | no-id | Async MX primary failed for example.com: Task <Task pending name='Task-1947' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:32.870 | ERROR | no-id | Internal analysis failed: 
2025-12-07 20:44:32.871 | WARNING | no-id | Provider analysis timeout for test@example.com after 5.0s
2025-12-07 20:44:32.873 | INFO | no-id | [524e6503-ba4d-4ef6-aa01-40ce636594fd] Provider analysis complete | Provider: generic | SPF: no-spf | DKIM: not_found | Reputation: 0.5
2025-12-07 20:44:32.873 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:32.883 | WARNING | no-id | Domain validation FAILED: example.com | Error: disposable_domain | Detail: Disposable domain: example.com
2025-12-07 20:44:32.887 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:44:32.887 | INFO | no-id | Validation 36d639d8-ba0b-4a47-8d60-180bbd868e57 completed successfully
2025-12-07 20:44:32.952 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:44:32.952 | INFO | no-id | Redis available: False
2025-12-07 20:44:32.952 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:32.963 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:44:32.964 | INFO | no-id | Redis available: False
2025-12-07 20:44:32.964 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:32.971 | INFO | no-id | Email validation | User: test_user | Plan: PREMIUM | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:32.971 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:44:32.972 | INFO | no-id | f2eb164a-6b8f-41cd-88b8-ed20e2dcc53c | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:44:33.023 | INFO | no-id | 007af3d0-b7f7-4444-8818-a6e057882331 | Format validation passed | Email: tes***@e***.com
2025-12-07 20:44:33.026 | INFO | no-id | 007af3d0-b7f7-4444-8818-a6e057882331 | Checking spam traps...
2025-12-07 20:44:33.026 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:44:33.026 | INFO | no-id | 007af3d0-b7f7-4444-8818-a6e057882331 | Spam trap check completed | is_trap=False, confidence=0.5, type=role_based
2025-12-07 20:44:33.027 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for tes***@e***.com
2025-12-07 20:44:33.027 | INFO | no-id | [HIBP] Cache HIT for tes***@e***.com
2025-12-07 20:44:33.027 | WARNING | no-id | [HIBP] Cache error: 'int' object does not support item assignment
2025-12-07 20:44:33.027 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:33.258 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:33.259 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:33.263 | INFO | no-id | [HIBP] Result cached
2025-12-07 20:44:33.264 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:33.259596Z', 'risk_level': 'low'}
2025-12-07 20:44:33.264 | INFO | no-id | [007af3d0-b7f7-4444-8818-a6e057882331] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:33.265 | INFO | no-id | 007af3d0-b7f7-4444-8818-a6e057882331 | Analyzing provider...
2025-12-07 20:44:33.265 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:33.266 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.317s due to Task <Task pending name='Task-2018' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:33.584 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 20:44:33.585 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.578s due to Task <Task pending name='Task-2018' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:34.165 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 20:44:34.167 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.006s due to Task <Task pending name='Task-2018' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:35.175 | DEBUG | no-id | Async MX primary failed for example.com: Task <Task pending name='Task-2018' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:35.188 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.280s due to Task <Task pending name='Task-2018' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:811> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:44:35.267 | ERROR | no-id | Internal analysis failed: 
2025-12-07 20:44:35.268 | WARNING | no-id | Provider analysis timeout for test@example.com after 5.0s
2025-12-07 20:44:35.269 | INFO | no-id | [007af3d0-b7f7-4444-8818-a6e057882331] Provider analysis complete | Provider: generic | SPF: no-spf | DKIM: not_found | Reputation: 0.5
2025-12-07 20:44:35.269 | INFO | no-id | Validating domain: example.com
2025-12-07 20:44:35.287 | WARNING | no-id | Domain validation FAILED: example.com | Error: disposable_domain | Detail: Disposable domain: example.com
2025-12-07 20:44:35.291 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:44:35.291 | INFO | no-id | Validation f2eb164a-6b8f-41cd-88b8-ed20e2dcc53c completed successfully
2025-12-07 20:44:35.303 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch
2025-12-07 20:44:35.304 | INFO | no-id | Redis available: False
2025-12-07 20:44:35.304 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:35.313 | INFO | no-id | Batch validation requested by: test_user (Plan: PREMIUM)
2025-12-07 20:44:35.347 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:35.350 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:35.354 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:35.359 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:35.362 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136975.36292 due to 5 failures
2025-12-07 20:44:35.377 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:44:35.394 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:44:35.406 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:44:35.442 | DEBUG | no-id | [SPF] Found for example.com: v=spf1 include:_spf.google.com ~all...
2025-12-07 20:44:35.445 | DEBUG | no-id | SPF check failed for example.com: No answer
2025-12-07 20:44:35.448 | DEBUG | no-id | [DMARC] Found for example.com: v=DMARC1; p=reject;...
2025-12-07 20:44:35.462 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:44:35.463 | INFO | no-id | [DKIM] Found for example.com with selector 'google'
2025-12-07 20:44:35.465 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:44:35.466 | DEBUG | no-id | [DKIM] Selector 'google' failed: NXDOMAIN
2025-12-07 20:44:35.466 | DEBUG | no-id | [DKIM] Trying selector 'default' for example.com: default._domainkey.example.com
2025-12-07 20:44:35.466 | DEBUG | no-id | [DKIM] Selector 'default' failed: NXDOMAIN
2025-12-07 20:44:35.466 | DEBUG | no-id | [DKIM] Trying selector 'selector1' for example.com: selector1._domainkey.example.com
2025-12-07 20:44:35.467 | DEBUG | no-id | [DKIM] Selector 'selector1' failed: NXDOMAIN
2025-12-07 20:44:35.467 | DEBUG | no-id | [DKIM] Trying selector 'selector2' for example.com: selector2._domainkey.example.com
2025-12-07 20:44:35.467 | DEBUG | no-id | [DKIM] Selector 'selector2' failed: NXDOMAIN
2025-12-07 20:44:35.467 | DEBUG | no-id | [DKIM] Trying selector 's1' for example.com: s1._domainkey.example.com
2025-12-07 20:44:35.467 | DEBUG | no-id | [DKIM] Selector 's1' failed: NXDOMAIN
2025-12-07 20:44:35.468 | DEBUG | no-id | [DKIM] Trying selector 's2' for example.com: s2._domainkey.example.com
2025-12-07 20:44:35.468 | DEBUG | no-id | [DKIM] Selector 's2' failed: NXDOMAIN
2025-12-07 20:44:35.468 | DEBUG | no-id | [DKIM] Trying selector 's201709' for example.com: s201709._domainkey.example.com
2025-12-07 20:44:35.468 | DEBUG | no-id | [DKIM] Selector 's201709' failed: NXDOMAIN
2025-12-07 20:44:35.468 | DEBUG | no-id | [DKIM] Trying selector 's202003' for example.com: s202003._domainkey.example.com
2025-12-07 20:44:35.468 | DEBUG | no-id | [DKIM] Selector 's202003' failed: NXDOMAIN
2025-12-07 20:44:35.469 | DEBUG | no-id | [DKIM] Trying selector 'k1' for example.com: k1._domainkey.example.com
2025-12-07 20:44:35.469 | DEBUG | no-id | [DKIM] Selector 'k1' failed: NXDOMAIN
2025-12-07 20:44:35.469 | DEBUG | no-id | [DKIM] Trying selector 'k2' for example.com: k2._domainkey.example.com
2025-12-07 20:44:35.469 | DEBUG | no-id | [DKIM] Selector 'k2' failed: NXDOMAIN
2025-12-07 20:44:35.469 | DEBUG | no-id | [DKIM] Trying selector 'mail' for example.com: mail._domainkey.example.com
2025-12-07 20:44:35.470 | DEBUG | no-id | [DKIM] Selector 'mail' failed: NXDOMAIN
2025-12-07 20:44:35.470 | DEBUG | no-id | [DKIM] Trying selector 'dkim' for example.com: dkim._domainkey.example.com
2025-12-07 20:44:35.470 | DEBUG | no-id | [DKIM] Selector 'dkim' failed: NXDOMAIN
2025-12-07 20:44:35.470 | DEBUG | no-id | [DKIM] Trying selector 'amazonses' for example.com: amazonses._domainkey.example.com
2025-12-07 20:44:35.470 | DEBUG | no-id | [DKIM] Selector 'amazonses' failed: NXDOMAIN
2025-12-07 20:44:35.470 | DEBUG | no-id | [DKIM] Trying selector 'sendgrid' for example.com: sendgrid._domainkey.example.com
2025-12-07 20:44:35.471 | DEBUG | no-id | [DKIM] Selector 'sendgrid' failed: NXDOMAIN
2025-12-07 20:44:35.471 | DEBUG | no-id | [DKIM] No selectors found for example.com
2025-12-07 20:44:35.485 | DEBUG | no-id | Failed to get cached reputation: could not convert string to float: "<AsyncMock name='mock.get()' id='4583206928'>"
2025-12-07 20:44:35.488 | WARNING | no-id | Provider analysis timeout for user@example.com after 0.1s
2025-12-07 20:44:35.496 | DEBUG | no-id | Redis stats failed: %s
2025-12-07 20:44:35.499 | WARNING | no-id | Spam trap detected (known domain): test@spamtrap.com
2025-12-07 20:44:35.501 | WARNING | no-id | Typo trap detected: test@gmial.com
2025-12-07 20:44:35.505 | WARNING | no-id | Role-based trap detected: abuse@unknown-domain.com | Pattern: abuse | Confidence: 0.95
2025-12-07 20:44:35.507 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:44:35.509 | DEBUG | no-id | Spam trap check cache hit for cached@test.com
2025-12-07 20:44:35.517 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:35.522 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:35.534 | WARNING | no-id | Role-based trap detected: abuse@temp-test-mail.com | Pattern: abuse | Confidence: 1.0
2025-12-07 20:44:35.545 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:35.560 | WARNING | no-id | Provider analysis timeout for user@example.com after 0.1s
2025-12-07 20:44:35.565 | DEBUG | no-id | DNS checks failed: unhandled errors in a TaskGroup (1 sub-exception)
2025-12-07 20:44:35.571 | DEBUG | no-id | DNS resolution failed for bad.example.com: DNS error
2025-12-07 20:44:35.574 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:44:35.880 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:44:36.522 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:44:37.543 | WARNING | no-id | WHOIS error for 1.2.3.4: WHOIS error
2025-12-07 20:44:37.555 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:44:37.556 | DEBUG | no-id | [DKIM] Selector 'google' failed: NXDOMAIN
2025-12-07 20:44:37.556 | DEBUG | no-id | [DKIM] Trying selector 'default' for example.com: default._domainkey.example.com
2025-12-07 20:44:37.557 | DEBUG | no-id | [DKIM] Selector 'default' failed: NXDOMAIN
2025-12-07 20:44:37.557 | DEBUG | no-id | [DKIM] Trying selector 'selector1' for example.com: selector1._domainkey.example.com
2025-12-07 20:44:37.557 | DEBUG | no-id | [DKIM] Selector 'selector1' failed: NXDOMAIN
2025-12-07 20:44:37.557 | DEBUG | no-id | [DKIM] Trying selector 'selector2' for example.com: selector2._domainkey.example.com
2025-12-07 20:44:37.558 | DEBUG | no-id | [DKIM] Selector 'selector2' failed: NXDOMAIN
2025-12-07 20:44:37.558 | DEBUG | no-id | [DKIM] Trying selector 's1' for example.com: s1._domainkey.example.com
2025-12-07 20:44:37.558 | DEBUG | no-id | [DKIM] Selector 's1' failed: NXDOMAIN
2025-12-07 20:44:37.558 | DEBUG | no-id | [DKIM] Trying selector 's2' for example.com: s2._domainkey.example.com
2025-12-07 20:44:37.558 | DEBUG | no-id | [DKIM] Selector 's2' failed: NXDOMAIN
2025-12-07 20:44:37.559 | DEBUG | no-id | [DKIM] Trying selector 's201709' for example.com: s201709._domainkey.example.com
2025-12-07 20:44:37.559 | DEBUG | no-id | [DKIM] Selector 's201709' failed: NXDOMAIN
2025-12-07 20:44:37.559 | DEBUG | no-id | [DKIM] Trying selector 's202003' for example.com: s202003._domainkey.example.com
2025-12-07 20:44:37.560 | DEBUG | no-id | [DKIM] Selector 's202003' failed: NXDOMAIN
2025-12-07 20:44:37.560 | DEBUG | no-id | [DKIM] Trying selector 'k1' for example.com: k1._domainkey.example.com
2025-12-07 20:44:37.560 | DEBUG | no-id | [DKIM] Selector 'k1' failed: NXDOMAIN
2025-12-07 20:44:37.560 | DEBUG | no-id | [DKIM] Trying selector 'k2' for example.com: k2._domainkey.example.com
2025-12-07 20:44:37.561 | DEBUG | no-id | [DKIM] Selector 'k2' failed: NXDOMAIN
2025-12-07 20:44:37.561 | DEBUG | no-id | [DKIM] Trying selector 'mail' for example.com: mail._domainkey.example.com
2025-12-07 20:44:37.561 | DEBUG | no-id | [DKIM] Selector 'mail' failed: NXDOMAIN
2025-12-07 20:44:37.561 | DEBUG | no-id | [DKIM] Trying selector 'dkim' for example.com: dkim._domainkey.example.com
2025-12-07 20:44:37.562 | DEBUG | no-id | [DKIM] Selector 'dkim' failed: NXDOMAIN
2025-12-07 20:44:37.562 | DEBUG | no-id | [DKIM] Trying selector 'amazonses' for example.com: amazonses._domainkey.example.com
2025-12-07 20:44:37.562 | DEBUG | no-id | [DKIM] Selector 'amazonses' failed: NXDOMAIN
2025-12-07 20:44:37.564 | DEBUG | no-id | [DKIM] Trying selector 'sendgrid' for example.com: sendgrid._domainkey.example.com
2025-12-07 20:44:37.565 | DEBUG | no-id | [DKIM] Selector 'sendgrid' failed: NXDOMAIN
2025-12-07 20:44:37.565 | DEBUG | no-id | [DKIM] No selectors found for example.com
2025-12-07 20:44:37.579 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136977.579076 due to 5 failures
2025-12-07 20:44:37.584 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:44:37.597 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:44:37.622 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:44:37.748 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:44:37.997 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:44:38.275 | WARNING | no-id | Role-based trap detected: admin@test-temp-service.com | Pattern: admin | Confidence: 0.75
2025-12-07 20:44:38.283 | WARNING | no-id | Role-based trap detected: test@honeypot-trap.com | Pattern: test | Confidence: 0.75
2025-12-07 20:44:38.288 | DEBUG | no-id | SMTP check failed for test@example.com: Can't connect
2025-12-07 20:44:38.292 | DEBUG | no-id | SMTP check failed for test@example.com: Invalid
2025-12-07 20:44:38.297 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:38.301 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:38.301 | ERROR | no-id | Cache SET error for mx:test: Redis down
2025-12-07 20:44:38.387 | DEBUG | no-id | WHOIS blocked for 1.2.3.4 by circuit breaker
2025-12-07 20:44:38.393 | ERROR | no-id | Internal analysis failed: DNS resolution failed
2025-12-07 20:44:38.393 | ERROR | no-id | Provider analysis failed for test@example.com: DNS resolution failed
2025-12-07 20:44:38.398 | ERROR | no-id | Internal analysis failed: 
2025-12-07 20:44:38.399 | ERROR | no-id | Provider analysis failed for test@example.com: 
2025-12-07 20:44:38.410 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:38.413 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:38.417 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:38.421 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136978.4218729 due to 5 failures
2025-12-07 20:44:38.423 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136978.423729 due to 5 failures
2025-12-07 20:44:38.423 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136978.423881 due to 6 failures
2025-12-07 20:44:38.423 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136978.423989 due to 7 failures
2025-12-07 20:44:38.424 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136978.4240818 due to 8 failures
2025-12-07 20:44:38.424 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136978.424181 due to 9 failures
2025-12-07 20:44:38.424 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765136978.424264 due to 10 failures
2025-12-07 20:44:38.426 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:38.429 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:38.431 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.266s due to Primary failed
2025-12-07 20:44:38.698 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:44:38.699 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.517s due to Primary failed
2025-12-07 20:44:39.217 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:44:39.218 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.037s due to Primary failed
2025-12-07 20:44:40.257 | DEBUG | no-id | Async TXT primary failed for example.com: Primary failed
2025-12-07 20:44:40.261 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:40.328 | DEBUG | no-id | WHOIS blocked for 1.2.3.4 by circuit breaker
2025-12-07 20:44:40.331 | DEBUG | no-id | [SPF] Found for example.com: v=spf1 include:_spf.google.com ~all...
2025-12-07 20:44:40.335 | DEBUG | no-id | SPF check failed for example.com: No answer
2025-12-07 20:44:40.338 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:44:40.338 | INFO | no-id | [DKIM] Found for example.com with selector 'google'
2025-12-07 20:44:40.341 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:44:40.341 | DEBUG | no-id | [DKIM] Selector 'google' failed: NXDOMAIN
2025-12-07 20:44:40.342 | DEBUG | no-id | [DKIM] Trying selector 'default' for example.com: default._domainkey.example.com
2025-12-07 20:44:40.343 | DEBUG | no-id | [DKIM] Selector 'default' failed: NXDOMAIN
2025-12-07 20:44:40.343 | DEBUG | no-id | [DKIM] Trying selector 'selector1' for example.com: selector1._domainkey.example.com
2025-12-07 20:44:40.344 | DEBUG | no-id | [DKIM] Selector 'selector1' failed: NXDOMAIN
2025-12-07 20:44:40.344 | DEBUG | no-id | [DKIM] Trying selector 'selector2' for example.com: selector2._domainkey.example.com
2025-12-07 20:44:40.344 | DEBUG | no-id | [DKIM] Selector 'selector2' failed: NXDOMAIN
2025-12-07 20:44:40.344 | DEBUG | no-id | [DKIM] Trying selector 's1' for example.com: s1._domainkey.example.com
2025-12-07 20:44:40.345 | DEBUG | no-id | [DKIM] Selector 's1' failed: NXDOMAIN
2025-12-07 20:44:40.345 | DEBUG | no-id | [DKIM] Trying selector 's2' for example.com: s2._domainkey.example.com
2025-12-07 20:44:40.345 | DEBUG | no-id | [DKIM] Selector 's2' failed: NXDOMAIN
2025-12-07 20:44:40.345 | DEBUG | no-id | [DKIM] Trying selector 's201709' for example.com: s201709._domainkey.example.com
2025-12-07 20:44:40.345 | DEBUG | no-id | [DKIM] Selector 's201709' failed: NXDOMAIN
2025-12-07 20:44:40.345 | DEBUG | no-id | [DKIM] Trying selector 's202003' for example.com: s202003._domainkey.example.com
2025-12-07 20:44:40.346 | DEBUG | no-id | [DKIM] Selector 's202003' failed: NXDOMAIN
2025-12-07 20:44:40.346 | DEBUG | no-id | [DKIM] Trying selector 'k1' for example.com: k1._domainkey.example.com
2025-12-07 20:44:40.346 | DEBUG | no-id | [DKIM] Selector 'k1' failed: NXDOMAIN
2025-12-07 20:44:40.346 | DEBUG | no-id | [DKIM] Trying selector 'k2' for example.com: k2._domainkey.example.com
2025-12-07 20:44:40.346 | DEBUG | no-id | [DKIM] Selector 'k2' failed: NXDOMAIN
2025-12-07 20:44:40.347 | DEBUG | no-id | [DKIM] Trying selector 'mail' for example.com: mail._domainkey.example.com
2025-12-07 20:44:40.347 | DEBUG | no-id | [DKIM] Selector 'mail' failed: NXDOMAIN
2025-12-07 20:44:40.347 | DEBUG | no-id | [DKIM] Trying selector 'dkim' for example.com: dkim._domainkey.example.com
2025-12-07 20:44:40.347 | DEBUG | no-id | [DKIM] Selector 'dkim' failed: NXDOMAIN
2025-12-07 20:44:40.347 | DEBUG | no-id | [DKIM] Trying selector 'amazonses' for example.com: amazonses._domainkey.example.com
2025-12-07 20:44:40.347 | DEBUG | no-id | [DKIM] Selector 'amazonses' failed: NXDOMAIN
2025-12-07 20:44:40.348 | DEBUG | no-id | [DKIM] Trying selector 'sendgrid' for example.com: sendgrid._domainkey.example.com
2025-12-07 20:44:40.348 | DEBUG | no-id | [DKIM] Selector 'sendgrid' failed: NXDOMAIN
2025-12-07 20:44:40.348 | DEBUG | no-id | [DKIM] No selectors found for example.com
2025-12-07 20:44:40.351 | DEBUG | no-id | [DMARC] Found for example.com: v=DMARC1; p=reject; rua=mailto:dmarc@example.com...
2025-12-07 20:44:40.354 | DEBUG | no-id | DMARC check failed for example.com: NXDOMAIN
2025-12-07 20:44:40.382 | INFO | no-id | Rate limit check | IP: unknown | Path: /v1/logs/requests
2025-12-07 20:44:40.383 | INFO | no-id | Redis available: False
2025-12-07 20:44:40.383 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:40.393 | INFO | no-id | Rate limit check | IP: unknown | Path: /v1/logs/requests
2025-12-07 20:44:40.393 | INFO | no-id | Redis available: False
2025-12-07 20:44:40.393 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:40.399 | INFO | no-id | Rate limit check | IP: unknown | Path: /v1/logs/requests
2025-12-07 20:44:40.400 | INFO | no-id | Redis available: False
2025-12-07 20:44:40.400 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:40.405 | INFO | no-id | Generated API key
2025-12-07 20:44:40.407 | INFO | no-id | Generated API key
2025-12-07 20:44:40.410 | INFO | no-id | Generated webhook secret
2025-12-07 20:44:40.412 | INFO | no-id | Generated JWT secret
2025-12-07 20:44:40.420 | INFO | no-id | Generated API key
2025-12-07 20:44:40.424 | WARNING | no-id | Weak secret detected
2025-12-07 20:44:40.427 | WARNING | no-id | Secret rotation needed
2025-12-07 20:44:40.778 | INFO | no-id | üîá Console tracing disabled in development (reducing log noise)
2025-12-07 20:44:40.860 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.864 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.865 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.880 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.886 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.890 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.895 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.895 | DEBUG | no-id | Cache GET error for test:key: Redis error
2025-12-07 20:44:40.901 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.905 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.909 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.913 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.914 | ERROR | no-id | Cache SET error for test:key: Redis error
2025-12-07 20:44:40.918 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.923 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.928 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.929 | ERROR | no-id | Cache CLEAR error for None: Redis error
2025-12-07 20:44:40.935 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.941 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.942 | ERROR | no-id | Cache DELETE error for test:key: Redis error
2025-12-07 20:44:40.949 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.953 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:40.969 | ERROR | no-id | Error executing atomic INCR script on test:fallback: Lua error
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x105d95d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x105d95bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x106122810>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x106122810>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x106122810>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x105e5c040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x106122810>
           ‚îî <function wrap_session at 0x105e37f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=29 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x106122810>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x105e5c040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=29 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=29 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061229d0>
    ‚îî <_pytest.config.Config object at 0x106122810>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=29 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=29 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=29 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_acquire_lock>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_incr_with_ttl>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_incr_with_ttl>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_incr_with_ttl>, 'nextitem': <Function test_acquire_lock>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_incr_with_ttl>, 'nextitem': <Function test_acquire_lock>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_incr_with_ttl>, <Function test_acquire_lock>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_acquire_lock>
    ‚îÇ               ‚îî <Function test_incr_with_ttl>
    ‚îî <function runtestprotocol at 0x105e37100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_incr_with_ttl>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x105e374c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_utils.py::TestRedisOperations::test_incr_with_ttl' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_incr_with_ttl>
           ‚îî <function call_runtest_hook at 0x105e376a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x105e37920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x1112afc40>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_incr_with_ttl>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_incr_with_ttl>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_incr_with_ttl>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_incr_with_ttl>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x105e9e2a0>
    ‚îî <Function test_incr_with_ttl>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_incr_with_ttl>
    ‚îÇ    ‚îî <property object at 0x105db1a80>
    ‚îî <Function test_incr_with_ttl>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_incr_with_ttl>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_incr_with_ttl>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ebd390>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_incr_with_ttl>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'redis_client': FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x112f4c8d0>,db=0>>>}
             ‚îî <function TestRedisOperations.test_incr_with_ttl at 0x1111f1ee0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-2350' coro=<TestRedisOperations.test_incr_with_ttl() running at /Users/pablo/Desktop/toni/tests/test...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x1070f2840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1070f27a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1070f45e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x1070893a0>
    ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future cancelled>)>

  File "/Users/pablo/Desktop/toni/tests/test_utils.py", line 198, in test_incr_with_ttl
    result = await incr_with_ttl(redis_client, "test:fallback", 1, 3600)
                   ‚îÇ             ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x112f4c8d0>,db=0>>>
                   ‚îî <function incr_with_ttl at 0x10c720220>

> File "/Users/pablo/Desktop/toni/app/utils.py", line 124, in incr_with_ttl
    result = await redis.eval(INCR_EXPIRE_SCRIPT, 1, key, str(amount), str(ttl))
                   ‚îÇ     ‚îÇ    ‚îÇ                      ‚îÇ        ‚îÇ            ‚îî 3600
                   ‚îÇ     ‚îÇ    ‚îÇ                      ‚îÇ        ‚îî 1
                   ‚îÇ     ‚îÇ    ‚îÇ                      ‚îî 'test:fallback'
                   ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal amount = tonumber(ARGV[1])\nlocal ttl = tonumber(ARGV[2])\nlocal v = redis.call('INCRBY', key, ...
                   ‚îÇ     ‚îî <MagicMock name='eval' id='4613008464'>
                   ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x112f4c8d0>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 1124, in __call__
    return self._mock_call(*args, **kwargs)
           ‚îÇ    ‚îÇ           ‚îÇ       ‚îî {}
           ‚îÇ    ‚îÇ           ‚îî ("\nlocal key = KEYS[1]\nlocal amount = tonumber(ARGV[1])\nlocal ttl = tonumber(ARGV[2])\nlocal v = redis.call('INCRBY', key,...
           ‚îÇ    ‚îî <function CallableMixin._mock_call at 0x107191760>
           ‚îî <MagicMock name='eval' id='4613008464'>
  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 1128, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ‚îÇ    ‚îÇ                   ‚îÇ       ‚îî {}
           ‚îÇ    ‚îÇ                   ‚îî ("\nlocal key = KEYS[1]\nlocal amount = tonumber(ARGV[1])\nlocal ttl = tonumber(ARGV[2])\nlocal v = redis.call('INCRBY', key,...
           ‚îÇ    ‚îî <function CallableMixin._execute_mock_call at 0x1071918a0>
           ‚îî <MagicMock name='eval' id='4613008464'>
  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 1183, in _execute_mock_call
    raise effect
          ‚îî Exception('Lua error')

Exception: Lua error
2025-12-07 20:44:42.851 | INFO | no-id | Usage incremented for user123: -> 1
2025-12-07 20:44:42.852 | INFO | no-id | Usage incremented for user123: -> 2
2025-12-07 20:44:42.888 | WARNING | no-id | Could not acquire lock to update keys for user user456
2025-12-07 20:44:42.892 | ERROR | no-id | Error migrating user to multi-key system: API key must be at least 16 characters
2025-12-07 20:44:42.904 | ERROR | no-id | Error migrating user to multi-key system: API key must be at least 16 characters
2025-12-07 20:44:42.913 | INFO | no-id | Usage incremented for user123: -> 1
2025-12-07 20:44:42.914 | INFO | no-id | Usage incremented for user123: -> 2
2025-12-07 20:44:42.915 | INFO | no-id | Usage incremented for user123: -> 3
2025-12-07 20:44:42.916 | INFO | no-id | Usage incremented for user123: -> 4
2025-12-07 20:44:42.916 | INFO | no-id | Usage incremented for user123: -> 5
2025-12-07 20:44:42.932 | INFO | no-id | Usage incremented for user123: -> 1
2025-12-07 20:44:42.932 | INFO | no-id | Usage incremented for user123: -> 2
2025-12-07 20:44:42.933 | INFO | no-id | Usage incremented for user123: -> 3
2025-12-07 20:44:42.933 | INFO | no-id | Usage incremented for user123: -> 4
2025-12-07 20:44:42.933 | INFO | no-id | Usage incremented for user123: -> 5
2025-12-07 20:44:42.933 | INFO | no-id | Usage incremented for user123: -> 6
2025-12-07 20:44:42.933 | INFO | no-id | Usage incremented for user123: -> 7
2025-12-07 20:44:42.933 | INFO | no-id | Usage incremented for user123: -> 8
2025-12-07 20:44:42.934 | INFO | no-id | Usage incremented for user123: -> 9
2025-12-07 20:44:42.934 | INFO | no-id | Usage incremented for user123: -> 10
2025-12-07 20:44:42.945 | DEBUG | no-id | No integer in legacy raw usage key %s
2025-12-07 20:44:42.945 | DEBUG | no-id | No integer in hashed usage key %s
2025-12-07 20:44:42.946 | DEBUG | no-id | No integer in legacy raw usage key %s
2025-12-07 20:44:42.946 | DEBUG | no-id | No integer in hashed usage key %s
2025-12-07 20:44:42.967 | ERROR | no-id | Error parsing API key data: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-12-07 20:44:42.995 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:42.996 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:44:42.999 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:43.000 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:44:43.000 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:44:43.000 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:44:43.001 | WARNING | no-id | Circuit breaker OPENED: smtp:mx.example.com
2025-12-07 20:44:43.001 | DEBUG | no-id | Circuit breaker open: smtp:mx.example.com
2025-12-07 20:44:43.004 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:43.005 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:44:43.005 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:44:43.005 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:44:43.008 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:43.009 | INFO | no-id | Circuit breaker half-open: smtp:mx.example.com
2025-12-07 20:44:43.012 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:43.012 | DEBUG | no-id | Circuit breaker open: smtp:host1.com
2025-12-07 20:44:43.015 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:43.015 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:43.018 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:43.018 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:43.021 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:43.021 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:43.025 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:43.025 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:43.029 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:43.029 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:43.037 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:44:43.037 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:44:43.037 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:44:43.037 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:44:43.040 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:43.040 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:43.040 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:43.044 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:43.044 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:43.436 | DEBUG | no-id | Retry 1/5 for eventual_success sleeping 0.011s due to Temporary failure
2025-12-07 20:44:43.449 | DEBUG | no-id | Retrying eventual_success attempt 2/5
2025-12-07 20:44:43.449 | DEBUG | no-id | Retry 2/5 for eventual_success sleeping 0.020s due to Temporary failure
2025-12-07 20:44:43.470 | DEBUG | no-id | Retrying eventual_success attempt 3/5
2025-12-07 20:44:43.473 | DEBUG | no-id | Retry 1/3 for always_fail sleeping 0.011s due to Always fails
2025-12-07 20:44:43.485 | DEBUG | no-id | Retrying always_fail attempt 2/3
2025-12-07 20:44:43.486 | DEBUG | no-id | Retry 2/3 for always_fail sleeping 0.024s due to Always fails
2025-12-07 20:44:43.510 | DEBUG | no-id | Retrying always_fail attempt 3/3
2025-12-07 20:44:43.511 | DEBUG | no-id | Retry 3/3 for always_fail sleeping 0.048s due to Always fails
2025-12-07 20:44:43.564 | DEBUG | no-id | Retry 1/5 for fail_twice sleeping 0.011s due to Fail 1
2025-12-07 20:44:43.576 | DEBUG | no-id | Retrying fail_twice attempt 2/5
2025-12-07 20:44:43.576 | DEBUG | no-id | Retry 2/5 for fail_twice sleeping 0.023s due to Fail 2
2025-12-07 20:44:43.600 | DEBUG | no-id | Retrying fail_twice attempt 3/5
2025-12-07 20:44:43.606 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:43.611 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:43.613 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.252s due to Primary failed
2025-12-07 20:44:43.866 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:44:43.868 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.608s due to Primary failed
2025-12-07 20:44:44.478 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:44:44.479 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.164s due to Primary failed
2025-12-07 20:44:45.646 | DEBUG | no-id | Async MX primary failed for example.com: Primary failed
2025-12-07 20:44:45.658 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:45.663 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.302s due to No MX
2025-12-07 20:44:45.967 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:44:45.969 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.582s due to No MX
2025-12-07 20:44:46.553 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:44:46.554 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.210s due to No MX
2025-12-07 20:44:47.767 | DEBUG | no-id | Async MX primary failed for example.com: No MX
2025-12-07 20:44:47.769 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.260s due to No MX fallback
2025-12-07 20:44:48.032 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:44:48.034 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.642s due to No MX fallback
2025-12-07 20:44:48.678 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:44:48.678 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.232s due to No MX fallback
2025-12-07 20:44:49.912 | DEBUG | no-id | Fallback MX query failed for example.com: No MX fallback
2025-12-07 20:44:50.983 | WARNING | no-id | SMTP check timeout for %s
2025-12-07 20:44:50.993 | ERROR | no-id | SMTP wrapper unexpected error: %s
2025-12-07 20:44:51.046 | ERROR | no-id | Sync domain check failed for %s: %s
2025-12-07 20:44:51.050 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:51.050 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:51.051 | DEBUG | no-id | Cache GET error for mx:example.com: Redis error
2025-12-07 20:44:51.054 | DEBUG | no-id | Cache GET error for domain:test.com: Redis error
2025-12-07 20:44:51.057 | DEBUG | no-id | Cache GET error for smtp:mail.example.com: Redis error
2025-12-07 20:44:51.060 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:51.060 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:51.061 | ERROR | no-id | Cache SET error for mx:test.com: Redis SET error
2025-12-07 20:44:51.064 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:51.065 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:51.071 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:51.072 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:51.075 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:51.075 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:51.076 | ERROR | no-id | Cache CLEAR error for mx:: Redis error
2025-12-07 20:44:51.078 | ERROR | no-id | Cache CLEAR error for None: Redis error
2025-12-07 20:44:51.080 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:51.083 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:51.083 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:51.085 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:51.085 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:44:51.114 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:51.114 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:51.117 | WARNING | no-id | SMTP checks rate-limited for host %s
2025-12-07 20:44:51.121 | DEBUG | no-id | Retry 1/3 for <lambda> sleeping 0.323s due to Connection failed
2025-12-07 20:44:51.446 | DEBUG | no-id | Retrying <lambda> attempt 2/3
2025-12-07 20:44:51.448 | DEBUG | no-id | Retry 2/3 for <lambda> sleeping 0.585s due to Connection failed
2025-12-07 20:44:52.035 | DEBUG | no-id | Retrying <lambda> attempt 3/3
2025-12-07 20:44:52.037 | DEBUG | no-id | Retry 3/3 for <lambda> sleeping 1.173s due to Connection failed
2025-12-07 20:44:53.212 | DEBUG | no-id | SMTP connection attempt failed for mx.example.com:587 ‚Äî Connection failed
2025-12-07 20:44:53.214 | DEBUG | no-id | Retry 1/3 for <lambda> sleeping 0.264s due to Connection failed
2025-12-07 20:44:53.480 | DEBUG | no-id | Retrying <lambda> attempt 2/3
2025-12-07 20:44:53.482 | DEBUG | no-id | Retry 2/3 for <lambda> sleeping 0.605s due to Connection failed
2025-12-07 20:44:54.089 | DEBUG | no-id | Retrying <lambda> attempt 3/3
2025-12-07 20:44:54.091 | DEBUG | no-id | Retry 3/3 for <lambda> sleeping 1.192s due to Connection failed
2025-12-07 20:44:55.284 | DEBUG | no-id | SMTP connection attempt failed for mx.example.com:465 ‚Äî Connection failed
2025-12-07 20:44:55.546 | DEBUG | no-id | STARTTLS attempt failed for mx.example.com:587 ‚Äî TLS failed
2025-12-07 20:44:55.564 | ERROR | no-id | Unexpected SMTP error for mx.example.com:25 ‚Äî Error
2025-12-07 20:44:55.572 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:44:55.587 | DEBUG | no-id | Transient SMTP error for %s:%d (attempt %d): %s
2025-12-07 20:44:56.112 | DEBUG | no-id | Transient SMTP error for %s:%d (attempt %d): %s
2025-12-07 20:44:56.623 | DEBUG | no-id | Transient SMTP error for %s:%d (attempt %d): %s
2025-12-07 20:44:57.661 | ERROR | no-id | Unexpected SMTP error for mx.example.com:465 ‚Äî 'SMTP_SSL' object has no attribute 'timeout'
2025-12-07 20:44:57.675 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:57.675 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:57.679 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:44:57.680 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:44:57.690 | INFO | no-id | Circuit breaker open for %s
2025-12-07 20:44:57.697 | WARNING | no-id | Unsafe MX host: %s
2025-12-07 20:44:57.703 | DEBUG | no-id | MX %s has no public IP
2025-12-07 20:44:57.715 | DEBUG | no-id | Connection failed to mx1.example.com: Failed mx1
2025-12-07 20:44:57.723 | INFO | no-id | Using custom nameservers: ['10.0.0.1']
2025-12-07 20:44:57.726 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:44:57.728 | INFO | no-id | Using custom nameservers: ['1.1.1.1', '1.0.0.1']
2025-12-07 20:44:57.737 | DEBUG | no-id | Async MX primary failed for test.com: Async fail
2025-12-07 20:44:57.741 | DEBUG | no-id | Async MX primary failed for fail.com: Async fail
2025-12-07 20:44:57.741 | DEBUG | no-id | Fallback MX query failed for fail.com: Sync fail
2025-12-07 20:44:57.750 | DEBUG | no-id | Async TXT primary failed for test.com: Timeout
2025-12-07 20:44:57.879 | ERROR | no-id | Rate limit check failed: Redis error
2025-12-07 20:44:57.923 | ERROR | no-id | Rate limit check failed: 'NoneType' object has no attribute 'get'
2025-12-07 20:44:58.106 | DEBUG | no-id | Invalid reputation value invalid
2025-12-07 20:44:58.121 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:44:58.121 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.121 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.129 | INFO | no-id | Email validation | User: test_user | Plan: PREMIUM | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:58.130 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:44:58.130 | INFO | no-id | 978c6d71-3610-4f53-9e74-73682c369427 | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:44:58.130 | INFO | no-id | Validation 978c6d71-3610-4f53-9e74-73682c369427 completed successfully
2025-12-07 20:44:58.137 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:44:58.138 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.138 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.259 | INFO | no-id | Email validation | User: test_user | Plan: PREMIUM | Email: timeout@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:58.260 | INFO | no-id | 97b3e4b5-5bd1-4fc4-b332-8088ac7b25b4 | Pre-validation spam trap check | Email: timeout@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:44:58.261 | WARNING | no-id | Validation timeout | Email: timeout@example.com | Elapsed: 0.00s | Timeout: 45.0s | Plan: PREMIUM
2025-12-07 20:44:58.262 | INFO | no-id | Validation completed with timeout fallback | Email: timeout@example.com | Valid: True | Elapsed: 0.00s | Plan: PREMIUM
2025-12-07 20:44:58.277 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch
2025-12-07 20:44:58.278 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.278 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.282 | INFO | no-id | Batch validation requested by: test_user (Plan: PREMIUM)
2025-12-07 20:44:58.284 | INFO | no-id | Usage incremented for test_user: -> <AsyncMock name='mock.incrby()' id='4676663824'>
2025-12-07 20:44:58.290 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch
2025-12-07 20:44:58.290 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.290 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.295 | DEBUG | no-id | Could not extract plan from token: DecodeError: Not enough segments
2025-12-07 20:44:58.295 | WARNING | no-id | Validation Error | Count: 1 | Details: [{"field": "body.emails", "message": "List should have at least 1 item after validation, not 0", "type": "too_short", "input": []}] | Trace: None | Plan: UNKNOWN | Path: /validate/batch
2025-12-07 20:44:58.302 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:44:58.303 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.303 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.307 | INFO | no-id | Email validation | User: test_user | Plan: PREMIUM | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:58.307 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:44:58.307 | INFO | no-id | cf8e14c6-1563-4ee6-8402-d502a7b244e0 | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:44:58.308 | WARNING | no-id | API Exception | Email: test@example.com | Error: Test error | Elapsed: 0.00s
2025-12-07 20:44:58.308 | WARNING | no-id | APIException | Email: test@example.com | Type: test_error | Detail: Test error | Elapsed: 0.00s
2025-12-07 20:44:58.321 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch
2025-12-07 20:44:58.321 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.321 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.325 | INFO | no-id | Batch validation requested by: test_user (Plan: PREMIUM)
2025-12-07 20:44:58.327 | INFO | no-id | Usage incremented for test_user: -> <AsyncMock name='mock.incrby()' id='4612767312'>
2025-12-07 20:44:58.335 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch
2025-12-07 20:44:58.335 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.335 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.339 | INFO | no-id | Batch validation requested by: test_user (Plan: PREMIUM)
2025-12-07 20:44:58.342 | INFO | no-id | Usage incremented for test_user: -> <AsyncMock name='mock.incrby()' id='4581433680'>
2025-12-07 20:44:58.350 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/stats/usage
2025-12-07 20:44:58.350 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.350 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.359 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/health
2025-12-07 20:44:58.360 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.360 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.368 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/health
2025-12-07 20:44:58.368 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.368 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.378 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch/upload
2025-12-07 20:44:58.379 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.379 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.383 | INFO | no-id | Upload requested by: test_user - File: emails.csv
2025-12-07 20:44:58.389 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch/upload
2025-12-07 20:44:58.389 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.390 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.393 | INFO | no-id | Upload requested by: test_user - File: emails.txt
2025-12-07 20:44:58.401 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch/upload
2025-12-07 20:44:58.401 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.401 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.405 | INFO | no-id | Upload requested by: test_user - File: emails.csv
2025-12-07 20:44:58.413 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch/upload
2025-12-07 20:44:58.413 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.413 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.417 | INFO | no-id | Upload requested by: test_user - File: emails.csv
2025-12-07 20:44:58.424 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:44:58.424 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.424 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.429 | DEBUG | no-id | Could not extract plan from token: DecodeError: Not enough segments
2025-12-07 20:44:58.429 | WARNING | no-id | Validation Error | Count: 1 | Details: [{"field": "body", "message": "Input should be a valid dictionary or object to extract fields from", "type": "model_attributes_type", "input": "not json"}] | Trace: None | Plan: UNKNOWN | Path: /validate/email
2025-12-07 20:44:58.435 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:44:58.435 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.435 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.439 | INFO | no-id | Email validation | User: free_user | Plan: FREE | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:58.439 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:44:58.439 | INFO | no-id | 47a0cfe9-c085-458a-a5fb-a37e9e661b24 | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:44:58.440 | INFO | no-id | Validation 47a0cfe9-c085-458a-a5fb-a37e9e661b24 completed successfully
2025-12-07 20:44:58.445 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:44:58.446 | INFO | no-id | Redis available: False
2025-12-07 20:44:58.446 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:44:58.450 | INFO | no-id | Email validation | User: enterprise_user | Plan: ENTERPRISE | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:44:58.450 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:44:58.451 | INFO | no-id | 2064213c-6400-4d8c-995a-5963b5ebb9a6 | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:44:58.451 | INFO | no-id | Validation 2064213c-6400-4d8c-995a-5963b5ebb9a6 completed successfully
2025-12-07 20:44:58.496 | WARNING | no-id | Path traversal attempt detected: ../../../etc/passwd
2025-12-07 20:44:58.672 | DEBUG | no-id | Could not extract plan: cannot import name 'Mapping' from 'collections' (/opt/anaconda3/lib/python3.11/collections/__init__.py)
2025-12-07 20:44:58.673 | INFO | no-id | d329b277-c6df-41e7-8f49-edb77e9dbcf0 | Format validation passed | Email: val***@e***.com
2025-12-07 20:44:58.673 | INFO | no-id | d329b277-c6df-41e7-8f49-edb77e9dbcf0 | Checking spam traps...
2025-12-07 20:44:58.673 | INFO | no-id | d329b277-c6df-41e7-8f49-edb77e9dbcf0 | Spam trap check completed | is_trap=False, confidence=0.0, type=None
2025-12-07 20:44:58.673 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for val***@e***.com
2025-12-07 20:44:58.674 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:44:58.897 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:44:58.898 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:44:58.903 | INFO | no-id | [HIBP] Result cached
2025-12-07 20:44:58.903 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:44:58.899337Z', 'risk_level': 'low'}
2025-12-07 20:44:58.904 | INFO | no-id | [d329b277-c6df-41e7-8f49-edb77e9dbcf0] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:44:58.904 | INFO | no-id | d329b277-c6df-41e7-8f49-edb77e9dbcf0 | Analyzing provider...
2025-12-07 20:44:58.905 | INFO | no-id | [d329b277-c6df-41e7-8f49-edb77e9dbcf0] Provider analysis complete | Provider: google | SPF: pass | DKIM: pass | Reputation: 0.9
2025-12-07 20:44:58.905 | INFO | no-id | [d329b277-c6df-41e7-8f49-edb77e9dbcf0] Role email check | Is role: False | Type: None
2025-12-07 20:44:58.906 | DEBUG | no-id | First validation for valid@example.com, marking in cache
2025-12-07 20:44:58.906 | ERROR | no-id | [d329b277-c6df-41e7-8f49-edb77e9dbcf0] Catch-all detection error: detect_catch_all_domain() got an unexpected keyword argument 'redis'
2025-12-07 20:44:58.907 | INFO | no-id | [d329b277-c6df-41e7-8f49-edb77e9dbcf0] Unified risk scoring | Score: 0/100 | Level: low | Confidence: 50.00% | Factors: {}
2025-12-07 20:44:58.908 | INFO | no-id | Validation d329b277-c6df-41e7-8f49-edb77e9dbcf0 completed successfully
2025-12-07 20:44:58.913 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:44:58.923 | DEBUG | no-id | Could not extract plan: cannot import name 'Mapping' from 'collections' (/opt/anaconda3/lib/python3.11/collections/__init__.py)
2025-12-07 20:44:58.924 | INFO | no-id | dd296ee4-5658-4816-81b3-8013e309fee6 | Format validation passed | Email: ***invalid***
2025-12-07 20:44:58.924 | WARNING | no-id | dd296ee4-5658-4816-81b3-8013e309fee6 | Typo detected: gmil.com ‚Üí gmail.com (confidence: 90%)
2025-12-07 20:44:58.926 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:44:58.934 | DEBUG | no-id | Could not extract plan: cannot import name 'Mapping' from 'collections' (/opt/anaconda3/lib/python3.11/collections/__init__.py)
2025-12-07 20:44:58.935 | INFO | no-id | 9be35926-7963-40cf-a5c5-e4bc9397c657 | Format validation passed | Email: tem***@t***.com
2025-12-07 20:44:58.935 | WARNING | no-id | Disposable email detected: temp@trash.com
2025-12-07 20:44:58.938 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:44:58.945 | DEBUG | no-id | Could not extract plan: cannot import name 'Mapping' from 'collections' (/opt/anaconda3/lib/python3.11/collections/__init__.py)
2025-12-07 20:44:58.946 | INFO | no-id | 2012a33e-231b-4177-825b-e339e23ea8be | Format validation passed | Email: tra***@e***.com
2025-12-07 20:44:58.946 | INFO | no-id | 2012a33e-231b-4177-825b-e339e23ea8be | Checking spam traps...
2025-12-07 20:44:58.946 | INFO | no-id | 2012a33e-231b-4177-825b-e339e23ea8be | Spam trap check completed | is_trap=True, confidence=0.95, type=honeypot
2025-12-07 20:44:58.946 | WARNING | no-id | 2012a33e-231b-4177-825b-e339e23ea8be | SPAM TRAP DETECTED | Email: trap@example.com | Type: honeypot | Confidence: 0.95
2025-12-07 20:44:58.947 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:44:58.956 | DEBUG | no-id | Could not extract plan: cannot import name 'Mapping' from 'collections' (/opt/anaconda3/lib/python3.11/collections/__init__.py)
2025-12-07 20:44:58.956 | INFO | no-id | 40a0f115-730d-4a6c-ae8d-9af6ff1937d9 | Format validation passed | Email: pwn***@e***.com
2025-12-07 20:44:58.957 | INFO | no-id | 40a0f115-730d-4a6c-ae8d-9af6ff1937d9 | Checking spam traps...
2025-12-07 20:44:58.957 | INFO | no-id | 40a0f115-730d-4a6c-ae8d-9af6ff1937d9 | Spam trap check completed | is_trap=False, confidence=0.0, type=None
2025-12-07 20:44:58.957 | INFO | no-id | [40a0f115-730d-4a6c-ae8d-9af6ff1937d9] HIBP check complete | In breach: True | Count: 5
2025-12-07 20:44:58.957 | INFO | no-id | 40a0f115-730d-4a6c-ae8d-9af6ff1937d9 | Analyzing provider...
2025-12-07 20:44:58.957 | INFO | no-id | [40a0f115-730d-4a6c-ae8d-9af6ff1937d9] Provider analysis complete | Provider: generic | SPF: none | DKIM: none | Reputation: 0.5
2025-12-07 20:44:58.958 | INFO | no-id | [40a0f115-730d-4a6c-ae8d-9af6ff1937d9] Role email check | Is role: False | Type: None
2025-12-07 20:44:58.958 | WARNING | no-id | [40a0f115-730d-4a6c-ae8d-9af6ff1937d9] Risk score increased due to breach
2025-12-07 20:44:58.959 | DEBUG | no-id | First validation for pwned@example.com, marking in cache
2025-12-07 20:44:58.959 | DEBUG | no-id | [40a0f115-730d-4a6c-ae8d-9af6ff1937d9] Catch-all check skipped (check_smtp=false)
2025-12-07 20:44:58.959 | INFO | no-id | [40a0f115-730d-4a6c-ae8d-9af6ff1937d9] Unified risk scoring | Score: 55/100 | Level: high | Confidence: 92.50% | Factors: {'smtp_failed': 30, 'data_breach': 25}
2025-12-07 20:44:58.959 | INFO | no-id | Validation 40a0f115-730d-4a6c-ae8d-9af6ff1937d9 completed successfully
2025-12-07 20:44:58.961 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:44:58.968 | DEBUG | no-id | Could not extract plan: cannot import name 'Mapping' from 'collections' (/opt/anaconda3/lib/python3.11/collections/__init__.py)
2025-12-07 20:44:58.969 | INFO | no-id | 03a3d01d-107d-4740-ab18-921ba4ad3d7c | Format validation passed | Email: cac***@e***.com
2025-12-07 20:44:58.969 | INFO | no-id | 03a3d01d-107d-4740-ab18-921ba4ad3d7c | Checking spam traps...
2025-12-07 20:44:58.969 | INFO | no-id | 03a3d01d-107d-4740-ab18-921ba4ad3d7c | Spam trap check completed | is_trap=False, confidence=0.0, type=None
2025-12-07 20:44:58.969 | INFO | no-id | 03a3d01d-107d-4740-ab18-921ba4ad3d7c | Analyzing provider...
2025-12-07 20:44:58.969 | INFO | no-id | [03a3d01d-107d-4740-ab18-921ba4ad3d7c] Provider analysis complete | Provider: google | SPF: pass | DKIM: pass | Reputation: 0.9
2025-12-07 20:44:58.969 | INFO | no-id | [03a3d01d-107d-4740-ab18-921ba4ad3d7c] Role email check | Is role: False | Type: None
2025-12-07 20:44:58.970 | DEBUG | no-id | Validation cache HIT for cached@example.com
2025-12-07 20:44:58.970 | ERROR | no-id | [03a3d01d-107d-4740-ab18-921ba4ad3d7c] Catch-all detection error: detect_catch_all_domain() got an unexpected keyword argument 'redis'
2025-12-07 20:44:58.970 | INFO | no-id | [03a3d01d-107d-4740-ab18-921ba4ad3d7c] Unified risk scoring | Score: 0/100 | Level: low | Confidence: 50.00% | Factors: {}
2025-12-07 20:44:58.970 | INFO | no-id | Validation 03a3d01d-107d-4740-ab18-921ba4ad3d7c completed successfully
2025-12-07 20:44:58.971 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:44:59.171 | DEBUG | no-id | Concurrency limit for PREMIUM: 5
2025-12-07 20:44:59.171 | DEBUG | no-id | Current concurrency for user123: 5, limit: 5
2025-12-07 20:44:59.175 | DEBUG | no-id | Concurrency limit for PREMIUM: 5
2025-12-07 20:44:59.175 | DEBUG | no-id | Current concurrency for user123: 2, limit: 5
2025-12-07 20:44:59.179 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:44:59.205 | INFO | no-id | Created webhook 2907d3ae-0f07-45ea-9c83-e69a84f01944 for user test_user_123
2025-12-07 20:44:59.212 | INFO | no-id | Created webhook 3369de16-7d37-48e7-bc7d-aa3789dcdac5 for user test_user_123
2025-12-07 20:44:59.220 | ERROR | no-id | Failed to create webhook: Redis error
2025-12-07 20:44:59.227 | INFO | no-id | Created webhook 9085d5cb-0c64-4a1e-9bee-8e7b5d7503f3 for user test_user_123
2025-12-07 20:44:59.257 | ERROR | no-id | Failed to list webhooks: Redis error
2025-12-07 20:44:59.287 | ERROR | no-id | Failed to get webhook: Redis error
2025-12-07 20:44:59.296 | INFO | no-id | Updated webhook db953400-a083-422b-b6e9-5d9543817db7
2025-12-07 20:44:59.305 | INFO | no-id | Updated webhook 6afa0736-b952-4056-916d-e0d6ec6f07b3
2025-12-07 20:44:59.314 | INFO | no-id | Updated webhook b69f9ac2-81fe-4560-b329-74bcaedaeeea
2025-12-07 20:44:59.323 | INFO | no-id | Updated webhook 6420f148-622f-43d1-92b4-f996e7feef2b
2025-12-07 20:44:59.324 | INFO | no-id | Updated webhook 6420f148-622f-43d1-92b4-f996e7feef2b
2025-12-07 20:44:59.349 | ERROR | no-id | Failed to update webhook: Redis error
2025-12-07 20:44:59.358 | INFO | no-id | Deleted webhook aa0142ad-ed0c-4bea-a119-05f42973ff9f
2025-12-07 20:44:59.385 | ERROR | no-id | Failed to delete webhook: Redis error
2025-12-07 20:44:59.394 | INFO | no-id | Test webhook sent to b9a3c91b-3f61-4c7c-8e24-7928697d91c4
2025-12-07 20:44:59.404 | ERROR | no-id | Test webhook failed: Connection timeout
2025-12-07 20:47:04.632 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:47:05.612 | INFO | no-id | üîá Console tracing disabled in development (reducing log noise)
2025-12-07 20:47:05.612 | INFO | no-id | ‚ÑπÔ∏è No tracing exporter configured (development mode)
2025-12-07 20:47:05.613 | INFO | no-id | üîá OpenTelemetry verbose logging disabled in development
2025-12-07 20:47:05.613 | SUCCESS | no-id | ‚úÖ FastAPI instrumented for tracing
2025-12-07 20:47:05.614 | SUCCESS | no-id | ‚úÖ Redis instrumented for tracing
2025-12-07 20:47:05.614 | SUCCESS | no-id | ‚úÖ HTTP client instrumented for tracing
2025-12-07 20:47:05.615 | SUCCESS | no-id | üîç Distributed tracing initialized for mailsafepro-api
2025-12-07 20:47:05.652 | INFO | no-id | Exception handlers registered successfully
2025-12-07 20:47:06.033 | WARNING | no-id | ‚ö†Ô∏è  Abuse detected: Same email validated 25 times
2025-12-07 20:47:06.038 | WARNING | no-id | ‚ö†Ô∏è  Abuse detected: Rapid request spike
2025-12-07 20:47:06.042 | ERROR | no-id | üö® HONEYPOT TRIGGERED
2025-12-07 20:47:06.054 | INFO | no-id | Created circuit breaker: Redis Cache
2025-12-07 20:47:06.057 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:47:06.059 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:47:06.212 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:47:06.261 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:47:06.266 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:47:06.342 | DEBUG | no-id | Creating API key | User: %s | Plan: %s | Name: %s
2025-12-07 20:47:06.342 | INFO | no-id | API key created successfully
2025-12-07 20:47:06.355 | ERROR | no-id | Unexpected error in key creation | User: %s | Error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x105da9d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x105da9bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061367d0>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x106135150>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x106135150>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x106135150>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x106135150>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x105e70040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x106135150>
           ‚îî <function wrap_session at 0x105e4bf60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x106135150>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x105e70040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061367d0>
    ‚îî <_pytest.config.Config object at 0x106135150>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_create_api_key_max_keys_exceeded>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>, 'nextitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>, 'nextitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_max_keys_exceeded>, <Function test_create_api_key_redis_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ               ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îî <function runtestprotocol at 0x105e4b100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x105e4b4c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_create_api_key_max_keys_exceeded' when='setup' outcome='passe...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_create_api_key_max_keys_exceeded>
           ‚îî <function call_runtest_hook at 0x105e4b6a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x105e4b920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e599e40>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_create_api_key_max_keys_exceeded>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_max_keys_exceeded>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x105eb22a0>
    ‚îî <Function test_create_api_key_max_keys_exceeded>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îÇ    ‚îî <property object at 0x105dc5990>
    ‚îî <Function test_create_api_key_max_keys_exceeded>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_max_keys_exceeded>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10dbb3ad0>, 'app': <fastapi.applications.FastAPI object at 0x10e4dd090>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_create_api_key_max_keys_exceeded at 0x10e67dc60>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-35' coro=<TestAPIKeyEndpoints.test_create_api_key_max_keys_exceeded() running at /Users/pablo/Deskto...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x107106840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1071067a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1071085e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x10709d3a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...2ad0>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...2ad0>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...2ad0>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...2ad0>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 326, in test_create_api_key_max_keys_exceeded
    response = await client.post("/api-keys", json=key_data.model_dump())
                     ‚îÇ      ‚îÇ                      ‚îÇ        ‚îî <function BaseModel.model_dump at 0x1080a2e80>
                     ‚îÇ      ‚îÇ                      ‚îî APIKeyCreateRequest(name='Test Key', scopes=['read'])
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x108de0360>
                     ‚îî <httpx.AsyncClient object at 0x10dbb3ad0>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x108dd7ce0>
                 ‚îî <httpx.AsyncClient object at 0x10dbb3ad0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x108dc9a50>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x108dc9a50>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x108dd7ec0>
                 ‚îî <httpx.AsyncClient object at 0x10dbb3ad0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x108dd7f60>
                     ‚îî <httpx.AsyncClient object at 0x10dbb3ad0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x108de0040>
                     ‚îî <httpx.AsyncClient object at 0x10dbb3ad0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x108de00e0>
                     ‚îî <httpx.AsyncClient object at 0x10dbb3ad0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x108b382c0>
                     ‚îî <httpx.ASGITransport object at 0x10e13ec90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e67e340>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e67e020>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e4dd090>
          ‚îî <httpx.ASGITransport object at 0x10e13ec90>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e67e340>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e67e020>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e67e340>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e67e020>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e534590>
          ‚îî <fastapi.applications.FastAPI object at 0x10e4dd090>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e67e3e0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e67e020>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e534710>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e534590>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e67e3e0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e67e020>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e5346d0>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e583f10>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e534710>
          ‚îî <function wrap_app_handling_exceptions at 0x108a48f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e59b4c0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e67e020>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <fastapi.routing.APIRouter object at 0x10e583f10>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e59b4c0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e67e020>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e583f10>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e583f10>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e59b4c0>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e67e020>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ     ‚îî <function Route.handle at 0x108a4a700>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e59b4c0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e67e020>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e67c400>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e59b4c0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e67e020>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e4de650>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e59b380>
          ‚îî <function wrap_app_handling_exceptions at 0x108a48f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e59b7e0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e67e020>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e59b380>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e4de650>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e67c2c0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x108a48860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140426, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function create_api_key at 0x10c732de0>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10e4d7dd0>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 382, in create_api_key
    await enforce_rate_limit(redis, bucket=f"ak:create:{user_id}", limit=5, window=60)
          ‚îÇ                  ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e582ad0>,db=0>>>
          ‚îî <function enforce_rate_limit at 0x10c428ea0>

  File "/Users/pablo/Desktop/toni/app/auth.py", line 246, in enforce_rate_limit
    local_res = await redis.eval(LUA_RATE_LIMIT, 1, local_key, str(window))
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ              ‚îî 60
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî 'rl:6132e8e512e36d5a54499518ce8f3f146307b77a3575291087f40f05c1ab1ae0'
                      ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal window = tonumber(ARGV[1])\nlocal now = redis.call('TIME')[1]\nlocal current = redis.call('INCR...
                      ‚îÇ     ‚îî <AsyncMock id='4534403856'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e582ad0>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî ResponseError(b'max_keys_exceeded')

redis.exceptions.ResponseError: b'max_keys_exceeded'
2025-12-07 20:47:06.389 | ERROR | no-id | Unexpected error in key creation | User: %s | Error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x105da9d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x105da9bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061367d0>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x106135150>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x106135150>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x106135150>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x106135150>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x105e70040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x106135150>
           ‚îî <function wrap_session at 0x105e4bf60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x106135150>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x105e70040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061367d0>
    ‚îî <_pytest.config.Config object at 0x106135150>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_create_api_key_redis_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_redis_error>, 'nextitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_redis_error>, 'nextitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_redis_error>, <Function test_create_api_key_unexpected_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ               ‚îî <Function test_create_api_key_redis_error>
    ‚îî <function runtestprotocol at 0x105e4b100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x105e4b4c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_create_api_key_redis_error' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_create_api_key_redis_error>
           ‚îî <function call_runtest_hook at 0x105e4b6a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x105e4b920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e6072e0>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_create_api_key_redis_error>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_redis_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x105eb22a0>
    ‚îî <Function test_create_api_key_redis_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ    ‚îî <property object at 0x105dc5990>
    ‚îî <Function test_create_api_key_redis_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_redis_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e8c89d0>, 'app': <fastapi.applications.FastAPI object at 0x10e8adb50>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_create_api_key_redis_error at 0x10e8c58a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-40' coro=<TestAPIKeyEndpoints.test_create_api_key_redis_error() running at /Users/pablo/Desktop/toni...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x107106840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1071067a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1071085e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x10709d3a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...d5d0>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...d5d0>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...d5d0>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...d5d0>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 345, in test_create_api_key_redis_error
    response = await client.post("/api-keys", json=key_data.model_dump())
                     ‚îÇ      ‚îÇ                      ‚îÇ        ‚îî <function BaseModel.model_dump at 0x1080a2e80>
                     ‚îÇ      ‚îÇ                      ‚îî APIKeyCreateRequest(name='Test Key', scopes=['read'])
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x108de0360>
                     ‚îî <httpx.AsyncClient object at 0x10e8c89d0>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x108dd7ce0>
                 ‚îî <httpx.AsyncClient object at 0x10e8c89d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x108dc9a50>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x108dc9a50>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x108dd7ec0>
                 ‚îî <httpx.AsyncClient object at 0x10e8c89d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x108dd7f60>
                     ‚îî <httpx.AsyncClient object at 0x10e8c89d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x108de0040>
                     ‚îî <httpx.AsyncClient object at 0x10e8c89d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x108de00e0>
                     ‚îî <httpx.AsyncClient object at 0x10e8c89d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x108b382c0>
                     ‚îî <httpx.ASGITransport object at 0x10e8c8b10>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e59b740>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e59b380>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e8adb50>
          ‚îî <httpx.ASGITransport object at 0x10e8c8b10>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e59b740>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e59b380>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e59b740>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e59b380>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e8cb790>
          ‚îî <fastapi.applications.FastAPI object at 0x10e8adb50>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e67e020>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e59b380>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e8cb750>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e8cb790>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e67e020>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e59b380>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e87a090>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e8ad110>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e8cb750>
          ‚îî <function wrap_app_handling_exceptions at 0x108a48f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e67df80>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e59b380>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <fastapi.routing.APIRouter object at 0x10e8ad110>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e67df80>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e59b380>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e8ad110>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e8ad110>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e67df80>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e59b380>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ     ‚îî <function Route.handle at 0x108a4a700>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e67df80>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e59b380>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e85aa20>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e67df80>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e59b380>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8cb710>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e85b100>
          ‚îî <function wrap_app_handling_exceptions at 0x108a48f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e85ae80>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e59b380>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e85b100>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8cb710>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e85ab60>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x108a48860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140426, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function create_api_key at 0x10c732de0>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10e4de650>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 382, in create_api_key
    await enforce_rate_limit(redis, bucket=f"ak:create:{user_id}", limit=5, window=60)
          ‚îÇ                  ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e8ad5d0>,db=0>>>
          ‚îî <function enforce_rate_limit at 0x10c428ea0>

  File "/Users/pablo/Desktop/toni/app/auth.py", line 246, in enforce_rate_limit
    local_res = await redis.eval(LUA_RATE_LIMIT, 1, local_key, str(window))
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ              ‚îî 60
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî 'rl:6132e8e512e36d5a54499518ce8f3f146307b77a3575291087f40f05c1ab1ae0'
                      ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal window = tonumber(ARGV[1])\nlocal now = redis.call('TIME')[1]\nlocal current = redis.call('INCR...
                      ‚îÇ     ‚îî <AsyncMock id='4539063120'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e8ad5d0>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî ResponseError(b'Generic Error')

redis.exceptions.ResponseError: b'Generic Error'
2025-12-07 20:47:06.412 | ERROR | no-id | Unexpected error in key creation | User: %s | Error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x105da9d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x105da9bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061367d0>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x106135150>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x106135150>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x106135150>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x106135150>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x105e70040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x106135150>
           ‚îî <function wrap_session at 0x105e4bf60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x106135150>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x105e70040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061367d0>
    ‚îî <_pytest.config.Config object at 0x106135150>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_list_api_keys_endpoint>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_create_api_key_unexpected_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_unexpected_error>, 'nextitem': <Function test_list_api_keys_endpoint>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_unexpected_error>, 'nextitem': <Function test_list_api_keys_endpoint>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_unexpected_error>, <Function test_list_api_keys_endpoint>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_list_api_keys_endpoint>
    ‚îÇ               ‚îî <Function test_create_api_key_unexpected_error>
    ‚îî <function runtestprotocol at 0x105e4b100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x105e4b4c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_create_api_key_unexpected_error' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_create_api_key_unexpected_error>
           ‚îî <function call_runtest_hook at 0x105e4b6a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x105e4b920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e605120>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_create_api_key_unexpected_error>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_unexpected_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x105eb22a0>
    ‚îî <Function test_create_api_key_unexpected_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ    ‚îî <property object at 0x105dc5990>
    ‚îî <Function test_create_api_key_unexpected_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_unexpected_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e8e3110>, 'app': <fastapi.applications.FastAPI object at 0x10e8ce310>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_create_api_key_unexpected_error at 0x10e8c7560>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-45' coro=<TestAPIKeyEndpoints.test_create_api_key_unexpected_error() running at /Users/pablo/Desktop...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x107106840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1071067a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1071085e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x10709d3a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...fad0>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...fad0>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...fad0>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...fad0>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 362, in test_create_api_key_unexpected_error
    response = await client.post("/api-keys", json={"name": "Test Key"})
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x108de0360>
                     ‚îî <httpx.AsyncClient object at 0x10e8e3110>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x108dd7ce0>
                 ‚îî <httpx.AsyncClient object at 0x10e8e3110>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x108dc9a50>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x108dc9a50>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x108dd7ec0>
                 ‚îî <httpx.AsyncClient object at 0x10e8e3110>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x108dd7f60>
                     ‚îî <httpx.AsyncClient object at 0x10e8e3110>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x108de0040>
                     ‚îî <httpx.AsyncClient object at 0x10e8e3110>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x108de00e0>
                     ‚îî <httpx.AsyncClient object at 0x10e8e3110>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x108b382c0>
                     ‚îî <httpx.ASGITransport object at 0x10e8e2e10>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e85bce0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e85bc40>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e8ce310>
          ‚îî <httpx.ASGITransport object at 0x10e8e2e10>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e85bce0>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e85bc40>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e85bce0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e85bc40>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e8edad0>
          ‚îî <fastapi.applications.FastAPI object at 0x10e8ce310>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e85be20>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e85bc40>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e8eda90>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e8edad0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e85be20>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e85bc40>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8eda50>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e8cf6d0>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e8eda90>
          ‚îî <function wrap_app_handling_exceptions at 0x108a48f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e85b920>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e85bc40>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <fastapi.routing.APIRouter object at 0x10e8cf6d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e85b920>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e85bc40>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e8cf6d0>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e8cf6d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e85b920>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e85bc40>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ     ‚îî <function Route.handle at 0x108a4a700>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e85b920>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e85bc40>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e8c5e40>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e85b920>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e85bc40>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8eda10>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e85b420>
          ‚îî <function wrap_app_handling_exceptions at 0x108a48f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e85b9c0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e85bc40>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e85b420>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8eda10>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e8c5ee0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x108a48860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140426, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function create_api_key at 0x10c732de0>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10e8bea90>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 382, in create_api_key
    await enforce_rate_limit(redis, bucket=f"ak:create:{user_id}", limit=5, window=60)
          ‚îÇ                  ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e8cfad0>,db=0>>>
          ‚îî <function enforce_rate_limit at 0x10c428ea0>

  File "/Users/pablo/Desktop/toni/app/auth.py", line 246, in enforce_rate_limit
    local_res = await redis.eval(LUA_RATE_LIMIT, 1, local_key, str(window))
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ              ‚îî 60
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî 'rl:6132e8e512e36d5a54499518ce8f3f146307b77a3575291087f40f05c1ab1ae0'
                      ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal window = tonumber(ARGV[1])\nlocal now = redis.call('TIME')[1]\nlocal current = redis.call('INCR...
                      ‚îÇ     ‚îî <AsyncMock id='4539170576'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e8cfad0>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Unexpected')

Exception: Unexpected
2025-12-07 20:47:06.460 | ERROR | no-id | Corrupted or invalid key data format for %s
2025-12-07 20:47:06.460 | WARNING | no-id | Missing key data for hash: %s
2025-12-07 20:47:06.473 | ERROR | no-id | Critical error listing API keys: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x105da9d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x105da9bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061367d0>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x106135150>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x106135150>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x106135150>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x106135150>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x105e70040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x106135150>
           ‚îî <function wrap_session at 0x105e4bf60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x106135150>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x105e70040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061367d0>
    ‚îî <_pytest.config.Config object at 0x106135150>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_revoke_api_key_endpoint>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_list_api_keys_exception>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_list_api_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_list_api_keys_exception>, 'nextitem': <Function test_revoke_api_key_endpoint>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_list_api_keys_exception>, 'nextitem': <Function test_revoke_api_key_endpoint>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_list_api_keys_exception>, <Function test_revoke_api_key_endpoint>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_revoke_api_key_endpoint>
    ‚îÇ               ‚îî <Function test_list_api_keys_exception>
    ‚îî <function runtestprotocol at 0x105e4b100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_list_api_keys_exception>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x105e4b4c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_list_api_keys_exception' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_list_api_keys_exception>
           ‚îî <function call_runtest_hook at 0x105e4b6a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x105e4b920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e667880>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_list_api_keys_exception>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_list_api_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x105eb22a0>
    ‚îî <Function test_list_api_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_list_api_keys_exception>
    ‚îÇ    ‚îî <property object at 0x105dc5990>
    ‚îî <Function test_list_api_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_list_api_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e8c8d50>, 'app': <fastapi.applications.FastAPI object at 0x10e4d7790>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_list_api_keys_exception at 0x10e916c00>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-65' coro=<TestAPIKeyEndpoints.test_list_api_keys_exception() running at /Users/pablo/Desktop/toni/te...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x107106840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1071067a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1071085e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x10709d3a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...e0d0>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...e0d0>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...e0d0>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...e0d0>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 462, in test_list_api_keys_exception
    response = await client.get("/api-keys")
                     ‚îÇ      ‚îî <function AsyncClient.get at 0x108de0180>
                     ‚îî <httpx.AsyncClient object at 0x10e8c8d50>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1786, in get
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x108dd7ce0>
                 ‚îî <httpx.AsyncClient object at 0x10e8c8d50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x108dc9a50>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x108dc9a50>
                 ‚îÇ    ‚îÇ    ‚îî <Request('GET', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x108dd7ec0>
                 ‚îî <httpx.AsyncClient object at 0x10e8c8d50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x108dd7f60>
                     ‚îî <httpx.AsyncClient object at 0x10e8c8d50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x108de0040>
                     ‚îî <httpx.AsyncClient object at 0x10e8c8d50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x108de00e0>
                     ‚îî <httpx.AsyncClient object at 0x10e8c8d50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x108b382c0>
                     ‚îî <httpx.ASGITransport object at 0x10e8c8c10>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e917060>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e916fc0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e4d7790>
          ‚îî <httpx.ASGITransport object at 0x10e8c8c10>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e917060>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e916fc0>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e917060>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e916fc0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e462f10>
          ‚îî <fastapi.applications.FastAPI object at 0x10e4d7790>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e8c77e0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e916fc0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e463f10>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e462f10>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e8c77e0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e916fc0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e463e90>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e4e70d0>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e463f10>
          ‚îî <function wrap_app_handling_exceptions at 0x108a48f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e8c44a0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e916fc0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <fastapi.routing.APIRouter object at 0x10e4e70d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e8c44a0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e916fc0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e4e70d0>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e4e70d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e8c44a0>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e916fc0>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ     ‚îî <function Route.handle at 0x108a4a700>
          ‚îî APIRoute(path='/api-keys', name='list_api_keys', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e8c44a0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e916fc0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e85a980>
          ‚îî APIRoute(path='/api-keys', name='list_api_keys', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e8c44a0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e916fc0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e483290>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e8c4040>
          ‚îî <function wrap_app_handling_exceptions at 0x108a48f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e8c4400>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e916fc0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e8c4040>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e483290>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e85a2a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x108a48860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140426, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function list_api_keys at 0x10c733240>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10e8be050>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 555, in list_api_keys
    api_key_hashes = await redis.smembers(f"api_keys:{client_hash}")
                           ‚îÇ     ‚îî <AsyncMock id='4538741904'>
                           ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10dbde0d0>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Redis failure')

Exception: Redis failure
2025-12-07 20:47:06.496 | WARNING | no-id | API key action
2025-12-07 20:47:06.496 | WARNING | no-id | API key revoked
2025-12-07 20:47:06.550 | INFO | no-id | API key rotated successfully
2025-12-07 20:47:06.618 | INFO | no-id | User data synchronization completed
2025-12-07 20:47:06.631 | WARNING | no-id | ADMIN ACTION: repair_data invoked
2025-12-07 20:47:06.656 | WARNING | no-id | ADMIN ACTION: repair_data invoked
2025-12-07 20:47:06.656 | ERROR | no-id | Critical error in data repair: %s
2025-12-07 20:47:06.670 | INFO | no-id | Plan synchronization completed
2025-12-07 20:47:06.683 | ERROR | no-id | Plan synchronization failed: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x105da9d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x105da9bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061367d0>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x106135150>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x106135150>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x106135150>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x106135150>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x105e70040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x106135150>
           ‚îî <function wrap_session at 0x105e4bf60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x106135150>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x105e70040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061367d0>
    ‚îî <_pytest.config.Config object at 0x106135150>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_get_usage_endpoint_jwt>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_sync_plan_keys_exception>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_sync_plan_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_sync_plan_keys_exception>, 'nextitem': <Function test_get_usage_endpoint_jwt>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_sync_plan_keys_exception>, 'nextitem': <Function test_get_usage_endpoint_jwt>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_sync_plan_keys_exception>, <Function test_get_usage_endpoint_jwt>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_get_usage_endpoint_jwt>
    ‚îÇ               ‚îî <Function test_sync_plan_keys_exception>
    ‚îî <function runtestprotocol at 0x105e4b100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_sync_plan_keys_exception>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x105e4b4c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_sync_plan_keys_exception' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_sync_plan_keys_exception>
           ‚îî <function call_runtest_hook at 0x105e4b6a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x105e4b920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e915580>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_sync_plan_keys_exception>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_sync_plan_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x105eb22a0>
    ‚îî <Function test_sync_plan_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_sync_plan_keys_exception>
    ‚îÇ    ‚îî <property object at 0x105dc5990>
    ‚îî <Function test_sync_plan_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_sync_plan_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e9daa50>, 'app': <fastapi.applications.FastAPI object at 0x10e8bc890>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_sync_plan_keys_exception at 0x10e9d2340>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-140' coro=<TestAPIKeyEndpoints.test_sync_plan_keys_exception() running at /Users/pablo/Desktop/toni/...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x107106840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1071067a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1071085e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x10709d3a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...ded0>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...ded0>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...ded0>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...ded0>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 803, in test_sync_plan_keys_exception
    response = await client.post("/api-keys/sync-plan-keys")
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x108de0360>
                     ‚îî <httpx.AsyncClient object at 0x10e9daa50>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x108dd7ce0>
                 ‚îî <httpx.AsyncClient object at 0x10e9daa50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x108dc9a50>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x108dc9a50>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys/sync-plan-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x108dd7ec0>
                 ‚îî <httpx.AsyncClient object at 0x10e9daa50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x108dd7f60>
                     ‚îî <httpx.AsyncClient object at 0x10e9daa50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x108de0040>
                     ‚îî <httpx.AsyncClient object at 0x10e9daa50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys/sync-plan-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x108de00e0>
                     ‚îî <httpx.AsyncClient object at 0x10e9daa50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys/sync-plan-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x108b382c0>
                     ‚îî <httpx.ASGITransport object at 0x10e9da490>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e9d2700>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9d2980>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e8bc890>
          ‚îî <httpx.ASGITransport object at 0x10e9da490>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e9d2700>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9d2980>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e9d2700>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9d2980>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e8eda90>
          ‚îî <fastapi.applications.FastAPI object at 0x10e8bc890>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e9d1c60>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9d2980>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e8eec90>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e8eda90>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e9d1c60>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9d2980>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8ec790>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e8bc790>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e8eec90>
          ‚îî <function wrap_app_handling_exceptions at 0x108a48f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e9d1da0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9d2980>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îî <fastapi.routing.APIRouter object at 0x10e8bc790>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e9d1da0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9d2980>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e8bc790>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e8bc790>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e9d1da0>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9d2980>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ     ‚îî <function Route.handle at 0x108a4a700>
          ‚îî APIRoute(path='/api-keys/sync-plan-keys', name='sync_plan_keys', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e9d1da0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9d2980>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e9d0680>
          ‚îî APIRoute(path='/api-keys/sync-plan-keys', name='sync_plan_keys', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e9d1da0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9d2980>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8ef650>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e9d19e0>
          ‚îî <function wrap_app_handling_exceptions at 0x108a48f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e9d2c00>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e9d2980>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e9d19e0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8ef650>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e9d0900>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x108a48860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140426, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function sync_plan_keys at 0x10c750680>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10e992490>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 717, in sync_plan_keys
    user_plan = await redis.hget(user_key, "plan")
                      ‚îÇ     ‚îÇ    ‚îî 'user:user123'
                      ‚îÇ     ‚îî <AsyncMock id='4539215184'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e8bded0>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Sync plan failed')

Exception: Sync plan failed
2025-12-07 20:47:06.755 | ERROR | no-id | Usage retrieval error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x105da9d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x105da9bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061367d0>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x106135150>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x106135150>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x106135150>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x106135150>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x105e70040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x106135150>
           ‚îî <function wrap_session at 0x105e4bf60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x106135150>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x105e70040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1061367d0>
    ‚îî <_pytest.config.Config object at 0x106135150>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_max_keys_per_user>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_get_usage_exception>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_get_usage_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_get_usage_exception>, 'nextitem': <Function test_max_keys_per_user>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_get_usage_exception>, 'nextitem': <Function test_max_keys_per_user>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_get_usage_exception>, <Function test_max_keys_per_user>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_max_keys_per_user>
    ‚îÇ               ‚îî <Function test_get_usage_exception>
    ‚îî <function runtestprotocol at 0x105e4b100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_get_usage_exception>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x105e4b4c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_get_usage_exception' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_get_usage_exception>
           ‚îî <function call_runtest_hook at 0x105e4b6a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x105e4b920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e98e480>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_get_usage_exception>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_get_usage_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x105eb22a0>
    ‚îî <Function test_get_usage_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_get_usage_exception>
    ‚îÇ    ‚îî <property object at 0x105dc5990>
    ‚îî <Function test_get_usage_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x10571c900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x105ee1990>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_get_usage_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e9dbe50>, 'app': <fastapi.applications.FastAPI object at 0x10e90dad0>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_get_usage_exception at 0x10e949c60>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-165' coro=<TestAPIKeyEndpoints.test_get_usage_exception() running at /Users/pablo/Desktop/toni/tests...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x107106840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1071067a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1071085e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x10709d3a0>
    ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future cancelled>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 935, in test_get_usage_exception
    response = await client.get("/api-keys/usage")
                     ‚îÇ      ‚îî <function AsyncClient.get at 0x108de0180>
                     ‚îî <httpx.AsyncClient object at 0x10e9dbe50>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1786, in get
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x108dd7ce0>
                 ‚îî <httpx.AsyncClient object at 0x10e9dbe50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x108dc9a50>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x108dc9a50>
                 ‚îÇ    ‚îÇ    ‚îî <Request('GET', 'http://test/api-keys/usage')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x108dd7ec0>
                 ‚îî <httpx.AsyncClient object at 0x10e9dbe50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x108dd7f60>
                     ‚îî <httpx.AsyncClient object at 0x10e9dbe50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x108de0040>
                     ‚îî <httpx.AsyncClient object at 0x10e9dbe50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys/usage')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x108de00e0>
                     ‚îî <httpx.AsyncClient object at 0x10e9dbe50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys/usage')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x108b382c0>
                     ‚îî <httpx.ASGITransport object at 0x10e9da090>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10ea0dda0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ea0cfe0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e90dad0>
          ‚îî <httpx.ASGITransport object at 0x10e9da090>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10ea0dda0>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ea0cfe0>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10ea0dda0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ea0cfe0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e8ef8d0>
          ‚îî <fastapi.applications.FastAPI object at 0x10e90dad0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10ea0f4c0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ea0cfe0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e8ec210>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e8ef8d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10ea0f4c0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ea0cfe0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8ec290>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e90f450>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e8ec210>
          ‚îî <function wrap_app_handling_exceptions at 0x108a48f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ea0f240>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ea0cfe0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <fastapi.routing.APIRouter object at 0x10e90f450>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ea0f240>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ea0cfe0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e90f450>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e90f450>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ea0f240>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ea0cfe0>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ     ‚îî <function Route.handle at 0x108a4a700>
          ‚îî APIRoute(path='/api-keys/usage', name='get_usage', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ea0f240>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ea0cfe0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e8c6de0>
          ‚îî APIRoute(path='/api-keys/usage', name='get_usage', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ea0f240>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ea0cfe0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8ecd50>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10ea0f380>
          ‚îî <function wrap_app_handling_exceptions at 0x108a48f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ea0f060>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ea0cfe0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10ea0f380>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e8ecd50>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e98f1a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x108a48860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140426, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function get_usage at 0x10c731e40>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10e9db010>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 985, in get_usage
    plan_raw = await redis.hget(user_key, "plan")
                     ‚îÇ     ‚îÇ    ‚îî 'user:user123'
                     ‚îÇ     ‚îî <AsyncMock id='4540180048'>
                     ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e90c550>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Redis error')

Exception: Redis error
2025-12-07 20:47:11.323 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:11.325 | INFO | no-id | Login successful for user: d8de9984-b0c1-4f73-8063-afc18547d07b
2025-12-07 20:47:11.336 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:11.337 | WARNING | no-id | Login failed: Invalid password for tes***@***
2025-12-07 20:47:11.347 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:11.349 | INFO | no-id | Login successful for user: 6b170416-ca74-453e-b71e-963a03e60027
2025-12-07 20:47:11.349 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:11.350 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:11.361 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:11.363 | INFO | no-id | Login successful for user: b94cf926-616e-4ebc-98d2-84323f1fac4c
2025-12-07 20:47:11.364 | DEBUG | no-id | Validating refresh token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:11.364 | INFO | no-id | Token refreshed for user: b94cf926... (new plan: PREMIUM)
2025-12-07 20:47:11.375 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:11.377 | INFO | no-id | Login successful for user: 6d313c40-c351-43e5-a40a-7a1db20285db
2025-12-07 20:47:11.379 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:47:11.380 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:11.380 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:12.485 | WARNING | no-id | Attempt to verify password with empty hash
2025-12-07 20:47:12.487 | WARNING | no-id | Invalid password hash format
2025-12-07 20:47:12.499 | ERROR | no-id | Expected string for API key
2025-12-07 20:47:12.597 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:12.601 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:47:12.604 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:47:12.647 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:12.649 | INFO | no-id | Login successful for user: 5a86dbb9-8bb5-44a9-9e41-1d026c313e09
2025-12-07 20:47:12.743 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:12.746 | WARNING | no-id | Empty API Key (request: %s)
2025-12-07 20:47:12.749 | WARNING | no-id | Invalid API Key format (request: %s)
2025-12-07 20:47:12.753 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:47:12.756 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:47:12.975 | WARNING | no-id | Invalid password hash format
2025-12-07 20:47:13.065 | DEBUG | no-id | Decoding JWT token: fake_token...
2025-12-07 20:47:13.065 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes']
2025-12-07 20:47:13.069 | DEBUG | no-id | Auth attempt - X-API-Key: ufKVYAIj_AQmOeldfdaJLczXu_KEMecOIIabpa-XC-w, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4542927504'>)
2025-12-07 20:47:13.073 | ERROR | no-id | API Key validation error (request: %s): %s
2025-12-07 20:47:13.122 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:13.126 | DEBUG | no-id | Decoding JWT token: fake_token...
2025-12-07 20:47:13.127 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:47:13.132 | DEBUG | no-id | Decoding JWT token: blacklisted_token...
2025-12-07 20:47:13.132 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'type']
2025-12-07 20:47:13.136 | DEBUG | no-id | Auth attempt - X-API-Key: test_key, Authorization present: False (request: test-123)
2025-12-07 20:47:13.140 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: <Mock name='mock.state.correlation_id' id='4543792208'>)
2025-12-07 20:47:13.140 | DEBUG | no-id | Bearer token present, length: 10, starts with: test_token...
2025-12-07 20:47:13.140 | DEBUG | no-id | Token validated successfully (request: <Mock name='mock.state.correlation_id' id='4543792208'>)
2025-12-07 20:47:13.143 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4543751504'>)
2025-12-07 20:47:13.143 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:47:13.224 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:13.227 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:47:13.230 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:47:13.233 | WARNING | no-id | Invalid API Key format (request: %s)
2025-12-07 20:47:13.236 | WARNING | no-id | Empty API Key (request: %s)
2025-12-07 20:47:13.241 | DEBUG | no-id | Decoding JWT token: fake_token...
2025-12-07 20:47:13.241 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:47:13.245 | DEBUG | no-id | Decoding JWT token: blacklisted_token...
2025-12-07 20:47:13.245 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'jti', 'type']
2025-12-07 20:47:13.249 | DEBUG | no-id | Auth attempt - X-API-Key: v9tDzC1fJHhk4Ux-CduAvTDczq2mMDiAl4gGTdYXJIA, Authorization present: False (request: test-123)
2025-12-07 20:47:13.249 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:13.253 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: <Mock name='mock.state.correlation_id' id='4544127568'>)
2025-12-07 20:47:13.254 | DEBUG | no-id | Bearer token present, length: 8, starts with: token123...
2025-12-07 20:47:13.254 | DEBUG | no-id | Token validated successfully (request: <Mock name='mock.state.correlation_id' id='4544127568'>)
2025-12-07 20:47:13.289 | WARNING | no-id | Attempt to verify password with empty hash
2025-12-07 20:47:13.290 | WARNING | no-id | Attempt to verify password with empty hash
2025-12-07 20:47:13.292 | WARNING | no-id | Invalid password hash format
2025-12-07 20:47:13.294 | ERROR | no-id | Error verifying password: %s
2025-12-07 20:47:13.332 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:47:13.332 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:47:13.338 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:47:13.338 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:47:13.338 | WARNING | no-id | Token type mismatch: expected %s, got '%s'
2025-12-07 20:47:13.342 | DEBUG | no-id | Auth attempt - X-API-Key: test_key, Authorization present: True (request: test-123)
2025-12-07 20:47:13.345 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4544683984'>)
2025-12-07 20:47:13.346 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:47:13.402 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:13.405 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:47:13.434 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:13.436 | INFO | no-id | Login successful for user: ecf3931c-8228-433a-8bc4-76d18001f817
2025-12-07 20:47:13.451 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:13.451 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:13.452 | INFO | no-id | Plan updated: Redis=FREE vs Token=PlanEnum.PREMIUM. Using Redis.
2025-12-07 20:47:13.537 | DEBUG | no-id | Validating refresh token: valid_refresh_token...
2025-12-07 20:47:13.538 | INFO | no-id | Token refreshed for user: user123... (new plan: ENTERPRISE)
2025-12-07 20:47:13.542 | WARNING | no-id | Refresh request without token
2025-12-07 20:47:13.547 | DEBUG | no-id | Validating refresh token: revoked_token...
2025-12-07 20:47:13.547 | WARNING | no-id | Refresh token revoked: %s
2025-12-07 20:47:13.551 | DEBUG | no-id | Validating refresh token: access_token...
2025-12-07 20:47:13.552 | WARNING | no-id | Token type mismatch: expected 'refresh', got '%s'
2025-12-07 20:47:13.558 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:47:13.563 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:47:13.567 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:47:13.572 | INFO | no-id | API key rotated by admin: %s...
2025-12-07 20:47:13.620 | WARNING | no-id | Empty API Key (request: %s)
2025-12-07 20:47:13.621 | WARNING | no-id | Invalid API Key format (request: %s)
2025-12-07 20:47:13.622 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:13.623 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:13.628 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:47:13.628 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type']
2025-12-07 20:47:13.628 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:47:13.628 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type']
2025-12-07 20:47:13.632 | DEBUG | no-id | Auth attempt - X-API-Key: test_key, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4545619728'>)
2025-12-07 20:47:13.633 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: <Mock name='mock.state.correlation_id' id='4545619728'>)
2025-12-07 20:47:13.633 | DEBUG | no-id | Bearer token present, length: 5, starts with: token...
2025-12-07 20:47:13.633 | DEBUG | no-id | Token validated successfully (request: <Mock name='mock.state.correlation_id' id='4545619728'>)
2025-12-07 20:47:13.633 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4545619728'>)
2025-12-07 20:47:13.633 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:47:13.713 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:13.716 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:47:13.720 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:47:13.766 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:47:13.780 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:47:13.781 | ERROR | no-id | Webhook signature verification failed: Invalid signature
2025-12-07 20:47:13.797 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:47:13.797 | INFO | no-id | ‚úÖ Processing webhook: checkout.session.completed (evt_123)
2025-12-07 20:47:13.812 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:47:13.812 | WARNING | no-id | ‚ö†Ô∏è TEST MODE ONLY: Skipping Stripe signature validation
2025-12-07 20:47:13.812 | INFO | no-id | ‚úÖ Processing webhook: test.event (evt_dev)
2025-12-07 20:47:13.813 | INFO | no-id | Processing webhook event: test.event (evt_dev)
2025-12-07 20:47:13.813 | DEBUG | no-id | Acquired processing lock: processing:event:evt_dev
2025-12-07 20:47:13.813 | INFO | no-id | Unhandled event type: test.event
2025-12-07 20:47:13.815 | DEBUG | no-id | Released processing lock: processing:event:evt_dev
2025-12-07 20:47:13.829 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: unknown)
2025-12-07 20:47:13.829 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:47:13.845 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: unknown)
2025-12-07 20:47:13.846 | DEBUG | no-id | Bearer token present, length: 535, starts with: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:13.846 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:13.846 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:13.846 | DEBUG | no-id | Token validated successfully (request: unknown)
2025-12-07 20:47:13.862 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: unknown)
2025-12-07 20:47:13.862 | DEBUG | no-id | Bearer token present, length: 535, starts with: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:13.862 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:13.862 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:13.863 | DEBUG | no-id | Token validated successfully (request: unknown)
2025-12-07 20:47:13.880 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:13.881 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:13.881 | INFO | unknown | Creating checkout session for user user_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa, plan: PREMIUM
2025-12-07 20:47:13.882 | INFO | unknown | Checkout session created: cs_test_123
2025-12-07 20:47:13.898 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:13.898 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:13.915 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:13.915 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:13.916 | INFO | unknown | Creating checkout session for user user_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa, plan: PREMIUM
2025-12-07 20:47:13.931 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:13.931 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:13.934 | INFO | no-id | Plan changed to ENTERPRISE for user user_123, new tokens generated
2025-12-07 20:47:13.949 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:13.949 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:13.964 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:13.965 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:42.213 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:47:43.127 | INFO | no-id | üîá Console tracing disabled in development (reducing log noise)
2025-12-07 20:47:43.128 | INFO | no-id | ‚ÑπÔ∏è No tracing exporter configured (development mode)
2025-12-07 20:47:43.128 | INFO | no-id | üîá OpenTelemetry verbose logging disabled in development
2025-12-07 20:47:43.128 | SUCCESS | no-id | ‚úÖ FastAPI instrumented for tracing
2025-12-07 20:47:43.129 | SUCCESS | no-id | ‚úÖ Redis instrumented for tracing
2025-12-07 20:47:43.130 | SUCCESS | no-id | ‚úÖ HTTP client instrumented for tracing
2025-12-07 20:47:43.130 | SUCCESS | no-id | üîç Distributed tracing initialized for mailsafepro-api
2025-12-07 20:47:43.167 | INFO | no-id | Exception handlers registered successfully
2025-12-07 20:47:43.542 | WARNING | no-id | ‚ö†Ô∏è  Abuse detected: Same email validated 25 times
2025-12-07 20:47:43.548 | WARNING | no-id | ‚ö†Ô∏è  Abuse detected: Rapid request spike
2025-12-07 20:47:43.553 | ERROR | no-id | üö® HONEYPOT TRIGGERED
2025-12-07 20:47:43.564 | INFO | no-id | Created circuit breaker: Redis Cache
2025-12-07 20:47:43.567 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:47:43.570 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:47:43.651 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:47:43.703 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:47:43.707 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:47:43.835 | DEBUG | no-id | Creating API key | User: %s | Plan: %s | Name: %s
2025-12-07 20:47:43.836 | INFO | no-id | API key created successfully
2025-12-07 20:47:43.847 | ERROR | no-id | Unexpected error in key creation | User: %s | Error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x104139d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x104139bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1044c6790>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x1044c65d0>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x1044c65d0>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x1044c65d0>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x1044c65d0>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x104200040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x1044c65d0>
           ‚îî <function wrap_session at 0x1041dbf60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x1044c65d0>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x104200040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1044c6790>
    ‚îî <_pytest.config.Config object at 0x1044c65d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_create_api_key_max_keys_exceeded>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>, 'nextitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>, 'nextitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_max_keys_exceeded>, <Function test_create_api_key_redis_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ               ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îî <function runtestprotocol at 0x1041db100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x1041db4c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_create_api_key_max_keys_exceeded' when='setup' outcome='passe...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_create_api_key_max_keys_exceeded>
           ‚îî <function call_runtest_hook at 0x1041db6a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x1041db920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10d9ae5c0>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_create_api_key_max_keys_exceeded>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_max_keys_exceeded>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x1042422a0>
    ‚îî <Function test_create_api_key_max_keys_exceeded>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îÇ    ‚îî <property object at 0x1041559e0>
    ‚îî <Function test_create_api_key_max_keys_exceeded>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_max_keys_exceeded>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10d911550>, 'app': <fastapi.applications.FastAPI object at 0x10d8700d0>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_create_api_key_max_keys_exceeded at 0x10dba2660>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-35' coro=<TestAPIKeyEndpoints.test_create_api_key_max_keys_exceeded() running at /Users/pablo/Deskto...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x105496840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1054967a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1054985e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x10542d3a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...7c90>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...7c90>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...7c90>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...7c90>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 326, in test_create_api_key_max_keys_exceeded
    response = await client.post("/api-keys", json=key_data.model_dump())
                     ‚îÇ      ‚îÇ                      ‚îÇ        ‚îî <function BaseModel.model_dump at 0x106436e80>
                     ‚îÇ      ‚îÇ                      ‚îî APIKeyCreateRequest(name='Test Key', scopes=['read'])
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x107174360>
                     ‚îî <httpx.AsyncClient object at 0x10d911550>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x10716bce0>
                 ‚îî <httpx.AsyncClient object at 0x10d911550>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x10715dad0>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x10715dad0>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x10716bec0>
                 ‚îî <httpx.AsyncClient object at 0x10d911550>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x10716bf60>
                     ‚îî <httpx.AsyncClient object at 0x10d911550>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x107174040>
                     ‚îî <httpx.AsyncClient object at 0x10d911550>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x1071740e0>
                     ‚îî <httpx.AsyncClient object at 0x10d911550>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x106ecc2c0>
                     ‚îî <httpx.ASGITransport object at 0x10d910c50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10dba1e40>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dba2160>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10d8700d0>
          ‚îî <httpx.ASGITransport object at 0x10d910c50>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10dba1e40>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dba2160>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10dba1e40>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dba2160>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10c5da3d0>
          ‚îî <fastapi.applications.FastAPI object at 0x10d8700d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10dba1d00>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dba2160>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10c5da390>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10c5da3d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10dba1d00>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dba2160>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10c5da690>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10d886950>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10c5da390>
          ‚îî <function wrap_app_handling_exceptions at 0x106ddcf40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dba1bc0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dba2160>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <fastapi.routing.APIRouter object at 0x10d886950>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dba1bc0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dba2160>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10d886950>>
          ‚îî <fastapi.routing.APIRouter object at 0x10d886950>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dba1bc0>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dba2160>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ     ‚îî <function Route.handle at 0x106dde700>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dba1bc0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dba2160>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10dba0c20>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dba1bc0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dba2160>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10c5da150>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10dba1940>
          ‚îî <function wrap_app_handling_exceptions at 0x106ddcf40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dba1620>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dba2160>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10dba1940>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10c5da150>
                     ‚îî <function get_request_handler.<locals>.app at 0x10dba0cc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x106ddc860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140463, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function create_api_key at 0x10acfa020>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10d914d50>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 382, in create_api_key
    await enforce_rate_limit(redis, bucket=f"ak:create:{user_id}", limit=5, window=60)
          ‚îÇ                  ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10c597c90>,db=0>>>
          ‚îî <function enforce_rate_limit at 0x10a7a7ec0>

  File "/Users/pablo/Desktop/toni/app/auth.py", line 246, in enforce_rate_limit
    local_res = await redis.eval(LUA_RATE_LIMIT, 1, local_key, str(window))
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ              ‚îî 60
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî 'rl:6132e8e512e36d5a54499518ce8f3f146307b77a3575291087f40f05c1ab1ae0'
                      ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal window = tonumber(ARGV[1])\nlocal now = redis.call('TIME')[1]\nlocal current = redis.call('INCR...
                      ‚îÇ     ‚îî <AsyncMock id='4521913936'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10c597c90>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî ResponseError(b'max_keys_exceeded')

redis.exceptions.ResponseError: b'max_keys_exceeded'
2025-12-07 20:47:43.879 | ERROR | no-id | Unexpected error in key creation | User: %s | Error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x104139d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x104139bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1044c6790>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x1044c65d0>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x1044c65d0>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x1044c65d0>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x1044c65d0>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x104200040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x1044c65d0>
           ‚îî <function wrap_session at 0x1041dbf60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x1044c65d0>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x104200040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1044c6790>
    ‚îî <_pytest.config.Config object at 0x1044c65d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_create_api_key_redis_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_redis_error>, 'nextitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_redis_error>, 'nextitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_redis_error>, <Function test_create_api_key_unexpected_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ               ‚îî <Function test_create_api_key_redis_error>
    ‚îî <function runtestprotocol at 0x1041db100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x1041db4c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_create_api_key_redis_error' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_create_api_key_redis_error>
           ‚îî <function call_runtest_hook at 0x1041db6a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x1041db920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10bf9c7c0>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_create_api_key_redis_error>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_redis_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x1042422a0>
    ‚îî <Function test_create_api_key_redis_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ    ‚îî <property object at 0x1041559e0>
    ‚îî <Function test_create_api_key_redis_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_redis_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10dddfdd0>, 'app': <fastapi.applications.FastAPI object at 0x10ddb7410>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_create_api_key_redis_error at 0x10ddcf4c0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-40' coro=<TestAPIKeyEndpoints.test_create_api_key_redis_error() running at /Users/pablo/Desktop/toni...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x105496840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1054967a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1054985e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x10542d3a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...06d0>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...06d0>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...06d0>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...06d0>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 345, in test_create_api_key_redis_error
    response = await client.post("/api-keys", json=key_data.model_dump())
                     ‚îÇ      ‚îÇ                      ‚îÇ        ‚îî <function BaseModel.model_dump at 0x106436e80>
                     ‚îÇ      ‚îÇ                      ‚îî APIKeyCreateRequest(name='Test Key', scopes=['read'])
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x107174360>
                     ‚îî <httpx.AsyncClient object at 0x10dddfdd0>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x10716bce0>
                 ‚îî <httpx.AsyncClient object at 0x10dddfdd0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x10715dad0>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x10715dad0>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x10716bec0>
                 ‚îî <httpx.AsyncClient object at 0x10dddfdd0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x10716bf60>
                     ‚îî <httpx.AsyncClient object at 0x10dddfdd0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x107174040>
                     ‚îî <httpx.AsyncClient object at 0x10dddfdd0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x1071740e0>
                     ‚îî <httpx.AsyncClient object at 0x10dddfdd0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x106ecc2c0>
                     ‚îî <httpx.ASGITransport object at 0x10dddfad0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10db0f920>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0fa60>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10ddb7410>
          ‚îî <httpx.ASGITransport object at 0x10dddfad0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10db0f920>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0fa60>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10db0f920>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0fa60>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10ddb6c10>
          ‚îî <fastapi.applications.FastAPI object at 0x10ddb7410>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10db0f600>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0fa60>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10dde6850>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10ddb6c10>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10db0f600>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0fa60>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10d914fd0>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10ddc0350>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10dde6850>
          ‚îî <function wrap_app_handling_exceptions at 0x106ddcf40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10db0fb00>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0fa60>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <fastapi.routing.APIRouter object at 0x10ddc0350>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10db0fb00>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0fa60>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10ddc0350>>
          ‚îî <fastapi.routing.APIRouter object at 0x10ddc0350>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10db0fb00>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0fa60>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ     ‚îî <function Route.handle at 0x106dde700>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10db0fb00>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0fa60>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10ddccc20>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10db0fb00>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0fa60>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10dde6810>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10db0f7e0>
          ‚îî <function wrap_app_handling_exceptions at 0x106ddcf40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dba2340>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0fa60>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10db0f7e0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10dde6810>
                     ‚îî <function get_request_handler.<locals>.app at 0x10ddcc860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x106ddc860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140463, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function create_api_key at 0x10acfa020>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10c5da050>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 382, in create_api_key
    await enforce_rate_limit(redis, bucket=f"ak:create:{user_id}", limit=5, window=60)
          ‚îÇ                  ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10ddc06d0>,db=0>>>
          ‚îî <function enforce_rate_limit at 0x10a7a7ec0>

  File "/Users/pablo/Desktop/toni/app/auth.py", line 246, in enforce_rate_limit
    local_res = await redis.eval(LUA_RATE_LIMIT, 1, local_key, str(window))
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ              ‚îî 60
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî 'rl:6132e8e512e36d5a54499518ce8f3f146307b77a3575291087f40f05c1ab1ae0'
                      ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal window = tonumber(ARGV[1])\nlocal now = redis.call('TIME')[1]\nlocal current = redis.call('INCR...
                      ‚îÇ     ‚îî <AsyncMock id='4527639568'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10ddc06d0>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî ResponseError(b'Generic Error')

redis.exceptions.ResponseError: b'Generic Error'
2025-12-07 20:47:43.903 | ERROR | no-id | Unexpected error in key creation | User: %s | Error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x104139d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x104139bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1044c6790>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x1044c65d0>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x1044c65d0>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x1044c65d0>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x1044c65d0>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x104200040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x1044c65d0>
           ‚îî <function wrap_session at 0x1041dbf60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x1044c65d0>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x104200040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1044c6790>
    ‚îî <_pytest.config.Config object at 0x1044c65d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_list_api_keys_endpoint>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_create_api_key_unexpected_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_unexpected_error>, 'nextitem': <Function test_list_api_keys_endpoint>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_unexpected_error>, 'nextitem': <Function test_list_api_keys_endpoint>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_unexpected_error>, <Function test_list_api_keys_endpoint>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_list_api_keys_endpoint>
    ‚îÇ               ‚îî <Function test_create_api_key_unexpected_error>
    ‚îî <function runtestprotocol at 0x1041db100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x1041db4c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_create_api_key_unexpected_error' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_create_api_key_unexpected_error>
           ‚îî <function call_runtest_hook at 0x1041db6a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x1041db920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10d9ae5c0>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_create_api_key_unexpected_error>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_unexpected_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x1042422a0>
    ‚îî <Function test_create_api_key_unexpected_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ    ‚îî <property object at 0x1041559e0>
    ‚îî <Function test_create_api_key_unexpected_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_unexpected_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10ddd0a90>, 'app': <fastapi.applications.FastAPI object at 0x10ddeb3d0>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_create_api_key_unexpected_error at 0x10d9fb9c0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-45' coro=<TestAPIKeyEndpoints.test_create_api_key_unexpected_error() running at /Users/pablo/Desktop...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x105496840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1054967a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1054985e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x10542d3a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...b590>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...b590>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...b590>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...b590>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 362, in test_create_api_key_unexpected_error
    response = await client.post("/api-keys", json={"name": "Test Key"})
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x107174360>
                     ‚îî <httpx.AsyncClient object at 0x10ddd0a90>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x10716bce0>
                 ‚îî <httpx.AsyncClient object at 0x10ddd0a90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x10715dad0>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x10715dad0>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x10716bec0>
                 ‚îî <httpx.AsyncClient object at 0x10ddd0a90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x10716bf60>
                     ‚îî <httpx.AsyncClient object at 0x10ddd0a90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x107174040>
                     ‚îî <httpx.AsyncClient object at 0x10ddd0a90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x1071740e0>
                     ‚îî <httpx.AsyncClient object at 0x10ddd0a90>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x106ecc2c0>
                     ‚îî <httpx.ASGITransport object at 0x10ddd0ad0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10ddcccc0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ddccae0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10ddeb3d0>
          ‚îî <httpx.ASGITransport object at 0x10ddd0ad0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10ddcccc0>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ddccae0>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10ddcccc0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ddccae0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10c5f1650>
          ‚îî <fastapi.applications.FastAPI object at 0x10ddeb3d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10ddce520>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ddccae0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10c5f1e50>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10c5f1650>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10ddce520>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ddccae0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10a7d7510>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10ddeb210>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10c5f1e50>
          ‚îî <function wrap_app_handling_exceptions at 0x106ddcf40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ddce840>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ddccae0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <fastapi.routing.APIRouter object at 0x10ddeb210>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ddce840>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ddccae0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10ddeb210>>
          ‚îî <fastapi.routing.APIRouter object at 0x10ddeb210>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ddce840>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ddccae0>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ     ‚îî <function Route.handle at 0x106dde700>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ddce840>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ddccae0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10db0fec0>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ddce840>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ddccae0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10c5f3290>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10ddce8e0>
          ‚îî <function wrap_app_handling_exceptions at 0x106ddcf40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ddcea20>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10ddccae0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10ddce8e0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10c5f3290>
                     ‚îî <function get_request_handler.<locals>.app at 0x10db0fe20>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x106ddc860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140463, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function create_api_key at 0x10acfa020>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10c5fb9d0>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 382, in create_api_key
    await enforce_rate_limit(redis, bucket=f"ak:create:{user_id}", limit=5, window=60)
          ‚îÇ                  ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10ddeb590>,db=0>>>
          ‚îî <function enforce_rate_limit at 0x10a7a7ec0>

  File "/Users/pablo/Desktop/toni/app/auth.py", line 246, in enforce_rate_limit
    local_res = await redis.eval(LUA_RATE_LIMIT, 1, local_key, str(window))
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ              ‚îî 60
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî 'rl:6132e8e512e36d5a54499518ce8f3f146307b77a3575291087f40f05c1ab1ae0'
                      ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal window = tonumber(ARGV[1])\nlocal now = redis.call('TIME')[1]\nlocal current = redis.call('INCR...
                      ‚îÇ     ‚îî <AsyncMock id='4527555472'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10ddeb590>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Unexpected')

Exception: Unexpected
2025-12-07 20:47:43.952 | ERROR | no-id | Corrupted or invalid key data format for %s
2025-12-07 20:47:43.952 | WARNING | no-id | Missing key data for hash: %s
2025-12-07 20:47:43.966 | ERROR | no-id | Critical error listing API keys: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x104139d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x104139bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1044c6790>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x1044c65d0>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x1044c65d0>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x1044c65d0>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x1044c65d0>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x104200040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x1044c65d0>
           ‚îî <function wrap_session at 0x1041dbf60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x1044c65d0>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x104200040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1044c6790>
    ‚îî <_pytest.config.Config object at 0x1044c65d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_revoke_api_key_endpoint>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_list_api_keys_exception>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_list_api_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_list_api_keys_exception>, 'nextitem': <Function test_revoke_api_key_endpoint>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_list_api_keys_exception>, 'nextitem': <Function test_revoke_api_key_endpoint>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_list_api_keys_exception>, <Function test_revoke_api_key_endpoint>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_revoke_api_key_endpoint>
    ‚îÇ               ‚îî <Function test_list_api_keys_exception>
    ‚îî <function runtestprotocol at 0x1041db100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_list_api_keys_exception>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x1041db4c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_list_api_keys_exception' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_list_api_keys_exception>
           ‚îî <function call_runtest_hook at 0x1041db6a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x1041db920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10d9fb920>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_list_api_keys_exception>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_list_api_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x1042422a0>
    ‚îî <Function test_list_api_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_list_api_keys_exception>
    ‚îÇ    ‚îî <property object at 0x1041559e0>
    ‚îî <Function test_list_api_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_list_api_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10de19990>, 'app': <fastapi.applications.FastAPI object at 0x10de295d0>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_list_api_keys_exception at 0x10db0f2e0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-65' coro=<TestAPIKeyEndpoints.test_list_api_keys_exception() running at /Users/pablo/Desktop/toni/te...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x105496840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1054967a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1054985e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x10542d3a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...9210>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...9210>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...9210>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...9210>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 462, in test_list_api_keys_exception
    response = await client.get("/api-keys")
                     ‚îÇ      ‚îî <function AsyncClient.get at 0x107174180>
                     ‚îî <httpx.AsyncClient object at 0x10de19990>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1786, in get
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x10716bce0>
                 ‚îî <httpx.AsyncClient object at 0x10de19990>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x10715dad0>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x10715dad0>
                 ‚îÇ    ‚îÇ    ‚îî <Request('GET', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x10716bec0>
                 ‚îî <httpx.AsyncClient object at 0x10de19990>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x10716bf60>
                     ‚îî <httpx.AsyncClient object at 0x10de19990>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x107174040>
                     ‚îî <httpx.AsyncClient object at 0x10de19990>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x1071740e0>
                     ‚îî <httpx.AsyncClient object at 0x10de19990>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x106ecc2c0>
                     ‚îî <httpx.ASGITransport object at 0x10de19ad0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10db0f920>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0f060>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10de295d0>
          ‚îî <httpx.ASGITransport object at 0x10de19ad0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10db0f920>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0f060>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10db0f920>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0f060>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d8899d0>
          ‚îî <fastapi.applications.FastAPI object at 0x10de295d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10ddfe200>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0f060>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d88ad50>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d8899d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10ddfe200>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0f060>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10d88ab50>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10de28e10>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d88ad50>
          ‚îî <function wrap_app_handling_exceptions at 0x106ddcf40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ddfdda0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0f060>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <fastapi.routing.APIRouter object at 0x10de28e10>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ddfdda0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0f060>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10de28e10>>
          ‚îî <fastapi.routing.APIRouter object at 0x10de28e10>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ddfdda0>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0f060>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ     ‚îî <function Route.handle at 0x106dde700>
          ‚îî APIRoute(path='/api-keys', name='list_api_keys', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ddfdda0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0f060>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10dba18a0>
          ‚îî APIRoute(path='/api-keys', name='list_api_keys', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ddfdda0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0f060>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10d88b6d0>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10ddfe840>
          ‚îî <function wrap_app_handling_exceptions at 0x106ddcf40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ddfcc20>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10db0f060>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10ddfe840>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10d88b6d0>
                     ‚îî <function get_request_handler.<locals>.app at 0x10dba0220>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x106ddc860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140463, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function list_api_keys at 0x10acfa840>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10de00c10>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 555, in list_api_keys
    api_key_hashes = await redis.smembers(f"api_keys:{client_hash}")
                           ‚îÇ     ‚îî <AsyncMock id='4521997968'>
                           ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10de29210>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Redis failure')

Exception: Redis failure
2025-12-07 20:47:43.988 | WARNING | no-id | API key action
2025-12-07 20:47:43.988 | WARNING | no-id | API key revoked
2025-12-07 20:47:44.039 | INFO | no-id | API key rotated successfully
2025-12-07 20:47:44.106 | INFO | no-id | User data synchronization completed
2025-12-07 20:47:44.118 | WARNING | no-id | ADMIN ACTION: repair_data invoked
2025-12-07 20:47:44.146 | WARNING | no-id | ADMIN ACTION: repair_data invoked
2025-12-07 20:47:44.146 | ERROR | no-id | Critical error in data repair: %s
2025-12-07 20:47:44.159 | INFO | no-id | Plan synchronization completed
2025-12-07 20:47:44.173 | ERROR | no-id | Plan synchronization failed: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x104139d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x104139bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1044c6790>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x1044c65d0>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x1044c65d0>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x1044c65d0>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x1044c65d0>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x104200040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x1044c65d0>
           ‚îî <function wrap_session at 0x1041dbf60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x1044c65d0>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x104200040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1044c6790>
    ‚îî <_pytest.config.Config object at 0x1044c65d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_get_usage_endpoint_jwt>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_sync_plan_keys_exception>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_sync_plan_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_sync_plan_keys_exception>, 'nextitem': <Function test_get_usage_endpoint_jwt>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_sync_plan_keys_exception>, 'nextitem': <Function test_get_usage_endpoint_jwt>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_sync_plan_keys_exception>, <Function test_get_usage_endpoint_jwt>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_get_usage_endpoint_jwt>
    ‚îÇ               ‚îî <Function test_sync_plan_keys_exception>
    ‚îî <function runtestprotocol at 0x1041db100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_sync_plan_keys_exception>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x1041db4c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_sync_plan_keys_exception' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_sync_plan_keys_exception>
           ‚îî <function call_runtest_hook at 0x1041db6a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x1041db920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10ddfd760>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_sync_plan_keys_exception>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_sync_plan_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x1042422a0>
    ‚îî <Function test_sync_plan_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_sync_plan_keys_exception>
    ‚îÇ    ‚îî <property object at 0x1041559e0>
    ‚îî <Function test_sync_plan_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_sync_plan_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10deee3d0>, 'app': <fastapi.applications.FastAPI object at 0x10ceafb50>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_sync_plan_keys_exception at 0x10dec7560>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-140' coro=<TestAPIKeyEndpoints.test_sync_plan_keys_exception() running at /Users/pablo/Desktop/toni/...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x105496840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1054967a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1054985e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x10542d3a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...c390>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...c390>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...c390>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...c390>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 803, in test_sync_plan_keys_exception
    response = await client.post("/api-keys/sync-plan-keys")
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x107174360>
                     ‚îî <httpx.AsyncClient object at 0x10deee3d0>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x10716bce0>
                 ‚îî <httpx.AsyncClient object at 0x10deee3d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x10715dad0>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x10715dad0>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys/sync-plan-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x10716bec0>
                 ‚îî <httpx.AsyncClient object at 0x10deee3d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x10716bf60>
                     ‚îî <httpx.AsyncClient object at 0x10deee3d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x107174040>
                     ‚îî <httpx.AsyncClient object at 0x10deee3d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys/sync-plan-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x1071740e0>
                     ‚îî <httpx.AsyncClient object at 0x10deee3d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys/sync-plan-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x106ecc2c0>
                     ‚îî <httpx.ASGITransport object at 0x10deee450>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10dec79c0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dec7920>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10ceafb50>
          ‚îî <httpx.ASGITransport object at 0x10deee450>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10dec79c0>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dec7920>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10dec79c0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dec7920>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10def5610>
          ‚îî <fastapi.applications.FastAPI object at 0x10ceafb50>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10dec7c40>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dec7920>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10def55d0>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10def5610>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10dec7c40>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dec7920>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10def5590>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10de9d350>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10def55d0>
          ‚îî <function wrap_app_handling_exceptions at 0x106ddcf40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dec7e20>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dec7920>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îî <fastapi.routing.APIRouter object at 0x10de9d350>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dec7e20>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dec7920>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10de9d350>>
          ‚îî <fastapi.routing.APIRouter object at 0x10de9d350>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dec7e20>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dec7920>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ     ‚îî <function Route.handle at 0x106dde700>
          ‚îî APIRoute(path='/api-keys/sync-plan-keys', name='sync_plan_keys', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dec7e20>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dec7920>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10dec4ae0>
          ‚îî APIRoute(path='/api-keys/sync-plan-keys', name='sync_plan_keys', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dec7e20>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dec7920>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10def5550>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10dec7ec0>
          ‚îî <function wrap_app_handling_exceptions at 0x106ddcf40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dec7ba0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10dec7920>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10dec7ec0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10def5550>
                     ‚îî <function get_request_handler.<locals>.app at 0x10dec5120>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x106ddc860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140464, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function sync_plan_keys at 0x10acfab60>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10deeb510>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 717, in sync_plan_keys
    user_plan = await redis.hget(user_key, "plan")
                      ‚îÇ     ‚îÇ    ‚îî 'user:user123'
                      ‚îÇ     ‚îî <AsyncMock id='4528732176'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10de9c390>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Sync plan failed')

Exception: Sync plan failed
2025-12-07 20:47:44.247 | ERROR | no-id | Usage retrieval error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x104139d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x104139bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1044c6790>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x1044c65d0>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x1044c65d0>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x1044c65d0>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x1044c65d0>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x104200040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x1044c65d0>
           ‚îî <function wrap_session at 0x1041dbf60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x1044c65d0>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x104200040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x1044c6790>
    ‚îî <_pytest.config.Config object at 0x1044c65d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=6 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_max_keys_per_user>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_get_usage_exception>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_get_usage_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_get_usage_exception>, 'nextitem': <Function test_max_keys_per_user>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_get_usage_exception>, 'nextitem': <Function test_max_keys_per_user>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_get_usage_exception>, <Function test_max_keys_per_user>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_max_keys_per_user>
    ‚îÇ               ‚îî <Function test_get_usage_exception>
    ‚îî <function runtestprotocol at 0x1041db100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_get_usage_exception>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x1041db4c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_get_usage_exception' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_get_usage_exception>
           ‚îî <function call_runtest_hook at 0x1041db6a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x1041db920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10ddff060>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_get_usage_exception>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_get_usage_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x1042422a0>
    ‚îî <Function test_get_usage_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_get_usage_exception>
    ‚îÇ    ‚îî <property object at 0x1041559e0>
    ‚îî <Function test_get_usage_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x103b58900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x10425d5d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_get_usage_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10ddb77d0>, 'app': <fastapi.applications.FastAPI object at 0x10df26990>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_get_usage_exception at 0x10df10860>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-165' coro=<TestAPIKeyEndpoints.test_get_usage_exception() running at /Users/pablo/Desktop/toni/tests...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x105496840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x1054967a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x1054985e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x10542d3a0>
    ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future cancelled>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 935, in test_get_usage_exception
    response = await client.get("/api-keys/usage")
                     ‚îÇ      ‚îî <function AsyncClient.get at 0x107174180>
                     ‚îî <httpx.AsyncClient object at 0x10ddb77d0>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1786, in get
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x10716bce0>
                 ‚îî <httpx.AsyncClient object at 0x10ddb77d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x10715dad0>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x10715dad0>
                 ‚îÇ    ‚îÇ    ‚îî <Request('GET', 'http://test/api-keys/usage')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x10716bec0>
                 ‚îî <httpx.AsyncClient object at 0x10ddb77d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x10716bf60>
                     ‚îî <httpx.AsyncClient object at 0x10ddb77d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x107174040>
                     ‚îî <httpx.AsyncClient object at 0x10ddb77d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys/usage')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x1071740e0>
                     ‚îî <httpx.AsyncClient object at 0x10ddb77d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys/usage')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x106ecc2c0>
                     ‚îî <httpx.ASGITransport object at 0x10df26f10>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10df11080>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10df10fe0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10df26990>
          ‚îî <httpx.ASGITransport object at 0x10df26f10>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10df11080>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10df10fe0>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10df11080>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10df10fe0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10ddc3390>
          ‚îî <fastapi.applications.FastAPI object at 0x10df26990>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10df13380>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10df10fe0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10ddc2c50>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10ddc3390>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10df13380>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10df10fe0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10ddc3290>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10df260d0>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10ddc2c50>
          ‚îî <function wrap_app_handling_exceptions at 0x106ddcf40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10df13240>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10df10fe0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <fastapi.routing.APIRouter object at 0x10df260d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10df13240>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10df10fe0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10df260d0>>
          ‚îî <fastapi.routing.APIRouter object at 0x10df260d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10df13240>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10df10fe0>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ     ‚îî <function Route.handle at 0x106dde700>
          ‚îî APIRoute(path='/api-keys/usage', name='get_usage', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10df13240>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10df10fe0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10df13420>
          ‚îî APIRoute(path='/api-keys/usage', name='get_usage', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10df13240>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10df10fe0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10ddc20d0>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10dec65c0>
          ‚îî <function wrap_app_handling_exceptions at 0x106ddcf40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10dec4e00>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10df10fe0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10dec65c0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10ddc20d0>
                     ‚îî <function get_request_handler.<locals>.app at 0x10df13880>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x106ddc860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140464, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function get_usage at 0x10ad15080>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10ddb7010>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 985, in get_usage
    plan_raw = await redis.hget(user_key, "plan")
                     ‚îÇ     ‚îÇ    ‚îî 'user:user123'
                     ‚îÇ     ‚îî <AsyncMock id='4528899216'>
                     ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10df26590>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Redis error')

Exception: Redis error
2025-12-07 20:47:48.819 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:48.821 | INFO | no-id | Login successful for user: b8a393d2-c5df-42ae-83f8-ba623a5139e3
2025-12-07 20:47:48.833 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:48.834 | WARNING | no-id | Login failed: Invalid password for tes***@***
2025-12-07 20:47:48.846 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:48.848 | INFO | no-id | Login successful for user: 19692252-3e4a-4d7e-9384-972cccd2ac52
2025-12-07 20:47:48.849 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:48.849 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:48.862 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:48.864 | INFO | no-id | Login successful for user: 574c7a57-5f3b-4106-a8b6-cc22d51d604b
2025-12-07 20:47:48.865 | DEBUG | no-id | Validating refresh token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:48.865 | INFO | no-id | Token refreshed for user: 574c7a57... (new plan: PREMIUM)
2025-12-07 20:47:48.878 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:48.880 | INFO | no-id | Login successful for user: 0039983e-e720-4c07-acba-1c9332dfa913
2025-12-07 20:47:48.881 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:47:48.882 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:48.882 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:50.000 | WARNING | no-id | Attempt to verify password with empty hash
2025-12-07 20:47:50.002 | WARNING | no-id | Invalid password hash format
2025-12-07 20:47:50.014 | ERROR | no-id | Expected string for API key
2025-12-07 20:47:50.111 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:50.114 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:47:50.117 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:47:50.161 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:50.163 | INFO | no-id | Login successful for user: b049cf70-d26e-4e1a-a03f-3a4688272323
2025-12-07 20:47:50.256 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:50.259 | WARNING | no-id | Empty API Key (request: %s)
2025-12-07 20:47:50.262 | WARNING | no-id | Invalid API Key format (request: %s)
2025-12-07 20:47:50.265 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:47:50.269 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:47:50.490 | WARNING | no-id | Invalid password hash format
2025-12-07 20:47:50.580 | DEBUG | no-id | Decoding JWT token: fake_token...
2025-12-07 20:47:50.580 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes']
2025-12-07 20:47:50.584 | DEBUG | no-id | Auth attempt - X-API-Key: gZIe5q-QQo79abAHcwjEcP8Dyt4Aa0-LsgAzYJiQLlQ, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4530804304'>)
2025-12-07 20:47:50.588 | ERROR | no-id | API Key validation error (request: %s): %s
2025-12-07 20:47:50.636 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:50.640 | DEBUG | no-id | Decoding JWT token: fake_token...
2025-12-07 20:47:50.641 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:47:50.645 | DEBUG | no-id | Decoding JWT token: blacklisted_token...
2025-12-07 20:47:50.646 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'type']
2025-12-07 20:47:50.649 | DEBUG | no-id | Auth attempt - X-API-Key: test_key, Authorization present: False (request: test-123)
2025-12-07 20:47:50.654 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: <Mock name='mock.state.correlation_id' id='4533729168'>)
2025-12-07 20:47:50.654 | DEBUG | no-id | Bearer token present, length: 10, starts with: test_token...
2025-12-07 20:47:50.654 | DEBUG | no-id | Token validated successfully (request: <Mock name='mock.state.correlation_id' id='4533729168'>)
2025-12-07 20:47:50.657 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4533761808'>)
2025-12-07 20:47:50.657 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:47:50.738 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:50.742 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:47:50.745 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:47:50.747 | WARNING | no-id | Invalid API Key format (request: %s)
2025-12-07 20:47:50.750 | WARNING | no-id | Empty API Key (request: %s)
2025-12-07 20:47:50.755 | DEBUG | no-id | Decoding JWT token: fake_token...
2025-12-07 20:47:50.756 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:47:50.760 | DEBUG | no-id | Decoding JWT token: blacklisted_token...
2025-12-07 20:47:50.760 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'jti', 'type']
2025-12-07 20:47:50.764 | DEBUG | no-id | Auth attempt - X-API-Key: BGTUca2GG0n4cIdsD_YvkPEx1BYq6r0L1F90fsaJR8k, Authorization present: False (request: test-123)
2025-12-07 20:47:50.764 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:50.769 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: <Mock name='mock.state.correlation_id' id='4530600208'>)
2025-12-07 20:47:50.769 | DEBUG | no-id | Bearer token present, length: 8, starts with: token123...
2025-12-07 20:47:50.769 | DEBUG | no-id | Token validated successfully (request: <Mock name='mock.state.correlation_id' id='4530600208'>)
2025-12-07 20:47:50.805 | WARNING | no-id | Attempt to verify password with empty hash
2025-12-07 20:47:50.807 | WARNING | no-id | Attempt to verify password with empty hash
2025-12-07 20:47:50.808 | WARNING | no-id | Invalid password hash format
2025-12-07 20:47:50.810 | ERROR | no-id | Error verifying password: %s
2025-12-07 20:47:50.848 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:47:50.849 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:47:50.854 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:47:50.854 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:47:50.854 | WARNING | no-id | Token type mismatch: expected %s, got '%s'
2025-12-07 20:47:50.858 | DEBUG | no-id | Auth attempt - X-API-Key: test_key, Authorization present: True (request: test-123)
2025-12-07 20:47:50.861 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4533724688'>)
2025-12-07 20:47:50.862 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:47:50.917 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:50.921 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:47:50.949 | INFO | no-id | Login attempt for: %s
2025-12-07 20:47:50.951 | INFO | no-id | Login successful for user: 153c67a6-0186-4041-8f3c-928ab78f7cdb
2025-12-07 20:47:50.964 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:50.965 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:50.966 | INFO | no-id | Plan updated: Redis=FREE vs Token=PlanEnum.PREMIUM. Using Redis.
2025-12-07 20:47:51.049 | DEBUG | no-id | Validating refresh token: valid_refresh_token...
2025-12-07 20:47:51.050 | INFO | no-id | Token refreshed for user: user123... (new plan: ENTERPRISE)
2025-12-07 20:47:51.054 | WARNING | no-id | Refresh request without token
2025-12-07 20:47:51.058 | DEBUG | no-id | Validating refresh token: revoked_token...
2025-12-07 20:47:51.059 | WARNING | no-id | Refresh token revoked: %s
2025-12-07 20:47:51.063 | DEBUG | no-id | Validating refresh token: access_token...
2025-12-07 20:47:51.063 | WARNING | no-id | Token type mismatch: expected 'refresh', got '%s'
2025-12-07 20:47:51.070 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:47:51.076 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:47:51.079 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:47:51.085 | INFO | no-id | API key rotated by admin: %s...
2025-12-07 20:47:51.131 | WARNING | no-id | Empty API Key (request: %s)
2025-12-07 20:47:51.132 | WARNING | no-id | Invalid API Key format (request: %s)
2025-12-07 20:47:51.134 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:51.134 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:51.138 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:47:51.139 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type']
2025-12-07 20:47:51.139 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:47:51.139 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type']
2025-12-07 20:47:51.143 | DEBUG | no-id | Auth attempt - X-API-Key: test_key, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4556043152'>)
2025-12-07 20:47:51.143 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: <Mock name='mock.state.correlation_id' id='4556043152'>)
2025-12-07 20:47:51.143 | DEBUG | no-id | Bearer token present, length: 5, starts with: token...
2025-12-07 20:47:51.143 | DEBUG | no-id | Token validated successfully (request: <Mock name='mock.state.correlation_id' id='4556043152'>)
2025-12-07 20:47:51.144 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4556043152'>)
2025-12-07 20:47:51.144 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:47:51.224 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:47:51.228 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:47:51.231 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:47:51.278 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:47:51.293 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:47:51.294 | ERROR | no-id | Webhook signature verification failed: Invalid signature
2025-12-07 20:47:51.309 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:47:51.309 | INFO | no-id | ‚úÖ Processing webhook: checkout.session.completed (evt_123)
2025-12-07 20:47:51.325 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:47:51.325 | WARNING | no-id | ‚ö†Ô∏è TEST MODE ONLY: Skipping Stripe signature validation
2025-12-07 20:47:51.325 | INFO | no-id | ‚úÖ Processing webhook: test.event (evt_dev)
2025-12-07 20:47:51.326 | INFO | no-id | Processing webhook event: test.event (evt_dev)
2025-12-07 20:47:51.327 | DEBUG | no-id | Acquired processing lock: processing:event:evt_dev
2025-12-07 20:47:51.327 | INFO | no-id | Unhandled event type: test.event
2025-12-07 20:47:51.328 | DEBUG | no-id | Released processing lock: processing:event:evt_dev
2025-12-07 20:47:51.342 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: unknown)
2025-12-07 20:47:51.342 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:47:51.357 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: unknown)
2025-12-07 20:47:51.357 | DEBUG | no-id | Bearer token present, length: 535, starts with: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:51.358 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:51.358 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:51.358 | DEBUG | no-id | Token validated successfully (request: unknown)
2025-12-07 20:47:51.374 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: unknown)
2025-12-07 20:47:51.374 | DEBUG | no-id | Bearer token present, length: 535, starts with: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:51.374 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:51.375 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:51.375 | DEBUG | no-id | Token validated successfully (request: unknown)
2025-12-07 20:47:51.391 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:51.392 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:51.392 | INFO | unknown | Creating checkout session for user user_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa, plan: PREMIUM
2025-12-07 20:47:51.393 | INFO | unknown | Checkout session created: cs_test_123
2025-12-07 20:47:51.407 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:51.407 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:51.424 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:51.425 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:51.425 | INFO | unknown | Creating checkout session for user user_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa, plan: PREMIUM
2025-12-07 20:47:51.441 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:51.441 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:51.443 | INFO | no-id | Plan changed to ENTERPRISE for user user_123, new tokens generated
2025-12-07 20:47:51.458 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:51.458 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:51.474 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:51.475 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:51.492 | INFO | no-id | Processing webhook event: test.event (evt_idempotent)
2025-12-07 20:47:51.493 | INFO | no-id | Event already processed: evt_idempotent
2025-12-07 20:47:51.506 | INFO | no-id | Processing webhook event: test.event (evt_busy)
2025-12-07 20:47:51.507 | INFO | no-id | Event already being processed: evt_busy
2025-12-07 20:47:51.537 | INFO | no-id | ‚úÖ Persisted user data: user_updated -> PREMIUM
2025-12-07 20:47:51.565 | INFO | no-id | Processing checkout.session.completed: cs_missing
2025-12-07 20:47:51.777 | ERROR | no-id | Stripe API error: Invalid API Key provided: sk_test_******************************************opqr
2025-12-07 20:47:51.777 | WARNING | no-id | Could not fetch session from Stripe (using webhook data): Invalid API Key provided: sk_test_******************************************opqr
2025-12-07 20:47:51.778 | ERROR | no-id | User ID not found in session metadata
2025-12-07 20:47:51.803 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:47:51.803 | ERROR | no-id | Webhook signature verification failed: Bad sig
2025-12-07 20:47:51.821 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:47:51.822 | ERROR | no-id | Webhook error: Invalid payload
2025-12-07 20:47:51.838 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:47:51.838 | ERROR | no-id | Webhook error: Boom
2025-12-07 20:47:51.848 | WARNING | no-id | Failed to parse JSON from key: Fail
2025-12-07 20:47:51.848 | WARNING | no-id | Failed to set JSON in key: Fail
2025-12-07 20:47:51.848 | WARNING | no-id | Redis list operation failed for key: Fail
2025-12-07 20:47:51.852 | WARNING | no-id | Failed to parse JSON from key: Expecting value: line 1 column 1 (char 0)
2025-12-07 20:47:51.877 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: unknown)
2025-12-07 20:47:51.878 | DEBUG | no-id | Bearer token present, length: 535, starts with: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:51.878 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:51.878 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:51.879 | DEBUG | no-id | Token validated successfully (request: unknown)
2025-12-07 20:47:51.879 | INFO | unknown | No user ID resolved, returning FREE plan
2025-12-07 20:47:51.896 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:47:51.896 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:47:51.897 | INFO | unknown | Creating checkout session for user user_123, plan: PREMIUM
2025-12-07 20:47:51.898 | ERROR | unknown | Stripe error creating checkout session: Stripe fail
2025-12-07 20:47:51.903 | WARNING | no-id | Could not acquire user lock for user_locked
2025-12-07 20:47:51.909 | WARNING | no-id | Stripe call attempt 1/3 failed: Connection fail
2025-12-07 20:47:52.512 | WARNING | no-id | Stripe call attempt 2/3 failed: Connection fail
2025-12-07 20:47:53.716 | WARNING | no-id | Stripe call attempt 3/3 failed: Connection fail
2025-12-07 20:47:53.730 | WARNING | no-id | Stripe call attempt 1/3 failed: Rate limit
2025-12-07 20:47:54.332 | WARNING | no-id | Stripe call attempt 2/3 failed: Rate limit
2025-12-07 20:48:07.338 | INFO | no-id | Created circuit breaker: Redis Cache
2025-12-07 20:48:07.343 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:48:07.347 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:48:07.462 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:48:07.489 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:48:07.492 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:52:31.600 | INFO | no-id | Created circuit breaker: Redis Cache
2025-12-07 20:52:31.606 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:52:31.610 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:52:31.633 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:52:31.651 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:52:31.655 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:52:37.720 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:52:38.756 | INFO | no-id | üîá Console tracing disabled in development (reducing log noise)
2025-12-07 20:52:38.756 | INFO | no-id | ‚ÑπÔ∏è No tracing exporter configured (development mode)
2025-12-07 20:52:38.757 | INFO | no-id | üîá OpenTelemetry verbose logging disabled in development
2025-12-07 20:52:38.758 | SUCCESS | no-id | ‚úÖ FastAPI instrumented for tracing
2025-12-07 20:52:38.761 | SUCCESS | no-id | ‚úÖ Redis instrumented for tracing
2025-12-07 20:52:38.762 | SUCCESS | no-id | ‚úÖ HTTP client instrumented for tracing
2025-12-07 20:52:38.762 | SUCCESS | no-id | üîç Distributed tracing initialized for mailsafepro-api
2025-12-07 20:52:38.846 | INFO | no-id | Exception handlers registered successfully
2025-12-07 20:52:39.314 | WARNING | no-id | ‚ö†Ô∏è  Abuse detected: Same email validated 25 times
2025-12-07 20:52:39.320 | WARNING | no-id | ‚ö†Ô∏è  Abuse detected: Rapid request spike
2025-12-07 20:52:39.325 | ERROR | no-id | üö® HONEYPOT TRIGGERED
2025-12-07 20:52:39.339 | INFO | no-id | Created circuit breaker: Redis Cache
2025-12-07 20:52:39.342 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:52:39.345 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:52:39.391 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:52:39.412 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:52:39.417 | DEBUG | no-id | Circuit breaker success: Redis Cache
2025-12-07 20:52:39.486 | DEBUG | no-id | Creating API key | User: %s | Plan: %s | Name: %s
2025-12-07 20:52:39.486 | INFO | no-id | API key created successfully
2025-12-07 20:52:39.499 | ERROR | no-id | Unexpected error in key creation | User: %s | Error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x1018b1d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x1018b1bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x101c3ec50>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x101c3ec50>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x101978040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x101c3ec50>
           ‚îî <function wrap_session at 0x101953f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x101c3ec50>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x101978040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
    ‚îî <_pytest.config.Config object at 0x101c3ec50>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_create_api_key_max_keys_exceeded>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>, 'nextitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>, 'nextitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_max_keys_exceeded>, <Function test_create_api_key_redis_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ               ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îî <function runtestprotocol at 0x101953100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x1019534c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_create_api_key_max_keys_exceeded' when='setup' outcome='passe...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_create_api_key_max_keys_exceeded>
           ‚îî <function call_runtest_hook at 0x1019536a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x101953920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10d76d8a0>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_create_api_key_max_keys_exceeded>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_max_keys_exceeded>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x1019ba2a0>
    ‚îî <Function test_create_api_key_max_keys_exceeded>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_create_api_key_max_keys_exceeded>
    ‚îÇ    ‚îî <property object at 0x1018cd8a0>
    ‚îî <Function test_create_api_key_max_keys_exceeded>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_create_api_key_max_keys_exceeded>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_max_keys_exceeded>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10d693590>, 'app': <fastapi.applications.FastAPI object at 0x10d779cd0>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_create_api_key_max_keys_exceeded at 0x10e039c60>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-35' coro=<TestAPIKeyEndpoints.test_create_api_key_max_keys_exceeded() running at /Users/pablo/Deskto...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x102c0e840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x102c0e7a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x102c105e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x102ba93a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...a310>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...a310>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...a310>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...a310>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 326, in test_create_api_key_max_keys_exceeded
    response = await client.post("/api-keys", json=key_data.model_dump())
                     ‚îÇ      ‚îÇ                      ‚îÇ        ‚îî <function BaseModel.model_dump at 0x103baae80>
                     ‚îÇ      ‚îÇ                      ‚îî APIKeyCreateRequest(name='Test Key', scopes=['read'])
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x104f38360>
                     ‚îî <httpx.AsyncClient object at 0x10d693590>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x104f2fce0>
                 ‚îî <httpx.AsyncClient object at 0x10d693590>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x104f19c90>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x104f19c90>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x104f2fec0>
                 ‚îî <httpx.AsyncClient object at 0x10d693590>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x104f2ff60>
                     ‚îî <httpx.AsyncClient object at 0x10d693590>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x104f38040>
                     ‚îî <httpx.AsyncClient object at 0x10d693590>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x104f380e0>
                     ‚îî <httpx.AsyncClient object at 0x10d693590>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x104a902c0>
                     ‚îî <httpx.ASGITransport object at 0x10d693310>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e032a20>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e032de0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10d779cd0>
          ‚îî <httpx.ASGITransport object at 0x10d693310>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e032a20>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e032de0>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e032a20>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e032de0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d6a6a50>
          ‚îî <fastapi.applications.FastAPI object at 0x10d779cd0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e0328e0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e032de0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6a6a10>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d6a6a50>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e0328e0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e032de0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10d6a69d0>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10d77ac50>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d6a6a10>
          ‚îî <function wrap_app_handling_exceptions at 0x1049a0f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e032980>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e032de0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <fastapi.routing.APIRouter object at 0x10d77ac50>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e032980>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e032de0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10d77ac50>>
          ‚îî <fastapi.routing.APIRouter object at 0x10d77ac50>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e032980>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e032de0>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ     ‚îî <function Route.handle at 0x1049a2700>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e032980>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e032de0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e031e40>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e032980>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e032de0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10d6a6d50>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e0327a0>
          ‚îî <function wrap_app_handling_exceptions at 0x1049a0f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e0325c0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e032de0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e0327a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10d6a6d50>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e031f80>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x1049a0860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140759, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function create_api_key at 0x10b1c5ee0>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10d743fd0>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 382, in create_api_key
    await enforce_rate_limit(redis, bucket=f"ak:create:{user_id}", limit=5, window=60)
          ‚îÇ                  ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10d77a310>,db=0>>>
          ‚îî <function enforce_rate_limit at 0x10ad23d80>

  File "/Users/pablo/Desktop/toni/app/auth.py", line 246, in enforce_rate_limit
    local_res = await redis.eval(LUA_RATE_LIMIT, 1, local_key, str(window))
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ              ‚îî 60
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî 'rl:6132e8e512e36d5a54499518ce8f3f146307b77a3575291087f40f05c1ab1ae0'
                      ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal window = tonumber(ARGV[1])\nlocal now = redis.call('TIME')[1]\nlocal current = redis.call('INCR...
                      ‚îÇ     ‚îî <AsyncMock id='4520037904'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10d77a310>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî ResponseError(b'max_keys_exceeded')

redis.exceptions.ResponseError: b'max_keys_exceeded'
2025-12-07 20:52:39.533 | ERROR | no-id | Unexpected error in key creation | User: %s | Error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x1018b1d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x1018b1bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x101c3ec50>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x101c3ec50>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x101978040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x101c3ec50>
           ‚îî <function wrap_session at 0x101953f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x101c3ec50>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x101978040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
    ‚îî <_pytest.config.Config object at 0x101c3ec50>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_create_api_key_redis_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_redis_error>, 'nextitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_redis_error>, 'nextitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_redis_error>, <Function test_create_api_key_unexpected_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ               ‚îî <Function test_create_api_key_redis_error>
    ‚îî <function runtestprotocol at 0x101953100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x1019534c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_create_api_key_redis_error' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_create_api_key_redis_error>
           ‚îî <function call_runtest_hook at 0x1019536a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x101953920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10d76d8a0>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_create_api_key_redis_error>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_redis_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x1019ba2a0>
    ‚îî <Function test_create_api_key_redis_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_create_api_key_redis_error>
    ‚îÇ    ‚îî <property object at 0x1018cd8a0>
    ‚îî <Function test_create_api_key_redis_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_create_api_key_redis_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_redis_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e289010>, 'app': <fastapi.applications.FastAPI object at 0x10e278b90>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_create_api_key_redis_error at 0x10e285f80>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-40' coro=<TestAPIKeyEndpoints.test_create_api_key_redis_error() running at /Users/pablo/Desktop/toni...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x102c0e840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x102c0e7a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x102c105e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x102ba93a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...9d50>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...9d50>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...9d50>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...9d50>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 345, in test_create_api_key_redis_error
    response = await client.post("/api-keys", json=key_data.model_dump())
                     ‚îÇ      ‚îÇ                      ‚îÇ        ‚îî <function BaseModel.model_dump at 0x103baae80>
                     ‚îÇ      ‚îÇ                      ‚îî APIKeyCreateRequest(name='Test Key', scopes=['read'])
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x104f38360>
                     ‚îî <httpx.AsyncClient object at 0x10e289010>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x104f2fce0>
                 ‚îî <httpx.AsyncClient object at 0x10e289010>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x104f19c90>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x104f19c90>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x104f2fec0>
                 ‚îî <httpx.AsyncClient object at 0x10e289010>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x104f2ff60>
                     ‚îî <httpx.AsyncClient object at 0x10e289010>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x104f38040>
                     ‚îî <httpx.AsyncClient object at 0x10e289010>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x104f380e0>
                     ‚îî <httpx.AsyncClient object at 0x10e289010>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x104a902c0>
                     ‚îî <httpx.ASGITransport object at 0x10e288d10>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e21f100>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e21f240>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e278b90>
          ‚îî <httpx.ASGITransport object at 0x10e288d10>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e21f100>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e21f240>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e21f100>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e21f240>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10ca69b50>
          ‚îî <fastapi.applications.FastAPI object at 0x10e278b90>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e21ed40>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e21f240>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10ca68510>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10ca69b50>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e21ed40>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e21f240>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10caf9810>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e279b10>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10ca68510>
          ‚îî <function wrap_app_handling_exceptions at 0x1049a0f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e21e660>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e21f240>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <fastapi.routing.APIRouter object at 0x10e279b10>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e21e660>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e21f240>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e279b10>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e279b10>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e21e660>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e21f240>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ     ‚îî <function Route.handle at 0x1049a2700>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e21e660>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e21f240>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e21e8e0>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e21e660>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e21f240>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10ca69490>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e21e7a0>
          ‚îî <function wrap_app_handling_exceptions at 0x1049a0f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e21f4c0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e21f240>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e21e7a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10ca69490>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e21ea20>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x1049a0860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140759, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function create_api_key at 0x10b1c5ee0>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10d6a6950>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 382, in create_api_key
    await enforce_rate_limit(redis, bucket=f"ak:create:{user_id}", limit=5, window=60)
          ‚îÇ                  ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e279d50>,db=0>>>
          ‚îî <function enforce_rate_limit at 0x10ad23d80>

  File "/Users/pablo/Desktop/toni/app/auth.py", line 246, in enforce_rate_limit
    local_res = await redis.eval(LUA_RATE_LIMIT, 1, local_key, str(window))
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ              ‚îî 60
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî 'rl:6132e8e512e36d5a54499518ce8f3f146307b77a3575291087f40f05c1ab1ae0'
                      ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal window = tonumber(ARGV[1])\nlocal now = redis.call('TIME')[1]\nlocal current = redis.call('INCR...
                      ‚îÇ     ‚îî <AsyncMock id='4532510224'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e279d50>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî ResponseError(b'Generic Error')

redis.exceptions.ResponseError: b'Generic Error'
2025-12-07 20:52:39.614 | ERROR | no-id | Unexpected error in key creation | User: %s | Error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x1018b1d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x1018b1bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x101c3ec50>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x101c3ec50>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x101978040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x101c3ec50>
           ‚îî <function wrap_session at 0x101953f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x101c3ec50>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x101978040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
    ‚îî <_pytest.config.Config object at 0x101c3ec50>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_list_api_keys_endpoint>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_create_api_key_unexpected_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_unexpected_error>, 'nextitem': <Function test_list_api_keys_endpoint>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_unexpected_error>, 'nextitem': <Function test_list_api_keys_endpoint>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_unexpected_error>, <Function test_list_api_keys_endpoint>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_list_api_keys_endpoint>
    ‚îÇ               ‚îî <Function test_create_api_key_unexpected_error>
    ‚îî <function runtestprotocol at 0x101953100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x1019534c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_create_api_key_unexpected_error' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_create_api_key_unexpected_error>
           ‚îî <function call_runtest_hook at 0x1019536a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x101953920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e02a3e0>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_create_api_key_unexpected_error>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_unexpected_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x1019ba2a0>
    ‚îî <Function test_create_api_key_unexpected_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_create_api_key_unexpected_error>
    ‚îÇ    ‚îî <property object at 0x1018cd8a0>
    ‚îî <Function test_create_api_key_unexpected_error>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_create_api_key_unexpected_error>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_create_api_key_unexpected_error>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10d641f50>, 'app': <fastapi.applications.FastAPI object at 0x10d69d0d0>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_create_api_key_unexpected_error at 0x10d7a16c0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-45' coro=<TestAPIKeyEndpoints.test_create_api_key_unexpected_error() running at /Users/pablo/Desktop...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x102c0e840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x102c0e7a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x102c105e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x102ba93a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...0290>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...0290>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...0290>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...0290>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 362, in test_create_api_key_unexpected_error
    response = await client.post("/api-keys", json={"name": "Test Key"})
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x104f38360>
                     ‚îî <httpx.AsyncClient object at 0x10d641f50>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x104f2fce0>
                 ‚îî <httpx.AsyncClient object at 0x10d641f50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x104f19c90>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x104f19c90>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x104f2fec0>
                 ‚îî <httpx.AsyncClient object at 0x10d641f50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x104f2ff60>
                     ‚îî <httpx.AsyncClient object at 0x10d641f50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x104f38040>
                     ‚îî <httpx.AsyncClient object at 0x10d641f50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x104f380e0>
                     ‚îî <httpx.AsyncClient object at 0x10d641f50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x104a902c0>
                     ‚îî <httpx.ASGITransport object at 0x10d641fd0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10d7a0e00>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d7a00e0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10d69d0d0>
          ‚îî <httpx.ASGITransport object at 0x10d641fd0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10d7a0e00>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d7a00e0>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10d7a0e00>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d7a00e0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d639710>
          ‚îî <fastapi.applications.FastAPI object at 0x10d69d0d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10c444720>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d7a00e0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d639750>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d639710>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10c444720>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d7a00e0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10d639790>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10d713d50>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d639750>
          ‚îî <function wrap_app_handling_exceptions at 0x1049a0f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10d2d3380>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d7a00e0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <fastapi.routing.APIRouter object at 0x10d713d50>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10d2d3380>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d7a00e0>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10d713d50>>
          ‚îî <fastapi.routing.APIRouter object at 0x10d713d50>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10d2d3380>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d7a00e0>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ     ‚îî <function Route.handle at 0x1049a2700>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10d2d3380>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d7a00e0>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e21e980>
          ‚îî APIRoute(path='/api-keys', name='create_api_key', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10d2d3380>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d7a00e0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10d639810>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10cb4ea20>
          ‚îî <function wrap_app_handling_exceptions at 0x1049a0f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cb4cf40>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d7a00e0>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'acce...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10cb4ea20>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10d639810>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e21e7a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x1049a0860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140759, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function create_api_key at 0x10b1c5ee0>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10cb1d6d0>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 382, in create_api_key
    await enforce_rate_limit(redis, bucket=f"ak:create:{user_id}", limit=5, window=60)
          ‚îÇ                  ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10d710290>,db=0>>>
          ‚îî <function enforce_rate_limit at 0x10ad23d80>

  File "/Users/pablo/Desktop/toni/app/auth.py", line 246, in enforce_rate_limit
    local_res = await redis.eval(LUA_RATE_LIMIT, 1, local_key, str(window))
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ              ‚îî 60
                      ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî 'rl:6132e8e512e36d5a54499518ce8f3f146307b77a3575291087f40f05c1ab1ae0'
                      ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal window = tonumber(ARGV[1])\nlocal now = redis.call('TIME')[1]\nlocal current = redis.call('INCR...
                      ‚îÇ     ‚îî <AsyncMock id='4519627600'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10d710290>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Unexpected')

Exception: Unexpected
2025-12-07 20:52:39.658 | ERROR | no-id | Corrupted or invalid key data format for %s
2025-12-07 20:52:39.658 | WARNING | no-id | Missing key data for hash: %s
2025-12-07 20:52:39.669 | ERROR | no-id | Critical error listing API keys: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x1018b1d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x1018b1bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x101c3ec50>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x101c3ec50>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x101978040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x101c3ec50>
           ‚îî <function wrap_session at 0x101953f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x101c3ec50>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x101978040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
    ‚îî <_pytest.config.Config object at 0x101c3ec50>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_revoke_api_key_endpoint>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_list_api_keys_exception>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_list_api_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_list_api_keys_exception>, 'nextitem': <Function test_revoke_api_key_endpoint>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_list_api_keys_exception>, 'nextitem': <Function test_revoke_api_key_endpoint>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_list_api_keys_exception>, <Function test_revoke_api_key_endpoint>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_revoke_api_key_endpoint>
    ‚îÇ               ‚îî <Function test_list_api_keys_exception>
    ‚îî <function runtestprotocol at 0x101953100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_list_api_keys_exception>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x1019534c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_list_api_keys_exception' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_list_api_keys_exception>
           ‚îî <function call_runtest_hook at 0x1019536a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x101953920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10c4454e0>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_list_api_keys_exception>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_list_api_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x1019ba2a0>
    ‚îî <Function test_list_api_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_list_api_keys_exception>
    ‚îÇ    ‚îî <property object at 0x1018cd8a0>
    ‚îî <Function test_list_api_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_list_api_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_list_api_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e282a10>, 'app': <fastapi.applications.FastAPI object at 0x10d6af050>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_list_api_keys_exception at 0x10d781da0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-65' coro=<TestAPIKeyEndpoints.test_list_api_keys_exception() running at /Users/pablo/Desktop/toni/te...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x102c0e840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x102c0e7a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x102c105e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x102ba93a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...d890>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...d890>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...d890>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...d890>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 462, in test_list_api_keys_exception
    response = await client.get("/api-keys")
                     ‚îÇ      ‚îî <function AsyncClient.get at 0x104f38180>
                     ‚îî <httpx.AsyncClient object at 0x10e282a10>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1786, in get
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x104f2fce0>
                 ‚îî <httpx.AsyncClient object at 0x10e282a10>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x104f19c90>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x104f19c90>
                 ‚îÇ    ‚îÇ    ‚îî <Request('GET', 'http://test/api-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x104f2fec0>
                 ‚îî <httpx.AsyncClient object at 0x10e282a10>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x104f2ff60>
                     ‚îî <httpx.AsyncClient object at 0x10e282a10>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x104f38040>
                     ‚îî <httpx.AsyncClient object at 0x10e282a10>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x104f380e0>
                     ‚îî <httpx.AsyncClient object at 0x10e282a10>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x104a902c0>
                     ‚îî <httpx.ASGITransport object at 0x10e2829d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10d781e40>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d783420>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10d6af050>
          ‚îî <httpx.ASGITransport object at 0x10e2829d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10d781e40>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d783420>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10d781e40>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d783420>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e273010>
          ‚îî <fastapi.applications.FastAPI object at 0x10d6af050>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10d782340>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d783420>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e270210>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e273010>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10d782340>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d783420>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e2732d0>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10d6accd0>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e270210>
          ‚îî <function wrap_app_handling_exceptions at 0x1049a0f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10d782480>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d783420>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <fastapi.routing.APIRouter object at 0x10d6accd0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10d782480>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d783420>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10d6accd0>>
          ‚îî <fastapi.routing.APIRouter object at 0x10d6accd0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10d782480>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d783420>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ     ‚îî <function Route.handle at 0x1049a2700>
          ‚îî APIRoute(path='/api-keys', name='list_api_keys', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10d782480>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d783420>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e286ca0>
          ‚îî APIRoute(path='/api-keys', name='list_api_keys', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10d782480>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d783420>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e273dd0>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10d782f20>
          ‚îî <function wrap_app_handling_exceptions at 0x1049a0f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10d7832e0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10d783420>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10d782f20>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e273dd0>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e286d40>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x1049a0860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140759, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function list_api_keys at 0x10b1c6700>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10d643390>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 555, in list_api_keys
    api_key_hashes = await redis.smembers(f"api_keys:{client_hash}")
                           ‚îÇ     ‚îî <AsyncMock id='4532407120'>
                           ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10d6ad890>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Redis failure')

Exception: Redis failure
2025-12-07 20:52:39.689 | WARNING | no-id | API key action
2025-12-07 20:52:39.689 | WARNING | no-id | API key revoked
2025-12-07 20:52:39.738 | INFO | no-id | API key rotated successfully
2025-12-07 20:52:39.795 | INFO | no-id | User data synchronization completed
2025-12-07 20:52:39.807 | WARNING | no-id | ADMIN ACTION: repair_data invoked
2025-12-07 20:52:39.828 | WARNING | no-id | ADMIN ACTION: repair_data invoked
2025-12-07 20:52:39.828 | ERROR | no-id | Critical error in data repair: %s
2025-12-07 20:52:39.840 | INFO | no-id | Plan synchronization completed
2025-12-07 20:52:39.852 | ERROR | no-id | Plan synchronization failed: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x1018b1d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x1018b1bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x101c3ec50>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x101c3ec50>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x101978040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x101c3ec50>
           ‚îî <function wrap_session at 0x101953f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x101c3ec50>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x101978040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
    ‚îî <_pytest.config.Config object at 0x101c3ec50>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_get_usage_endpoint_jwt>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_sync_plan_keys_exception>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_sync_plan_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_sync_plan_keys_exception>, 'nextitem': <Function test_get_usage_endpoint_jwt>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_sync_plan_keys_exception>, 'nextitem': <Function test_get_usage_endpoint_jwt>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_sync_plan_keys_exception>, <Function test_get_usage_endpoint_jwt>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_get_usage_endpoint_jwt>
    ‚îÇ               ‚îî <Function test_sync_plan_keys_exception>
    ‚îî <function runtestprotocol at 0x101953100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_sync_plan_keys_exception>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x1019534c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_sync_plan_keys_exception' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_sync_plan_keys_exception>
           ‚îî <function call_runtest_hook at 0x1019536a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x101953920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e2868e0>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_sync_plan_keys_exception>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_sync_plan_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x1019ba2a0>
    ‚îî <Function test_sync_plan_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_sync_plan_keys_exception>
    ‚îÇ    ‚îî <property object at 0x1018cd8a0>
    ‚îî <Function test_sync_plan_keys_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_sync_plan_keys_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_sync_plan_keys_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e385a50>, 'app': <fastapi.applications.FastAPI object at 0x10e375a50>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_sync_plan_keys_exception at 0x10e3634c0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-140' coro=<TestAPIKeyEndpoints.test_sync_plan_keys_exception() running at /Users/pablo/Desktop/toni/...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x102c0e840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x102c0e7a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x102c105e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x102ba93a0>
    ‚îî <Handle Task.task_wakeup(<Future finis...9890>,db=0>>>>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future finis...9890>,db=0>>>>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future finis...9890>,db=0>>>>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future finis...9890>,db=0>>>>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 803, in test_sync_plan_keys_exception
    response = await client.post("/api-keys/sync-plan-keys")
                     ‚îÇ      ‚îî <function AsyncClient.post at 0x104f38360>
                     ‚îî <httpx.AsyncClient object at 0x10e385a50>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1877, in post
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x104f2fce0>
                 ‚îî <httpx.AsyncClient object at 0x10e385a50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x104f19c90>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x104f19c90>
                 ‚îÇ    ‚îÇ    ‚îî <Request('POST', 'http://test/api-keys/sync-plan-keys')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x104f2fec0>
                 ‚îî <httpx.AsyncClient object at 0x10e385a50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x104f2ff60>
                     ‚îî <httpx.AsyncClient object at 0x10e385a50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x104f38040>
                     ‚îî <httpx.AsyncClient object at 0x10e385a50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys/sync-plan-keys')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x104f380e0>
                     ‚îî <httpx.AsyncClient object at 0x10e385a50>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('POST', 'http://test/api-keys/sync-plan-keys')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x104a902c0>
                     ‚îî <httpx.ASGITransport object at 0x10e385b10>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e2ee0c0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e2edb20>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e375a50>
          ‚îî <httpx.ASGITransport object at 0x10e385b10>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e2ee0c0>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e2edb20>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e2ee0c0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e2edb20>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e379110>
          ‚îî <fastapi.applications.FastAPI object at 0x10e375a50>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e2eefc0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e2edb20>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e379050>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10e379110>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e2eefc0>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e2edb20>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e379190>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e3751d0>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10e379050>
          ‚îî <function wrap_app_handling_exceptions at 0x1049a0f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e2efb00>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e2edb20>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îî <fastapi.routing.APIRouter object at 0x10e3751d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e2efb00>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e2edb20>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e3751d0>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e3751d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e2efb00>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e2edb20>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ     ‚îî <function Route.handle at 0x1049a2700>
          ‚îî APIRoute(path='/api-keys/sync-plan-keys', name='sync_plan_keys', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e2efb00>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e2edb20>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e361f80>
          ‚îî APIRoute(path='/api-keys/sync-plan-keys', name='sync_plan_keys', methods=['POST'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e2efb00>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e2edb20>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e37b7d0>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e2ec040>
          ‚îî <function wrap_app_handling_exceptions at 0x1049a0f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e2eccc0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e2edb20>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'POST', 'headers': [(b'host', b'test'), (b'cont...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e2ec040>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10e37b7d0>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e361da0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x1049a0860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140759, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function sync_plan_keys at 0x10b1c6a20>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10e382e10>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 717, in sync_plan_keys
    user_plan = await redis.hget(user_key, "plan")
                      ‚îÇ     ‚îÇ    ‚îî 'user:user123'
                      ‚îÇ     ‚îî <AsyncMock id='4533546256'>
                      ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10d779890>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Sync plan failed')

Exception: Sync plan failed
2025-12-07 20:52:39.923 | ERROR | no-id | Usage retrieval error: %s
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x1018b1d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x1018b1bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x101c3ec50>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x101c3ec50>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x101978040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x101c3ec50>
           ‚îî <function wrap_session at 0x101953f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x101c3ec50>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x101978040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
    ‚îî <_pytest.config.Config object at 0x101c3ec50>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_max_keys_per_user>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_get_usage_exception>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_get_usage_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_get_usage_exception>, 'nextitem': <Function test_max_keys_per_user>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_get_usage_exception>, 'nextitem': <Function test_max_keys_per_user>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_get_usage_exception>, <Function test_max_keys_per_user>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_max_keys_per_user>
    ‚îÇ               ‚îî <Function test_get_usage_exception>
    ‚îî <function runtestprotocol at 0x101953100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_get_usage_exception>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x1019534c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_api_keys.py::TestAPIKeyEndpoints::test_get_usage_exception' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_get_usage_exception>
           ‚îî <function call_runtest_hook at 0x1019536a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x101953920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x10e287100>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_get_usage_exception>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_get_usage_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x1019ba2a0>
    ‚îî <Function test_get_usage_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_get_usage_exception>
    ‚îÇ    ‚îî <property object at 0x1018cd8a0>
    ‚îî <Function test_get_usage_exception>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_get_usage_exception>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_get_usage_exception>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'client': <httpx.AsyncClient object at 0x10e23a750>, 'app': <fastapi.applications.FastAPI object at 0x10e38d2d0>, 'redis_cli...
             ‚îî <function TestAPIKeyEndpoints.test_get_usage_exception at 0x10e3256c0>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-165' coro=<TestAPIKeyEndpoints.test_get_usage_exception() running at /Users/pablo/Desktop/toni/tests...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x102c0e840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x102c0e7a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x102c105e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x102ba93a0>
    ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future cancelled>)>

  File "/Users/pablo/Desktop/toni/tests/test_api_keys.py", line 935, in test_get_usage_exception
    response = await client.get("/api-keys/usage")
                     ‚îÇ      ‚îî <function AsyncClient.get at 0x104f38180>
                     ‚îî <httpx.AsyncClient object at 0x10e23a750>

  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1786, in get
    return await self.request(
                 ‚îÇ    ‚îî <function AsyncClient.request at 0x104f2fce0>
                 ‚îî <httpx.AsyncClient object at 0x10e23a750>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1559, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îÇ                      ‚îî <httpx._client.UseClientDefault object at 0x104f19c90>
                 ‚îÇ    ‚îÇ    ‚îÇ             ‚îî <httpx._client.UseClientDefault object at 0x104f19c90>
                 ‚îÇ    ‚îÇ    ‚îî <Request('GET', 'http://test/api-keys/usage')>
                 ‚îÇ    ‚îî <function AsyncClient.send at 0x104f2fec0>
                 ‚îî <httpx.AsyncClient object at 0x10e23a750>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1646, in send
    response = await self._send_handling_auth(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_auth at 0x104f2ff60>
                     ‚îî <httpx.AsyncClient object at 0x10e23a750>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1674, in _send_handling_auth
    response = await self._send_handling_redirects(
                     ‚îÇ    ‚îî <function AsyncClient._send_handling_redirects at 0x104f38040>
                     ‚îî <httpx.AsyncClient object at 0x10e23a750>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1711, in _send_handling_redirects
    response = await self._send_single_request(request)
                     ‚îÇ    ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys/usage')>
                     ‚îÇ    ‚îî <function AsyncClient._send_single_request at 0x104f380e0>
                     ‚îî <httpx.AsyncClient object at 0x10e23a750>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1748, in _send_single_request
    response = await transport.handle_async_request(request)
                     ‚îÇ         ‚îÇ                    ‚îî <Request('GET', 'http://test/api-keys/usage')>
                     ‚îÇ         ‚îî <function ASGITransport.handle_async_request at 0x104a902c0>
                     ‚îî <httpx.ASGITransport object at 0x10e23a7d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/asgi.py", line 162, in handle_async_request
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e39ae80>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e39b060>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <fastapi.applications.FastAPI object at 0x10e38d2d0>
          ‚îî <httpx.ASGITransport object at 0x10e23a7d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e39ae80>
                           ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e39b060>
                           ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function ASGITransport.handle_async_request.<locals>.send at 0x10e39ae80>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e39b060>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d639390>
          ‚îî <fastapi.applications.FastAPI object at 0x10e38d2d0>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e39b240>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e39b060>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d639410>
          ‚îî <starlette.middleware.errors.ServerErrorMiddleware object at 0x10d639390>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îÇ        ‚îî <function ServerErrorMiddleware.__call__.<locals>._send at 0x10e39b240>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e39b060>
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îÇ     ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îÇ    ‚îî <starlette.requests.Request object at 0x10d63a250>
          ‚îÇ                            ‚îÇ    ‚îî <fastapi.routing.APIRouter object at 0x10e38d090>
          ‚îÇ                            ‚îî <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10d639410>
          ‚îî <function wrap_app_handling_exceptions at 0x1049a0f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e39a8e0>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e39b060>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <fastapi.routing.APIRouter object at 0x10e38d090>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 762, in __call__
    await self.middleware_stack(scope, receive, send)
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e39a8e0>
          ‚îÇ    ‚îÇ                ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e39b060>
          ‚îÇ    ‚îÇ                ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <bound method Router.app of <fastapi.routing.APIRouter object at 0x10e38d090>>
          ‚îî <fastapi.routing.APIRouter object at 0x10e38d090>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 782, in app
    await route.handle(scope, receive, send)
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e39a8e0>
          ‚îÇ     ‚îÇ      ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e39b060>
          ‚îÇ     ‚îÇ      ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ     ‚îî <function Route.handle at 0x1049a2700>
          ‚îî APIRoute(path='/api-keys/usage', name='get_usage', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e39a8e0>
          ‚îÇ    ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e39b060>
          ‚îÇ    ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ    ‚îî <function request_response.<locals>.app at 0x10e326d40>
          ‚îî APIRoute(path='/api-keys/usage', name='get_usage', methods=['GET'])
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e39a8e0>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e39b060>
          ‚îÇ                            ‚îÇ    ‚îÇ        ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îÇ                            ‚îÇ    ‚îî <starlette.requests.Request object at 0x10d639810>
          ‚îÇ                            ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e39ac00>
          ‚îî <function wrap_app_handling_exceptions at 0x1049a0f40>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
          ‚îÇ   ‚îÇ      ‚îÇ        ‚îî <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e39ab60>
          ‚îÇ   ‚îÇ      ‚îî <function ASGITransport.handle_async_request.<locals>.receive at 0x10e39b060>
          ‚îÇ   ‚îî {'type': 'http', 'asgi': {'version': '3.0'}, 'http_version': '1.1', 'method': 'GET', 'headers': [(b'host', b'test'), (b'accep...
          ‚îî <function request_response.<locals>.app.<locals>.app at 0x10e39ac00>
  File "/opt/anaconda3/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
                     ‚îÇ    ‚îî <starlette.requests.Request object at 0x10d639810>
                     ‚îî <function get_request_handler.<locals>.app at 0x10e327f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 294, in app
    raw_response = await run_endpoint_function(
                         ‚îî <function run_endpoint_function at 0x1049a0860>
  File "/opt/anaconda3/lib/python3.11/site-packages/fastapi/routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
                 ‚îÇ         ‚îÇ      ‚îî {'current_client': TokenData(sub='user123', exp=1765140759, jti='unique-token-id-123456789', iss='test-issuer', aud='test-aud...
                 ‚îÇ         ‚îî <function get_usage at 0x10b1e4f40>
                 ‚îî <fastapi.dependencies.models.Dependant object at 0x10ca645d0>

> File "/Users/pablo/Desktop/toni/app/api_keys.py", line 985, in get_usage
    plan_raw = await redis.hget(user_key, "plan")
                     ‚îÇ     ‚îÇ    ‚îî 'user:user123'
                     ‚îÇ     ‚îî <AsyncMock id='4520082320'>
                     ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x10e38d050>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 2237, in _execute_mock_call
    raise effect
          ‚îî Exception('Redis error')

Exception: Redis error
2025-12-07 20:52:44.545 | INFO | no-id | Login attempt for: %s
2025-12-07 20:52:44.547 | INFO | no-id | Login successful for user: bf21664a-5ad9-4f48-9e1a-5b94e5115e59
2025-12-07 20:52:44.560 | INFO | no-id | Login attempt for: %s
2025-12-07 20:52:44.561 | WARNING | no-id | Login failed: Invalid password for tes***@***
2025-12-07 20:52:44.573 | INFO | no-id | Login attempt for: %s
2025-12-07 20:52:44.575 | INFO | no-id | Login successful for user: 4e94ef11-ef5b-41e6-92b7-ea9f7444df10
2025-12-07 20:52:44.576 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:44.576 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:44.589 | INFO | no-id | Login attempt for: %s
2025-12-07 20:52:44.590 | INFO | no-id | Login successful for user: 802e3b87-761a-454b-ae58-de78f618b3ca
2025-12-07 20:52:44.591 | DEBUG | no-id | Validating refresh token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:44.592 | INFO | no-id | Token refreshed for user: 802e3b87... (new plan: PREMIUM)
2025-12-07 20:52:44.604 | INFO | no-id | Login attempt for: %s
2025-12-07 20:52:44.606 | INFO | no-id | Login successful for user: a21f1f7a-39eb-484f-b30b-d38887408e0d
2025-12-07 20:52:44.608 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:52:44.608 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:44.609 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:45.756 | WARNING | no-id | Attempt to verify password with empty hash
2025-12-07 20:52:45.758 | WARNING | no-id | Invalid password hash format
2025-12-07 20:52:45.768 | ERROR | no-id | Expected string for API key
2025-12-07 20:52:45.866 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:52:45.869 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:52:45.872 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:52:45.914 | INFO | no-id | Login attempt for: %s
2025-12-07 20:52:45.915 | INFO | no-id | Login successful for user: c14d0af3-8e62-4093-83ef-8a81422c9077
2025-12-07 20:52:46.001 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:52:46.004 | WARNING | no-id | Empty API Key (request: %s)
2025-12-07 20:52:46.007 | WARNING | no-id | Invalid API Key format (request: %s)
2025-12-07 20:52:46.010 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:52:46.013 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:52:46.242 | WARNING | no-id | Invalid password hash format
2025-12-07 20:52:46.342 | DEBUG | no-id | Decoding JWT token: fake_token...
2025-12-07 20:52:46.342 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes']
2025-12-07 20:52:46.346 | DEBUG | no-id | Auth attempt - X-API-Key: 9QEOMlJyKrw-guVwDBbzRZ56vtWuZTjPKcIe15mWmEM, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4535321808'>)
2025-12-07 20:52:46.350 | ERROR | no-id | API Key validation error (request: %s): %s
2025-12-07 20:52:46.398 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:52:46.402 | DEBUG | no-id | Decoding JWT token: fake_token...
2025-12-07 20:52:46.403 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:52:46.407 | DEBUG | no-id | Decoding JWT token: blacklisted_token...
2025-12-07 20:52:46.408 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'type']
2025-12-07 20:52:46.412 | DEBUG | no-id | Auth attempt - X-API-Key: test_key, Authorization present: False (request: test-123)
2025-12-07 20:52:46.416 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: <Mock name='mock.state.correlation_id' id='4538343184'>)
2025-12-07 20:52:46.417 | DEBUG | no-id | Bearer token present, length: 10, starts with: test_token...
2025-12-07 20:52:46.417 | DEBUG | no-id | Token validated successfully (request: <Mock name='mock.state.correlation_id' id='4538343184'>)
2025-12-07 20:52:46.420 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4538336080'>)
2025-12-07 20:52:46.420 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:52:46.504 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:52:46.507 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:52:46.511 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:52:46.514 | WARNING | no-id | Invalid API Key format (request: %s)
2025-12-07 20:52:46.517 | WARNING | no-id | Empty API Key (request: %s)
2025-12-07 20:52:46.522 | DEBUG | no-id | Decoding JWT token: fake_token...
2025-12-07 20:52:46.522 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:52:46.527 | DEBUG | no-id | Decoding JWT token: blacklisted_token...
2025-12-07 20:52:46.527 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'jti', 'type']
2025-12-07 20:52:46.531 | DEBUG | no-id | Auth attempt - X-API-Key: V_w2-gaf4b9xNTbW8a_BRc3QUibSDFiOHQMaksVURwQ, Authorization present: False (request: test-123)
2025-12-07 20:52:46.532 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:52:46.536 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: <Mock name='mock.state.correlation_id' id='4535578768'>)
2025-12-07 20:52:46.536 | DEBUG | no-id | Bearer token present, length: 8, starts with: token123...
2025-12-07 20:52:46.536 | DEBUG | no-id | Token validated successfully (request: <Mock name='mock.state.correlation_id' id='4535578768'>)
2025-12-07 20:52:46.570 | WARNING | no-id | Attempt to verify password with empty hash
2025-12-07 20:52:46.572 | WARNING | no-id | Attempt to verify password with empty hash
2025-12-07 20:52:46.574 | WARNING | no-id | Invalid password hash format
2025-12-07 20:52:46.576 | ERROR | no-id | Error verifying password: %s
2025-12-07 20:52:46.610 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:52:46.610 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:52:46.616 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:52:46.616 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type', 'jti', 'iss', 'aud', 'exp', 'iat', 'nbf']
2025-12-07 20:52:46.616 | WARNING | no-id | Token type mismatch: expected %s, got '%s'
2025-12-07 20:52:46.619 | DEBUG | no-id | Auth attempt - X-API-Key: test_key, Authorization present: True (request: test-123)
2025-12-07 20:52:46.623 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4538250832'>)
2025-12-07 20:52:46.623 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:52:46.681 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:52:46.684 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:52:46.715 | INFO | no-id | Login attempt for: %s
2025-12-07 20:52:46.717 | INFO | no-id | Login successful for user: 89512ee2-694d-4813-a8a6-ba780b3ac1d5
2025-12-07 20:52:46.732 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:46.732 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:46.733 | INFO | no-id | Plan updated: Redis=FREE vs Token=PlanEnum.PREMIUM. Using Redis.
2025-12-07 20:52:46.818 | DEBUG | no-id | Validating refresh token: valid_refresh_token...
2025-12-07 20:52:46.819 | INFO | no-id | Token refreshed for user: user123... (new plan: ENTERPRISE)
2025-12-07 20:52:46.823 | WARNING | no-id | Refresh request without token
2025-12-07 20:52:46.827 | DEBUG | no-id | Validating refresh token: revoked_token...
2025-12-07 20:52:46.827 | WARNING | no-id | Refresh token revoked: %s
2025-12-07 20:52:46.831 | DEBUG | no-id | Validating refresh token: access_token...
2025-12-07 20:52:46.832 | WARNING | no-id | Token type mismatch: expected 'refresh', got '%s'
2025-12-07 20:52:46.839 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:52:46.844 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:52:46.848 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:52:46.853 | INFO | no-id | API key rotated by admin: %s...
2025-12-07 20:52:46.905 | WARNING | no-id | Empty API Key (request: %s)
2025-12-07 20:52:46.905 | WARNING | no-id | Invalid API Key format (request: %s)
2025-12-07 20:52:46.907 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:52:46.907 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:52:46.912 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:52:46.912 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type']
2025-12-07 20:52:46.912 | DEBUG | no-id | Decoding JWT token: token...
2025-12-07 20:52:46.912 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'plan', 'scopes', 'type']
2025-12-07 20:52:46.916 | DEBUG | no-id | Auth attempt - X-API-Key: test_key, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4541006096'>)
2025-12-07 20:52:46.917 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: <Mock name='mock.state.correlation_id' id='4541006096'>)
2025-12-07 20:52:46.917 | DEBUG | no-id | Bearer token present, length: 5, starts with: token...
2025-12-07 20:52:46.917 | DEBUG | no-id | Token validated successfully (request: <Mock name='mock.state.correlation_id' id='4541006096'>)
2025-12-07 20:52:46.917 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: <Mock name='mock.state.correlation_id' id='4541006096'>)
2025-12-07 20:52:46.917 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:52:46.998 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:52:47.001 | WARNING | no-id | API Key not found (prefix: %s..., request: %s)
2025-12-07 20:52:47.004 | INFO | no-id | Deprecated API Key (prefix: %s...)
2025-12-07 20:52:47.051 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:52:47.066 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:52:47.067 | ERROR | no-id | Webhook signature verification failed: Invalid signature
2025-12-07 20:52:47.084 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:52:47.085 | INFO | no-id | ‚úÖ Processing webhook: checkout.session.completed (evt_123)
2025-12-07 20:52:47.101 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:52:47.101 | WARNING | no-id | ‚ö†Ô∏è TEST MODE ONLY: Skipping Stripe signature validation
2025-12-07 20:52:47.101 | INFO | no-id | ‚úÖ Processing webhook: test.event (evt_dev)
2025-12-07 20:52:47.101 | INFO | no-id | Processing webhook event: test.event (evt_dev)
2025-12-07 20:52:47.102 | DEBUG | no-id | Acquired processing lock: processing:event:evt_dev
2025-12-07 20:52:47.102 | INFO | no-id | Unhandled event type: test.event
2025-12-07 20:52:47.103 | DEBUG | no-id | Released processing lock: processing:event:evt_dev
2025-12-07 20:52:47.118 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: unknown)
2025-12-07 20:52:47.118 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:52:47.132 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: unknown)
2025-12-07 20:52:47.132 | DEBUG | no-id | Bearer token present, length: 535, starts with: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:47.132 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:47.133 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:47.133 | DEBUG | no-id | Token validated successfully (request: unknown)
2025-12-07 20:52:47.148 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: unknown)
2025-12-07 20:52:47.148 | DEBUG | no-id | Bearer token present, length: 535, starts with: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:47.148 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:47.149 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:47.149 | DEBUG | no-id | Token validated successfully (request: unknown)
2025-12-07 20:52:47.165 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:47.165 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:47.166 | INFO | unknown | Creating checkout session for user user_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa, plan: PREMIUM
2025-12-07 20:52:47.167 | INFO | unknown | Checkout session created: cs_test_123
2025-12-07 20:52:47.181 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:47.181 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:47.198 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:47.198 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:47.198 | INFO | unknown | Creating checkout session for user user_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa, plan: PREMIUM
2025-12-07 20:52:47.214 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:47.215 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:47.217 | INFO | no-id | Plan changed to ENTERPRISE for user user_123, new tokens generated
2025-12-07 20:52:47.232 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:47.232 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:47.248 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:47.248 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:47.265 | INFO | no-id | Processing webhook event: test.event (evt_idempotent)
2025-12-07 20:52:47.265 | INFO | no-id | Event already processed: evt_idempotent
2025-12-07 20:52:47.279 | INFO | no-id | Processing webhook event: test.event (evt_busy)
2025-12-07 20:52:47.280 | INFO | no-id | Event already being processed: evt_busy
2025-12-07 20:52:47.311 | INFO | no-id | ‚úÖ Persisted user data: user_updated -> PREMIUM
2025-12-07 20:52:47.339 | INFO | no-id | Processing checkout.session.completed: cs_missing
2025-12-07 20:52:47.586 | ERROR | no-id | Stripe API error: Invalid API Key provided: sk_test_******************************************opqr
2025-12-07 20:52:47.587 | WARNING | no-id | Could not fetch session from Stripe (using webhook data): Invalid API Key provided: sk_test_******************************************opqr
2025-12-07 20:52:47.587 | ERROR | no-id | User ID not found in session metadata
2025-12-07 20:52:47.615 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:52:47.616 | ERROR | no-id | Webhook signature verification failed: Bad sig
2025-12-07 20:52:47.633 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:52:47.633 | ERROR | no-id | Webhook error: Invalid payload
2025-12-07 20:52:47.649 | INFO | no-id | üîî Stripe webhook received
2025-12-07 20:52:47.649 | ERROR | no-id | Webhook error: Boom
2025-12-07 20:52:47.657 | WARNING | no-id | Failed to parse JSON from key: Fail
2025-12-07 20:52:47.658 | WARNING | no-id | Failed to set JSON in key: Fail
2025-12-07 20:52:47.658 | WARNING | no-id | Redis list operation failed for key: Fail
2025-12-07 20:52:47.661 | WARNING | no-id | Failed to parse JSON from key: Expecting value: line 1 column 1 (char 0)
2025-12-07 20:52:47.684 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: unknown)
2025-12-07 20:52:47.684 | DEBUG | no-id | Bearer token present, length: 535, starts with: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:47.684 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:47.684 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:47.685 | DEBUG | no-id | Token validated successfully (request: unknown)
2025-12-07 20:52:47.685 | INFO | unknown | No user ID resolved, returning FREE plan
2025-12-07 20:52:47.700 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:47.700 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:47.700 | INFO | unknown | Creating checkout session for user user_123, plan: PREMIUM
2025-12-07 20:52:47.702 | ERROR | unknown | Stripe error creating checkout session: Stripe fail
2025-12-07 20:52:47.706 | WARNING | no-id | Could not acquire user lock for user_locked
2025-12-07 20:52:47.711 | WARNING | no-id | Stripe call attempt 1/3 failed: Connection fail
2025-12-07 20:52:48.314 | WARNING | no-id | Stripe call attempt 2/3 failed: Connection fail
2025-12-07 20:52:49.518 | WARNING | no-id | Stripe call attempt 3/3 failed: Connection fail
2025-12-07 20:52:49.533 | WARNING | no-id | Stripe call attempt 1/3 failed: Rate limit
2025-12-07 20:52:50.137 | WARNING | no-id | Stripe call attempt 2/3 failed: Rate limit
2025-12-07 20:52:51.415 | WARNING | no-id | Failed to check event processing status: evt_123
2025-12-07 20:52:51.422 | WARNING | no-id | Failed to mark event as processed: evt_123
2025-12-07 20:52:51.431 | INFO | no-id | Processing checkout.session.completed: sess_1
2025-12-07 20:52:51.432 | INFO | no-id | Session retrieved from Stripe successfully
2025-12-07 20:52:51.432 | INFO | no-id | ‚úÖ Subscription updated for user u1
2025-12-07 20:52:51.440 | INFO | no-id | Processing checkout.session.completed: sess_1
2025-12-07 20:52:51.595 | ERROR | no-id | Stripe API error: Invalid API Key provided: sk_test_******************************************opqr
2025-12-07 20:52:51.595 | WARNING | no-id | Could not fetch session from Stripe (using webhook data): Invalid API Key provided: sk_test_******************************************opqr
2025-12-07 20:52:51.595 | ERROR | no-id | User ID not found in session metadata
2025-12-07 20:52:51.625 | WARNING | no-id | Failed to get user from customer cus_1: Fail
2025-12-07 20:52:51.632 | INFO | no-id | ‚úÖ Persisted user data: u1 -> ENTERPRISE
2025-12-07 20:52:51.638 | INFO | no-id | ‚úÖ Updated subscription for user u1: PREMIUM
2025-12-07 20:52:51.646 | WARNING | no-id | Could not acquire user lock for u1
2025-12-07 20:52:51.651 | WARNING | no-id | Could not fetch subscription from Stripe, using webhook data: Stripe fail
2025-12-07 20:52:51.652 | INFO | no-id | ‚úÖ Updated subscription for user u1: PREMIUM
2025-12-07 20:52:51.656 | WARNING | no-id | Could not fetch subscription from Stripe, using webhook data: Fatal
2025-12-07 20:52:51.656 | ERROR | no-id | Failed to update user subscription u1: Parse fail
2025-12-07 20:52:51.662 | INFO | no-id | ‚úÖ Updated subscription for user u1: PREMIUM
2025-12-07 20:52:51.665 | DEBUG | no-id | Acquired test lock: test:lock
2025-12-07 20:52:51.665 | DEBUG | no-id | Released test lock: test:lock
2025-12-07 20:52:51.669 | DEBUG | no-id | Acquired test lock: test:lock2
2025-12-07 20:52:51.669 | DEBUG | no-id | Could not acquire test lock: test:lock2
2025-12-07 20:52:51.669 | DEBUG | no-id | Released test lock: test:lock2
2025-12-07 20:52:51.672 | DEBUG | no-id | Acquired test lock: test:lock3
2025-12-07 20:52:51.673 | DEBUG | no-id | Released test lock: test:lock3
2025-12-07 20:52:55.722 | INFO | no-id | Updated billing date for user u1
2025-12-07 20:52:55.732 | DEBUG | no-id | Warming cache for domain: example.com
2025-12-07 20:52:55.733 | INFO | no-id | ‚úÖ Warmed cache for example.com (TTL: 300s)
2025-12-07 20:52:55.737 | DEBUG | no-id | Warming cache for domain: invalid.com
2025-12-07 20:52:55.737 | WARNING | no-id | No MX records found for invalid.com
2025-12-07 20:52:55.741 | DEBUG | no-id | Warming cache for domain: error.com
2025-12-07 20:52:55.741 | ERROR | no-id | Failed to warm cache for error.com: DNS Error
2025-12-07 20:52:55.748 | INFO | no-id | üî• Warming Tier 1: 3 domains (TTL: 60s)
2025-12-07 20:52:55.749 | DEBUG | no-id | Warming cache for domain: d1.com
2025-12-07 20:52:55.749 | INFO | no-id | ‚úÖ Warmed cache for d1.com (TTL: 60s)
2025-12-07 20:52:55.749 | DEBUG | no-id | Warming cache for domain: d2.com
2025-12-07 20:52:55.750 | INFO | no-id | ‚úÖ Warmed cache for d2.com (TTL: 60s)
2025-12-07 20:52:55.851 | DEBUG | no-id | Warming cache for domain: d3.com
2025-12-07 20:52:55.852 | INFO | no-id | ‚úÖ Warmed cache for d3.com (TTL: 60s)
2025-12-07 20:52:55.852 | INFO | no-id | ‚úÖ Tier 1 warming complete: 3/3 successful
2025-12-07 20:52:55.859 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 20:52:55.861 | INFO | no-id | üî• Warming Tier 1: 1 domains (TTL: 60s)
2025-12-07 20:52:55.861 | DEBUG | no-id | Warming cache for domain: d1.com
2025-12-07 20:52:55.862 | INFO | no-id | ‚úÖ Warmed cache for d1.com (TTL: 60s)
2025-12-07 20:52:55.862 | INFO | no-id | ‚úÖ Tier 1 warming complete: 1/1 successful
2025-12-07 20:52:55.868 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 20:52:55.869 | INFO | no-id | ‚úÖ Cache warming complete in 0.00s | Total warmed: 0 | Failures: 0
2025-12-07 20:52:55.875 | INFO | no-id | üî• Starting background cache warming
2025-12-07 20:52:55.876 | INFO | no-id | ‚úÖ Background cache warming started
2025-12-07 20:52:55.977 | INFO | no-id | Stopping background cache warming
2025-12-07 20:52:55.977 | INFO | no-id | ‚úÖ Background cache warming stopped
2025-12-07 20:52:56.007 | DEBUG | no-id | Warming cache for domain: example.com
2025-12-07 20:52:56.007 | ERROR | no-id | Failed to warm cache for example.com: 'str' object has no attribute 'preference'
2025-12-07 20:52:56.010 | DEBUG | no-id | Warming cache for domain: example.com
2025-12-07 20:52:56.010 | WARNING | no-id | No MX records found for example.com
2025-12-07 20:52:56.012 | DEBUG | no-id | Skipping domain example.com due to repeated failures
2025-12-07 20:52:56.015 | DEBUG | no-id | Warming cache for domain: example.com
2025-12-07 20:52:56.015 | ERROR | no-id | Failed to warm cache for example.com: DNS error
2025-12-07 20:52:56.019 | DEBUG | no-id | Warming cache for domain: example.com
2025-12-07 20:52:56.019 | ERROR | no-id | Failed to warm cache for example.com: 'str' object has no attribute 'preference'
2025-12-07 20:52:56.022 | INFO | no-id | üî• Warming Tier 1: 2 domains (TTL: 3600s)
2025-12-07 20:52:56.023 | INFO | no-id | ‚úÖ Tier 1 warming complete: 2/2 successful
2025-12-07 20:52:56.025 | DEBUG | no-id | Tier 1 not due for warming yet
2025-12-07 20:52:56.027 | INFO | no-id | üî• Warming Tier 1: 1 domains (TTL: 3600s)
2025-12-07 20:52:56.028 | INFO | no-id | ‚úÖ Tier 1 warming complete: 1/1 successful
2025-12-07 20:52:56.030 | INFO | no-id | üî• Warming Tier 1: 2 domains (TTL: 3600s)
2025-12-07 20:52:56.031 | ERROR | no-id | Task failed: Error
2025-12-07 20:52:56.031 | INFO | no-id | ‚úÖ Tier 1 warming complete: 1/2 successful
2025-12-07 20:52:56.033 | INFO | no-id | üî• Warming Tier 1: 5 domains (TTL: 3600s)
2025-12-07 20:52:56.269 | INFO | no-id | ‚úÖ Tier 1 warming complete: 5/5 successful
2025-12-07 20:52:56.275 | INFO | no-id | üöÄ Starting cache warming for all tiers
2025-12-07 20:52:56.276 | INFO | no-id | ‚úÖ Cache warming complete in 0.00s | Total warmed: 0 | Failures: 0
2025-12-07 20:52:56.290 | INFO | no-id | Stopping background cache warming
2025-12-07 20:52:56.290 | INFO | no-id | ‚úÖ Background cache warming stopped
2025-12-07 20:52:56.311 | INFO | no-id | Created circuit breaker: TEST_SERVICE Service
2025-12-07 20:52:56.313 | INFO | no-id | Created circuit breaker: SMTP Service
2025-12-07 20:52:56.315 | INFO | no-id | Created circuit breaker: TEST_FAILURES Service
2025-12-07 20:52:56.316 | DEBUG | no-id | Circuit breaker failure: TEST_FAILURES Service
2025-12-07 20:52:56.316 | DEBUG | no-id | Circuit breaker failure: TEST_FAILURES Service
2025-12-07 20:52:56.316 | DEBUG | no-id | Circuit breaker failure: TEST_FAILURES Service
2025-12-07 20:52:56.316 | DEBUG | no-id | Circuit breaker failure: TEST_FAILURES Service
2025-12-07 20:52:56.316 | DEBUG | no-id | Circuit breaker failure: TEST_FAILURES Service
2025-12-07 20:52:56.317 | WARNING | no-id | Circuit breaker state change: TEST_FAILURES Service
2025-12-07 20:52:56.318 | INFO | no-id | Created circuit breaker: STATS_TEST Service
2025-12-07 20:52:56.320 | INFO | no-id | Created circuit breaker: RESET_TEST Service
2025-12-07 20:52:56.321 | DEBUG | no-id | Circuit breaker failure: RESET_TEST Service
2025-12-07 20:52:56.321 | DEBUG | no-id | Circuit breaker failure: RESET_TEST Service
2025-12-07 20:52:56.321 | DEBUG | no-id | Circuit breaker failure: RESET_TEST Service
2025-12-07 20:52:56.321 | DEBUG | no-id | Circuit breaker failure: RESET_TEST Service
2025-12-07 20:52:56.321 | DEBUG | no-id | Circuit breaker failure: RESET_TEST Service
2025-12-07 20:52:56.321 | WARNING | no-id | Circuit breaker state change: RESET_TEST Service
2025-12-07 20:52:56.321 | WARNING | no-id | Circuit breaker state change: RESET_TEST Service
2025-12-07 20:52:56.322 | INFO | no-id | Manually reset circuit breaker: reset_test
2025-12-07 20:52:56.324 | INFO | no-id | Created circuit breaker: DNS Resolution
2025-12-07 20:52:58.087 | INFO | no-id | Login attempt for: %s
2025-12-07 20:52:58.089 | INFO | no-id | Login successful for user: 09e4694d-1f66-4b6a-8973-e7138a489f28
2025-12-07 20:52:58.090 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:58.090 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:58.091 | DEBUG | no-id | Creating API key | User: %s | Plan: %s | Name: %s
2025-12-07 20:52:58.092 | INFO | no-id | API key created successfully
2025-12-07 20:52:58.093 | DEBUG | no-id | Auth attempt - X-API-Key: SNay6xoIkYiINxfEJGMasv4X0p43icnDEtyLZkf2ADA, Authorization present: False (request: unknown)
2025-12-07 20:52:58.093 | INFO | no-id | Valid API Key (prefix: %s..., user: %s...)
2025-12-07 20:52:58.098 | INFO | no-id | Email validation | User: 09e4694d-1f66-4b6a-8973-e7138a489f28 | Plan: FREE | Email: check@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:52:58.098 | INFO | no-id | d84d7dba-5549-48f9-93e7-f2e56e76db35 | Pre-validation spam trap check | Email: check@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:52:58.098 | INFO | no-id | Validation d84d7dba-5549-48f9-93e7-f2e56e76db35 completed successfully
2025-12-07 20:52:58.099 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: True (request: unknown)
2025-12-07 20:52:58.099 | DEBUG | no-id | Bearer token present, length: 456, starts with: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:58.099 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:58.099 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:58.100 | DEBUG | no-id | Token validated successfully (request: unknown)
2025-12-07 20:52:58.101 | INFO | no-id | User logout completed (sub: %s..., token_status=%s)
2025-12-07 20:52:58.102 | DEBUG | no-id | Decoding JWT token: eyJhbGciOiJIUzI1NiIs...
2025-12-07 20:52:58.102 | DEBUG | no-id | JWT decoded successfully, payload keys: ['sub', 'email', 'exp', 'iat', 'nbf', 'jti', 'iss', 'aud', 'scopes', 'plan', 'type']
2025-12-07 20:52:58.112 | WARNING | no-id | SMTP configuration incomplete. Email notifications will be logged instead of sent.
2025-12-07 20:52:58.197 | INFO | no-id | Email sent successfully to recipient@test.com
2025-12-07 20:52:58.203 | INFO | no-id | Email sent successfully to recipient@test.com
2025-12-07 20:52:58.210 | WARNING | no-id | SMTP configuration incomplete. Email notifications will be logged instead of sent.
2025-12-07 20:52:58.211 | ERROR | no-id | Error loading email template: File not found
2025-12-07 20:52:58.216 | WARNING | no-id | SMTP configuration incomplete. Email notifications will be logged instead of sent.
2025-12-07 20:52:58.242 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:52:58.242 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:52:58.246 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:52:58.246 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:52:58.249 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:52:58.249 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:52:58.253 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:52:58.253 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:52:58.257 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:52:58.258 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:52:58.266 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:52:58.267 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:52:58.267 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:52:58.267 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:52:58.268 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:52:58.269 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:52:58.269 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:52:58.271 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:52:58.271 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:52:58.741 | DEBUG | no-id | Retry 1/5 for eventual_success sleeping 0.011s due to Temporary failure
2025-12-07 20:52:58.753 | DEBUG | no-id | Retrying eventual_success attempt 2/5
2025-12-07 20:52:58.753 | DEBUG | no-id | Retry 2/5 for eventual_success sleeping 0.026s due to Temporary failure
2025-12-07 20:52:58.780 | DEBUG | no-id | Retrying eventual_success attempt 3/5
2025-12-07 20:52:58.783 | DEBUG | no-id | Retry 1/3 for always_fail sleeping 0.013s due to Always fails
2025-12-07 20:52:58.797 | DEBUG | no-id | Retrying always_fail attempt 2/3
2025-12-07 20:52:58.797 | DEBUG | no-id | Retry 2/3 for always_fail sleeping 0.025s due to Always fails
2025-12-07 20:52:58.822 | DEBUG | no-id | Retrying always_fail attempt 3/3
2025-12-07 20:52:58.823 | DEBUG | no-id | Retry 3/3 for always_fail sleeping 0.051s due to Always fails
2025-12-07 20:52:58.878 | DEBUG | no-id | Retry 1/5 for fail_twice sleeping 0.012s due to Fail 1
2025-12-07 20:52:58.892 | DEBUG | no-id | Retrying fail_twice attempt 2/5
2025-12-07 20:52:58.892 | DEBUG | no-id | Retry 2/5 for fail_twice sleeping 0.023s due to Fail 2
2025-12-07 20:52:58.917 | DEBUG | no-id | Retrying fail_twice attempt 3/5
2025-12-07 20:52:58.920 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:52:58.926 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:52:58.928 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.320s due to Primary failed
2025-12-07 20:52:59.250 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:52:59.252 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.529s due to Primary failed
2025-12-07 20:52:59.783 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:52:59.785 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.035s due to Primary failed
2025-12-07 20:53:00.822 | DEBUG | no-id | Async MX primary failed for example.com: Primary failed
2025-12-07 20:53:00.833 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:53:00.838 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.311s due to No MX
2025-12-07 20:53:01.153 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:53:01.155 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.563s due to No MX
2025-12-07 20:53:01.720 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:53:01.722 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.199s due to No MX
2025-12-07 20:53:02.923 | DEBUG | no-id | Async MX primary failed for example.com: No MX
2025-12-07 20:53:02.925 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.281s due to No MX fallback
2025-12-07 20:53:03.208 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:53:03.209 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.538s due to No MX fallback
2025-12-07 20:53:03.749 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:53:03.751 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.086s due to No MX fallback
2025-12-07 20:53:04.839 | DEBUG | no-id | Fallback MX query failed for example.com: No MX fallback
2025-12-07 20:53:04.878 | DEBUG | no-id | [SPF] Found for example.com: v=spf1 include:_spf.google.com ~all...
2025-12-07 20:53:04.886 | DEBUG | no-id | SPF check failed for example.com: DNS error
2025-12-07 20:53:06.065 | WARNING | no-id | SMTP check timeout for %s
2025-12-07 20:53:06.077 | ERROR | no-id | SMTP wrapper unexpected error: %s
2025-12-07 20:53:06.125 | ERROR | no-id | Sync domain check failed for %s: %s
2025-12-07 20:53:06.135 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:06.139 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:06.143 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:06.148 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137486.148715 due to 5 failures
2025-12-07 20:53:06.150 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137486.1507251 due to 5 failures
2025-12-07 20:53:06.150 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137486.150914 due to 6 failures
2025-12-07 20:53:06.151 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137486.151024 due to 7 failures
2025-12-07 20:53:06.151 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137486.1511161 due to 8 failures
2025-12-07 20:53:06.151 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137486.151201 due to 9 failures
2025-12-07 20:53:06.151 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137486.151284 due to 10 failures
2025-12-07 20:53:06.153 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:53:06.156 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:53:06.157 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.293s due to Primary failed
2025-12-07 20:53:06.452 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:53:06.454 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.616s due to Primary failed
2025-12-07 20:53:07.072 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:53:07.073 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.294s due to Primary failed
2025-12-07 20:53:08.370 | DEBUG | no-id | Async TXT primary failed for example.com: Primary failed
2025-12-07 20:53:08.382 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:53:08.502 | DEBUG | no-id | WHOIS blocked for 1.2.3.4 by circuit breaker
2025-12-07 20:53:08.505 | DEBUG | no-id | [SPF] Found for example.com: v=spf1 include:_spf.google.com ~all...
2025-12-07 20:53:08.508 | DEBUG | no-id | SPF check failed for example.com: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.510 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:53:08.511 | INFO | no-id | [DKIM] Found for example.com with selector 'google'
2025-12-07 20:53:08.513 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:53:08.513 | DEBUG | no-id | [DKIM] Selector 'google' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.513 | DEBUG | no-id | [DKIM] Trying selector 'default' for example.com: default._domainkey.example.com
2025-12-07 20:53:08.514 | DEBUG | no-id | [DKIM] Selector 'default' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.514 | DEBUG | no-id | [DKIM] Trying selector 'selector1' for example.com: selector1._domainkey.example.com
2025-12-07 20:53:08.514 | DEBUG | no-id | [DKIM] Selector 'selector1' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.514 | DEBUG | no-id | [DKIM] Trying selector 'selector2' for example.com: selector2._domainkey.example.com
2025-12-07 20:53:08.514 | DEBUG | no-id | [DKIM] Selector 'selector2' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.514 | DEBUG | no-id | [DKIM] Trying selector 's1' for example.com: s1._domainkey.example.com
2025-12-07 20:53:08.515 | DEBUG | no-id | [DKIM] Selector 's1' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.515 | DEBUG | no-id | [DKIM] Trying selector 's2' for example.com: s2._domainkey.example.com
2025-12-07 20:53:08.515 | DEBUG | no-id | [DKIM] Selector 's2' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.515 | DEBUG | no-id | [DKIM] Trying selector 's201709' for example.com: s201709._domainkey.example.com
2025-12-07 20:53:08.515 | DEBUG | no-id | [DKIM] Selector 's201709' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.516 | DEBUG | no-id | [DKIM] Trying selector 's202003' for example.com: s202003._domainkey.example.com
2025-12-07 20:53:08.516 | DEBUG | no-id | [DKIM] Selector 's202003' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.516 | DEBUG | no-id | [DKIM] Trying selector 'k1' for example.com: k1._domainkey.example.com
2025-12-07 20:53:08.516 | DEBUG | no-id | [DKIM] Selector 'k1' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.516 | DEBUG | no-id | [DKIM] Trying selector 'k2' for example.com: k2._domainkey.example.com
2025-12-07 20:53:08.517 | DEBUG | no-id | [DKIM] Selector 'k2' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.517 | DEBUG | no-id | [DKIM] Trying selector 'mail' for example.com: mail._domainkey.example.com
2025-12-07 20:53:08.517 | DEBUG | no-id | [DKIM] Selector 'mail' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.517 | DEBUG | no-id | [DKIM] Trying selector 'dkim' for example.com: dkim._domainkey.example.com
2025-12-07 20:53:08.517 | DEBUG | no-id | [DKIM] Selector 'dkim' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.517 | DEBUG | no-id | [DKIM] Trying selector 'amazonses' for example.com: amazonses._domainkey.example.com
2025-12-07 20:53:08.518 | DEBUG | no-id | [DKIM] Selector 'amazonses' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.518 | DEBUG | no-id | [DKIM] Trying selector 'sendgrid' for example.com: sendgrid._domainkey.example.com
2025-12-07 20:53:08.518 | DEBUG | no-id | [DKIM] Selector 'sendgrid' failed: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.518 | DEBUG | no-id | [DKIM] No selectors found for example.com
2025-12-07 20:53:08.521 | DEBUG | no-id | [DMARC] Found for example.com: v=DMARC1; p=reject; rua=mailto:dmarc@example.com...
2025-12-07 20:53:08.523 | DEBUG | no-id | DMARC check failed for example.com: The DNS response does not contain an answer to the question.
2025-12-07 20:53:08.739 | DEBUG | no-id | Concurrency limit for PREMIUM: 5
2025-12-07 20:53:08.739 | DEBUG | no-id | Current concurrency for user123: 5, limit: 5
2025-12-07 20:53:08.743 | DEBUG | no-id | Concurrency limit for PREMIUM: 5
2025-12-07 20:53:08.744 | DEBUG | no-id | Current concurrency for user123: 2, limit: 5
2025-12-07 20:53:08.748 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:53:09.860 | ERROR | no-id | API Exception | Type: %s | Status: %d | Detail: %s | Trace: %s | Plan: %s | Path: %s
2025-12-07 20:53:09.864 | ERROR | no-id | API Exception | Type: %s | Status: %d | Detail: %s | Trace: %s | Plan: %s | Path: %s
2025-12-07 20:53:09.867 | DEBUG | no-id | No Bearer token in Authorization header
2025-12-07 20:53:09.869 | WARNING | no-id | Validation Error | Count: 1 | Details: [{"field": "body.email", "message": "Invalid email", "type": "value_error", "input": "invalid-email"}] | Trace: test-correlation-123 | Plan: UNKNOWN | Path: /test
2025-12-07 20:53:09.872 | DEBUG | no-id | Extracted plan from JWT: ENTERPRISE
2025-12-07 20:53:09.873 | WARNING | no-id | Validation Error | Count: 1 | Details: [{"field": "body.test", "message": "error", "type": "error", "input": null}] | Trace: test-correlation-123 | Plan: ENTERPRISE | Path: /test
2025-12-07 20:53:09.876 | CRITICAL | no-id | Unhandled Exception | Type: %s | Detail: %s | Trace: %s | Plan: %s | Path: %s
%s
2025-12-07 20:53:09.880 | CRITICAL | no-id | Unhandled Exception | Type: %s | Detail: %s | Trace: %s | Plan: %s | Path: %s
%s
2025-12-07 20:53:09.887 | DEBUG | no-id | Could not extract plan from JWT: DecodeError: Not enough segments
2025-12-07 20:53:09.893 | DEBUG | no-id | Failed to record error metrics: Metrics error
2025-12-07 20:53:09.897 | INFO | no-id | Exception handlers registered successfully
2025-12-07 20:53:10.329 | DEBUG | no-id | Stored idempotent response
2025-12-07 20:53:10.330 | INFO | no-id | Idempotent response returned
2025-12-07 20:53:10.330 | INFO | no-id | Idempotent replay for key: 4b1e754a-a600-43d7-a647-6470b0a4d566
2025-12-07 20:53:10.342 | DEBUG | no-id | Stored idempotent response
2025-12-07 20:53:10.344 | WARNING | no-id | Idempotency key reused with different request body
2025-12-07 20:53:10.378 | INFO | no-id | Email validation | User: user123 | Plan: PREMIUM | Email: test@example.com | Env: production | SMTP: True | DNS: False
2025-12-07 20:53:10.379 | INFO | no-id | ed480113-236b-44fa-b385-e025400873ea | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:53:10.379 | INFO | no-id | Validation ed480113-236b-44fa-b385-e025400873ea completed successfully
2025-12-07 20:53:10.410 | INFO | no-id | Batch validation requested by: user123 (Plan: PREMIUM)
2025-12-07 20:53:10.412 | INFO | no-id | Usage incremented for user123: -> 2
2025-12-07 20:53:10.427 | INFO | no-id | Upload requested by: user123 - File: test.csv
2025-12-07 20:53:10.428 | INFO | no-id | Usage incremented for user123: -> 2
2025-12-07 20:53:10.460 | INFO | no-id | Job queued 9ae44bb3-861f-4a29-87e3-7b8df25c4fde by user-123
2025-12-07 20:53:10.465 | INFO | no-id | Job queued ec489a35-643a-48e2-b356-d87bafc342a8 by user-123
2025-12-07 20:53:10.480 | INFO | no-id | Job queued e68d06a5-ee2c-4d79-82d3-06d8b046a32c by free-user
2025-12-07 20:53:10.635 | DEBUG | no-id | Auth attempt - X-API-Key: None, Authorization present: False (request: unknown)
2025-12-07 20:53:10.635 | WARNING | no-id | No authentication provided (request: %s)
2025-12-07 20:53:10.865 | INFO | no-id | GET /test ‚Üí 200
2025-12-07 20:53:10.912 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: True | DNS: True
2025-12-07 20:53:10.912 | INFO | no-id | ff48db21-8f83-4e51-9961-ef77360fed8a | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:10.913 | INFO | no-id | fe3aeb37-6776-4ee7-9585-df1af9df15e4 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:10.915 | INFO | no-id | fe3aeb37-6776-4ee7-9585-df1af9df15e4 | Checking spam traps...
2025-12-07 20:53:10.915 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:10.915 | INFO | no-id | fe3aeb37-6776-4ee7-9585-df1af9df15e4 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:10.915 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:10.916 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:11.202 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:11.203 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:11.203 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.204 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:11.203536Z', 'risk_level': 'low'}
2025-12-07 20:53:11.204 | INFO | no-id | [fe3aeb37-6776-4ee7-9585-df1af9df15e4] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:11.204 | INFO | no-id | fe3aeb37-6776-4ee7-9585-df1af9df15e4 | Analyzing provider...
2025-12-07 20:53:11.205 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:11.205 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:11.206 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:11.207 | INFO | no-id | [fe3aeb37-6776-4ee7-9585-df1af9df15e4] Role email check | Is role: False | Type: None
2025-12-07 20:53:11.208 | DEBUG | no-id | [SMTP] Starting validation for user@example.com on mx.example.com
2025-12-07 20:53:11.209 | INFO | no-id | [SMTP] Validation complete: user@example.com | Exists: True | Host: mx.example.com
2025-12-07 20:53:11.209 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.209 | ERROR | no-id | [fe3aeb37-6776-4ee7-9585-df1af9df15e4] Catch-all detection error: detect_catch_all_domain() got an unexpected keyword argument 'redis'
2025-12-07 20:53:11.209 | INFO | no-id | [fe3aeb37-6776-4ee7-9585-df1af9df15e4] Unified risk scoring | Score: 0/100 | Level: low | Confidence: 50.00% | Factors: {}
2025-12-07 20:53:11.210 | INFO | no-id | Validation fe3aeb37-6776-4ee7-9585-df1af9df15e4 completed successfully
2025-12-07 20:53:11.211 | INFO | no-id | Validation ff48db21-8f83-4e51-9961-ef77360fed8a completed successfully
2025-12-07 20:53:11.236 | INFO | no-id | Batch validation requested by: user-1 (Plan: PREMIUM)
2025-12-07 20:53:11.237 | INFO | no-id | 0e7b14fe-ec8b-4310-ad38-be98057296ee | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:11.241 | INFO | no-id | 0e7b14fe-ec8b-4310-ad38-be98057296ee | Checking spam traps...
2025-12-07 20:53:11.241 | INFO | no-id | 0e7b14fe-ec8b-4310-ad38-be98057296ee | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:11.242 | INFO | no-id | acbc55e9-f14e-4370-beca-199873b29625 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:11.245 | INFO | no-id | acbc55e9-f14e-4370-beca-199873b29625 | Checking spam traps...
2025-12-07 20:53:11.245 | INFO | no-id | acbc55e9-f14e-4370-beca-199873b29625 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:11.246 | INFO | no-id | 6a9256f3-4714-4e14-836d-f0e4b7c34f94 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:11.249 | INFO | no-id | 6a9256f3-4714-4e14-836d-f0e4b7c34f94 | Checking spam traps...
2025-12-07 20:53:11.249 | INFO | no-id | 6a9256f3-4714-4e14-836d-f0e4b7c34f94 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:11.250 | INFO | no-id | 6de381e7-c980-442b-8243-0a636c933e34 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:11.253 | INFO | no-id | 6de381e7-c980-442b-8243-0a636c933e34 | Checking spam traps...
2025-12-07 20:53:11.254 | INFO | no-id | 6de381e7-c980-442b-8243-0a636c933e34 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:11.254 | INFO | no-id | 64b20c52-03f3-475c-9a83-50cf331d79ce | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:11.257 | INFO | no-id | 64b20c52-03f3-475c-9a83-50cf331d79ce | Checking spam traps...
2025-12-07 20:53:11.257 | INFO | no-id | 64b20c52-03f3-475c-9a83-50cf331d79ce | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:11.258 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:11.258 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:11.258 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:11.258 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:11.258 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:11.258 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:11.276 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:11.291 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:11.306 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:11.320 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:11.554 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:11.555 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:11.555 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.556 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:11.555764Z', 'risk_level': 'low'}
2025-12-07 20:53:11.556 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:11.557 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:11.557 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.557 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:11.557423Z', 'risk_level': 'low'}
2025-12-07 20:53:11.558 | INFO | no-id | [64b20c52-03f3-475c-9a83-50cf331d79ce] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:11.558 | INFO | no-id | 64b20c52-03f3-475c-9a83-50cf331d79ce | Analyzing provider...
2025-12-07 20:53:11.558 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:11.558 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:11.558 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:11.559 | INFO | no-id | [64b20c52-03f3-475c-9a83-50cf331d79ce] Role email check | Is role: False | Type: None
2025-12-07 20:53:11.559 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.559 | DEBUG | no-id | [64b20c52-03f3-475c-9a83-50cf331d79ce] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:11.559 | INFO | no-id | [64b20c52-03f3-475c-9a83-50cf331d79ce] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:11.560 | INFO | no-id | Validation 64b20c52-03f3-475c-9a83-50cf331d79ce completed successfully
2025-12-07 20:53:11.560 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:11.560 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:11.560 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.561 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:11.560963Z', 'risk_level': 'low'}
2025-12-07 20:53:11.561 | INFO | no-id | [0e7b14fe-ec8b-4310-ad38-be98057296ee] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:11.561 | INFO | no-id | 0e7b14fe-ec8b-4310-ad38-be98057296ee | Analyzing provider...
2025-12-07 20:53:11.561 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:11.561 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:11.561 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:11.562 | INFO | no-id | [0e7b14fe-ec8b-4310-ad38-be98057296ee] Role email check | Is role: False | Type: None
2025-12-07 20:53:11.562 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.562 | DEBUG | no-id | [0e7b14fe-ec8b-4310-ad38-be98057296ee] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:11.562 | INFO | no-id | [0e7b14fe-ec8b-4310-ad38-be98057296ee] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:11.562 | INFO | no-id | Validation 0e7b14fe-ec8b-4310-ad38-be98057296ee completed successfully
2025-12-07 20:53:11.563 | INFO | no-id | [6a9256f3-4714-4e14-836d-f0e4b7c34f94] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:11.563 | INFO | no-id | 6a9256f3-4714-4e14-836d-f0e4b7c34f94 | Analyzing provider...
2025-12-07 20:53:11.563 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:11.563 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:11.564 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:11.564 | INFO | no-id | [6a9256f3-4714-4e14-836d-f0e4b7c34f94] Role email check | Is role: False | Type: None
2025-12-07 20:53:11.564 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.564 | DEBUG | no-id | [6a9256f3-4714-4e14-836d-f0e4b7c34f94] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:11.564 | INFO | no-id | [6a9256f3-4714-4e14-836d-f0e4b7c34f94] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:11.565 | INFO | no-id | Validation 6a9256f3-4714-4e14-836d-f0e4b7c34f94 completed successfully
2025-12-07 20:53:11.567 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:11.567 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:11.567 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.567 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:11.567497Z', 'risk_level': 'low'}
2025-12-07 20:53:11.568 | INFO | no-id | [6de381e7-c980-442b-8243-0a636c933e34] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:11.568 | INFO | no-id | 6de381e7-c980-442b-8243-0a636c933e34 | Analyzing provider...
2025-12-07 20:53:11.568 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:11.568 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:11.568 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:11.569 | INFO | no-id | [6de381e7-c980-442b-8243-0a636c933e34] Role email check | Is role: False | Type: None
2025-12-07 20:53:11.569 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.569 | DEBUG | no-id | [6de381e7-c980-442b-8243-0a636c933e34] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:11.569 | INFO | no-id | [6de381e7-c980-442b-8243-0a636c933e34] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:11.569 | INFO | no-id | Validation 6de381e7-c980-442b-8243-0a636c933e34 completed successfully
2025-12-07 20:53:11.598 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:11.599 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:11.599 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.599 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:11.599375Z', 'risk_level': 'low'}
2025-12-07 20:53:11.599 | INFO | no-id | [acbc55e9-f14e-4370-beca-199873b29625] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:11.600 | INFO | no-id | acbc55e9-f14e-4370-beca-199873b29625 | Analyzing provider...
2025-12-07 20:53:11.600 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:11.600 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:11.600 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:11.601 | INFO | no-id | [acbc55e9-f14e-4370-beca-199873b29625] Role email check | Is role: False | Type: None
2025-12-07 20:53:11.601 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.601 | DEBUG | no-id | [acbc55e9-f14e-4370-beca-199873b29625] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:11.601 | INFO | no-id | [acbc55e9-f14e-4370-beca-199873b29625] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:11.602 | INFO | no-id | Validation acbc55e9-f14e-4370-beca-199873b29625 completed successfully
2025-12-07 20:53:11.602 | ERROR | no-id | Error incrementing usage for user-1: 'FakeRedis' object has no attribute 'incrby'
2025-12-07 20:53:11.633 | INFO | no-id | Upload requested by: user-1 - File: emails.csv
2025-12-07 20:53:11.633 | INFO | no-id | ea23f8b3-a6ce-4137-affc-ce7bb979bbe8 | Format validation passed | Email: u***@e***.com
2025-12-07 20:53:11.636 | INFO | no-id | ea23f8b3-a6ce-4137-affc-ce7bb979bbe8 | Checking spam traps...
2025-12-07 20:53:11.637 | INFO | no-id | ea23f8b3-a6ce-4137-affc-ce7bb979bbe8 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:11.637 | INFO | no-id | 7c7b3adb-a525-4083-b9fa-354028f0f62f | Format validation passed | Email: u***@e***.com
2025-12-07 20:53:11.640 | INFO | no-id | 7c7b3adb-a525-4083-b9fa-354028f0f62f | Checking spam traps...
2025-12-07 20:53:11.640 | INFO | no-id | 7c7b3adb-a525-4083-b9fa-354028f0f62f | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:11.640 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for u***@e***.com
2025-12-07 20:53:11.641 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for u***@e***.com
2025-12-07 20:53:11.641 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:11.658 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:11.906 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:11.907 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:11.907 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.908 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:11.907956Z', 'risk_level': 'low'}
2025-12-07 20:53:11.909 | INFO | no-id | [ea23f8b3-a6ce-4137-affc-ce7bb979bbe8] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:11.909 | INFO | no-id | ea23f8b3-a6ce-4137-affc-ce7bb979bbe8 | Analyzing provider...
2025-12-07 20:53:11.910 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:11.910 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:11.910 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:11.911 | INFO | no-id | [ea23f8b3-a6ce-4137-affc-ce7bb979bbe8] Role email check | Is role: False | Type: None
2025-12-07 20:53:11.911 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.911 | DEBUG | no-id | [ea23f8b3-a6ce-4137-affc-ce7bb979bbe8] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:11.912 | INFO | no-id | [ea23f8b3-a6ce-4137-affc-ce7bb979bbe8] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:11.913 | INFO | no-id | Validation ea23f8b3-a6ce-4137-affc-ce7bb979bbe8 completed successfully
2025-12-07 20:53:11.979 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:11.980 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:11.980 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.981 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:11.980620Z', 'risk_level': 'low'}
2025-12-07 20:53:11.981 | INFO | no-id | [7c7b3adb-a525-4083-b9fa-354028f0f62f] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:11.982 | INFO | no-id | 7c7b3adb-a525-4083-b9fa-354028f0f62f | Analyzing provider...
2025-12-07 20:53:11.982 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:11.983 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:11.983 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:11.983 | INFO | no-id | [7c7b3adb-a525-4083-b9fa-354028f0f62f] Role email check | Is role: False | Type: None
2025-12-07 20:53:11.984 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:11.984 | DEBUG | no-id | [7c7b3adb-a525-4083-b9fa-354028f0f62f] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:11.985 | INFO | no-id | [7c7b3adb-a525-4083-b9fa-354028f0f62f] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:11.986 | INFO | no-id | Validation 7c7b3adb-a525-4083-b9fa-354028f0f62f completed successfully
2025-12-07 20:53:11.986 | ERROR | no-id | Error incrementing usage for user-1: 'FakeRedis' object has no attribute 'incrby'
2025-12-07 20:53:12.049 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user2@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:12.049 | DEBUG | no-id | Spam trap check cache hit for user2@example.com
2025-12-07 20:53:12.049 | INFO | no-id | c3218705-ea27-4990-b8f1-69fcc6590fd2 | Pre-validation spam trap check | Email: user2@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:12.050 | INFO | no-id | 8acaeb07-1f36-456b-94ac-9081dbe7b8f0 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:12.052 | INFO | no-id | 8acaeb07-1f36-456b-94ac-9081dbe7b8f0 | Checking spam traps...
2025-12-07 20:53:12.053 | DEBUG | no-id | Spam trap check cache hit for user2@example.com
2025-12-07 20:53:12.053 | INFO | no-id | 8acaeb07-1f36-456b-94ac-9081dbe7b8f0 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:12.053 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user1@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:12.053 | DEBUG | no-id | Spam trap check cache hit for user1@example.com
2025-12-07 20:53:12.053 | INFO | no-id | 824e1430-dce8-4ef7-950b-1bfbf1214bde | Pre-validation spam trap check | Email: user1@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:12.053 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:12.054 | INFO | no-id | 2590d516-5555-45cd-9567-4cc61d09a450 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:12.056 | INFO | no-id | 2590d516-5555-45cd-9567-4cc61d09a450 | Checking spam traps...
2025-12-07 20:53:12.057 | DEBUG | no-id | Spam trap check cache hit for user1@example.com
2025-12-07 20:53:12.057 | INFO | no-id | 2590d516-5555-45cd-9567-4cc61d09a450 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:12.057 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:12.057 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:12.074 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:12.314 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:12.316 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:12.316 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:12.317 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:12.316659Z', 'risk_level': 'low'}
2025-12-07 20:53:12.317 | INFO | no-id | [2590d516-5555-45cd-9567-4cc61d09a450] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:12.318 | INFO | no-id | 2590d516-5555-45cd-9567-4cc61d09a450 | Analyzing provider...
2025-12-07 20:53:12.318 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:12.318 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:12.319 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:12.319 | INFO | no-id | [2590d516-5555-45cd-9567-4cc61d09a450] Role email check | Is role: False | Type: None
2025-12-07 20:53:12.320 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:12.320 | DEBUG | no-id | [2590d516-5555-45cd-9567-4cc61d09a450] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:12.321 | INFO | no-id | [2590d516-5555-45cd-9567-4cc61d09a450] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:12.322 | INFO | no-id | Validation 2590d516-5555-45cd-9567-4cc61d09a450 completed successfully
2025-12-07 20:53:12.322 | INFO | no-id | Validation 824e1430-dce8-4ef7-950b-1bfbf1214bde completed successfully
2025-12-07 20:53:13.388 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:13.389 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:13.390 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:13.390 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:13.390248Z', 'risk_level': 'low'}
2025-12-07 20:53:13.391 | INFO | no-id | [8acaeb07-1f36-456b-94ac-9081dbe7b8f0] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:13.391 | INFO | no-id | 8acaeb07-1f36-456b-94ac-9081dbe7b8f0 | Analyzing provider...
2025-12-07 20:53:13.392 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:13.392 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:13.393 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:13.393 | INFO | no-id | [8acaeb07-1f36-456b-94ac-9081dbe7b8f0] Role email check | Is role: False | Type: None
2025-12-07 20:53:13.394 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:13.394 | DEBUG | no-id | [8acaeb07-1f36-456b-94ac-9081dbe7b8f0] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:13.395 | INFO | no-id | [8acaeb07-1f36-456b-94ac-9081dbe7b8f0] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:13.396 | INFO | no-id | Validation 8acaeb07-1f36-456b-94ac-9081dbe7b8f0 completed successfully
2025-12-07 20:53:13.397 | INFO | no-id | Validation c3218705-ea27-4990-b8f1-69fcc6590fd2 completed successfully
2025-12-07 20:53:13.427 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:13.428 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:13.428 | INFO | no-id | 4e07a1c6-b27b-431d-856a-28168c36d85a | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:13.428 | INFO | no-id | 4bb4a720-f3c6-4d6d-81e6-dc6e1d7c9ff9 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:13.432 | INFO | no-id | 4bb4a720-f3c6-4d6d-81e6-dc6e1d7c9ff9 | Checking spam traps...
2025-12-07 20:53:13.432 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:13.432 | INFO | no-id | 4bb4a720-f3c6-4d6d-81e6-dc6e1d7c9ff9 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:13.433 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:13.433 | WARNING | no-id | [HIBP] Cache error: boom
2025-12-07 20:53:13.434 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:13.795 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:13.796 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:13.796 | WARNING | no-id | [HIBP] Cache save failed: 'Broken' object has no attribute 'setex'
2025-12-07 20:53:13.797 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:13.796837Z', 'risk_level': 'low'}
2025-12-07 20:53:13.797 | INFO | no-id | [4bb4a720-f3c6-4d6d-81e6-dc6e1d7c9ff9] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:13.798 | INFO | no-id | 4bb4a720-f3c6-4d6d-81e6-dc6e1d7c9ff9 | Analyzing provider...
2025-12-07 20:53:13.798 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:13.799 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:13.799 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:13.799 | INFO | no-id | [4bb4a720-f3c6-4d6d-81e6-dc6e1d7c9ff9] Role email check | Is role: False | Type: None
2025-12-07 20:53:13.800 | DEBUG | no-id | Cache check failed: boom
2025-12-07 20:53:13.800 | DEBUG | no-id | [4bb4a720-f3c6-4d6d-81e6-dc6e1d7c9ff9] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:13.801 | INFO | no-id | [4bb4a720-f3c6-4d6d-81e6-dc6e1d7c9ff9] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:13.802 | INFO | no-id | Validation 4bb4a720-f3c6-4d6d-81e6-dc6e1d7c9ff9 completed successfully
2025-12-07 20:53:13.802 | DEBUG | no-id | Error cleaning up concurrency limits: boom
2025-12-07 20:53:13.803 | INFO | no-id | Validation 4e07a1c6-b27b-431d-856a-28168c36d85a completed successfully
2025-12-07 20:53:13.831 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:13.832 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:13.832 | INFO | no-id | 8050d7b1-e2d0-408d-9cb6-14c080b25df7 | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:13.832 | INFO | no-id | ee5d5026-1a80-479f-87f0-14671927494b | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:13.836 | INFO | no-id | ee5d5026-1a80-479f-87f0-14671927494b | Checking spam traps...
2025-12-07 20:53:13.836 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:13.836 | INFO | no-id | ee5d5026-1a80-479f-87f0-14671927494b | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:13.836 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:13.837 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:14.153 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:14.154 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:14.154 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:14.155 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:14.154786Z', 'risk_level': 'low'}
2025-12-07 20:53:14.155 | INFO | no-id | [ee5d5026-1a80-479f-87f0-14671927494b] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:14.155 | INFO | no-id | ee5d5026-1a80-479f-87f0-14671927494b | Analyzing provider...
2025-12-07 20:53:14.156 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:14.156 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:14.156 | ERROR | no-id | Unexpected error validating domain example.com: DNS timeout
2025-12-07 20:53:14.157 | INFO | no-id | Validation 8050d7b1-e2d0-408d-9cb6-14c080b25df7 completed successfully
2025-12-07 20:53:14.181 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: True | DNS: False
2025-12-07 20:53:14.181 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:14.182 | INFO | no-id | f7e1cb8a-7206-49ed-96b4-a5c9655b69dc | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:14.182 | INFO | no-id | 14bc35e1-398a-40f2-886f-f9acabd8cf43 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:14.185 | INFO | no-id | 14bc35e1-398a-40f2-886f-f9acabd8cf43 | Checking spam traps...
2025-12-07 20:53:14.186 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:14.186 | INFO | no-id | 14bc35e1-398a-40f2-886f-f9acabd8cf43 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:14.186 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:14.186 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:14.429 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:14.430 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:14.430 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:14.431 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:14.430639Z', 'risk_level': 'low'}
2025-12-07 20:53:14.431 | INFO | no-id | [14bc35e1-398a-40f2-886f-f9acabd8cf43] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:14.431 | INFO | no-id | 14bc35e1-398a-40f2-886f-f9acabd8cf43 | Analyzing provider...
2025-12-07 20:53:14.432 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:14.433 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:14.433 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:14.433 | INFO | no-id | [14bc35e1-398a-40f2-886f-f9acabd8cf43] Role email check | Is role: False | Type: None
2025-12-07 20:53:14.434 | DEBUG | no-id | [SMTP] Starting validation for user@example.com on mx.example.com
2025-12-07 20:53:14.434 | ERROR | no-id | [SMTP] Error for user@example.com: ECONNREFUSED
2025-12-07 20:53:14.435 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:14.435 | ERROR | no-id | [14bc35e1-398a-40f2-886f-f9acabd8cf43] Catch-all detection error: detect_catch_all_domain() got an unexpected keyword argument 'redis'
2025-12-07 20:53:14.435 | INFO | no-id | [14bc35e1-398a-40f2-886f-f9acabd8cf43] Unified risk scoring | Score: 0/100 | Level: low | Confidence: 50.00% | Factors: {}
2025-12-07 20:53:14.436 | INFO | no-id | Validation 14bc35e1-398a-40f2-886f-f9acabd8cf43 completed successfully
2025-12-07 20:53:14.436 | INFO | no-id | Validation f7e1cb8a-7206-49ed-96b4-a5c9655b69dc completed successfully
2025-12-07 20:53:14.482 | INFO | no-id | Upload requested by: user-1 - File: malicious.zip
2025-12-07 20:53:14.553 | INFO | no-id | Upload requested by: user-1 - File: bomb.zip
2025-12-07 20:53:14.567 | INFO | no-id | Batch validation requested by: user-1 (Plan: FREE)
2025-12-07 20:53:14.581 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:14.581 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:14.581 | INFO | no-id | 51e64dfe-7a8c-428a-bc75-72e470078fbf | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:14.582 | INFO | no-id | dc44b12c-d1d0-48df-ad43-0c55e03eb3e5 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:14.584 | INFO | no-id | dc44b12c-d1d0-48df-ad43-0c55e03eb3e5 | Checking spam traps...
2025-12-07 20:53:14.585 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:14.585 | INFO | no-id | dc44b12c-d1d0-48df-ad43-0c55e03eb3e5 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:14.585 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:14.585 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:14.804 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:14.805 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:14.805 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:14.806 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:14.805843Z', 'risk_level': 'low'}
2025-12-07 20:53:14.806 | INFO | no-id | [dc44b12c-d1d0-48df-ad43-0c55e03eb3e5] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:14.807 | INFO | no-id | dc44b12c-d1d0-48df-ad43-0c55e03eb3e5 | Analyzing provider...
2025-12-07 20:53:14.807 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:14.808 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:14.808 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:14.808 | INFO | no-id | [dc44b12c-d1d0-48df-ad43-0c55e03eb3e5] Role email check | Is role: False | Type: None
2025-12-07 20:53:14.809 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:14.809 | DEBUG | no-id | [dc44b12c-d1d0-48df-ad43-0c55e03eb3e5] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:14.809 | INFO | no-id | [dc44b12c-d1d0-48df-ad43-0c55e03eb3e5] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:14.810 | INFO | no-id | Validation dc44b12c-d1d0-48df-ad43-0c55e03eb3e5 completed successfully
2025-12-07 20:53:14.810 | INFO | no-id | Validation 51e64dfe-7a8c-428a-bc75-72e470078fbf completed successfully
2025-12-07 20:53:14.813 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:14.813 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:14.814 | INFO | no-id | 356c2591-3eb0-4f46-a422-3209443c7f4d | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:14.814 | INFO | no-id | 2556ed0f-cd3b-4f0b-8f27-a235893556cc | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:14.820 | INFO | no-id | 2556ed0f-cd3b-4f0b-8f27-a235893556cc | Checking spam traps...
2025-12-07 20:53:14.820 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:14.820 | INFO | no-id | 2556ed0f-cd3b-4f0b-8f27-a235893556cc | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:14.820 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:14.821 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.052 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:15.053 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:15.053 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.054 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:15.053905Z', 'risk_level': 'low'}
2025-12-07 20:53:15.054 | INFO | no-id | [2556ed0f-cd3b-4f0b-8f27-a235893556cc] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:15.055 | INFO | no-id | 2556ed0f-cd3b-4f0b-8f27-a235893556cc | Analyzing provider...
2025-12-07 20:53:15.055 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:15.055 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:15.056 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:15.056 | INFO | no-id | [2556ed0f-cd3b-4f0b-8f27-a235893556cc] Role email check | Is role: False | Type: None
2025-12-07 20:53:15.057 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.057 | DEBUG | no-id | [2556ed0f-cd3b-4f0b-8f27-a235893556cc] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:15.057 | INFO | no-id | [2556ed0f-cd3b-4f0b-8f27-a235893556cc] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:15.058 | INFO | no-id | Validation 2556ed0f-cd3b-4f0b-8f27-a235893556cc completed successfully
2025-12-07 20:53:15.059 | INFO | no-id | Validation 356c2591-3eb0-4f46-a422-3209443c7f4d completed successfully
2025-12-07 20:53:15.063 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:15.063 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:15.064 | INFO | no-id | 5ec4ca99-5a23-4257-bdf6-7fdd283145c5 | Pre-validation spam trap check | Email: user@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:15.064 | INFO | no-id | f0d7bbd7-3523-4d08-9337-0223af32b89d | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.071 | INFO | no-id | f0d7bbd7-3523-4d08-9337-0223af32b89d | Checking spam traps...
2025-12-07 20:53:15.071 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:15.072 | INFO | no-id | f0d7bbd7-3523-4d08-9337-0223af32b89d | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.072 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.072 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.305 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:15.306 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:15.307 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.307 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:15.307036Z', 'risk_level': 'low'}
2025-12-07 20:53:15.307 | INFO | no-id | [f0d7bbd7-3523-4d08-9337-0223af32b89d] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:15.308 | INFO | no-id | f0d7bbd7-3523-4d08-9337-0223af32b89d | Analyzing provider...
2025-12-07 20:53:15.308 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:15.309 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:15.309 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:15.309 | INFO | no-id | [f0d7bbd7-3523-4d08-9337-0223af32b89d] Role email check | Is role: False | Type: None
2025-12-07 20:53:15.310 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.310 | DEBUG | no-id | [f0d7bbd7-3523-4d08-9337-0223af32b89d] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:15.310 | INFO | no-id | [f0d7bbd7-3523-4d08-9337-0223af32b89d] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:15.311 | INFO | no-id | Validation f0d7bbd7-3523-4d08-9337-0223af32b89d completed successfully
2025-12-07 20:53:15.312 | INFO | no-id | Validation 5ec4ca99-5a23-4257-bdf6-7fdd283145c5 completed successfully
2025-12-07 20:53:15.344 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user0@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:15.345 | DEBUG | no-id | Spam trap check cache hit for user0@example.com
2025-12-07 20:53:15.345 | INFO | no-id | 55817ad0-766a-4f9a-a3b7-f549f1bd9a7e | Pre-validation spam trap check | Email: user0@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:15.345 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user2@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:15.345 | DEBUG | no-id | Spam trap check cache hit for user2@example.com
2025-12-07 20:53:15.346 | INFO | no-id | 904c5100-931b-4b8e-b8b0-05e5a87a3c77 | Pre-validation spam trap check | Email: user2@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:15.346 | INFO | no-id | e54ddf2e-d4db-4e76-8d23-17fc76b94ff2 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.350 | INFO | no-id | e54ddf2e-d4db-4e76-8d23-17fc76b94ff2 | Checking spam traps...
2025-12-07 20:53:15.350 | DEBUG | no-id | Spam trap check cache hit for user0@example.com
2025-12-07 20:53:15.350 | INFO | no-id | e54ddf2e-d4db-4e76-8d23-17fc76b94ff2 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.350 | INFO | no-id | a6218e05-973d-4412-92b2-984201d4a607 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.354 | INFO | no-id | a6218e05-973d-4412-92b2-984201d4a607 | Checking spam traps...
2025-12-07 20:53:15.354 | DEBUG | no-id | Spam trap check cache hit for user2@example.com
2025-12-07 20:53:15.354 | INFO | no-id | a6218e05-973d-4412-92b2-984201d4a607 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.355 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user1@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:15.355 | DEBUG | no-id | Spam trap check cache hit for user1@example.com
2025-12-07 20:53:15.355 | INFO | no-id | b5654c0e-abb5-4eff-bc5a-166b8f81df54 | Pre-validation spam trap check | Email: user1@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:15.355 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user4@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:15.356 | DEBUG | no-id | Spam trap check cache hit for user4@example.com
2025-12-07 20:53:15.356 | INFO | no-id | 9b68ba66-338a-47fc-ab32-1cc8d356ea46 | Pre-validation spam trap check | Email: user4@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:15.356 | INFO | no-id | Email validation | User: user-1 | Plan: PREMIUM | Email: user3@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:15.356 | DEBUG | no-id | Spam trap check cache hit for user3@example.com
2025-12-07 20:53:15.356 | INFO | no-id | 455ab0c2-e923-4bf8-bb45-b52e427961b1 | Pre-validation spam trap check | Email: user3@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:15.356 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.356 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.357 | INFO | no-id | c1f5569c-2b84-4e07-a80a-ad19895f2433 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.360 | INFO | no-id | c1f5569c-2b84-4e07-a80a-ad19895f2433 | Checking spam traps...
2025-12-07 20:53:15.360 | DEBUG | no-id | Spam trap check cache hit for user1@example.com
2025-12-07 20:53:15.360 | INFO | no-id | c1f5569c-2b84-4e07-a80a-ad19895f2433 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.360 | INFO | no-id | d73cdc77-2375-4cc5-b34f-52d579bb8207 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.363 | INFO | no-id | d73cdc77-2375-4cc5-b34f-52d579bb8207 | Checking spam traps...
2025-12-07 20:53:15.364 | DEBUG | no-id | Spam trap check cache hit for user4@example.com
2025-12-07 20:53:15.364 | INFO | no-id | d73cdc77-2375-4cc5-b34f-52d579bb8207 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.364 | INFO | no-id | 66929600-6356-43b6-9324-691ea13de156 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.367 | INFO | no-id | 66929600-6356-43b6-9324-691ea13de156 | Checking spam traps...
2025-12-07 20:53:15.367 | DEBUG | no-id | Spam trap check cache hit for user3@example.com
2025-12-07 20:53:15.367 | INFO | no-id | 66929600-6356-43b6-9324-691ea13de156 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.368 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.368 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.368 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.368 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.386 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.402 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.416 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.430 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.650 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:15.650 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:15.651 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.651 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:15.651077Z', 'risk_level': 'low'}
2025-12-07 20:53:15.652 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:15.652 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:15.652 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.652 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:15.652745Z', 'risk_level': 'low'}
2025-12-07 20:53:15.653 | INFO | no-id | [a6218e05-973d-4412-92b2-984201d4a607] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:15.653 | INFO | no-id | a6218e05-973d-4412-92b2-984201d4a607 | Analyzing provider...
2025-12-07 20:53:15.653 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:15.653 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:15.654 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:15.654 | INFO | no-id | [a6218e05-973d-4412-92b2-984201d4a607] Role email check | Is role: False | Type: None
2025-12-07 20:53:15.654 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.654 | DEBUG | no-id | [a6218e05-973d-4412-92b2-984201d4a607] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:15.655 | INFO | no-id | [a6218e05-973d-4412-92b2-984201d4a607] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:15.655 | INFO | no-id | Validation a6218e05-973d-4412-92b2-984201d4a607 completed successfully
2025-12-07 20:53:15.655 | INFO | no-id | [e54ddf2e-d4db-4e76-8d23-17fc76b94ff2] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:15.656 | INFO | no-id | e54ddf2e-d4db-4e76-8d23-17fc76b94ff2 | Analyzing provider...
2025-12-07 20:53:15.656 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:15.656 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:15.656 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:15.656 | INFO | no-id | [e54ddf2e-d4db-4e76-8d23-17fc76b94ff2] Role email check | Is role: False | Type: None
2025-12-07 20:53:15.657 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.657 | DEBUG | no-id | [e54ddf2e-d4db-4e76-8d23-17fc76b94ff2] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:15.657 | INFO | no-id | [e54ddf2e-d4db-4e76-8d23-17fc76b94ff2] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:15.657 | INFO | no-id | Validation e54ddf2e-d4db-4e76-8d23-17fc76b94ff2 completed successfully
2025-12-07 20:53:15.658 | INFO | no-id | Validation 904c5100-931b-4b8e-b8b0-05e5a87a3c77 completed successfully
2025-12-07 20:53:15.661 | INFO | no-id | Validation 55817ad0-766a-4f9a-a3b7-f549f1bd9a7e completed successfully
2025-12-07 20:53:15.662 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:15.662 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:15.662 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.662 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:15.662727Z', 'risk_level': 'low'}
2025-12-07 20:53:15.663 | INFO | no-id | [c1f5569c-2b84-4e07-a80a-ad19895f2433] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:15.663 | INFO | no-id | c1f5569c-2b84-4e07-a80a-ad19895f2433 | Analyzing provider...
2025-12-07 20:53:15.663 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:15.663 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:15.663 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:15.664 | INFO | no-id | [c1f5569c-2b84-4e07-a80a-ad19895f2433] Role email check | Is role: False | Type: None
2025-12-07 20:53:15.664 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.664 | DEBUG | no-id | [c1f5569c-2b84-4e07-a80a-ad19895f2433] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:15.664 | INFO | no-id | [c1f5569c-2b84-4e07-a80a-ad19895f2433] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:15.664 | INFO | no-id | Validation c1f5569c-2b84-4e07-a80a-ad19895f2433 completed successfully
2025-12-07 20:53:15.665 | INFO | no-id | Validation b5654c0e-abb5-4eff-bc5a-166b8f81df54 completed successfully
2025-12-07 20:53:15.670 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:15.670 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:15.670 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.670 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:15.670567Z', 'risk_level': 'low'}
2025-12-07 20:53:15.671 | INFO | no-id | [66929600-6356-43b6-9324-691ea13de156] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:15.671 | INFO | no-id | 66929600-6356-43b6-9324-691ea13de156 | Analyzing provider...
2025-12-07 20:53:15.671 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:15.671 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:15.671 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:15.671 | INFO | no-id | [66929600-6356-43b6-9324-691ea13de156] Role email check | Is role: False | Type: None
2025-12-07 20:53:15.671 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.672 | DEBUG | no-id | [66929600-6356-43b6-9324-691ea13de156] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:15.672 | INFO | no-id | [66929600-6356-43b6-9324-691ea13de156] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:15.672 | INFO | no-id | Validation 66929600-6356-43b6-9324-691ea13de156 completed successfully
2025-12-07 20:53:15.672 | INFO | no-id | Validation 455ab0c2-e923-4bf8-bb45-b52e427961b1 completed successfully
2025-12-07 20:53:15.676 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:15.676 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:15.676 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.676 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:15.676487Z', 'risk_level': 'low'}
2025-12-07 20:53:15.676 | INFO | no-id | [d73cdc77-2375-4cc5-b34f-52d579bb8207] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:15.677 | INFO | no-id | d73cdc77-2375-4cc5-b34f-52d579bb8207 | Analyzing provider...
2025-12-07 20:53:15.677 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:15.677 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:15.677 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:15.677 | INFO | no-id | [d73cdc77-2375-4cc5-b34f-52d579bb8207] Role email check | Is role: False | Type: None
2025-12-07 20:53:15.677 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:15.677 | DEBUG | no-id | [d73cdc77-2375-4cc5-b34f-52d579bb8207] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:15.678 | INFO | no-id | [d73cdc77-2375-4cc5-b34f-52d579bb8207] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:15.678 | INFO | no-id | Validation d73cdc77-2375-4cc5-b34f-52d579bb8207 completed successfully
2025-12-07 20:53:15.678 | INFO | no-id | Validation 9b68ba66-338a-47fc-ab32-1cc8d356ea46 completed successfully
2025-12-07 20:53:15.702 | INFO | no-id | Batch validation requested by: user-1 (Plan: ENTERPRISE)
2025-12-07 20:53:15.703 | INFO | no-id | 397fcf33-f5d6-4b95-8882-f802cd3a0e4f | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.706 | INFO | no-id | 397fcf33-f5d6-4b95-8882-f802cd3a0e4f | Checking spam traps...
2025-12-07 20:53:15.706 | DEBUG | no-id | Spam trap check cache hit for user0@example.com
2025-12-07 20:53:15.706 | INFO | no-id | 397fcf33-f5d6-4b95-8882-f802cd3a0e4f | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.707 | INFO | no-id | 5e2a0228-ee2c-45c8-b390-f5422663f30e | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.710 | INFO | no-id | 5e2a0228-ee2c-45c8-b390-f5422663f30e | Checking spam traps...
2025-12-07 20:53:15.710 | DEBUG | no-id | Spam trap check cache hit for user1@example.com
2025-12-07 20:53:15.710 | INFO | no-id | 5e2a0228-ee2c-45c8-b390-f5422663f30e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.710 | INFO | no-id | 7c67d68e-368a-445d-af77-d233d24e6329 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.713 | INFO | no-id | 7c67d68e-368a-445d-af77-d233d24e6329 | Checking spam traps...
2025-12-07 20:53:15.713 | DEBUG | no-id | Spam trap check cache hit for user2@example.com
2025-12-07 20:53:15.713 | INFO | no-id | 7c67d68e-368a-445d-af77-d233d24e6329 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.713 | INFO | no-id | 1c4c17ee-7964-4de9-8da8-426f8e3c3d92 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.716 | INFO | no-id | 1c4c17ee-7964-4de9-8da8-426f8e3c3d92 | Checking spam traps...
2025-12-07 20:53:15.716 | DEBUG | no-id | Spam trap check cache hit for user3@example.com
2025-12-07 20:53:15.716 | INFO | no-id | 1c4c17ee-7964-4de9-8da8-426f8e3c3d92 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.716 | INFO | no-id | 1ff4fd25-6152-43be-8e46-e66b4129f75a | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.719 | INFO | no-id | 1ff4fd25-6152-43be-8e46-e66b4129f75a | Checking spam traps...
2025-12-07 20:53:15.720 | DEBUG | no-id | Spam trap check cache hit for user4@example.com
2025-12-07 20:53:15.720 | INFO | no-id | 1ff4fd25-6152-43be-8e46-e66b4129f75a | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.720 | INFO | no-id | 834d74e6-01ac-45ff-820d-c3cf374a7608 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.723 | INFO | no-id | 834d74e6-01ac-45ff-820d-c3cf374a7608 | Checking spam traps...
2025-12-07 20:53:15.723 | INFO | no-id | 834d74e6-01ac-45ff-820d-c3cf374a7608 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.723 | INFO | no-id | 6b631aa6-f3b1-4779-9858-53abe2b616a5 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.726 | INFO | no-id | 6b631aa6-f3b1-4779-9858-53abe2b616a5 | Checking spam traps...
2025-12-07 20:53:15.726 | INFO | no-id | 6b631aa6-f3b1-4779-9858-53abe2b616a5 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.726 | INFO | no-id | 3a282861-5f46-488b-b950-c3b08efff9df | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.729 | INFO | no-id | 3a282861-5f46-488b-b950-c3b08efff9df | Checking spam traps...
2025-12-07 20:53:15.729 | INFO | no-id | 3a282861-5f46-488b-b950-c3b08efff9df | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.729 | INFO | no-id | f31767b2-1fc0-45ab-83ec-d08c20fe1d70 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.731 | INFO | no-id | f31767b2-1fc0-45ab-83ec-d08c20fe1d70 | Checking spam traps...
2025-12-07 20:53:15.732 | INFO | no-id | f31767b2-1fc0-45ab-83ec-d08c20fe1d70 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.732 | INFO | no-id | 7c825a1e-f1db-42a4-9ffa-3e290c7d9be0 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:15.734 | INFO | no-id | 7c825a1e-f1db-42a4-9ffa-3e290c7d9be0 | Checking spam traps...
2025-12-07 20:53:15.734 | INFO | no-id | 7c825a1e-f1db-42a4-9ffa-3e290c7d9be0 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:15.735 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.735 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.735 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.735 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.735 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.735 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.735 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.736 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.736 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.736 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:15.736 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.751 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.765 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.780 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.794 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.808 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.823 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.837 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.851 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:15.866 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.099 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.099 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.100 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.100 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.100290Z', 'risk_level': 'low'}
2025-12-07 20:53:16.101 | INFO | no-id | [7c825a1e-f1db-42a4-9ffa-3e290c7d9be0] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.101 | INFO | no-id | 7c825a1e-f1db-42a4-9ffa-3e290c7d9be0 | Analyzing provider...
2025-12-07 20:53:16.101 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.101 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.102 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.102 | INFO | no-id | [7c825a1e-f1db-42a4-9ffa-3e290c7d9be0] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.102 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.102 | DEBUG | no-id | [7c825a1e-f1db-42a4-9ffa-3e290c7d9be0] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.103 | INFO | no-id | [7c825a1e-f1db-42a4-9ffa-3e290c7d9be0] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.103 | INFO | no-id | Validation 7c825a1e-f1db-42a4-9ffa-3e290c7d9be0 completed successfully
2025-12-07 20:53:16.104 | INFO | no-id | 20aad021-3d1d-4cae-8414-45504ebd30db | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.110 | INFO | no-id | 20aad021-3d1d-4cae-8414-45504ebd30db | Checking spam traps...
2025-12-07 20:53:16.111 | INFO | no-id | 20aad021-3d1d-4cae-8414-45504ebd30db | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.111 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.118 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.144 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.144 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.144 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.144 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.144590Z', 'risk_level': 'low'}
2025-12-07 20:53:16.144 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.144 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.145 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.145 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.145084Z', 'risk_level': 'low'}
2025-12-07 20:53:16.145 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.145 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.145 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.145 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.145507Z', 'risk_level': 'low'}
2025-12-07 20:53:16.145 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.145 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.145 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.146 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.145927Z', 'risk_level': 'low'}
2025-12-07 20:53:16.147 | INFO | no-id | [397fcf33-f5d6-4b95-8882-f802cd3a0e4f] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.148 | INFO | no-id | 397fcf33-f5d6-4b95-8882-f802cd3a0e4f | Analyzing provider...
2025-12-07 20:53:16.148 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.148 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.148 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.148 | INFO | no-id | [397fcf33-f5d6-4b95-8882-f802cd3a0e4f] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.148 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.148 | DEBUG | no-id | [397fcf33-f5d6-4b95-8882-f802cd3a0e4f] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.148 | INFO | no-id | [397fcf33-f5d6-4b95-8882-f802cd3a0e4f] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.149 | INFO | no-id | Validation 397fcf33-f5d6-4b95-8882-f802cd3a0e4f completed successfully
2025-12-07 20:53:16.149 | INFO | no-id | [1ff4fd25-6152-43be-8e46-e66b4129f75a] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.149 | INFO | no-id | 1ff4fd25-6152-43be-8e46-e66b4129f75a | Analyzing provider...
2025-12-07 20:53:16.149 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.149 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.149 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.149 | INFO | no-id | [1ff4fd25-6152-43be-8e46-e66b4129f75a] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.150 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.150 | DEBUG | no-id | [1ff4fd25-6152-43be-8e46-e66b4129f75a] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.150 | INFO | no-id | [1ff4fd25-6152-43be-8e46-e66b4129f75a] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.150 | INFO | no-id | Validation 1ff4fd25-6152-43be-8e46-e66b4129f75a completed successfully
2025-12-07 20:53:16.150 | INFO | no-id | [834d74e6-01ac-45ff-820d-c3cf374a7608] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.150 | INFO | no-id | 834d74e6-01ac-45ff-820d-c3cf374a7608 | Analyzing provider...
2025-12-07 20:53:16.150 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.151 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.151 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.151 | INFO | no-id | [834d74e6-01ac-45ff-820d-c3cf374a7608] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.151 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.151 | DEBUG | no-id | [834d74e6-01ac-45ff-820d-c3cf374a7608] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.151 | INFO | no-id | [834d74e6-01ac-45ff-820d-c3cf374a7608] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.151 | INFO | no-id | Validation 834d74e6-01ac-45ff-820d-c3cf374a7608 completed successfully
2025-12-07 20:53:16.151 | INFO | no-id | [7c67d68e-368a-445d-af77-d233d24e6329] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.151 | INFO | no-id | 7c67d68e-368a-445d-af77-d233d24e6329 | Analyzing provider...
2025-12-07 20:53:16.152 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.152 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.152 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.152 | INFO | no-id | [7c67d68e-368a-445d-af77-d233d24e6329] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.152 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.152 | DEBUG | no-id | [7c67d68e-368a-445d-af77-d233d24e6329] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.152 | INFO | no-id | [7c67d68e-368a-445d-af77-d233d24e6329] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.152 | INFO | no-id | Validation 7c67d68e-368a-445d-af77-d233d24e6329 completed successfully
2025-12-07 20:53:16.152 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.153 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.153 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.153 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.153153Z', 'risk_level': 'low'}
2025-12-07 20:53:16.153 | INFO | no-id | b77e0efd-b421-47b2-91f9-21ab40639fba | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.156 | INFO | no-id | b77e0efd-b421-47b2-91f9-21ab40639fba | Checking spam traps...
2025-12-07 20:53:16.156 | INFO | no-id | b77e0efd-b421-47b2-91f9-21ab40639fba | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.156 | INFO | no-id | 47395f92-db34-4f35-9d2e-990fc03f7c7d | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.159 | INFO | no-id | 47395f92-db34-4f35-9d2e-990fc03f7c7d | Checking spam traps...
2025-12-07 20:53:16.159 | INFO | no-id | 47395f92-db34-4f35-9d2e-990fc03f7c7d | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.160 | INFO | no-id | 70a5b2fd-8891-46d8-816f-7f92b87eb556 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.162 | INFO | no-id | 70a5b2fd-8891-46d8-816f-7f92b87eb556 | Checking spam traps...
2025-12-07 20:53:16.163 | INFO | no-id | 70a5b2fd-8891-46d8-816f-7f92b87eb556 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.163 | INFO | no-id | 75868dcc-aac5-4bd4-80d7-a0aef418c9a4 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.165 | INFO | no-id | 75868dcc-aac5-4bd4-80d7-a0aef418c9a4 | Checking spam traps...
2025-12-07 20:53:16.166 | INFO | no-id | 75868dcc-aac5-4bd4-80d7-a0aef418c9a4 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.166 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.166 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.166 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.166 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.166 | INFO | no-id | [1c4c17ee-7964-4de9-8da8-426f8e3c3d92] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.166 | INFO | no-id | 1c4c17ee-7964-4de9-8da8-426f8e3c3d92 | Analyzing provider...
2025-12-07 20:53:16.166 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.167 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.167 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.167 | INFO | no-id | [1c4c17ee-7964-4de9-8da8-426f8e3c3d92] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.167 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.167 | DEBUG | no-id | [1c4c17ee-7964-4de9-8da8-426f8e3c3d92] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.167 | INFO | no-id | [1c4c17ee-7964-4de9-8da8-426f8e3c3d92] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.167 | INFO | no-id | Validation 1c4c17ee-7964-4de9-8da8-426f8e3c3d92 completed successfully
2025-12-07 20:53:16.167 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.167 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.167 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.168 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.167965Z', 'risk_level': 'low'}
2025-12-07 20:53:16.168 | INFO | no-id | e53c2fc9-355e-437a-8d61-6f78550318d8 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.171 | INFO | no-id | e53c2fc9-355e-437a-8d61-6f78550318d8 | Checking spam traps...
2025-12-07 20:53:16.171 | INFO | no-id | e53c2fc9-355e-437a-8d61-6f78550318d8 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.171 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.171 | INFO | no-id | [3a282861-5f46-488b-b950-c3b08efff9df] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.171 | INFO | no-id | 3a282861-5f46-488b-b950-c3b08efff9df | Analyzing provider...
2025-12-07 20:53:16.171 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.171 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.171 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.171 | INFO | no-id | [3a282861-5f46-488b-b950-c3b08efff9df] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.172 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.172 | DEBUG | no-id | [3a282861-5f46-488b-b950-c3b08efff9df] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.172 | INFO | no-id | [3a282861-5f46-488b-b950-c3b08efff9df] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.172 | INFO | no-id | Validation 3a282861-5f46-488b-b950-c3b08efff9df completed successfully
2025-12-07 20:53:16.172 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.188 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.202 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.217 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.231 | INFO | no-id | 9130446e-c292-43da-abda-c5e620ffb420 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.234 | INFO | no-id | 9130446e-c292-43da-abda-c5e620ffb420 | Checking spam traps...
2025-12-07 20:53:16.234 | INFO | no-id | 9130446e-c292-43da-abda-c5e620ffb420 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.239 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.240 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.256 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.271 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.272 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.272 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.272 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.272182Z', 'risk_level': 'low'}
2025-12-07 20:53:16.273 | INFO | no-id | [6b631aa6-f3b1-4779-9858-53abe2b616a5] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.273 | INFO | no-id | 6b631aa6-f3b1-4779-9858-53abe2b616a5 | Analyzing provider...
2025-12-07 20:53:16.273 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.273 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.273 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.273 | INFO | no-id | [6b631aa6-f3b1-4779-9858-53abe2b616a5] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.273 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.273 | DEBUG | no-id | [6b631aa6-f3b1-4779-9858-53abe2b616a5] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.273 | INFO | no-id | [6b631aa6-f3b1-4779-9858-53abe2b616a5] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.274 | INFO | no-id | Validation 6b631aa6-f3b1-4779-9858-53abe2b616a5 completed successfully
2025-12-07 20:53:16.274 | INFO | no-id | ef789865-7e12-40a6-9ac7-aca22fc29b66 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.277 | INFO | no-id | ef789865-7e12-40a6-9ac7-aca22fc29b66 | Checking spam traps...
2025-12-07 20:53:16.277 | INFO | no-id | ef789865-7e12-40a6-9ac7-aca22fc29b66 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.277 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.278 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.488 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.489 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.489 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.489 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.489355Z', 'risk_level': 'low'}
2025-12-07 20:53:16.490 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.490 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.490 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.490 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.490653Z', 'risk_level': 'low'}
2025-12-07 20:53:16.491 | INFO | no-id | [47395f92-db34-4f35-9d2e-990fc03f7c7d] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.491 | INFO | no-id | 47395f92-db34-4f35-9d2e-990fc03f7c7d | Analyzing provider...
2025-12-07 20:53:16.491 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.492 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.492 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.492 | INFO | no-id | [47395f92-db34-4f35-9d2e-990fc03f7c7d] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.492 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.493 | DEBUG | no-id | [47395f92-db34-4f35-9d2e-990fc03f7c7d] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.493 | INFO | no-id | [47395f92-db34-4f35-9d2e-990fc03f7c7d] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.493 | INFO | no-id | Validation 47395f92-db34-4f35-9d2e-990fc03f7c7d completed successfully
2025-12-07 20:53:16.498 | INFO | no-id | e5f2f23f-100c-482c-950e-aa94a397a141 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.503 | INFO | no-id | e5f2f23f-100c-482c-950e-aa94a397a141 | Checking spam traps...
2025-12-07 20:53:16.503 | INFO | no-id | e5f2f23f-100c-482c-950e-aa94a397a141 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.504 | INFO | no-id | [9130446e-c292-43da-abda-c5e620ffb420] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.504 | INFO | no-id | 9130446e-c292-43da-abda-c5e620ffb420 | Analyzing provider...
2025-12-07 20:53:16.504 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.504 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.504 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.504 | INFO | no-id | [9130446e-c292-43da-abda-c5e620ffb420] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.505 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.505 | DEBUG | no-id | [9130446e-c292-43da-abda-c5e620ffb420] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.505 | INFO | no-id | [9130446e-c292-43da-abda-c5e620ffb420] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.505 | INFO | no-id | Validation 9130446e-c292-43da-abda-c5e620ffb420 completed successfully
2025-12-07 20:53:16.506 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.506 | INFO | no-id | 5ff2c1ca-5cdf-47a7-9bd7-a028233d2e42 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.510 | INFO | no-id | 5ff2c1ca-5cdf-47a7-9bd7-a028233d2e42 | Checking spam traps...
2025-12-07 20:53:16.511 | INFO | no-id | 5ff2c1ca-5cdf-47a7-9bd7-a028233d2e42 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.514 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.515 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.515 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.515 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.515 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.515547Z', 'risk_level': 'low'}
2025-12-07 20:53:16.515 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.515 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.516 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.516 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.516054Z', 'risk_level': 'low'}
2025-12-07 20:53:16.516 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.537 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.554 | INFO | no-id | [20aad021-3d1d-4cae-8414-45504ebd30db] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.554 | INFO | no-id | 20aad021-3d1d-4cae-8414-45504ebd30db | Analyzing provider...
2025-12-07 20:53:16.554 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.554 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.554 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.554 | INFO | no-id | [20aad021-3d1d-4cae-8414-45504ebd30db] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.555 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.555 | DEBUG | no-id | [20aad021-3d1d-4cae-8414-45504ebd30db] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.555 | INFO | no-id | [20aad021-3d1d-4cae-8414-45504ebd30db] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.555 | INFO | no-id | Validation 20aad021-3d1d-4cae-8414-45504ebd30db completed successfully
2025-12-07 20:53:16.555 | INFO | no-id | [70a5b2fd-8891-46d8-816f-7f92b87eb556] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.555 | INFO | no-id | 70a5b2fd-8891-46d8-816f-7f92b87eb556 | Analyzing provider...
2025-12-07 20:53:16.555 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.555 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.555 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.555 | INFO | no-id | [70a5b2fd-8891-46d8-816f-7f92b87eb556] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.556 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.556 | DEBUG | no-id | [70a5b2fd-8891-46d8-816f-7f92b87eb556] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.556 | INFO | no-id | [70a5b2fd-8891-46d8-816f-7f92b87eb556] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.556 | INFO | no-id | Validation 70a5b2fd-8891-46d8-816f-7f92b87eb556 completed successfully
2025-12-07 20:53:16.556 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.556 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.556 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.556 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.556721Z', 'risk_level': 'low'}
2025-12-07 20:53:16.556 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.556 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.557 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.557 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.557072Z', 'risk_level': 'low'}
2025-12-07 20:53:16.557 | INFO | no-id | 63942698-8565-447e-8623-fa4a80535f2c | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.560 | INFO | no-id | 63942698-8565-447e-8623-fa4a80535f2c | Checking spam traps...
2025-12-07 20:53:16.560 | INFO | no-id | 63942698-8565-447e-8623-fa4a80535f2c | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.560 | INFO | no-id | c1df4569-a796-4d75-a392-4a3843ba5b61 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.563 | INFO | no-id | c1df4569-a796-4d75-a392-4a3843ba5b61 | Checking spam traps...
2025-12-07 20:53:16.563 | INFO | no-id | c1df4569-a796-4d75-a392-4a3843ba5b61 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.564 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.565 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.565 | INFO | no-id | [ef789865-7e12-40a6-9ac7-aca22fc29b66] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.565 | INFO | no-id | ef789865-7e12-40a6-9ac7-aca22fc29b66 | Analyzing provider...
2025-12-07 20:53:16.565 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.565 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.565 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.565 | INFO | no-id | [ef789865-7e12-40a6-9ac7-aca22fc29b66] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.565 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.565 | DEBUG | no-id | [ef789865-7e12-40a6-9ac7-aca22fc29b66] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.565 | INFO | no-id | [ef789865-7e12-40a6-9ac7-aca22fc29b66] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.566 | INFO | no-id | Validation ef789865-7e12-40a6-9ac7-aca22fc29b66 completed successfully
2025-12-07 20:53:16.566 | INFO | no-id | [75868dcc-aac5-4bd4-80d7-a0aef418c9a4] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.566 | INFO | no-id | 75868dcc-aac5-4bd4-80d7-a0aef418c9a4 | Analyzing provider...
2025-12-07 20:53:16.566 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.566 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.566 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.566 | INFO | no-id | [75868dcc-aac5-4bd4-80d7-a0aef418c9a4] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.566 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.566 | DEBUG | no-id | [75868dcc-aac5-4bd4-80d7-a0aef418c9a4] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.567 | INFO | no-id | [75868dcc-aac5-4bd4-80d7-a0aef418c9a4] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.567 | INFO | no-id | Validation 75868dcc-aac5-4bd4-80d7-a0aef418c9a4 completed successfully
2025-12-07 20:53:16.567 | INFO | no-id | af3019ac-d916-41b8-b79e-7884845a02d8 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.570 | INFO | no-id | af3019ac-d916-41b8-b79e-7884845a02d8 | Checking spam traps...
2025-12-07 20:53:16.570 | INFO | no-id | af3019ac-d916-41b8-b79e-7884845a02d8 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.570 | INFO | no-id | f185656d-ee71-403f-a22f-25ae702bcac7 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.572 | INFO | no-id | f185656d-ee71-403f-a22f-25ae702bcac7 | Checking spam traps...
2025-12-07 20:53:16.573 | INFO | no-id | f185656d-ee71-403f-a22f-25ae702bcac7 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.573 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.573 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.573 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.588 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.603 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.603 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.603 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.603 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.603768Z', 'risk_level': 'low'}
2025-12-07 20:53:16.604 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.618 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.633 | INFO | no-id | [b77e0efd-b421-47b2-91f9-21ab40639fba] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.633 | INFO | no-id | b77e0efd-b421-47b2-91f9-21ab40639fba | Analyzing provider...
2025-12-07 20:53:16.633 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.633 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.633 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.633 | INFO | no-id | [b77e0efd-b421-47b2-91f9-21ab40639fba] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.633 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.633 | DEBUG | no-id | [b77e0efd-b421-47b2-91f9-21ab40639fba] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.634 | INFO | no-id | [b77e0efd-b421-47b2-91f9-21ab40639fba] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.634 | INFO | no-id | Validation b77e0efd-b421-47b2-91f9-21ab40639fba completed successfully
2025-12-07 20:53:16.639 | INFO | no-id | 164d05d5-2a28-4b93-b5e7-7c9a9d75ffb5 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.642 | INFO | no-id | 164d05d5-2a28-4b93-b5e7-7c9a9d75ffb5 | Checking spam traps...
2025-12-07 20:53:16.642 | INFO | no-id | 164d05d5-2a28-4b93-b5e7-7c9a9d75ffb5 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.642 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.643 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.846 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.847 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.847 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.848 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.847801Z', 'risk_level': 'low'}
2025-12-07 20:53:16.848 | INFO | no-id | [5ff2c1ca-5cdf-47a7-9bd7-a028233d2e42] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.848 | INFO | no-id | 5ff2c1ca-5cdf-47a7-9bd7-a028233d2e42 | Analyzing provider...
2025-12-07 20:53:16.849 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.849 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.849 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.849 | INFO | no-id | [5ff2c1ca-5cdf-47a7-9bd7-a028233d2e42] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.850 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.850 | DEBUG | no-id | [5ff2c1ca-5cdf-47a7-9bd7-a028233d2e42] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.850 | INFO | no-id | [5ff2c1ca-5cdf-47a7-9bd7-a028233d2e42] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.850 | INFO | no-id | Validation 5ff2c1ca-5cdf-47a7-9bd7-a028233d2e42 completed successfully
2025-12-07 20:53:16.851 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.851 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.851 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.851 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.851617Z', 'risk_level': 'low'}
2025-12-07 20:53:16.852 | INFO | no-id | 140311a7-4bd7-4a6a-9f19-a0c7c0ee34a9 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.857 | INFO | no-id | 140311a7-4bd7-4a6a-9f19-a0c7c0ee34a9 | Checking spam traps...
2025-12-07 20:53:16.857 | INFO | no-id | 140311a7-4bd7-4a6a-9f19-a0c7c0ee34a9 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.858 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.858 | INFO | no-id | [f185656d-ee71-403f-a22f-25ae702bcac7] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.858 | INFO | no-id | f185656d-ee71-403f-a22f-25ae702bcac7 | Analyzing provider...
2025-12-07 20:53:16.858 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.858 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.858 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.859 | INFO | no-id | [f185656d-ee71-403f-a22f-25ae702bcac7] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.859 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.859 | DEBUG | no-id | [f185656d-ee71-403f-a22f-25ae702bcac7] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.859 | INFO | no-id | [f185656d-ee71-403f-a22f-25ae702bcac7] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.859 | INFO | no-id | Validation f185656d-ee71-403f-a22f-25ae702bcac7 completed successfully
2025-12-07 20:53:16.862 | INFO | no-id | ccc0c012-b17d-4039-b880-920438bab92c | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.866 | INFO | no-id | ccc0c012-b17d-4039-b880-920438bab92c | Checking spam traps...
2025-12-07 20:53:16.866 | INFO | no-id | ccc0c012-b17d-4039-b880-920438bab92c | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.868 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.869 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.890 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.890 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.890 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.890 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.890863Z', 'risk_level': 'low'}
2025-12-07 20:53:16.891 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.909 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.909 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.909 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.909 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.909582Z', 'risk_level': 'low'}
2025-12-07 20:53:16.911 | INFO | no-id | [e5f2f23f-100c-482c-950e-aa94a397a141] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.912 | INFO | no-id | e5f2f23f-100c-482c-950e-aa94a397a141 | Analyzing provider...
2025-12-07 20:53:16.912 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.912 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.912 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.912 | INFO | no-id | [e5f2f23f-100c-482c-950e-aa94a397a141] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.912 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.912 | DEBUG | no-id | [e5f2f23f-100c-482c-950e-aa94a397a141] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.912 | INFO | no-id | [e5f2f23f-100c-482c-950e-aa94a397a141] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.913 | INFO | no-id | Validation e5f2f23f-100c-482c-950e-aa94a397a141 completed successfully
2025-12-07 20:53:16.913 | INFO | no-id | 7de67ac4-e68a-41be-83b0-9a44cd3c740a | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.916 | INFO | no-id | 7de67ac4-e68a-41be-83b0-9a44cd3c740a | Checking spam traps...
2025-12-07 20:53:16.916 | INFO | no-id | 7de67ac4-e68a-41be-83b0-9a44cd3c740a | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.916 | INFO | no-id | [63942698-8565-447e-8623-fa4a80535f2c] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.916 | INFO | no-id | 63942698-8565-447e-8623-fa4a80535f2c | Analyzing provider...
2025-12-07 20:53:16.916 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.916 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.916 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.916 | INFO | no-id | [63942698-8565-447e-8623-fa4a80535f2c] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.916 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.916 | DEBUG | no-id | [63942698-8565-447e-8623-fa4a80535f2c] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.917 | INFO | no-id | [63942698-8565-447e-8623-fa4a80535f2c] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.917 | INFO | no-id | Validation 63942698-8565-447e-8623-fa4a80535f2c completed successfully
2025-12-07 20:53:16.917 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.917 | INFO | no-id | 5447132f-6a85-463b-b138-b2f8afdfc997 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.920 | INFO | no-id | 5447132f-6a85-463b-b138-b2f8afdfc997 | Checking spam traps...
2025-12-07 20:53:16.920 | INFO | no-id | 5447132f-6a85-463b-b138-b2f8afdfc997 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.920 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.920 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:16.921 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:16.921 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.921 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:16.921131Z', 'risk_level': 'low'}
2025-12-07 20:53:16.921 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.936 | INFO | no-id | [164d05d5-2a28-4b93-b5e7-7c9a9d75ffb5] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:16.936 | INFO | no-id | 164d05d5-2a28-4b93-b5e7-7c9a9d75ffb5 | Analyzing provider...
2025-12-07 20:53:16.936 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:16.936 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:16.936 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:16.937 | INFO | no-id | [164d05d5-2a28-4b93-b5e7-7c9a9d75ffb5] Role email check | Is role: False | Type: None
2025-12-07 20:53:16.937 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:16.937 | DEBUG | no-id | [164d05d5-2a28-4b93-b5e7-7c9a9d75ffb5] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:16.937 | INFO | no-id | [164d05d5-2a28-4b93-b5e7-7c9a9d75ffb5] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:16.937 | INFO | no-id | Validation 164d05d5-2a28-4b93-b5e7-7c9a9d75ffb5 completed successfully
2025-12-07 20:53:16.942 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:16.956 | INFO | no-id | ead09633-40da-4549-9814-98691cb4ab26 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:16.959 | INFO | no-id | ead09633-40da-4549-9814-98691cb4ab26 | Checking spam traps...
2025-12-07 20:53:16.959 | INFO | no-id | ead09633-40da-4549-9814-98691cb4ab26 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:16.959 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:16.960 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.026 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.026 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.026 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.026 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.026435Z', 'risk_level': 'low'}
2025-12-07 20:53:17.026 | INFO | no-id | [af3019ac-d916-41b8-b79e-7884845a02d8] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.026 | INFO | no-id | af3019ac-d916-41b8-b79e-7884845a02d8 | Analyzing provider...
2025-12-07 20:53:17.026 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.027 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.027 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.027 | INFO | no-id | [af3019ac-d916-41b8-b79e-7884845a02d8] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.027 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.027 | DEBUG | no-id | [af3019ac-d916-41b8-b79e-7884845a02d8] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.027 | INFO | no-id | [af3019ac-d916-41b8-b79e-7884845a02d8] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.027 | INFO | no-id | Validation af3019ac-d916-41b8-b79e-7884845a02d8 completed successfully
2025-12-07 20:53:17.028 | INFO | no-id | 8907d653-2559-429d-a58e-6d8fa6557c3f | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.030 | INFO | no-id | 8907d653-2559-429d-a58e-6d8fa6557c3f | Checking spam traps...
2025-12-07 20:53:17.031 | INFO | no-id | 8907d653-2559-429d-a58e-6d8fa6557c3f | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.031 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.031 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.110 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.111 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.111 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.111 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.111293Z', 'risk_level': 'low'}
2025-12-07 20:53:17.111 | INFO | no-id | [5e2a0228-ee2c-45c8-b390-f5422663f30e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.111 | INFO | no-id | 5e2a0228-ee2c-45c8-b390-f5422663f30e | Analyzing provider...
2025-12-07 20:53:17.111 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.112 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.112 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.112 | INFO | no-id | [5e2a0228-ee2c-45c8-b390-f5422663f30e] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.112 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.112 | DEBUG | no-id | [5e2a0228-ee2c-45c8-b390-f5422663f30e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.112 | INFO | no-id | [5e2a0228-ee2c-45c8-b390-f5422663f30e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.113 | INFO | no-id | Validation 5e2a0228-ee2c-45c8-b390-f5422663f30e completed successfully
2025-12-07 20:53:17.113 | INFO | no-id | 6cc94881-3616-4815-9bcb-3dc94bb6d255 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.116 | INFO | no-id | 6cc94881-3616-4815-9bcb-3dc94bb6d255 | Checking spam traps...
2025-12-07 20:53:17.117 | INFO | no-id | 6cc94881-3616-4815-9bcb-3dc94bb6d255 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.117 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.117 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.160 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.160 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.160 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.160 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.160792Z', 'risk_level': 'low'}
2025-12-07 20:53:17.161 | INFO | no-id | [f31767b2-1fc0-45ab-83ec-d08c20fe1d70] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.161 | INFO | no-id | f31767b2-1fc0-45ab-83ec-d08c20fe1d70 | Analyzing provider...
2025-12-07 20:53:17.161 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.161 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.161 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.161 | INFO | no-id | [f31767b2-1fc0-45ab-83ec-d08c20fe1d70] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.161 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.161 | DEBUG | no-id | [f31767b2-1fc0-45ab-83ec-d08c20fe1d70] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.161 | INFO | no-id | [f31767b2-1fc0-45ab-83ec-d08c20fe1d70] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.162 | INFO | no-id | Validation f31767b2-1fc0-45ab-83ec-d08c20fe1d70 completed successfully
2025-12-07 20:53:17.162 | INFO | no-id | fdaffb2d-ddf4-459e-b17d-06739c4c504a | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.165 | INFO | no-id | fdaffb2d-ddf4-459e-b17d-06739c4c504a | Checking spam traps...
2025-12-07 20:53:17.165 | INFO | no-id | fdaffb2d-ddf4-459e-b17d-06739c4c504a | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.166 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.166 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.185 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.185 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.185 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.185 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.185517Z', 'risk_level': 'low'}
2025-12-07 20:53:17.185 | INFO | no-id | [140311a7-4bd7-4a6a-9f19-a0c7c0ee34a9] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.185 | INFO | no-id | 140311a7-4bd7-4a6a-9f19-a0c7c0ee34a9 | Analyzing provider...
2025-12-07 20:53:17.185 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.186 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.186 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.186 | INFO | no-id | [140311a7-4bd7-4a6a-9f19-a0c7c0ee34a9] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.186 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.186 | DEBUG | no-id | [140311a7-4bd7-4a6a-9f19-a0c7c0ee34a9] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.186 | INFO | no-id | [140311a7-4bd7-4a6a-9f19-a0c7c0ee34a9] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.186 | INFO | no-id | Validation 140311a7-4bd7-4a6a-9f19-a0c7c0ee34a9 completed successfully
2025-12-07 20:53:17.186 | INFO | no-id | 71f9600c-6338-4551-994d-b03a314f1aa6 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.189 | INFO | no-id | 71f9600c-6338-4551-994d-b03a314f1aa6 | Checking spam traps...
2025-12-07 20:53:17.189 | INFO | no-id | 71f9600c-6338-4551-994d-b03a314f1aa6 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.189 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.191 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.206 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.207 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.207 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.207 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.207098Z', 'risk_level': 'low'}
2025-12-07 20:53:17.208 | INFO | no-id | [7de67ac4-e68a-41be-83b0-9a44cd3c740a] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.208 | INFO | no-id | 7de67ac4-e68a-41be-83b0-9a44cd3c740a | Analyzing provider...
2025-12-07 20:53:17.208 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.208 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.209 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.209 | INFO | no-id | [7de67ac4-e68a-41be-83b0-9a44cd3c740a] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.209 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.209 | DEBUG | no-id | [7de67ac4-e68a-41be-83b0-9a44cd3c740a] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.209 | INFO | no-id | [7de67ac4-e68a-41be-83b0-9a44cd3c740a] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.209 | INFO | no-id | Validation 7de67ac4-e68a-41be-83b0-9a44cd3c740a completed successfully
2025-12-07 20:53:17.210 | INFO | no-id | da45de9d-629b-4c39-9691-bd11f572b957 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.212 | INFO | no-id | da45de9d-629b-4c39-9691-bd11f572b957 | Checking spam traps...
2025-12-07 20:53:17.212 | INFO | no-id | da45de9d-629b-4c39-9691-bd11f572b957 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.212 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.213 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.213 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.213 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.213 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.213282Z', 'risk_level': 'low'}
2025-12-07 20:53:17.213 | INFO | no-id | [ead09633-40da-4549-9814-98691cb4ab26] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.214 | INFO | no-id | ead09633-40da-4549-9814-98691cb4ab26 | Analyzing provider...
2025-12-07 20:53:17.214 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.214 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.214 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.214 | INFO | no-id | [ead09633-40da-4549-9814-98691cb4ab26] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.214 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.214 | DEBUG | no-id | [ead09633-40da-4549-9814-98691cb4ab26] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.214 | INFO | no-id | [ead09633-40da-4549-9814-98691cb4ab26] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.214 | INFO | no-id | Validation ead09633-40da-4549-9814-98691cb4ab26 completed successfully
2025-12-07 20:53:17.215 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.229 | INFO | no-id | bc12070a-55f1-40ad-921c-f6d80afd2a7e | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.231 | INFO | no-id | bc12070a-55f1-40ad-921c-f6d80afd2a7e | Checking spam traps...
2025-12-07 20:53:17.232 | INFO | no-id | bc12070a-55f1-40ad-921c-f6d80afd2a7e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.232 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.235 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.250 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.250 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.250 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.250 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.250461Z', 'risk_level': 'low'}
2025-12-07 20:53:17.251 | INFO | no-id | [5447132f-6a85-463b-b138-b2f8afdfc997] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.251 | INFO | no-id | 5447132f-6a85-463b-b138-b2f8afdfc997 | Analyzing provider...
2025-12-07 20:53:17.251 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.251 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.251 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.251 | INFO | no-id | [5447132f-6a85-463b-b138-b2f8afdfc997] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.251 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.251 | DEBUG | no-id | [5447132f-6a85-463b-b138-b2f8afdfc997] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.251 | INFO | no-id | [5447132f-6a85-463b-b138-b2f8afdfc997] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.252 | INFO | no-id | Validation 5447132f-6a85-463b-b138-b2f8afdfc997 completed successfully
2025-12-07 20:53:17.252 | INFO | no-id | 2930faad-8783-4027-8413-c2269f091b8a | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.254 | INFO | no-id | 2930faad-8783-4027-8413-c2269f091b8a | Checking spam traps...
2025-12-07 20:53:17.254 | INFO | no-id | 2930faad-8783-4027-8413-c2269f091b8a | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.255 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.255 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.276 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.276 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.276 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.276 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.276794Z', 'risk_level': 'low'}
2025-12-07 20:53:17.277 | INFO | no-id | [8907d653-2559-429d-a58e-6d8fa6557c3f] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.277 | INFO | no-id | 8907d653-2559-429d-a58e-6d8fa6557c3f | Analyzing provider...
2025-12-07 20:53:17.277 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.277 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.277 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.277 | INFO | no-id | [8907d653-2559-429d-a58e-6d8fa6557c3f] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.277 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.278 | DEBUG | no-id | [8907d653-2559-429d-a58e-6d8fa6557c3f] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.278 | INFO | no-id | [8907d653-2559-429d-a58e-6d8fa6557c3f] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.278 | INFO | no-id | Validation 8907d653-2559-429d-a58e-6d8fa6557c3f completed successfully
2025-12-07 20:53:17.278 | INFO | no-id | 84030418-20ed-49b4-a69b-9be57700fc3e | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.281 | INFO | no-id | 84030418-20ed-49b4-a69b-9be57700fc3e | Checking spam traps...
2025-12-07 20:53:17.281 | INFO | no-id | 84030418-20ed-49b4-a69b-9be57700fc3e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.281 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.282 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.423 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.423 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.424 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.424 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.424131Z', 'risk_level': 'low'}
2025-12-07 20:53:17.424 | INFO | no-id | [fdaffb2d-ddf4-459e-b17d-06739c4c504a] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.424 | INFO | no-id | fdaffb2d-ddf4-459e-b17d-06739c4c504a | Analyzing provider...
2025-12-07 20:53:17.425 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.425 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.425 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.425 | INFO | no-id | [fdaffb2d-ddf4-459e-b17d-06739c4c504a] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.425 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.425 | DEBUG | no-id | [fdaffb2d-ddf4-459e-b17d-06739c4c504a] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.426 | INFO | no-id | [fdaffb2d-ddf4-459e-b17d-06739c4c504a] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.426 | INFO | no-id | Validation fdaffb2d-ddf4-459e-b17d-06739c4c504a completed successfully
2025-12-07 20:53:17.426 | INFO | no-id | f6afa06b-a4a0-444d-ad9d-754ebf4257ff | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.431 | INFO | no-id | f6afa06b-a4a0-444d-ad9d-754ebf4257ff | Checking spam traps...
2025-12-07 20:53:17.431 | INFO | no-id | f6afa06b-a4a0-444d-ad9d-754ebf4257ff | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.432 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.432 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.457 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.457 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.458 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.458 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.458094Z', 'risk_level': 'low'}
2025-12-07 20:53:17.458 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.458 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.458 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.458 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.458555Z', 'risk_level': 'low'}
2025-12-07 20:53:17.458 | INFO | no-id | [6cc94881-3616-4815-9bcb-3dc94bb6d255] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.458 | INFO | no-id | 6cc94881-3616-4815-9bcb-3dc94bb6d255 | Analyzing provider...
2025-12-07 20:53:17.459 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.459 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.459 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.459 | INFO | no-id | [6cc94881-3616-4815-9bcb-3dc94bb6d255] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.459 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.459 | DEBUG | no-id | [6cc94881-3616-4815-9bcb-3dc94bb6d255] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.459 | INFO | no-id | [6cc94881-3616-4815-9bcb-3dc94bb6d255] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.459 | INFO | no-id | Validation 6cc94881-3616-4815-9bcb-3dc94bb6d255 completed successfully
2025-12-07 20:53:17.460 | INFO | no-id | [71f9600c-6338-4551-994d-b03a314f1aa6] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.460 | INFO | no-id | 71f9600c-6338-4551-994d-b03a314f1aa6 | Analyzing provider...
2025-12-07 20:53:17.460 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.460 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.460 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.460 | INFO | no-id | [71f9600c-6338-4551-994d-b03a314f1aa6] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.460 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.460 | DEBUG | no-id | [71f9600c-6338-4551-994d-b03a314f1aa6] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.460 | INFO | no-id | [71f9600c-6338-4551-994d-b03a314f1aa6] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.461 | INFO | no-id | Validation 71f9600c-6338-4551-994d-b03a314f1aa6 completed successfully
2025-12-07 20:53:17.461 | INFO | no-id | c8f1f32b-203f-416c-8106-93d535f0a5f4 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.464 | INFO | no-id | c8f1f32b-203f-416c-8106-93d535f0a5f4 | Checking spam traps...
2025-12-07 20:53:17.464 | INFO | no-id | c8f1f32b-203f-416c-8106-93d535f0a5f4 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.464 | INFO | no-id | b258274c-8d69-4a8c-a097-7289b064c255 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.467 | INFO | no-id | b258274c-8d69-4a8c-a097-7289b064c255 | Checking spam traps...
2025-12-07 20:53:17.467 | INFO | no-id | b258274c-8d69-4a8c-a097-7289b064c255 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.468 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.468 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.470 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.486 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.502 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.502 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.502 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.502 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.502569Z', 'risk_level': 'low'}
2025-12-07 20:53:17.504 | INFO | no-id | [bc12070a-55f1-40ad-921c-f6d80afd2a7e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.505 | INFO | no-id | bc12070a-55f1-40ad-921c-f6d80afd2a7e | Analyzing provider...
2025-12-07 20:53:17.505 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.505 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.505 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.505 | INFO | no-id | [bc12070a-55f1-40ad-921c-f6d80afd2a7e] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.505 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.505 | DEBUG | no-id | [bc12070a-55f1-40ad-921c-f6d80afd2a7e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.505 | INFO | no-id | [bc12070a-55f1-40ad-921c-f6d80afd2a7e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.505 | INFO | no-id | Validation bc12070a-55f1-40ad-921c-f6d80afd2a7e completed successfully
2025-12-07 20:53:17.506 | INFO | no-id | b98d76ee-a803-423e-beda-0811412b43d2 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.508 | INFO | no-id | b98d76ee-a803-423e-beda-0811412b43d2 | Checking spam traps...
2025-12-07 20:53:17.509 | INFO | no-id | b98d76ee-a803-423e-beda-0811412b43d2 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.509 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.509 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.509 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.509 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.509 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.509846Z', 'risk_level': 'low'}
2025-12-07 20:53:17.510 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.510 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.510 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.510 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.510246Z', 'risk_level': 'low'}
2025-12-07 20:53:17.510 | INFO | no-id | [da45de9d-629b-4c39-9691-bd11f572b957] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.511 | INFO | no-id | da45de9d-629b-4c39-9691-bd11f572b957 | Analyzing provider...
2025-12-07 20:53:17.511 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.511 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.511 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.511 | INFO | no-id | [da45de9d-629b-4c39-9691-bd11f572b957] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.511 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.511 | DEBUG | no-id | [da45de9d-629b-4c39-9691-bd11f572b957] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.511 | INFO | no-id | [da45de9d-629b-4c39-9691-bd11f572b957] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.511 | INFO | no-id | Validation da45de9d-629b-4c39-9691-bd11f572b957 completed successfully
2025-12-07 20:53:17.512 | INFO | no-id | [2930faad-8783-4027-8413-c2269f091b8a] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.512 | INFO | no-id | 2930faad-8783-4027-8413-c2269f091b8a | Analyzing provider...
2025-12-07 20:53:17.512 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.512 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.512 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.512 | INFO | no-id | [2930faad-8783-4027-8413-c2269f091b8a] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.512 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.512 | DEBUG | no-id | [2930faad-8783-4027-8413-c2269f091b8a] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.512 | INFO | no-id | [2930faad-8783-4027-8413-c2269f091b8a] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.513 | INFO | no-id | Validation 2930faad-8783-4027-8413-c2269f091b8a completed successfully
2025-12-07 20:53:17.513 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.527 | INFO | no-id | c2a10e83-c73f-4cdd-84eb-268d334c23fd | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.530 | INFO | no-id | c2a10e83-c73f-4cdd-84eb-268d334c23fd | Checking spam traps...
2025-12-07 20:53:17.530 | INFO | no-id | c2a10e83-c73f-4cdd-84eb-268d334c23fd | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.530 | INFO | no-id | 7bda0d37-d7f3-4846-b4cf-1af20ba508df | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.532 | INFO | no-id | 7bda0d37-d7f3-4846-b4cf-1af20ba508df | Checking spam traps...
2025-12-07 20:53:17.533 | INFO | no-id | 7bda0d37-d7f3-4846-b4cf-1af20ba508df | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.533 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.533 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.543 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.557 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.573 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.573 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.573 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.573 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.573707Z', 'risk_level': 'low'}
2025-12-07 20:53:17.573 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.574 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.574 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.574 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.574091Z', 'risk_level': 'low'}
2025-12-07 20:53:17.575 | INFO | no-id | [84030418-20ed-49b4-a69b-9be57700fc3e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.575 | INFO | no-id | 84030418-20ed-49b4-a69b-9be57700fc3e | Analyzing provider...
2025-12-07 20:53:17.575 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.575 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.575 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.575 | INFO | no-id | [84030418-20ed-49b4-a69b-9be57700fc3e] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.575 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.575 | DEBUG | no-id | [84030418-20ed-49b4-a69b-9be57700fc3e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.575 | INFO | no-id | [84030418-20ed-49b4-a69b-9be57700fc3e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.576 | INFO | no-id | Validation 84030418-20ed-49b4-a69b-9be57700fc3e completed successfully
2025-12-07 20:53:17.576 | INFO | no-id | [e53c2fc9-355e-437a-8d61-6f78550318d8] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.576 | INFO | no-id | e53c2fc9-355e-437a-8d61-6f78550318d8 | Analyzing provider...
2025-12-07 20:53:17.576 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.576 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.576 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.576 | INFO | no-id | [e53c2fc9-355e-437a-8d61-6f78550318d8] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.576 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.576 | DEBUG | no-id | [e53c2fc9-355e-437a-8d61-6f78550318d8] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.576 | INFO | no-id | [e53c2fc9-355e-437a-8d61-6f78550318d8] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.577 | INFO | no-id | Validation e53c2fc9-355e-437a-8d61-6f78550318d8 completed successfully
2025-12-07 20:53:17.577 | INFO | no-id | 21a509f0-9a7a-4f81-a21f-9ab707d18df4 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.580 | INFO | no-id | 21a509f0-9a7a-4f81-a21f-9ab707d18df4 | Checking spam traps...
2025-12-07 20:53:17.580 | INFO | no-id | 21a509f0-9a7a-4f81-a21f-9ab707d18df4 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.580 | INFO | no-id | e89aff54-db7d-4358-bd85-8dcd5cdbce94 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.582 | INFO | no-id | e89aff54-db7d-4358-bd85-8dcd5cdbce94 | Checking spam traps...
2025-12-07 20:53:17.583 | INFO | no-id | e89aff54-db7d-4358-bd85-8dcd5cdbce94 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.583 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.583 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.584 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.599 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.757 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.758 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.758 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.758 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.758507Z', 'risk_level': 'low'}
2025-12-07 20:53:17.759 | INFO | no-id | [f6afa06b-a4a0-444d-ad9d-754ebf4257ff] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.759 | INFO | no-id | f6afa06b-a4a0-444d-ad9d-754ebf4257ff | Analyzing provider...
2025-12-07 20:53:17.759 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.759 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.759 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.759 | INFO | no-id | [f6afa06b-a4a0-444d-ad9d-754ebf4257ff] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.760 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.760 | DEBUG | no-id | [f6afa06b-a4a0-444d-ad9d-754ebf4257ff] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.760 | INFO | no-id | [f6afa06b-a4a0-444d-ad9d-754ebf4257ff] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.760 | INFO | no-id | Validation f6afa06b-a4a0-444d-ad9d-754ebf4257ff completed successfully
2025-12-07 20:53:17.761 | INFO | no-id | 6ada71a6-d801-4fb4-8df5-7f587b1d7b72 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.766 | INFO | no-id | 6ada71a6-d801-4fb4-8df5-7f587b1d7b72 | Checking spam traps...
2025-12-07 20:53:17.766 | INFO | no-id | 6ada71a6-d801-4fb4-8df5-7f587b1d7b72 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.766 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.767 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.792 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.792 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.792 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.792 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.792288Z', 'risk_level': 'low'}
2025-12-07 20:53:17.792 | INFO | no-id | [c8f1f32b-203f-416c-8106-93d535f0a5f4] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.792 | INFO | no-id | c8f1f32b-203f-416c-8106-93d535f0a5f4 | Analyzing provider...
2025-12-07 20:53:17.792 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.792 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.793 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.793 | INFO | no-id | [c8f1f32b-203f-416c-8106-93d535f0a5f4] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.793 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.793 | DEBUG | no-id | [c8f1f32b-203f-416c-8106-93d535f0a5f4] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.793 | INFO | no-id | [c8f1f32b-203f-416c-8106-93d535f0a5f4] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.793 | INFO | no-id | Validation c8f1f32b-203f-416c-8106-93d535f0a5f4 completed successfully
2025-12-07 20:53:17.794 | INFO | no-id | 28d30dfe-d85c-46f1-aa47-fe1f49b6604f | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.797 | INFO | no-id | 28d30dfe-d85c-46f1-aa47-fe1f49b6604f | Checking spam traps...
2025-12-07 20:53:17.797 | INFO | no-id | 28d30dfe-d85c-46f1-aa47-fe1f49b6604f | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.797 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.797 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.819 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.819 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.819 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.819 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.819571Z', 'risk_level': 'low'}
2025-12-07 20:53:17.819 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.819 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.819 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.820 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.819925Z', 'risk_level': 'low'}
2025-12-07 20:53:17.820 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.820 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.820 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.820 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.820258Z', 'risk_level': 'low'}
2025-12-07 20:53:17.820 | INFO | no-id | [b258274c-8d69-4a8c-a097-7289b064c255] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.820 | INFO | no-id | b258274c-8d69-4a8c-a097-7289b064c255 | Analyzing provider...
2025-12-07 20:53:17.821 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.821 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.821 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.821 | INFO | no-id | [b258274c-8d69-4a8c-a097-7289b064c255] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.821 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.821 | DEBUG | no-id | [b258274c-8d69-4a8c-a097-7289b064c255] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.821 | INFO | no-id | [b258274c-8d69-4a8c-a097-7289b064c255] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.821 | INFO | no-id | Validation b258274c-8d69-4a8c-a097-7289b064c255 completed successfully
2025-12-07 20:53:17.821 | INFO | no-id | [7bda0d37-d7f3-4846-b4cf-1af20ba508df] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.821 | INFO | no-id | 7bda0d37-d7f3-4846-b4cf-1af20ba508df | Analyzing provider...
2025-12-07 20:53:17.822 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.822 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.822 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.822 | INFO | no-id | [7bda0d37-d7f3-4846-b4cf-1af20ba508df] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.822 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.822 | DEBUG | no-id | [7bda0d37-d7f3-4846-b4cf-1af20ba508df] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.822 | INFO | no-id | [7bda0d37-d7f3-4846-b4cf-1af20ba508df] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.822 | INFO | no-id | Validation 7bda0d37-d7f3-4846-b4cf-1af20ba508df completed successfully
2025-12-07 20:53:17.822 | INFO | no-id | [c2a10e83-c73f-4cdd-84eb-268d334c23fd] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.822 | INFO | no-id | c2a10e83-c73f-4cdd-84eb-268d334c23fd | Analyzing provider...
2025-12-07 20:53:17.822 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.823 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.823 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.823 | INFO | no-id | [c2a10e83-c73f-4cdd-84eb-268d334c23fd] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.823 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.823 | DEBUG | no-id | [c2a10e83-c73f-4cdd-84eb-268d334c23fd] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.823 | INFO | no-id | [c2a10e83-c73f-4cdd-84eb-268d334c23fd] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.823 | INFO | no-id | Validation c2a10e83-c73f-4cdd-84eb-268d334c23fd completed successfully
2025-12-07 20:53:17.823 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.823 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.824 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.824 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.824022Z', 'risk_level': 'low'}
2025-12-07 20:53:17.825 | INFO | no-id | f445f620-e477-4f93-9526-93fbd3a81991 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.828 | INFO | no-id | f445f620-e477-4f93-9526-93fbd3a81991 | Checking spam traps...
2025-12-07 20:53:17.828 | INFO | no-id | f445f620-e477-4f93-9526-93fbd3a81991 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.828 | INFO | no-id | 561d01bc-7f9b-4548-84ec-319d85831639 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.830 | INFO | no-id | 561d01bc-7f9b-4548-84ec-319d85831639 | Checking spam traps...
2025-12-07 20:53:17.831 | INFO | no-id | 561d01bc-7f9b-4548-84ec-319d85831639 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.831 | INFO | no-id | 7b1bd6f5-d2ef-4e9c-a615-4535a979699b | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.833 | INFO | no-id | 7b1bd6f5-d2ef-4e9c-a615-4535a979699b | Checking spam traps...
2025-12-07 20:53:17.833 | INFO | no-id | 7b1bd6f5-d2ef-4e9c-a615-4535a979699b | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.834 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.834 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.834 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.834 | INFO | no-id | [e89aff54-db7d-4358-bd85-8dcd5cdbce94] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.834 | INFO | no-id | e89aff54-db7d-4358-bd85-8dcd5cdbce94 | Analyzing provider...
2025-12-07 20:53:17.834 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.834 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.834 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.835 | INFO | no-id | [e89aff54-db7d-4358-bd85-8dcd5cdbce94] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.835 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.835 | DEBUG | no-id | [e89aff54-db7d-4358-bd85-8dcd5cdbce94] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.835 | INFO | no-id | [e89aff54-db7d-4358-bd85-8dcd5cdbce94] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.835 | INFO | no-id | Validation e89aff54-db7d-4358-bd85-8dcd5cdbce94 completed successfully
2025-12-07 20:53:17.835 | INFO | no-id | 92b0dcdc-1dfd-40d8-9fcf-0669068d9ad5 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.838 | INFO | no-id | 92b0dcdc-1dfd-40d8-9fcf-0669068d9ad5 | Checking spam traps...
2025-12-07 20:53:17.838 | INFO | no-id | 92b0dcdc-1dfd-40d8-9fcf-0669068d9ad5 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.838 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.838 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.838 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.839 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.839 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.839058Z', 'risk_level': 'low'}
2025-12-07 20:53:17.839 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.853 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.868 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.885 | INFO | no-id | [21a509f0-9a7a-4f81-a21f-9ab707d18df4] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.885 | INFO | no-id | 21a509f0-9a7a-4f81-a21f-9ab707d18df4 | Analyzing provider...
2025-12-07 20:53:17.885 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.885 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.885 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.885 | INFO | no-id | [21a509f0-9a7a-4f81-a21f-9ab707d18df4] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.886 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.886 | DEBUG | no-id | [21a509f0-9a7a-4f81-a21f-9ab707d18df4] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.886 | INFO | no-id | [21a509f0-9a7a-4f81-a21f-9ab707d18df4] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.886 | INFO | no-id | Validation 21a509f0-9a7a-4f81-a21f-9ab707d18df4 completed successfully
2025-12-07 20:53:17.886 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.901 | INFO | no-id | a866b8a2-247a-4c8b-8161-a1c61c678252 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.904 | INFO | no-id | a866b8a2-247a-4c8b-8161-a1c61c678252 | Checking spam traps...
2025-12-07 20:53:17.904 | INFO | no-id | a866b8a2-247a-4c8b-8161-a1c61c678252 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.905 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.905 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.905 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.906 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.906 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.906084Z', 'risk_level': 'low'}
2025-12-07 20:53:17.906 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.921 | INFO | no-id | [b98d76ee-a803-423e-beda-0811412b43d2] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.922 | INFO | no-id | b98d76ee-a803-423e-beda-0811412b43d2 | Analyzing provider...
2025-12-07 20:53:17.922 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.922 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.922 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.922 | INFO | no-id | [b98d76ee-a803-423e-beda-0811412b43d2] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.922 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.922 | DEBUG | no-id | [b98d76ee-a803-423e-beda-0811412b43d2] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.922 | INFO | no-id | [b98d76ee-a803-423e-beda-0811412b43d2] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.923 | INFO | no-id | Validation b98d76ee-a803-423e-beda-0811412b43d2 completed successfully
2025-12-07 20:53:17.923 | INFO | no-id | 512e81f0-d79f-4ddb-b909-8ee6068c0934 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.931 | INFO | no-id | 512e81f0-d79f-4ddb-b909-8ee6068c0934 | Checking spam traps...
2025-12-07 20:53:17.931 | INFO | no-id | 512e81f0-d79f-4ddb-b909-8ee6068c0934 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.932 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.933 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:17.948 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:17.948 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:17.948 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.948 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:17.948581Z', 'risk_level': 'low'}
2025-12-07 20:53:17.949 | INFO | no-id | [c1df4569-a796-4d75-a392-4a3843ba5b61] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:17.949 | INFO | no-id | c1df4569-a796-4d75-a392-4a3843ba5b61 | Analyzing provider...
2025-12-07 20:53:17.949 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:17.949 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:17.949 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:17.949 | INFO | no-id | [c1df4569-a796-4d75-a392-4a3843ba5b61] Role email check | Is role: False | Type: None
2025-12-07 20:53:17.949 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:17.949 | DEBUG | no-id | [c1df4569-a796-4d75-a392-4a3843ba5b61] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:17.950 | INFO | no-id | [c1df4569-a796-4d75-a392-4a3843ba5b61] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:17.950 | INFO | no-id | Validation c1df4569-a796-4d75-a392-4a3843ba5b61 completed successfully
2025-12-07 20:53:17.950 | INFO | no-id | e67f677e-2c18-4ec8-a576-d20f5bca91b1 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:17.953 | INFO | no-id | e67f677e-2c18-4ec8-a576-d20f5bca91b1 | Checking spam traps...
2025-12-07 20:53:17.953 | INFO | no-id | e67f677e-2c18-4ec8-a576-d20f5bca91b1 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:17.953 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:17.953 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.090 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.091 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.091 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.091 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.091383Z', 'risk_level': 'low'}
2025-12-07 20:53:18.091 | INFO | no-id | [6ada71a6-d801-4fb4-8df5-7f587b1d7b72] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.091 | INFO | no-id | 6ada71a6-d801-4fb4-8df5-7f587b1d7b72 | Analyzing provider...
2025-12-07 20:53:18.092 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.092 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.092 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.092 | INFO | no-id | [6ada71a6-d801-4fb4-8df5-7f587b1d7b72] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.092 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.092 | DEBUG | no-id | [6ada71a6-d801-4fb4-8df5-7f587b1d7b72] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.093 | INFO | no-id | [6ada71a6-d801-4fb4-8df5-7f587b1d7b72] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.093 | INFO | no-id | Validation 6ada71a6-d801-4fb4-8df5-7f587b1d7b72 completed successfully
2025-12-07 20:53:18.093 | INFO | no-id | 5a5dc6d0-7fd3-4eae-aa62-37169995cf54 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.098 | INFO | no-id | 5a5dc6d0-7fd3-4eae-aa62-37169995cf54 | Checking spam traps...
2025-12-07 20:53:18.098 | INFO | no-id | 5a5dc6d0-7fd3-4eae-aa62-37169995cf54 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.098 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.099 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.154 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.154 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.154 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.154 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.154623Z', 'risk_level': 'low'}
2025-12-07 20:53:18.155 | INFO | no-id | [7b1bd6f5-d2ef-4e9c-a615-4535a979699b] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.155 | INFO | no-id | 7b1bd6f5-d2ef-4e9c-a615-4535a979699b | Analyzing provider...
2025-12-07 20:53:18.155 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.155 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.155 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.155 | INFO | no-id | [7b1bd6f5-d2ef-4e9c-a615-4535a979699b] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.155 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.156 | DEBUG | no-id | [7b1bd6f5-d2ef-4e9c-a615-4535a979699b] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.156 | INFO | no-id | [7b1bd6f5-d2ef-4e9c-a615-4535a979699b] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.156 | INFO | no-id | Validation 7b1bd6f5-d2ef-4e9c-a615-4535a979699b completed successfully
2025-12-07 20:53:18.156 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.156 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.156 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.156 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.156811Z', 'risk_level': 'low'}
2025-12-07 20:53:18.157 | INFO | no-id | 87ac2b3a-9009-4f8b-9208-181d3ec97cd5 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.160 | INFO | no-id | 87ac2b3a-9009-4f8b-9208-181d3ec97cd5 | Checking spam traps...
2025-12-07 20:53:18.160 | INFO | no-id | 87ac2b3a-9009-4f8b-9208-181d3ec97cd5 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.161 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.161 | INFO | no-id | [28d30dfe-d85c-46f1-aa47-fe1f49b6604f] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.161 | INFO | no-id | 28d30dfe-d85c-46f1-aa47-fe1f49b6604f | Analyzing provider...
2025-12-07 20:53:18.161 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.161 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.161 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.161 | INFO | no-id | [28d30dfe-d85c-46f1-aa47-fe1f49b6604f] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.161 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.161 | DEBUG | no-id | [28d30dfe-d85c-46f1-aa47-fe1f49b6604f] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.162 | INFO | no-id | [28d30dfe-d85c-46f1-aa47-fe1f49b6604f] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.162 | INFO | no-id | Validation 28d30dfe-d85c-46f1-aa47-fe1f49b6604f completed successfully
2025-12-07 20:53:18.162 | INFO | no-id | 28584f02-d3bc-4a84-a42b-37e977e8c81e | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.165 | INFO | no-id | 28584f02-d3bc-4a84-a42b-37e977e8c81e | Checking spam traps...
2025-12-07 20:53:18.165 | INFO | no-id | 28584f02-d3bc-4a84-a42b-37e977e8c81e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.166 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.166 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.184 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.205 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.205 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.205 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.205 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.205491Z', 'risk_level': 'low'}
2025-12-07 20:53:18.205 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.205 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.205 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.206 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.205905Z', 'risk_level': 'low'}
2025-12-07 20:53:18.206 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.206 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.206 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.206 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.206327Z', 'risk_level': 'low'}
2025-12-07 20:53:18.206 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.206 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.206 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.206 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.206710Z', 'risk_level': 'low'}
2025-12-07 20:53:18.207 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.207 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.207 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.207 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.207300Z', 'risk_level': 'low'}
2025-12-07 20:53:18.207 | INFO | no-id | [f445f620-e477-4f93-9526-93fbd3a81991] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.207 | INFO | no-id | f445f620-e477-4f93-9526-93fbd3a81991 | Analyzing provider...
2025-12-07 20:53:18.207 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.207 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.207 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.208 | INFO | no-id | [f445f620-e477-4f93-9526-93fbd3a81991] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.208 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.208 | DEBUG | no-id | [f445f620-e477-4f93-9526-93fbd3a81991] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.208 | INFO | no-id | [f445f620-e477-4f93-9526-93fbd3a81991] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.208 | INFO | no-id | Validation f445f620-e477-4f93-9526-93fbd3a81991 completed successfully
2025-12-07 20:53:18.208 | INFO | no-id | [561d01bc-7f9b-4548-84ec-319d85831639] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.208 | INFO | no-id | 561d01bc-7f9b-4548-84ec-319d85831639 | Analyzing provider...
2025-12-07 20:53:18.208 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.208 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.209 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.209 | INFO | no-id | [561d01bc-7f9b-4548-84ec-319d85831639] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.209 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.209 | DEBUG | no-id | [561d01bc-7f9b-4548-84ec-319d85831639] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.209 | INFO | no-id | [561d01bc-7f9b-4548-84ec-319d85831639] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.209 | INFO | no-id | Validation 561d01bc-7f9b-4548-84ec-319d85831639 completed successfully
2025-12-07 20:53:18.209 | INFO | no-id | [92b0dcdc-1dfd-40d8-9fcf-0669068d9ad5] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.209 | INFO | no-id | 92b0dcdc-1dfd-40d8-9fcf-0669068d9ad5 | Analyzing provider...
2025-12-07 20:53:18.209 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.210 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.210 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.210 | INFO | no-id | [92b0dcdc-1dfd-40d8-9fcf-0669068d9ad5] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.210 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.210 | DEBUG | no-id | [92b0dcdc-1dfd-40d8-9fcf-0669068d9ad5] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.210 | INFO | no-id | [92b0dcdc-1dfd-40d8-9fcf-0669068d9ad5] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.210 | INFO | no-id | Validation 92b0dcdc-1dfd-40d8-9fcf-0669068d9ad5 completed successfully
2025-12-07 20:53:18.210 | INFO | no-id | [a866b8a2-247a-4c8b-8161-a1c61c678252] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.211 | INFO | no-id | a866b8a2-247a-4c8b-8161-a1c61c678252 | Analyzing provider...
2025-12-07 20:53:18.211 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.211 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.211 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.211 | INFO | no-id | [a866b8a2-247a-4c8b-8161-a1c61c678252] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.211 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.211 | DEBUG | no-id | [a866b8a2-247a-4c8b-8161-a1c61c678252] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.211 | INFO | no-id | [a866b8a2-247a-4c8b-8161-a1c61c678252] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.211 | INFO | no-id | Validation a866b8a2-247a-4c8b-8161-a1c61c678252 completed successfully
2025-12-07 20:53:18.212 | INFO | no-id | 9a12b925-51fe-4d01-81cc-28b6a1a86ab9 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.214 | INFO | no-id | 9a12b925-51fe-4d01-81cc-28b6a1a86ab9 | Checking spam traps...
2025-12-07 20:53:18.214 | INFO | no-id | 9a12b925-51fe-4d01-81cc-28b6a1a86ab9 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.214 | INFO | no-id | 32d2630b-37ad-400b-adb0-c589f30dee50 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.217 | INFO | no-id | 32d2630b-37ad-400b-adb0-c589f30dee50 | Checking spam traps...
2025-12-07 20:53:18.217 | INFO | no-id | 32d2630b-37ad-400b-adb0-c589f30dee50 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.217 | INFO | no-id | 5896c219-9d52-4086-aad4-d86eed7b0e95 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.220 | INFO | no-id | 5896c219-9d52-4086-aad4-d86eed7b0e95 | Checking spam traps...
2025-12-07 20:53:18.220 | INFO | no-id | 5896c219-9d52-4086-aad4-d86eed7b0e95 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.220 | INFO | no-id | f7502a68-9c18-4e49-8cf8-e82a825a8d1e | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.222 | INFO | no-id | f7502a68-9c18-4e49-8cf8-e82a825a8d1e | Checking spam traps...
2025-12-07 20:53:18.222 | INFO | no-id | f7502a68-9c18-4e49-8cf8-e82a825a8d1e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.223 | INFO | no-id | [e67f677e-2c18-4ec8-a576-d20f5bca91b1] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.223 | INFO | no-id | e67f677e-2c18-4ec8-a576-d20f5bca91b1 | Analyzing provider...
2025-12-07 20:53:18.223 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.223 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.223 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.223 | INFO | no-id | [e67f677e-2c18-4ec8-a576-d20f5bca91b1] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.224 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.224 | DEBUG | no-id | [e67f677e-2c18-4ec8-a576-d20f5bca91b1] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.224 | INFO | no-id | [e67f677e-2c18-4ec8-a576-d20f5bca91b1] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.224 | INFO | no-id | Validation e67f677e-2c18-4ec8-a576-d20f5bca91b1 completed successfully
2025-12-07 20:53:18.224 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.224 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.224 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.224 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.225 | INFO | no-id | 5e8fa876-5cb3-4b58-8415-1db4c2f4eded | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.227 | INFO | no-id | 5e8fa876-5cb3-4b58-8415-1db4c2f4eded | Checking spam traps...
2025-12-07 20:53:18.227 | INFO | no-id | 5e8fa876-5cb3-4b58-8415-1db4c2f4eded | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.227 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.228 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.243 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.257 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.271 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.286 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.301 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.301 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.301 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.302 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.301940Z', 'risk_level': 'low'}
2025-12-07 20:53:18.307 | INFO | no-id | [ccc0c012-b17d-4039-b880-920438bab92c] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.308 | INFO | no-id | ccc0c012-b17d-4039-b880-920438bab92c | Analyzing provider...
2025-12-07 20:53:18.308 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.308 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.308 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.308 | INFO | no-id | [ccc0c012-b17d-4039-b880-920438bab92c] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.308 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.308 | DEBUG | no-id | [ccc0c012-b17d-4039-b880-920438bab92c] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.308 | INFO | no-id | [ccc0c012-b17d-4039-b880-920438bab92c] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.309 | INFO | no-id | Validation ccc0c012-b17d-4039-b880-920438bab92c completed successfully
2025-12-07 20:53:18.309 | INFO | no-id | 3f0d9d9d-3f72-411f-8dff-7418cca6f031 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.312 | INFO | no-id | 3f0d9d9d-3f72-411f-8dff-7418cca6f031 | Checking spam traps...
2025-12-07 20:53:18.312 | INFO | no-id | 3f0d9d9d-3f72-411f-8dff-7418cca6f031 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.312 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.312 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.313 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.313 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.313 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.313121Z', 'risk_level': 'low'}
2025-12-07 20:53:18.313 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.314 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.314 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.314 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.314147Z', 'risk_level': 'low'}
2025-12-07 20:53:18.314 | INFO | no-id | [512e81f0-d79f-4ddb-b909-8ee6068c0934] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.314 | INFO | no-id | 512e81f0-d79f-4ddb-b909-8ee6068c0934 | Analyzing provider...
2025-12-07 20:53:18.314 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.315 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.315 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.315 | INFO | no-id | [512e81f0-d79f-4ddb-b909-8ee6068c0934] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.315 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.315 | DEBUG | no-id | [512e81f0-d79f-4ddb-b909-8ee6068c0934] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.315 | INFO | no-id | [512e81f0-d79f-4ddb-b909-8ee6068c0934] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.315 | INFO | no-id | Validation 512e81f0-d79f-4ddb-b909-8ee6068c0934 completed successfully
2025-12-07 20:53:18.316 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.330 | INFO | no-id | fd41f435-1587-492c-b668-395a3c132bf6 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.333 | INFO | no-id | fd41f435-1587-492c-b668-395a3c132bf6 | Checking spam traps...
2025-12-07 20:53:18.333 | INFO | no-id | fd41f435-1587-492c-b668-395a3c132bf6 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.333 | INFO | no-id | [5a5dc6d0-7fd3-4eae-aa62-37169995cf54] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.333 | INFO | no-id | 5a5dc6d0-7fd3-4eae-aa62-37169995cf54 | Analyzing provider...
2025-12-07 20:53:18.333 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.334 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.334 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.334 | INFO | no-id | [5a5dc6d0-7fd3-4eae-aa62-37169995cf54] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.334 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.334 | DEBUG | no-id | [5a5dc6d0-7fd3-4eae-aa62-37169995cf54] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.334 | INFO | no-id | [5a5dc6d0-7fd3-4eae-aa62-37169995cf54] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.334 | INFO | no-id | Validation 5a5dc6d0-7fd3-4eae-aa62-37169995cf54 completed successfully
2025-12-07 20:53:18.335 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.335 | INFO | no-id | ea149786-7b4a-403f-a01a-cf09924c8841 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.337 | INFO | no-id | ea149786-7b4a-403f-a01a-cf09924c8841 | Checking spam traps...
2025-12-07 20:53:18.337 | INFO | no-id | ea149786-7b4a-403f-a01a-cf09924c8841 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.338 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.340 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.355 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.581 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.582 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.582 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.583 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.582787Z', 'risk_level': 'low'}
2025-12-07 20:53:18.584 | INFO | no-id | [28584f02-d3bc-4a84-a42b-37e977e8c81e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.584 | INFO | no-id | 28584f02-d3bc-4a84-a42b-37e977e8c81e | Analyzing provider...
2025-12-07 20:53:18.584 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.585 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.585 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.585 | INFO | no-id | [28584f02-d3bc-4a84-a42b-37e977e8c81e] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.585 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.586 | DEBUG | no-id | [28584f02-d3bc-4a84-a42b-37e977e8c81e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.586 | INFO | no-id | [28584f02-d3bc-4a84-a42b-37e977e8c81e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.586 | INFO | no-id | Validation 28584f02-d3bc-4a84-a42b-37e977e8c81e completed successfully
2025-12-07 20:53:18.587 | INFO | no-id | ef34266c-77a9-41ad-87b5-beb8378b4e35 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.593 | INFO | no-id | ef34266c-77a9-41ad-87b5-beb8378b4e35 | Checking spam traps...
2025-12-07 20:53:18.593 | INFO | no-id | ef34266c-77a9-41ad-87b5-beb8378b4e35 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.593 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.593 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.594 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.594 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.594025Z', 'risk_level': 'low'}
2025-12-07 20:53:18.594 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.594 | INFO | no-id | [87ac2b3a-9009-4f8b-9208-181d3ec97cd5] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.594 | INFO | no-id | 87ac2b3a-9009-4f8b-9208-181d3ec97cd5 | Analyzing provider...
2025-12-07 20:53:18.595 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.595 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.595 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.595 | INFO | no-id | [87ac2b3a-9009-4f8b-9208-181d3ec97cd5] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.596 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.596 | DEBUG | no-id | [87ac2b3a-9009-4f8b-9208-181d3ec97cd5] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.596 | INFO | no-id | [87ac2b3a-9009-4f8b-9208-181d3ec97cd5] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.596 | INFO | no-id | Validation 87ac2b3a-9009-4f8b-9208-181d3ec97cd5 completed successfully
2025-12-07 20:53:18.599 | INFO | no-id | 186c882c-0c0c-4b77-acf6-343c030ea446 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.603 | INFO | no-id | 186c882c-0c0c-4b77-acf6-343c030ea446 | Checking spam traps...
2025-12-07 20:53:18.604 | INFO | no-id | 186c882c-0c0c-4b77-acf6-343c030ea446 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.604 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.626 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.627 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.627 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.627 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.627 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.627571Z', 'risk_level': 'low'}
2025-12-07 20:53:18.633 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.652 | INFO | no-id | [5e8fa876-5cb3-4b58-8415-1db4c2f4eded] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.652 | INFO | no-id | 5e8fa876-5cb3-4b58-8415-1db4c2f4eded | Analyzing provider...
2025-12-07 20:53:18.652 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.652 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.652 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.652 | INFO | no-id | [5e8fa876-5cb3-4b58-8415-1db4c2f4eded] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.652 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.652 | DEBUG | no-id | [5e8fa876-5cb3-4b58-8415-1db4c2f4eded] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.652 | INFO | no-id | [5e8fa876-5cb3-4b58-8415-1db4c2f4eded] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.653 | INFO | no-id | Validation 5e8fa876-5cb3-4b58-8415-1db4c2f4eded completed successfully
2025-12-07 20:53:18.654 | INFO | no-id | e9c842e0-c44d-4a17-9b6b-2ffccd313d7d | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.656 | INFO | no-id | e9c842e0-c44d-4a17-9b6b-2ffccd313d7d | Checking spam traps...
2025-12-07 20:53:18.656 | INFO | no-id | e9c842e0-c44d-4a17-9b6b-2ffccd313d7d | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.657 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.657 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.657 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.657 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.658 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.657931Z', 'risk_level': 'low'}
2025-12-07 20:53:18.658 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.658 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.658 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.658 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.658274Z', 'risk_level': 'low'}
2025-12-07 20:53:18.658 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.658 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.658 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.658 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.658612Z', 'risk_level': 'low'}
2025-12-07 20:53:18.658 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.658 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.658 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.659 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.658947Z', 'risk_level': 'low'}
2025-12-07 20:53:18.659 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.659 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.659 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.659 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.659275Z', 'risk_level': 'low'}
2025-12-07 20:53:18.659 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.659 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.659 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.659 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.659605Z', 'risk_level': 'low'}
2025-12-07 20:53:18.659 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:18.660 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:18.660 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.660 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:18.660085Z', 'risk_level': 'low'}
2025-12-07 20:53:18.660 | INFO | no-id | [f7502a68-9c18-4e49-8cf8-e82a825a8d1e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.660 | INFO | no-id | f7502a68-9c18-4e49-8cf8-e82a825a8d1e | Analyzing provider...
2025-12-07 20:53:18.660 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.660 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.660 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.660 | INFO | no-id | [f7502a68-9c18-4e49-8cf8-e82a825a8d1e] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.660 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.660 | DEBUG | no-id | [f7502a68-9c18-4e49-8cf8-e82a825a8d1e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.660 | INFO | no-id | [f7502a68-9c18-4e49-8cf8-e82a825a8d1e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.661 | INFO | no-id | Validation f7502a68-9c18-4e49-8cf8-e82a825a8d1e completed successfully
2025-12-07 20:53:18.661 | INFO | no-id | [5896c219-9d52-4086-aad4-d86eed7b0e95] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.661 | INFO | no-id | 5896c219-9d52-4086-aad4-d86eed7b0e95 | Analyzing provider...
2025-12-07 20:53:18.661 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.661 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.661 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.661 | INFO | no-id | [5896c219-9d52-4086-aad4-d86eed7b0e95] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.661 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.661 | DEBUG | no-id | [5896c219-9d52-4086-aad4-d86eed7b0e95] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.661 | INFO | no-id | [5896c219-9d52-4086-aad4-d86eed7b0e95] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.662 | INFO | no-id | Validation 5896c219-9d52-4086-aad4-d86eed7b0e95 completed successfully
2025-12-07 20:53:18.662 | INFO | no-id | [ea149786-7b4a-403f-a01a-cf09924c8841] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.662 | INFO | no-id | ea149786-7b4a-403f-a01a-cf09924c8841 | Analyzing provider...
2025-12-07 20:53:18.662 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.662 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.662 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.662 | INFO | no-id | [ea149786-7b4a-403f-a01a-cf09924c8841] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.662 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.662 | DEBUG | no-id | [ea149786-7b4a-403f-a01a-cf09924c8841] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.662 | INFO | no-id | [ea149786-7b4a-403f-a01a-cf09924c8841] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.663 | INFO | no-id | Validation ea149786-7b4a-403f-a01a-cf09924c8841 completed successfully
2025-12-07 20:53:18.663 | INFO | no-id | [fd41f435-1587-492c-b668-395a3c132bf6] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.663 | INFO | no-id | fd41f435-1587-492c-b668-395a3c132bf6 | Analyzing provider...
2025-12-07 20:53:18.663 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.663 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.663 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.663 | INFO | no-id | [fd41f435-1587-492c-b668-395a3c132bf6] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.663 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.663 | DEBUG | no-id | [fd41f435-1587-492c-b668-395a3c132bf6] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.663 | INFO | no-id | [fd41f435-1587-492c-b668-395a3c132bf6] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.663 | INFO | no-id | Validation fd41f435-1587-492c-b668-395a3c132bf6 completed successfully
2025-12-07 20:53:18.664 | INFO | no-id | [3f0d9d9d-3f72-411f-8dff-7418cca6f031] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.664 | INFO | no-id | 3f0d9d9d-3f72-411f-8dff-7418cca6f031 | Analyzing provider...
2025-12-07 20:53:18.664 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.664 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.664 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.664 | INFO | no-id | [3f0d9d9d-3f72-411f-8dff-7418cca6f031] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.664 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.664 | DEBUG | no-id | [3f0d9d9d-3f72-411f-8dff-7418cca6f031] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.664 | INFO | no-id | [3f0d9d9d-3f72-411f-8dff-7418cca6f031] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.665 | INFO | no-id | Validation 3f0d9d9d-3f72-411f-8dff-7418cca6f031 completed successfully
2025-12-07 20:53:18.665 | INFO | no-id | [32d2630b-37ad-400b-adb0-c589f30dee50] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.665 | INFO | no-id | 32d2630b-37ad-400b-adb0-c589f30dee50 | Analyzing provider...
2025-12-07 20:53:18.665 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.665 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.665 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.665 | INFO | no-id | [32d2630b-37ad-400b-adb0-c589f30dee50] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.665 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.665 | DEBUG | no-id | [32d2630b-37ad-400b-adb0-c589f30dee50] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.666 | INFO | no-id | [32d2630b-37ad-400b-adb0-c589f30dee50] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.666 | INFO | no-id | Validation 32d2630b-37ad-400b-adb0-c589f30dee50 completed successfully
2025-12-07 20:53:18.666 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.681 | INFO | no-id | 56f4ecc6-8e5c-4b73-ba4a-fbb32df08f8d | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.683 | INFO | no-id | 56f4ecc6-8e5c-4b73-ba4a-fbb32df08f8d | Checking spam traps...
2025-12-07 20:53:18.683 | INFO | no-id | 56f4ecc6-8e5c-4b73-ba4a-fbb32df08f8d | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.684 | INFO | no-id | 59285095-4ad4-4d54-a0c4-c5d39f9513cc | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.686 | INFO | no-id | 59285095-4ad4-4d54-a0c4-c5d39f9513cc | Checking spam traps...
2025-12-07 20:53:18.686 | INFO | no-id | 59285095-4ad4-4d54-a0c4-c5d39f9513cc | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.686 | INFO | no-id | b42da629-d6af-42b5-ac86-95be25008d32 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.689 | INFO | no-id | b42da629-d6af-42b5-ac86-95be25008d32 | Checking spam traps...
2025-12-07 20:53:18.689 | INFO | no-id | b42da629-d6af-42b5-ac86-95be25008d32 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.689 | INFO | no-id | a97f2aa9-ba38-49d6-8ecb-b19afd938e36 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.692 | INFO | no-id | a97f2aa9-ba38-49d6-8ecb-b19afd938e36 | Checking spam traps...
2025-12-07 20:53:18.692 | INFO | no-id | a97f2aa9-ba38-49d6-8ecb-b19afd938e36 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.692 | INFO | no-id | cec9d639-2be0-4e4d-97bd-c0a4739e923e | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.694 | INFO | no-id | cec9d639-2be0-4e4d-97bd-c0a4739e923e | Checking spam traps...
2025-12-07 20:53:18.694 | INFO | no-id | cec9d639-2be0-4e4d-97bd-c0a4739e923e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.695 | INFO | no-id | 42218b36-f1fc-4209-930a-06da8609ab1e | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.697 | INFO | no-id | 42218b36-f1fc-4209-930a-06da8609ab1e | Checking spam traps...
2025-12-07 20:53:18.697 | INFO | no-id | 42218b36-f1fc-4209-930a-06da8609ab1e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.697 | INFO | no-id | [9a12b925-51fe-4d01-81cc-28b6a1a86ab9] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:18.697 | INFO | no-id | 9a12b925-51fe-4d01-81cc-28b6a1a86ab9 | Analyzing provider...
2025-12-07 20:53:18.698 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:18.698 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:18.698 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:18.698 | INFO | no-id | [9a12b925-51fe-4d01-81cc-28b6a1a86ab9] Role email check | Is role: False | Type: None
2025-12-07 20:53:18.698 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:18.698 | DEBUG | no-id | [9a12b925-51fe-4d01-81cc-28b6a1a86ab9] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:18.698 | INFO | no-id | [9a12b925-51fe-4d01-81cc-28b6a1a86ab9] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:18.698 | INFO | no-id | Validation 9a12b925-51fe-4d01-81cc-28b6a1a86ab9 completed successfully
2025-12-07 20:53:18.699 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.699 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.699 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.699 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.699 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.699 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.699 | INFO | no-id | 19408733-53f1-448f-b117-21d4957c2a55 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:18.702 | INFO | no-id | 19408733-53f1-448f-b117-21d4957c2a55 | Checking spam traps...
2025-12-07 20:53:18.702 | INFO | no-id | 19408733-53f1-448f-b117-21d4957c2a55 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:18.702 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:18.703 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.717 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.732 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.746 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.761 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.776 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:18.798 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.010 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.010 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.011 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.011 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.011027Z', 'risk_level': 'low'}
2025-12-07 20:53:19.014 | INFO | no-id | [e9c842e0-c44d-4a17-9b6b-2ffccd313d7d] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.014 | INFO | no-id | e9c842e0-c44d-4a17-9b6b-2ffccd313d7d | Analyzing provider...
2025-12-07 20:53:19.014 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.015 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.015 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.015 | INFO | no-id | [e9c842e0-c44d-4a17-9b6b-2ffccd313d7d] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.015 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.015 | DEBUG | no-id | [e9c842e0-c44d-4a17-9b6b-2ffccd313d7d] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.016 | INFO | no-id | [e9c842e0-c44d-4a17-9b6b-2ffccd313d7d] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.016 | INFO | no-id | Validation e9c842e0-c44d-4a17-9b6b-2ffccd313d7d completed successfully
2025-12-07 20:53:19.016 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.017 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.017 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.017 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.017361Z', 'risk_level': 'low'}
2025-12-07 20:53:19.018 | INFO | no-id | 23ed285a-90a1-4365-bc22-ff7cd49bfd01 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.023 | INFO | no-id | 23ed285a-90a1-4365-bc22-ff7cd49bfd01 | Checking spam traps...
2025-12-07 20:53:19.023 | INFO | no-id | 23ed285a-90a1-4365-bc22-ff7cd49bfd01 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.023 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.024 | INFO | no-id | [186c882c-0c0c-4b77-acf6-343c030ea446] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.024 | INFO | no-id | 186c882c-0c0c-4b77-acf6-343c030ea446 | Analyzing provider...
2025-12-07 20:53:19.024 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.024 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.024 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.024 | INFO | no-id | [186c882c-0c0c-4b77-acf6-343c030ea446] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.025 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.025 | DEBUG | no-id | [186c882c-0c0c-4b77-acf6-343c030ea446] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.025 | INFO | no-id | [186c882c-0c0c-4b77-acf6-343c030ea446] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.025 | INFO | no-id | Validation 186c882c-0c0c-4b77-acf6-343c030ea446 completed successfully
2025-12-07 20:53:19.026 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.026 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.026 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.026 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.026319Z', 'risk_level': 'low'}
2025-12-07 20:53:19.026 | INFO | no-id | 800094e9-4471-47cf-99fc-41364de22ff8 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.031 | INFO | no-id | 800094e9-4471-47cf-99fc-41364de22ff8 | Checking spam traps...
2025-12-07 20:53:19.031 | INFO | no-id | 800094e9-4471-47cf-99fc-41364de22ff8 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.036 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.036 | INFO | no-id | [a97f2aa9-ba38-49d6-8ecb-b19afd938e36] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.036 | INFO | no-id | a97f2aa9-ba38-49d6-8ecb-b19afd938e36 | Analyzing provider...
2025-12-07 20:53:19.036 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.036 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.036 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.036 | INFO | no-id | [a97f2aa9-ba38-49d6-8ecb-b19afd938e36] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.037 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.037 | DEBUG | no-id | [a97f2aa9-ba38-49d6-8ecb-b19afd938e36] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.037 | INFO | no-id | [a97f2aa9-ba38-49d6-8ecb-b19afd938e36] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.037 | INFO | no-id | Validation a97f2aa9-ba38-49d6-8ecb-b19afd938e36 completed successfully
2025-12-07 20:53:19.038 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.058 | INFO | no-id | 9da022d9-e4ee-4de1-aa9c-523750221f4a | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.061 | INFO | no-id | 9da022d9-e4ee-4de1-aa9c-523750221f4a | Checking spam traps...
2025-12-07 20:53:19.061 | INFO | no-id | 9da022d9-e4ee-4de1-aa9c-523750221f4a | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.063 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.064 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.081 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.081 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.081 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.081 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.081422Z', 'risk_level': 'low'}
2025-12-07 20:53:19.081 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.081 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.081 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.081 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.081846Z', 'risk_level': 'low'}
2025-12-07 20:53:19.082 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.082 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.082 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.082 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.082189Z', 'risk_level': 'low'}
2025-12-07 20:53:19.084 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.099 | INFO | no-id | [56f4ecc6-8e5c-4b73-ba4a-fbb32df08f8d] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.099 | INFO | no-id | 56f4ecc6-8e5c-4b73-ba4a-fbb32df08f8d | Analyzing provider...
2025-12-07 20:53:19.099 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.099 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.099 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.099 | INFO | no-id | [56f4ecc6-8e5c-4b73-ba4a-fbb32df08f8d] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.099 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.099 | DEBUG | no-id | [56f4ecc6-8e5c-4b73-ba4a-fbb32df08f8d] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.100 | INFO | no-id | [56f4ecc6-8e5c-4b73-ba4a-fbb32df08f8d] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.100 | INFO | no-id | Validation 56f4ecc6-8e5c-4b73-ba4a-fbb32df08f8d completed successfully
2025-12-07 20:53:19.100 | INFO | no-id | [42218b36-f1fc-4209-930a-06da8609ab1e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.100 | INFO | no-id | 42218b36-f1fc-4209-930a-06da8609ab1e | Analyzing provider...
2025-12-07 20:53:19.100 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.100 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.100 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.100 | INFO | no-id | [42218b36-f1fc-4209-930a-06da8609ab1e] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.100 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.101 | DEBUG | no-id | [42218b36-f1fc-4209-930a-06da8609ab1e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.101 | INFO | no-id | [42218b36-f1fc-4209-930a-06da8609ab1e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.101 | INFO | no-id | Validation 42218b36-f1fc-4209-930a-06da8609ab1e completed successfully
2025-12-07 20:53:19.101 | INFO | no-id | [cec9d639-2be0-4e4d-97bd-c0a4739e923e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.101 | INFO | no-id | cec9d639-2be0-4e4d-97bd-c0a4739e923e | Analyzing provider...
2025-12-07 20:53:19.101 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.101 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.101 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.101 | INFO | no-id | [cec9d639-2be0-4e4d-97bd-c0a4739e923e] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.101 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.102 | DEBUG | no-id | [cec9d639-2be0-4e4d-97bd-c0a4739e923e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.102 | INFO | no-id | [cec9d639-2be0-4e4d-97bd-c0a4739e923e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.102 | INFO | no-id | Validation cec9d639-2be0-4e4d-97bd-c0a4739e923e completed successfully
2025-12-07 20:53:19.102 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.102 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.102 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.102 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.102585Z', 'risk_level': 'low'}
2025-12-07 20:53:19.103 | INFO | no-id | 3d497476-58ca-45fc-8db3-5fbea2c6e436 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.105 | INFO | no-id | 3d497476-58ca-45fc-8db3-5fbea2c6e436 | Checking spam traps...
2025-12-07 20:53:19.106 | INFO | no-id | 3d497476-58ca-45fc-8db3-5fbea2c6e436 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.106 | INFO | no-id | 0d55ba90-115f-41b6-bb86-7757288ae4f1 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.108 | INFO | no-id | 0d55ba90-115f-41b6-bb86-7757288ae4f1 | Checking spam traps...
2025-12-07 20:53:19.108 | INFO | no-id | 0d55ba90-115f-41b6-bb86-7757288ae4f1 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.108 | INFO | no-id | 5082fa47-62e3-49ed-a4b7-31a4db5f0e17 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.111 | INFO | no-id | 5082fa47-62e3-49ed-a4b7-31a4db5f0e17 | Checking spam traps...
2025-12-07 20:53:19.111 | INFO | no-id | 5082fa47-62e3-49ed-a4b7-31a4db5f0e17 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.111 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.112 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.112 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.112 | INFO | no-id | [b42da629-d6af-42b5-ac86-95be25008d32] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.112 | INFO | no-id | b42da629-d6af-42b5-ac86-95be25008d32 | Analyzing provider...
2025-12-07 20:53:19.112 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.112 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.112 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.112 | INFO | no-id | [b42da629-d6af-42b5-ac86-95be25008d32] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.112 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.112 | DEBUG | no-id | [b42da629-d6af-42b5-ac86-95be25008d32] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.113 | INFO | no-id | [b42da629-d6af-42b5-ac86-95be25008d32] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.113 | INFO | no-id | Validation b42da629-d6af-42b5-ac86-95be25008d32 completed successfully
2025-12-07 20:53:19.113 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.113 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.113 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.113 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.113563Z', 'risk_level': 'low'}
2025-12-07 20:53:19.115 | INFO | no-id | c962028f-d045-4670-85a6-cd73208c3922 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.117 | INFO | no-id | c962028f-d045-4670-85a6-cd73208c3922 | Checking spam traps...
2025-12-07 20:53:19.118 | INFO | no-id | c962028f-d045-4670-85a6-cd73208c3922 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.118 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.118 | INFO | no-id | [ef34266c-77a9-41ad-87b5-beb8378b4e35] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.118 | INFO | no-id | ef34266c-77a9-41ad-87b5-beb8378b4e35 | Analyzing provider...
2025-12-07 20:53:19.118 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.118 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.119 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.119 | INFO | no-id | [ef34266c-77a9-41ad-87b5-beb8378b4e35] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.119 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.119 | DEBUG | no-id | [ef34266c-77a9-41ad-87b5-beb8378b4e35] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.119 | INFO | no-id | [ef34266c-77a9-41ad-87b5-beb8378b4e35] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.119 | INFO | no-id | Validation ef34266c-77a9-41ad-87b5-beb8378b4e35 completed successfully
2025-12-07 20:53:19.119 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.134 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.149 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.163 | INFO | no-id | b0705f10-3e7d-458d-89db-962ed979ff20 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.165 | INFO | no-id | b0705f10-3e7d-458d-89db-962ed979ff20 | Checking spam traps...
2025-12-07 20:53:19.165 | INFO | no-id | b0705f10-3e7d-458d-89db-962ed979ff20 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.166 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.166 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.167 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.167 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.167 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.167117Z', 'risk_level': 'low'}
2025-12-07 20:53:19.167 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.189 | INFO | no-id | [19408733-53f1-448f-b117-21d4957c2a55] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.189 | INFO | no-id | 19408733-53f1-448f-b117-21d4957c2a55 | Analyzing provider...
2025-12-07 20:53:19.189 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.189 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.189 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.190 | INFO | no-id | [19408733-53f1-448f-b117-21d4957c2a55] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.190 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.190 | DEBUG | no-id | [19408733-53f1-448f-b117-21d4957c2a55] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.190 | INFO | no-id | [19408733-53f1-448f-b117-21d4957c2a55] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.190 | INFO | no-id | Validation 19408733-53f1-448f-b117-21d4957c2a55 completed successfully
2025-12-07 20:53:19.190 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.205 | INFO | no-id | b3adc9bb-dc5d-4ca9-b79f-f53db73599c7 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.208 | INFO | no-id | b3adc9bb-dc5d-4ca9-b79f-f53db73599c7 | Checking spam traps...
2025-12-07 20:53:19.208 | INFO | no-id | b3adc9bb-dc5d-4ca9-b79f-f53db73599c7 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.209 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.209 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.209 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.209 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.209 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.209809Z', 'risk_level': 'low'}
2025-12-07 20:53:19.210 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.225 | INFO | no-id | [59285095-4ad4-4d54-a0c4-c5d39f9513cc] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.225 | INFO | no-id | 59285095-4ad4-4d54-a0c4-c5d39f9513cc | Analyzing provider...
2025-12-07 20:53:19.225 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.225 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.225 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.226 | INFO | no-id | [59285095-4ad4-4d54-a0c4-c5d39f9513cc] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.226 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.226 | DEBUG | no-id | [59285095-4ad4-4d54-a0c4-c5d39f9513cc] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.226 | INFO | no-id | [59285095-4ad4-4d54-a0c4-c5d39f9513cc] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.226 | INFO | no-id | Validation 59285095-4ad4-4d54-a0c4-c5d39f9513cc completed successfully
2025-12-07 20:53:19.227 | INFO | no-id | 7c575388-afeb-4521-8595-1865b697df8a | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.229 | INFO | no-id | 7c575388-afeb-4521-8595-1865b697df8a | Checking spam traps...
2025-12-07 20:53:19.229 | INFO | no-id | 7c575388-afeb-4521-8595-1865b697df8a | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.230 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.231 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.420 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.420 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.420 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.421 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.420967Z', 'risk_level': 'low'}
2025-12-07 20:53:19.421 | INFO | no-id | [23ed285a-90a1-4365-bc22-ff7cd49bfd01] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.422 | INFO | no-id | 23ed285a-90a1-4365-bc22-ff7cd49bfd01 | Analyzing provider...
2025-12-07 20:53:19.422 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.422 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.422 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.423 | INFO | no-id | [23ed285a-90a1-4365-bc22-ff7cd49bfd01] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.423 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.423 | DEBUG | no-id | [23ed285a-90a1-4365-bc22-ff7cd49bfd01] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.423 | INFO | no-id | [23ed285a-90a1-4365-bc22-ff7cd49bfd01] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.424 | INFO | no-id | Validation 23ed285a-90a1-4365-bc22-ff7cd49bfd01 completed successfully
2025-12-07 20:53:19.426 | INFO | no-id | 5476de33-6603-4107-80dc-216655bddfcd | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.431 | INFO | no-id | 5476de33-6603-4107-80dc-216655bddfcd | Checking spam traps...
2025-12-07 20:53:19.432 | INFO | no-id | 5476de33-6603-4107-80dc-216655bddfcd | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.432 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.433 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.458 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.458 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.458 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.458 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.458638Z', 'risk_level': 'low'}
2025-12-07 20:53:19.463 | INFO | no-id | [9da022d9-e4ee-4de1-aa9c-523750221f4a] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.463 | INFO | no-id | 9da022d9-e4ee-4de1-aa9c-523750221f4a | Analyzing provider...
2025-12-07 20:53:19.463 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.463 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.463 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.464 | INFO | no-id | [9da022d9-e4ee-4de1-aa9c-523750221f4a] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.464 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.464 | DEBUG | no-id | [9da022d9-e4ee-4de1-aa9c-523750221f4a] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.464 | INFO | no-id | [9da022d9-e4ee-4de1-aa9c-523750221f4a] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.464 | INFO | no-id | Validation 9da022d9-e4ee-4de1-aa9c-523750221f4a completed successfully
2025-12-07 20:53:19.466 | INFO | no-id | 223b470f-ff08-414b-bcb8-cfef6c0ee073 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.469 | INFO | no-id | 223b470f-ff08-414b-bcb8-cfef6c0ee073 | Checking spam traps...
2025-12-07 20:53:19.469 | INFO | no-id | 223b470f-ff08-414b-bcb8-cfef6c0ee073 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.470 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.470 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.470 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.470 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.470 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.470586Z', 'risk_level': 'low'}
2025-12-07 20:53:19.470 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.470 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.470 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.471 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.470994Z', 'risk_level': 'low'}
2025-12-07 20:53:19.471 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.471 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.471 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.471 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.471465Z', 'risk_level': 'low'}
2025-12-07 20:53:19.471 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.471 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.471 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.471 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.471832Z', 'risk_level': 'low'}
2025-12-07 20:53:19.472 | INFO | no-id | [800094e9-4471-47cf-99fc-41364de22ff8] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.472 | INFO | no-id | 800094e9-4471-47cf-99fc-41364de22ff8 | Analyzing provider...
2025-12-07 20:53:19.472 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.472 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.472 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.473 | INFO | no-id | [800094e9-4471-47cf-99fc-41364de22ff8] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.473 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.473 | DEBUG | no-id | [800094e9-4471-47cf-99fc-41364de22ff8] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.473 | INFO | no-id | [800094e9-4471-47cf-99fc-41364de22ff8] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.473 | INFO | no-id | Validation 800094e9-4471-47cf-99fc-41364de22ff8 completed successfully
2025-12-07 20:53:19.473 | INFO | no-id | [5082fa47-62e3-49ed-a4b7-31a4db5f0e17] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.473 | INFO | no-id | 5082fa47-62e3-49ed-a4b7-31a4db5f0e17 | Analyzing provider...
2025-12-07 20:53:19.473 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.473 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.474 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.474 | INFO | no-id | [5082fa47-62e3-49ed-a4b7-31a4db5f0e17] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.474 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.474 | DEBUG | no-id | [5082fa47-62e3-49ed-a4b7-31a4db5f0e17] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.474 | INFO | no-id | [5082fa47-62e3-49ed-a4b7-31a4db5f0e17] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.474 | INFO | no-id | Validation 5082fa47-62e3-49ed-a4b7-31a4db5f0e17 completed successfully
2025-12-07 20:53:19.474 | INFO | no-id | [b0705f10-3e7d-458d-89db-962ed979ff20] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.474 | INFO | no-id | b0705f10-3e7d-458d-89db-962ed979ff20 | Analyzing provider...
2025-12-07 20:53:19.474 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.475 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.475 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.475 | INFO | no-id | [b0705f10-3e7d-458d-89db-962ed979ff20] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.475 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.475 | DEBUG | no-id | [b0705f10-3e7d-458d-89db-962ed979ff20] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.475 | INFO | no-id | [b0705f10-3e7d-458d-89db-962ed979ff20] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.475 | INFO | no-id | Validation b0705f10-3e7d-458d-89db-962ed979ff20 completed successfully
2025-12-07 20:53:19.475 | INFO | no-id | [c962028f-d045-4670-85a6-cd73208c3922] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.475 | INFO | no-id | c962028f-d045-4670-85a6-cd73208c3922 | Analyzing provider...
2025-12-07 20:53:19.475 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.476 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.476 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.476 | INFO | no-id | [c962028f-d045-4670-85a6-cd73208c3922] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.476 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.476 | DEBUG | no-id | [c962028f-d045-4670-85a6-cd73208c3922] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.476 | INFO | no-id | [c962028f-d045-4670-85a6-cd73208c3922] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.476 | INFO | no-id | Validation c962028f-d045-4670-85a6-cd73208c3922 completed successfully
2025-12-07 20:53:19.476 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.476 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.477 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.477 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.477029Z', 'risk_level': 'low'}
2025-12-07 20:53:19.477 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.493 | INFO | no-id | 4a2f7ca7-341f-443d-ab50-9985e431d5a9 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.496 | INFO | no-id | 4a2f7ca7-341f-443d-ab50-9985e431d5a9 | Checking spam traps...
2025-12-07 20:53:19.496 | INFO | no-id | 4a2f7ca7-341f-443d-ab50-9985e431d5a9 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.496 | INFO | no-id | 36a53906-7554-4d50-ac5e-f5c65874085e | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.499 | INFO | no-id | 36a53906-7554-4d50-ac5e-f5c65874085e | Checking spam traps...
2025-12-07 20:53:19.499 | INFO | no-id | 36a53906-7554-4d50-ac5e-f5c65874085e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.499 | INFO | no-id | f0426d89-e183-4e45-821e-92344f9b9517 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.502 | INFO | no-id | f0426d89-e183-4e45-821e-92344f9b9517 | Checking spam traps...
2025-12-07 20:53:19.502 | INFO | no-id | f0426d89-e183-4e45-821e-92344f9b9517 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.502 | INFO | no-id | 856a95ff-38a2-48a2-b1c0-51edbd82756a | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.504 | INFO | no-id | 856a95ff-38a2-48a2-b1c0-51edbd82756a | Checking spam traps...
2025-12-07 20:53:19.504 | INFO | no-id | 856a95ff-38a2-48a2-b1c0-51edbd82756a | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.505 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.505 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.505 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.505 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.505 | INFO | no-id | [7c575388-afeb-4521-8595-1865b697df8a] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.505 | INFO | no-id | 7c575388-afeb-4521-8595-1865b697df8a | Analyzing provider...
2025-12-07 20:53:19.505 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.505 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.505 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.506 | INFO | no-id | [7c575388-afeb-4521-8595-1865b697df8a] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.506 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.506 | DEBUG | no-id | [7c575388-afeb-4521-8595-1865b697df8a] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.506 | INFO | no-id | [7c575388-afeb-4521-8595-1865b697df8a] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.506 | INFO | no-id | Validation 7c575388-afeb-4521-8595-1865b697df8a completed successfully
2025-12-07 20:53:19.506 | INFO | no-id | d18baf56-5da1-4432-abf1-9c3dc91ca635 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.509 | INFO | no-id | d18baf56-5da1-4432-abf1-9c3dc91ca635 | Checking spam traps...
2025-12-07 20:53:19.509 | INFO | no-id | d18baf56-5da1-4432-abf1-9c3dc91ca635 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.509 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.509 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.524 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.539 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.554 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.570 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.593 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.593 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.593 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.593 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.593411Z', 'risk_level': 'low'}
2025-12-07 20:53:19.593 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.593 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.593 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.594 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.593895Z', 'risk_level': 'low'}
2025-12-07 20:53:19.594 | INFO | no-id | [3d497476-58ca-45fc-8db3-5fbea2c6e436] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.594 | INFO | no-id | 3d497476-58ca-45fc-8db3-5fbea2c6e436 | Analyzing provider...
2025-12-07 20:53:19.594 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.594 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.594 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.594 | INFO | no-id | [3d497476-58ca-45fc-8db3-5fbea2c6e436] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.594 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.594 | DEBUG | no-id | [3d497476-58ca-45fc-8db3-5fbea2c6e436] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.595 | INFO | no-id | [3d497476-58ca-45fc-8db3-5fbea2c6e436] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.595 | INFO | no-id | Validation 3d497476-58ca-45fc-8db3-5fbea2c6e436 completed successfully
2025-12-07 20:53:19.595 | INFO | no-id | [0d55ba90-115f-41b6-bb86-7757288ae4f1] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.595 | INFO | no-id | 0d55ba90-115f-41b6-bb86-7757288ae4f1 | Analyzing provider...
2025-12-07 20:53:19.595 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.595 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.595 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.596 | INFO | no-id | [0d55ba90-115f-41b6-bb86-7757288ae4f1] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.596 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.596 | DEBUG | no-id | [0d55ba90-115f-41b6-bb86-7757288ae4f1] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.596 | INFO | no-id | [0d55ba90-115f-41b6-bb86-7757288ae4f1] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.596 | INFO | no-id | Validation 0d55ba90-115f-41b6-bb86-7757288ae4f1 completed successfully
2025-12-07 20:53:19.597 | INFO | no-id | 67014cb0-6f99-4efc-b764-e868fba99e31 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.599 | INFO | no-id | 67014cb0-6f99-4efc-b764-e868fba99e31 | Checking spam traps...
2025-12-07 20:53:19.599 | INFO | no-id | 67014cb0-6f99-4efc-b764-e868fba99e31 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.600 | INFO | no-id | 2ea124ef-2d82-4b90-bd0a-bc6d7e42aae4 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.602 | INFO | no-id | 2ea124ef-2d82-4b90-bd0a-bc6d7e42aae4 | Checking spam traps...
2025-12-07 20:53:19.602 | INFO | no-id | 2ea124ef-2d82-4b90-bd0a-bc6d7e42aae4 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.602 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.603 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.604 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.619 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.803 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.803 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.804 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.804 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.803988Z', 'risk_level': 'low'}
2025-12-07 20:53:19.804 | INFO | no-id | [5476de33-6603-4107-80dc-216655bddfcd] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.804 | INFO | no-id | 5476de33-6603-4107-80dc-216655bddfcd | Analyzing provider...
2025-12-07 20:53:19.804 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.804 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.805 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.805 | INFO | no-id | [5476de33-6603-4107-80dc-216655bddfcd] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.805 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.805 | DEBUG | no-id | [5476de33-6603-4107-80dc-216655bddfcd] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.805 | INFO | no-id | [5476de33-6603-4107-80dc-216655bddfcd] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.806 | INFO | no-id | Validation 5476de33-6603-4107-80dc-216655bddfcd completed successfully
2025-12-07 20:53:19.806 | INFO | no-id | 6011f159-d6e3-427f-9766-82189f5db659 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.811 | INFO | no-id | 6011f159-d6e3-427f-9766-82189f5db659 | Checking spam traps...
2025-12-07 20:53:19.812 | INFO | no-id | 6011f159-d6e3-427f-9766-82189f5db659 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.812 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.812 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.847 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.847 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.847 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.847 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.847359Z', 'risk_level': 'low'}
2025-12-07 20:53:19.847 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.847 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.847 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.847 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.847783Z', 'risk_level': 'low'}
2025-12-07 20:53:19.848 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.848 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.848 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.848 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.848195Z', 'risk_level': 'low'}
2025-12-07 20:53:19.848 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.848 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.848 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.848 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.848591Z', 'risk_level': 'low'}
2025-12-07 20:53:19.848 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.848 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.848 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.849 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.848973Z', 'risk_level': 'low'}
2025-12-07 20:53:19.850 | INFO | no-id | [223b470f-ff08-414b-bcb8-cfef6c0ee073] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.850 | INFO | no-id | 223b470f-ff08-414b-bcb8-cfef6c0ee073 | Analyzing provider...
2025-12-07 20:53:19.850 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.850 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.851 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.851 | INFO | no-id | [223b470f-ff08-414b-bcb8-cfef6c0ee073] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.851 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.851 | DEBUG | no-id | [223b470f-ff08-414b-bcb8-cfef6c0ee073] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.851 | INFO | no-id | [223b470f-ff08-414b-bcb8-cfef6c0ee073] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.851 | INFO | no-id | Validation 223b470f-ff08-414b-bcb8-cfef6c0ee073 completed successfully
2025-12-07 20:53:19.851 | INFO | no-id | [f0426d89-e183-4e45-821e-92344f9b9517] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.851 | INFO | no-id | f0426d89-e183-4e45-821e-92344f9b9517 | Analyzing provider...
2025-12-07 20:53:19.852 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.852 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.852 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.852 | INFO | no-id | [f0426d89-e183-4e45-821e-92344f9b9517] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.852 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.852 | DEBUG | no-id | [f0426d89-e183-4e45-821e-92344f9b9517] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.852 | INFO | no-id | [f0426d89-e183-4e45-821e-92344f9b9517] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.852 | INFO | no-id | Validation f0426d89-e183-4e45-821e-92344f9b9517 completed successfully
2025-12-07 20:53:19.853 | INFO | no-id | [36a53906-7554-4d50-ac5e-f5c65874085e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.853 | INFO | no-id | 36a53906-7554-4d50-ac5e-f5c65874085e | Analyzing provider...
2025-12-07 20:53:19.853 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.853 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.853 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.853 | INFO | no-id | [36a53906-7554-4d50-ac5e-f5c65874085e] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.853 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.853 | DEBUG | no-id | [36a53906-7554-4d50-ac5e-f5c65874085e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.853 | INFO | no-id | [36a53906-7554-4d50-ac5e-f5c65874085e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.853 | INFO | no-id | Validation 36a53906-7554-4d50-ac5e-f5c65874085e completed successfully
2025-12-07 20:53:19.854 | INFO | no-id | [4a2f7ca7-341f-443d-ab50-9985e431d5a9] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.854 | INFO | no-id | 4a2f7ca7-341f-443d-ab50-9985e431d5a9 | Analyzing provider...
2025-12-07 20:53:19.854 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.854 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.854 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.854 | INFO | no-id | [4a2f7ca7-341f-443d-ab50-9985e431d5a9] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.854 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.854 | DEBUG | no-id | [4a2f7ca7-341f-443d-ab50-9985e431d5a9] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.854 | INFO | no-id | [4a2f7ca7-341f-443d-ab50-9985e431d5a9] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.855 | INFO | no-id | Validation 4a2f7ca7-341f-443d-ab50-9985e431d5a9 completed successfully
2025-12-07 20:53:19.855 | INFO | no-id | [d18baf56-5da1-4432-abf1-9c3dc91ca635] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.855 | INFO | no-id | d18baf56-5da1-4432-abf1-9c3dc91ca635 | Analyzing provider...
2025-12-07 20:53:19.855 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.855 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.855 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.855 | INFO | no-id | [d18baf56-5da1-4432-abf1-9c3dc91ca635] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.855 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.855 | DEBUG | no-id | [d18baf56-5da1-4432-abf1-9c3dc91ca635] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.855 | INFO | no-id | [d18baf56-5da1-4432-abf1-9c3dc91ca635] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.856 | INFO | no-id | Validation d18baf56-5da1-4432-abf1-9c3dc91ca635 completed successfully
2025-12-07 20:53:19.856 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.856 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.856 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.856 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.856418Z', 'risk_level': 'low'}
2025-12-07 20:53:19.856 | INFO | no-id | 5b1b728b-6a14-409e-bb75-23363357ec2e | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.859 | INFO | no-id | 5b1b728b-6a14-409e-bb75-23363357ec2e | Checking spam traps...
2025-12-07 20:53:19.859 | INFO | no-id | 5b1b728b-6a14-409e-bb75-23363357ec2e | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.860 | INFO | no-id | aa14e136-3f05-4cfa-b18b-50947dc9aac5 | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.862 | INFO | no-id | aa14e136-3f05-4cfa-b18b-50947dc9aac5 | Checking spam traps...
2025-12-07 20:53:19.862 | INFO | no-id | aa14e136-3f05-4cfa-b18b-50947dc9aac5 | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.863 | INFO | no-id | 6f6674a0-06f9-4470-8834-1845b842d22c | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.865 | INFO | no-id | 6f6674a0-06f9-4470-8834-1845b842d22c | Checking spam traps...
2025-12-07 20:53:19.865 | INFO | no-id | 6f6674a0-06f9-4470-8834-1845b842d22c | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.866 | INFO | no-id | 5b195fcf-d2ce-42e6-a272-c3e9a47ab48a | Format validation passed | Email: use***@e***.com
2025-12-07 20:53:19.868 | INFO | no-id | 5b195fcf-d2ce-42e6-a272-c3e9a47ab48a | Checking spam traps...
2025-12-07 20:53:19.869 | INFO | no-id | 5b195fcf-d2ce-42e6-a272-c3e9a47ab48a | Spam trap check completed | is_trap=False, confidence=0.0, type=unknown
2025-12-07 20:53:19.869 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.869 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.869 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.869 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.869440Z', 'risk_level': 'low'}
2025-12-07 20:53:19.869 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.869 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.870 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.870 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for use***@e***.com
2025-12-07 20:53:19.870 | INFO | no-id | [856a95ff-38a2-48a2-b1c0-51edbd82756a] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.870 | INFO | no-id | 856a95ff-38a2-48a2-b1c0-51edbd82756a | Analyzing provider...
2025-12-07 20:53:19.870 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.870 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.870 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.871 | INFO | no-id | [856a95ff-38a2-48a2-b1c0-51edbd82756a] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.871 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.871 | DEBUG | no-id | [856a95ff-38a2-48a2-b1c0-51edbd82756a] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.871 | INFO | no-id | [856a95ff-38a2-48a2-b1c0-51edbd82756a] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.871 | INFO | no-id | Validation 856a95ff-38a2-48a2-b1c0-51edbd82756a completed successfully
2025-12-07 20:53:19.871 | INFO | no-id | [67014cb0-6f99-4efc-b764-e868fba99e31] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.872 | INFO | no-id | 67014cb0-6f99-4efc-b764-e868fba99e31 | Analyzing provider...
2025-12-07 20:53:19.872 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.872 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.872 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.872 | INFO | no-id | [67014cb0-6f99-4efc-b764-e868fba99e31] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.872 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.872 | DEBUG | no-id | [67014cb0-6f99-4efc-b764-e868fba99e31] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.872 | INFO | no-id | [67014cb0-6f99-4efc-b764-e868fba99e31] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.873 | INFO | no-id | Validation 67014cb0-6f99-4efc-b764-e868fba99e31 completed successfully
2025-12-07 20:53:19.873 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:19.873 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:19.873 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.873 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:19.873652Z', 'risk_level': 'low'}
2025-12-07 20:53:19.873 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.889 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.904 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.919 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:19.934 | INFO | no-id | [2ea124ef-2d82-4b90-bd0a-bc6d7e42aae4] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:19.934 | INFO | no-id | 2ea124ef-2d82-4b90-bd0a-bc6d7e42aae4 | Analyzing provider...
2025-12-07 20:53:19.934 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:19.934 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:19.934 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:19.934 | INFO | no-id | [2ea124ef-2d82-4b90-bd0a-bc6d7e42aae4] Role email check | Is role: False | Type: None
2025-12-07 20:53:19.934 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:19.934 | DEBUG | no-id | [2ea124ef-2d82-4b90-bd0a-bc6d7e42aae4] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:19.935 | INFO | no-id | [2ea124ef-2d82-4b90-bd0a-bc6d7e42aae4] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:19.935 | INFO | no-id | Validation 2ea124ef-2d82-4b90-bd0a-bc6d7e42aae4 completed successfully
2025-12-07 20:53:20.162 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:20.162 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:20.163 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:20.163 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:20.163078Z', 'risk_level': 'low'}
2025-12-07 20:53:20.164 | INFO | no-id | [5b195fcf-d2ce-42e6-a272-c3e9a47ab48a] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:20.164 | INFO | no-id | 5b195fcf-d2ce-42e6-a272-c3e9a47ab48a | Analyzing provider...
2025-12-07 20:53:20.165 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:20.165 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:20.165 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:20.165 | INFO | no-id | [5b195fcf-d2ce-42e6-a272-c3e9a47ab48a] Role email check | Is role: False | Type: None
2025-12-07 20:53:20.165 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:20.166 | DEBUG | no-id | [5b195fcf-d2ce-42e6-a272-c3e9a47ab48a] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:20.166 | INFO | no-id | [5b195fcf-d2ce-42e6-a272-c3e9a47ab48a] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:20.166 | INFO | no-id | Validation 5b195fcf-d2ce-42e6-a272-c3e9a47ab48a completed successfully
2025-12-07 20:53:20.167 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:20.167 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:20.167 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:20.167 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:20.167558Z', 'risk_level': 'low'}
2025-12-07 20:53:20.169 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:20.169 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:20.169 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:20.170 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:20.169797Z', 'risk_level': 'low'}
2025-12-07 20:53:20.170 | INFO | no-id | [6011f159-d6e3-427f-9766-82189f5db659] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:20.170 | INFO | no-id | 6011f159-d6e3-427f-9766-82189f5db659 | Analyzing provider...
2025-12-07 20:53:20.170 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:20.170 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:20.171 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:20.171 | INFO | no-id | [6011f159-d6e3-427f-9766-82189f5db659] Role email check | Is role: False | Type: None
2025-12-07 20:53:20.171 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:20.171 | DEBUG | no-id | [6011f159-d6e3-427f-9766-82189f5db659] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:20.171 | INFO | no-id | [6011f159-d6e3-427f-9766-82189f5db659] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:20.172 | INFO | no-id | Validation 6011f159-d6e3-427f-9766-82189f5db659 completed successfully
2025-12-07 20:53:20.172 | INFO | no-id | [aa14e136-3f05-4cfa-b18b-50947dc9aac5] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:20.172 | INFO | no-id | aa14e136-3f05-4cfa-b18b-50947dc9aac5 | Analyzing provider...
2025-12-07 20:53:20.172 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:20.172 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:20.173 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:20.173 | INFO | no-id | [aa14e136-3f05-4cfa-b18b-50947dc9aac5] Role email check | Is role: False | Type: None
2025-12-07 20:53:20.173 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:20.173 | DEBUG | no-id | [aa14e136-3f05-4cfa-b18b-50947dc9aac5] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:20.173 | INFO | no-id | [aa14e136-3f05-4cfa-b18b-50947dc9aac5] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:20.174 | INFO | no-id | Validation aa14e136-3f05-4cfa-b18b-50947dc9aac5 completed successfully
2025-12-07 20:53:20.176 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:20.176 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:20.176 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:20.176 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:20.176327Z', 'risk_level': 'low'}
2025-12-07 20:53:20.176 | INFO | no-id | [6f6674a0-06f9-4470-8834-1845b842d22c] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:20.176 | INFO | no-id | 6f6674a0-06f9-4470-8834-1845b842d22c | Analyzing provider...
2025-12-07 20:53:20.177 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:20.177 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:20.177 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:20.177 | INFO | no-id | [6f6674a0-06f9-4470-8834-1845b842d22c] Role email check | Is role: False | Type: None
2025-12-07 20:53:20.177 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:20.177 | DEBUG | no-id | [6f6674a0-06f9-4470-8834-1845b842d22c] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:20.178 | INFO | no-id | [6f6674a0-06f9-4470-8834-1845b842d22c] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:20.178 | INFO | no-id | Validation 6f6674a0-06f9-4470-8834-1845b842d22c completed successfully
2025-12-07 20:53:20.181 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:20.181 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:20.181 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:20.181 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:20.181333Z', 'risk_level': 'low'}
2025-12-07 20:53:20.181 | INFO | no-id | [5b1b728b-6a14-409e-bb75-23363357ec2e] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:20.181 | INFO | no-id | 5b1b728b-6a14-409e-bb75-23363357ec2e | Analyzing provider...
2025-12-07 20:53:20.181 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:20.182 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:20.182 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:20.182 | INFO | no-id | [5b1b728b-6a14-409e-bb75-23363357ec2e] Role email check | Is role: False | Type: None
2025-12-07 20:53:20.182 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:20.182 | DEBUG | no-id | [5b1b728b-6a14-409e-bb75-23363357ec2e] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:20.182 | INFO | no-id | [5b1b728b-6a14-409e-bb75-23363357ec2e] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:20.183 | INFO | no-id | Validation 5b1b728b-6a14-409e-bb75-23363357ec2e completed successfully
2025-12-07 20:53:20.551 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:20.552 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:20.552 | WARNING | no-id | [HIBP] Cache save failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:20.553 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:20.552885Z', 'risk_level': 'low'}
2025-12-07 20:53:20.554 | INFO | no-id | [b3adc9bb-dc5d-4ca9-b79f-f53db73599c7] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:20.554 | INFO | no-id | b3adc9bb-dc5d-4ca9-b79f-f53db73599c7 | Analyzing provider...
2025-12-07 20:53:20.555 | ERROR | no-id | Provider analysis ERROR: test_app.<locals>.ok_analyze_email_provider() got an unexpected keyword argument 'timeout'
2025-12-07 20:53:20.555 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:20.555 | INFO | no-id | Domain validation SUCCESS: example.com | MX: mx.example.com | Detail: ok
2025-12-07 20:53:20.556 | INFO | no-id | [b3adc9bb-dc5d-4ca9-b79f-f53db73599c7] Role email check | Is role: False | Type: None
2025-12-07 20:53:20.556 | DEBUG | no-id | Cache check failed: 'FakeRedis' object has no attribute 'setex'
2025-12-07 20:53:20.557 | DEBUG | no-id | [b3adc9bb-dc5d-4ca9-b79f-f53db73599c7] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:20.557 | INFO | no-id | [b3adc9bb-dc5d-4ca9-b79f-f53db73599c7] Unified risk scoring | Score: 30/100 | Level: medium | Confidence: 85.00% | Factors: {'smtp_failed': 30}
2025-12-07 20:53:20.558 | INFO | no-id | Validation b3adc9bb-dc5d-4ca9-b79f-f53db73599c7 completed successfully
2025-12-07 20:53:20.559 | ERROR | no-id | Error incrementing usage for user-1: 'FakeRedis' object has no attribute 'incrby'
2025-12-07 20:53:20.584 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:53:20.584 | INFO | no-id | Redis available: False
2025-12-07 20:53:20.585 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:20.592 | INFO | no-id | Email validation | User: test_user | Plan: PREMIUM | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:20.595 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:53:20.595 | INFO | no-id | d4e247b2-674e-4b14-9124-a46b8c96680d | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:53:20.645 | INFO | no-id | e9aac228-79bb-4d1a-8cce-fd0e7188adfd | Format validation passed | Email: tes***@e***.com
2025-12-07 20:53:20.648 | INFO | no-id | e9aac228-79bb-4d1a-8cce-fd0e7188adfd | Checking spam traps...
2025-12-07 20:53:20.648 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:53:20.648 | INFO | no-id | e9aac228-79bb-4d1a-8cce-fd0e7188adfd | Spam trap check completed | is_trap=False, confidence=0.5, type=role_based
2025-12-07 20:53:20.648 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for tes***@e***.com
2025-12-07 20:53:20.649 | INFO | no-id | [HIBP] Cache HIT for tes***@e***.com
2025-12-07 20:53:20.649 | WARNING | no-id | [HIBP] Cache error: 'int' object does not support item assignment
2025-12-07 20:53:20.649 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:20.866 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:20.867 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:20.871 | INFO | no-id | [HIBP] Result cached
2025-12-07 20:53:20.871 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:20.867861Z', 'risk_level': 'low'}
2025-12-07 20:53:20.872 | INFO | no-id | [e9aac228-79bb-4d1a-8cce-fd0e7188adfd] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:20.872 | INFO | no-id | e9aac228-79bb-4d1a-8cce-fd0e7188adfd | Analyzing provider...
2025-12-07 20:53:20.873 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:20.874 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.304s due to Task <Task pending name='Task-1867' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:53:21.180 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 20:53:21.183 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.545s due to Task <Task pending name='Task-1867' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:53:21.730 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 20:53:21.733 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.106s due to Task <Task pending name='Task-1867' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:53:22.841 | DEBUG | no-id | Async MX primary failed for example.com: Task <Task pending name='Task-1867' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:53:22.875 | ERROR | no-id | Internal analysis failed: 
2025-12-07 20:53:22.876 | WARNING | no-id | Provider analysis timeout for test@example.com after 5.0s
2025-12-07 20:53:22.877 | INFO | no-id | [e9aac228-79bb-4d1a-8cce-fd0e7188adfd] Provider analysis complete | Provider: generic | SPF: no-spf | DKIM: not_found | Reputation: 0.5
2025-12-07 20:53:22.877 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:22.888 | WARNING | no-id | Domain validation FAILED: example.com | Error: disposable_domain | Detail: Disposable domain: example.com
2025-12-07 20:53:22.891 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:53:22.892 | INFO | no-id | Validation d4e247b2-674e-4b14-9124-a46b8c96680d completed successfully
2025-12-07 20:53:23.083 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch
2025-12-07 20:53:23.083 | INFO | no-id | Redis available: False
2025-12-07 20:53:23.083 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:23.116 | DEBUG | no-id | No Bearer token in Authorization header
2025-12-07 20:53:23.154 | WARNING | no-id | Validation Error | Count: 1 | Details: [{"field": "body.emails", "message": "List should have at most 1000 items after validation, not 500000", "type": "too_long", "input": ["test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test@example.com", "test | Trace: None | Plan: UNKNOWN | Path: /validate/batch
2025-12-07 20:53:23.252 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:53:23.257 | INFO | no-id | Redis available: False
2025-12-07 20:53:23.257 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:23.261 | INFO | no-id | Email validation | User: test_user | Plan: PREMIUM | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:23.262 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:53:23.263 | INFO | no-id | 52771c5e-135c-455f-b5d2-630d5dbed324 | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:53:23.303 | INFO | no-id | 5f3f3cc7-ef5b-45a9-b969-426fc8085965 | Format validation passed | Email: tes***@e***.com
2025-12-07 20:53:23.306 | INFO | no-id | 5f3f3cc7-ef5b-45a9-b969-426fc8085965 | Checking spam traps...
2025-12-07 20:53:23.306 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:53:23.306 | INFO | no-id | 5f3f3cc7-ef5b-45a9-b969-426fc8085965 | Spam trap check completed | is_trap=False, confidence=0.5, type=role_based
2025-12-07 20:53:23.306 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for tes***@e***.com
2025-12-07 20:53:23.307 | INFO | no-id | [HIBP] Cache HIT for tes***@e***.com
2025-12-07 20:53:23.307 | WARNING | no-id | [HIBP] Cache error: 'int' object does not support item assignment
2025-12-07 20:53:23.307 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:23.546 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:23.547 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:23.551 | INFO | no-id | [HIBP] Result cached
2025-12-07 20:53:23.552 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:23.547734Z', 'risk_level': 'low'}
2025-12-07 20:53:23.553 | INFO | no-id | [5f3f3cc7-ef5b-45a9-b969-426fc8085965] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:23.553 | INFO | no-id | 5f3f3cc7-ef5b-45a9-b969-426fc8085965 | Analyzing provider...
2025-12-07 20:53:23.553 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:23.554 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.312s due to Task <Task pending name='Task-1947' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:53:23.868 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 20:53:23.870 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.644s due to Task <Task pending name='Task-1947' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:53:24.516 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 20:53:24.518 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.097s due to Task <Task pending name='Task-1947' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:53:25.556 | ERROR | no-id | Internal analysis failed: 
2025-12-07 20:53:25.558 | WARNING | no-id | Provider analysis timeout for test@example.com after 5.0s
2025-12-07 20:53:25.559 | INFO | no-id | [5f3f3cc7-ef5b-45a9-b969-426fc8085965] Provider analysis complete | Provider: generic | SPF: no-spf | DKIM: not_found | Reputation: 0.5
2025-12-07 20:53:25.559 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:25.571 | WARNING | no-id | Domain validation FAILED: example.com | Error: disposable_domain | Detail: Disposable domain: example.com
2025-12-07 20:53:25.574 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:53:25.575 | INFO | no-id | Validation 52771c5e-135c-455f-b5d2-630d5dbed324 completed successfully
2025-12-07 20:53:25.589 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:53:25.590 | INFO | no-id | Redis available: False
2025-12-07 20:53:25.590 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:25.600 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:53:25.602 | INFO | no-id | Redis available: False
2025-12-07 20:53:25.602 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:25.608 | INFO | no-id | Email validation | User: test_user | Plan: PREMIUM | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:25.608 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:53:25.608 | INFO | no-id | f0b5efb5-399e-4336-9cd1-bb00e7faff6a | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:53:25.656 | INFO | no-id | d808713c-1154-4d7b-b6cc-c1d8bef58009 | Format validation passed | Email: tes***@e***.com
2025-12-07 20:53:25.658 | INFO | no-id | d808713c-1154-4d7b-b6cc-c1d8bef58009 | Checking spam traps...
2025-12-07 20:53:25.659 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:53:25.659 | INFO | no-id | d808713c-1154-4d7b-b6cc-c1d8bef58009 | Spam trap check completed | is_trap=False, confidence=0.5, type=role_based
2025-12-07 20:53:25.659 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for tes***@e***.com
2025-12-07 20:53:25.659 | INFO | no-id | [HIBP] Cache HIT for tes***@e***.com
2025-12-07 20:53:25.660 | WARNING | no-id | [HIBP] Cache error: 'int' object does not support item assignment
2025-12-07 20:53:25.660 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:25.866 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:25.866 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:25.869 | INFO | no-id | [HIBP] Result cached
2025-12-07 20:53:25.870 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:25.867164Z', 'risk_level': 'low'}
2025-12-07 20:53:25.870 | INFO | no-id | [d808713c-1154-4d7b-b6cc-c1d8bef58009] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:25.871 | INFO | no-id | d808713c-1154-4d7b-b6cc-c1d8bef58009 | Analyzing provider...
2025-12-07 20:53:25.871 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:25.872 | DEBUG | no-id | Retry 1/3 for _query_mx_primary sleeping 0.308s due to Task <Task pending name='Task-2018' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:53:26.182 | DEBUG | no-id | Retrying _query_mx_primary attempt 2/3
2025-12-07 20:53:26.184 | DEBUG | no-id | Retry 2/3 for _query_mx_primary sleeping 0.640s due to Task <Task pending name='Task-2018' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:53:26.826 | DEBUG | no-id | Retrying _query_mx_primary attempt 3/3
2025-12-07 20:53:26.828 | DEBUG | no-id | Retry 3/3 for _query_mx_primary sleeping 1.157s due to Task <Task pending name='Task-2018' coro=<get_mx_records() running at /Users/pablo/Desktop/toni/app/validation.py:785> cb=[_release_waiter(<Future pendi...ask_wakeup()]>)() at /opt/anaconda3/lib/python3.11/asyncio/tasks.py:431]> got Future <Future pending> attached to a different loop
2025-12-07 20:53:27.873 | ERROR | no-id | Internal analysis failed: 
2025-12-07 20:53:27.875 | WARNING | no-id | Provider analysis timeout for test@example.com after 5.0s
2025-12-07 20:53:27.876 | INFO | no-id | [d808713c-1154-4d7b-b6cc-c1d8bef58009] Provider analysis complete | Provider: generic | SPF: no-spf | DKIM: not_found | Reputation: 0.5
2025-12-07 20:53:27.876 | INFO | no-id | Validating domain: example.com
2025-12-07 20:53:27.882 | WARNING | no-id | Domain validation FAILED: example.com | Error: disposable_domain | Detail: Disposable domain: example.com
2025-12-07 20:53:27.889 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:53:27.890 | INFO | no-id | Validation f0b5efb5-399e-4336-9cd1-bb00e7faff6a completed successfully
2025-12-07 20:53:27.900 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch
2025-12-07 20:53:27.900 | INFO | no-id | Redis available: False
2025-12-07 20:53:27.901 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:27.908 | INFO | no-id | Batch validation requested by: test_user (Plan: PREMIUM)
2025-12-07 20:53:27.936 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:27.940 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:27.943 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:27.950 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:27.953 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137507.9533062 due to 5 failures
2025-12-07 20:53:27.969 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:53:27.987 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:53:27.999 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:53:28.034 | DEBUG | no-id | [SPF] Found for example.com: v=spf1 include:_spf.google.com ~all...
2025-12-07 20:53:28.037 | DEBUG | no-id | SPF check failed for example.com: No answer
2025-12-07 20:53:28.040 | DEBUG | no-id | [DMARC] Found for example.com: v=DMARC1; p=reject;...
2025-12-07 20:53:28.053 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:53:28.054 | INFO | no-id | [DKIM] Found for example.com with selector 'google'
2025-12-07 20:53:28.056 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:53:28.056 | DEBUG | no-id | [DKIM] Selector 'google' failed: NXDOMAIN
2025-12-07 20:53:28.056 | DEBUG | no-id | [DKIM] Trying selector 'default' for example.com: default._domainkey.example.com
2025-12-07 20:53:28.056 | DEBUG | no-id | [DKIM] Selector 'default' failed: NXDOMAIN
2025-12-07 20:53:28.056 | DEBUG | no-id | [DKIM] Trying selector 'selector1' for example.com: selector1._domainkey.example.com
2025-12-07 20:53:28.057 | DEBUG | no-id | [DKIM] Selector 'selector1' failed: NXDOMAIN
2025-12-07 20:53:28.057 | DEBUG | no-id | [DKIM] Trying selector 'selector2' for example.com: selector2._domainkey.example.com
2025-12-07 20:53:28.057 | DEBUG | no-id | [DKIM] Selector 'selector2' failed: NXDOMAIN
2025-12-07 20:53:28.057 | DEBUG | no-id | [DKIM] Trying selector 's1' for example.com: s1._domainkey.example.com
2025-12-07 20:53:28.057 | DEBUG | no-id | [DKIM] Selector 's1' failed: NXDOMAIN
2025-12-07 20:53:28.058 | DEBUG | no-id | [DKIM] Trying selector 's2' for example.com: s2._domainkey.example.com
2025-12-07 20:53:28.058 | DEBUG | no-id | [DKIM] Selector 's2' failed: NXDOMAIN
2025-12-07 20:53:28.058 | DEBUG | no-id | [DKIM] Trying selector 's201709' for example.com: s201709._domainkey.example.com
2025-12-07 20:53:28.058 | DEBUG | no-id | [DKIM] Selector 's201709' failed: NXDOMAIN
2025-12-07 20:53:28.058 | DEBUG | no-id | [DKIM] Trying selector 's202003' for example.com: s202003._domainkey.example.com
2025-12-07 20:53:28.059 | DEBUG | no-id | [DKIM] Selector 's202003' failed: NXDOMAIN
2025-12-07 20:53:28.059 | DEBUG | no-id | [DKIM] Trying selector 'k1' for example.com: k1._domainkey.example.com
2025-12-07 20:53:28.059 | DEBUG | no-id | [DKIM] Selector 'k1' failed: NXDOMAIN
2025-12-07 20:53:28.059 | DEBUG | no-id | [DKIM] Trying selector 'k2' for example.com: k2._domainkey.example.com
2025-12-07 20:53:28.060 | DEBUG | no-id | [DKIM] Selector 'k2' failed: NXDOMAIN
2025-12-07 20:53:28.060 | DEBUG | no-id | [DKIM] Trying selector 'mail' for example.com: mail._domainkey.example.com
2025-12-07 20:53:28.060 | DEBUG | no-id | [DKIM] Selector 'mail' failed: NXDOMAIN
2025-12-07 20:53:28.060 | DEBUG | no-id | [DKIM] Trying selector 'dkim' for example.com: dkim._domainkey.example.com
2025-12-07 20:53:28.060 | DEBUG | no-id | [DKIM] Selector 'dkim' failed: NXDOMAIN
2025-12-07 20:53:28.060 | DEBUG | no-id | [DKIM] Trying selector 'amazonses' for example.com: amazonses._domainkey.example.com
2025-12-07 20:53:28.061 | DEBUG | no-id | [DKIM] Selector 'amazonses' failed: NXDOMAIN
2025-12-07 20:53:28.061 | DEBUG | no-id | [DKIM] Trying selector 'sendgrid' for example.com: sendgrid._domainkey.example.com
2025-12-07 20:53:28.061 | DEBUG | no-id | [DKIM] Selector 'sendgrid' failed: NXDOMAIN
2025-12-07 20:53:28.061 | DEBUG | no-id | [DKIM] No selectors found for example.com
2025-12-07 20:53:28.074 | DEBUG | no-id | Failed to get cached reputation: could not convert string to float: "<AsyncMock name='mock.get()' id='4822047888'>"
2025-12-07 20:53:28.077 | WARNING | no-id | Provider analysis timeout for user@example.com after 0.1s
2025-12-07 20:53:28.084 | DEBUG | no-id | Redis stats failed: %s
2025-12-07 20:53:28.089 | WARNING | no-id | Spam trap detected (known domain): test@spamtrap.com
2025-12-07 20:53:28.091 | WARNING | no-id | Typo trap detected: test@gmial.com
2025-12-07 20:53:28.094 | WARNING | no-id | Role-based trap detected: abuse@unknown-domain.com | Pattern: abuse | Confidence: 0.95
2025-12-07 20:53:28.096 | DEBUG | no-id | Spam trap check cache hit for user@example.com
2025-12-07 20:53:28.098 | DEBUG | no-id | Spam trap check cache hit for cached@test.com
2025-12-07 20:53:28.106 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:28.110 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:28.121 | WARNING | no-id | Role-based trap detected: abuse@temp-test-mail.com | Pattern: abuse | Confidence: 1.0
2025-12-07 20:53:28.130 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:28.145 | WARNING | no-id | Provider analysis timeout for user@example.com after 0.1s
2025-12-07 20:53:28.150 | DEBUG | no-id | DNS checks failed: unhandled errors in a TaskGroup (1 sub-exception)
2025-12-07 20:53:28.157 | DEBUG | no-id | DNS resolution failed for bad.example.com: DNS error
2025-12-07 20:53:28.160 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:53:28.475 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:53:29.066 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:53:30.265 | WARNING | no-id | WHOIS error for 1.2.3.4: WHOIS error
2025-12-07 20:53:30.278 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:53:30.280 | DEBUG | no-id | [DKIM] Selector 'google' failed: NXDOMAIN
2025-12-07 20:53:30.280 | DEBUG | no-id | [DKIM] Trying selector 'default' for example.com: default._domainkey.example.com
2025-12-07 20:53:30.281 | DEBUG | no-id | [DKIM] Selector 'default' failed: NXDOMAIN
2025-12-07 20:53:30.282 | DEBUG | no-id | [DKIM] Trying selector 'selector1' for example.com: selector1._domainkey.example.com
2025-12-07 20:53:30.282 | DEBUG | no-id | [DKIM] Selector 'selector1' failed: NXDOMAIN
2025-12-07 20:53:30.283 | DEBUG | no-id | [DKIM] Trying selector 'selector2' for example.com: selector2._domainkey.example.com
2025-12-07 20:53:30.284 | DEBUG | no-id | [DKIM] Selector 'selector2' failed: NXDOMAIN
2025-12-07 20:53:30.284 | DEBUG | no-id | [DKIM] Trying selector 's1' for example.com: s1._domainkey.example.com
2025-12-07 20:53:30.285 | DEBUG | no-id | [DKIM] Selector 's1' failed: NXDOMAIN
2025-12-07 20:53:30.285 | DEBUG | no-id | [DKIM] Trying selector 's2' for example.com: s2._domainkey.example.com
2025-12-07 20:53:30.285 | DEBUG | no-id | [DKIM] Selector 's2' failed: NXDOMAIN
2025-12-07 20:53:30.286 | DEBUG | no-id | [DKIM] Trying selector 's201709' for example.com: s201709._domainkey.example.com
2025-12-07 20:53:30.286 | DEBUG | no-id | [DKIM] Selector 's201709' failed: NXDOMAIN
2025-12-07 20:53:30.286 | DEBUG | no-id | [DKIM] Trying selector 's202003' for example.com: s202003._domainkey.example.com
2025-12-07 20:53:30.287 | DEBUG | no-id | [DKIM] Selector 's202003' failed: NXDOMAIN
2025-12-07 20:53:30.287 | DEBUG | no-id | [DKIM] Trying selector 'k1' for example.com: k1._domainkey.example.com
2025-12-07 20:53:30.287 | DEBUG | no-id | [DKIM] Selector 'k1' failed: NXDOMAIN
2025-12-07 20:53:30.288 | DEBUG | no-id | [DKIM] Trying selector 'k2' for example.com: k2._domainkey.example.com
2025-12-07 20:53:30.288 | DEBUG | no-id | [DKIM] Selector 'k2' failed: NXDOMAIN
2025-12-07 20:53:30.288 | DEBUG | no-id | [DKIM] Trying selector 'mail' for example.com: mail._domainkey.example.com
2025-12-07 20:53:30.289 | DEBUG | no-id | [DKIM] Selector 'mail' failed: NXDOMAIN
2025-12-07 20:53:30.289 | DEBUG | no-id | [DKIM] Trying selector 'dkim' for example.com: dkim._domainkey.example.com
2025-12-07 20:53:30.289 | DEBUG | no-id | [DKIM] Selector 'dkim' failed: NXDOMAIN
2025-12-07 20:53:30.290 | DEBUG | no-id | [DKIM] Trying selector 'amazonses' for example.com: amazonses._domainkey.example.com
2025-12-07 20:53:30.290 | DEBUG | no-id | [DKIM] Selector 'amazonses' failed: NXDOMAIN
2025-12-07 20:53:30.290 | DEBUG | no-id | [DKIM] Trying selector 'sendgrid' for example.com: sendgrid._domainkey.example.com
2025-12-07 20:53:30.291 | DEBUG | no-id | [DKIM] Selector 'sendgrid' failed: NXDOMAIN
2025-12-07 20:53:30.291 | DEBUG | no-id | [DKIM] No selectors found for example.com
2025-12-07 20:53:30.306 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137510.3067698 due to 5 failures
2025-12-07 20:53:30.312 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:53:30.324 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:53:30.352 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:53:30.464 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:53:30.688 | DEBUG | no-id | Retry %d/%d for %s, sleeping %.3fs due to %s
2025-12-07 20:53:30.928 | WARNING | no-id | Role-based trap detected: admin@test-temp-service.com | Pattern: admin | Confidence: 0.75
2025-12-07 20:53:30.935 | WARNING | no-id | Role-based trap detected: test@honeypot-trap.com | Pattern: test | Confidence: 0.75
2025-12-07 20:53:30.939 | DEBUG | no-id | SMTP check failed for test@example.com: Can't connect
2025-12-07 20:53:30.943 | DEBUG | no-id | SMTP check failed for test@example.com: Invalid
2025-12-07 20:53:30.948 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:30.952 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:30.952 | ERROR | no-id | Cache SET error for mx:test: Redis down
2025-12-07 20:53:31.011 | DEBUG | no-id | WHOIS blocked for 1.2.3.4 by circuit breaker
2025-12-07 20:53:31.016 | ERROR | no-id | Internal analysis failed: DNS resolution failed
2025-12-07 20:53:31.016 | ERROR | no-id | Provider analysis failed for test@example.com: DNS resolution failed
2025-12-07 20:53:31.021 | ERROR | no-id | Internal analysis failed: 
2025-12-07 20:53:31.022 | ERROR | no-id | Provider analysis failed for test@example.com: 
2025-12-07 20:53:31.033 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:31.037 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:31.041 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:31.045 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137511.045774 due to 5 failures
2025-12-07 20:53:31.047 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137511.047743 due to 5 failures
2025-12-07 20:53:31.047 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137511.047935 due to 6 failures
2025-12-07 20:53:31.048 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137511.048052 due to 7 failures
2025-12-07 20:53:31.048 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137511.048146 due to 8 failures
2025-12-07 20:53:31.048 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137511.0482738 due to 9 failures
2025-12-07 20:53:31.048 | WARNING | no-id | WHOIS: IP 1.2.3.4 blocked until 1765137511.048409 due to 10 failures
2025-12-07 20:53:31.050 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:53:31.053 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:53:31.055 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.312s due to Primary failed
2025-12-07 20:53:31.370 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:53:31.372 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.638s due to Primary failed
2025-12-07 20:53:32.012 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:53:32.014 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.140s due to Primary failed
2025-12-07 20:53:33.156 | DEBUG | no-id | Async TXT primary failed for example.com: Primary failed
2025-12-07 20:53:33.168 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:53:33.229 | DEBUG | no-id | WHOIS blocked for 1.2.3.4 by circuit breaker
2025-12-07 20:53:33.232 | DEBUG | no-id | [SPF] Found for example.com: v=spf1 include:_spf.google.com ~all...
2025-12-07 20:53:33.235 | DEBUG | no-id | SPF check failed for example.com: No answer
2025-12-07 20:53:33.238 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:53:33.238 | INFO | no-id | [DKIM] Found for example.com with selector 'google'
2025-12-07 20:53:33.241 | DEBUG | no-id | [DKIM] Trying selector 'google' for example.com: google._domainkey.example.com
2025-12-07 20:53:33.241 | DEBUG | no-id | [DKIM] Selector 'google' failed: NXDOMAIN
2025-12-07 20:53:33.241 | DEBUG | no-id | [DKIM] Trying selector 'default' for example.com: default._domainkey.example.com
2025-12-07 20:53:33.242 | DEBUG | no-id | [DKIM] Selector 'default' failed: NXDOMAIN
2025-12-07 20:53:33.242 | DEBUG | no-id | [DKIM] Trying selector 'selector1' for example.com: selector1._domainkey.example.com
2025-12-07 20:53:33.242 | DEBUG | no-id | [DKIM] Selector 'selector1' failed: NXDOMAIN
2025-12-07 20:53:33.242 | DEBUG | no-id | [DKIM] Trying selector 'selector2' for example.com: selector2._domainkey.example.com
2025-12-07 20:53:33.242 | DEBUG | no-id | [DKIM] Selector 'selector2' failed: NXDOMAIN
2025-12-07 20:53:33.242 | DEBUG | no-id | [DKIM] Trying selector 's1' for example.com: s1._domainkey.example.com
2025-12-07 20:53:33.243 | DEBUG | no-id | [DKIM] Selector 's1' failed: NXDOMAIN
2025-12-07 20:53:33.243 | DEBUG | no-id | [DKIM] Trying selector 's2' for example.com: s2._domainkey.example.com
2025-12-07 20:53:33.243 | DEBUG | no-id | [DKIM] Selector 's2' failed: NXDOMAIN
2025-12-07 20:53:33.243 | DEBUG | no-id | [DKIM] Trying selector 's201709' for example.com: s201709._domainkey.example.com
2025-12-07 20:53:33.243 | DEBUG | no-id | [DKIM] Selector 's201709' failed: NXDOMAIN
2025-12-07 20:53:33.243 | DEBUG | no-id | [DKIM] Trying selector 's202003' for example.com: s202003._domainkey.example.com
2025-12-07 20:53:33.244 | DEBUG | no-id | [DKIM] Selector 's202003' failed: NXDOMAIN
2025-12-07 20:53:33.244 | DEBUG | no-id | [DKIM] Trying selector 'k1' for example.com: k1._domainkey.example.com
2025-12-07 20:53:33.244 | DEBUG | no-id | [DKIM] Selector 'k1' failed: NXDOMAIN
2025-12-07 20:53:33.244 | DEBUG | no-id | [DKIM] Trying selector 'k2' for example.com: k2._domainkey.example.com
2025-12-07 20:53:33.244 | DEBUG | no-id | [DKIM] Selector 'k2' failed: NXDOMAIN
2025-12-07 20:53:33.245 | DEBUG | no-id | [DKIM] Trying selector 'mail' for example.com: mail._domainkey.example.com
2025-12-07 20:53:33.245 | DEBUG | no-id | [DKIM] Selector 'mail' failed: NXDOMAIN
2025-12-07 20:53:33.245 | DEBUG | no-id | [DKIM] Trying selector 'dkim' for example.com: dkim._domainkey.example.com
2025-12-07 20:53:33.245 | DEBUG | no-id | [DKIM] Selector 'dkim' failed: NXDOMAIN
2025-12-07 20:53:33.245 | DEBUG | no-id | [DKIM] Trying selector 'amazonses' for example.com: amazonses._domainkey.example.com
2025-12-07 20:53:33.245 | DEBUG | no-id | [DKIM] Selector 'amazonses' failed: NXDOMAIN
2025-12-07 20:53:33.245 | DEBUG | no-id | [DKIM] Trying selector 'sendgrid' for example.com: sendgrid._domainkey.example.com
2025-12-07 20:53:33.246 | DEBUG | no-id | [DKIM] Selector 'sendgrid' failed: NXDOMAIN
2025-12-07 20:53:33.246 | DEBUG | no-id | [DKIM] No selectors found for example.com
2025-12-07 20:53:33.248 | DEBUG | no-id | [DMARC] Found for example.com: v=DMARC1; p=reject; rua=mailto:dmarc@example.com...
2025-12-07 20:53:33.251 | DEBUG | no-id | DMARC check failed for example.com: NXDOMAIN
2025-12-07 20:53:33.273 | INFO | no-id | Rate limit check | IP: unknown | Path: /v1/logs/requests
2025-12-07 20:53:33.273 | INFO | no-id | Redis available: False
2025-12-07 20:53:33.273 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:33.280 | INFO | no-id | Rate limit check | IP: unknown | Path: /v1/logs/requests
2025-12-07 20:53:33.281 | INFO | no-id | Redis available: False
2025-12-07 20:53:33.281 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:33.287 | INFO | no-id | Rate limit check | IP: unknown | Path: /v1/logs/requests
2025-12-07 20:53:33.287 | INFO | no-id | Redis available: False
2025-12-07 20:53:33.287 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:33.293 | INFO | no-id | Generated API key
2025-12-07 20:53:33.294 | INFO | no-id | Generated API key
2025-12-07 20:53:33.296 | INFO | no-id | Generated webhook secret
2025-12-07 20:53:33.298 | INFO | no-id | Generated JWT secret
2025-12-07 20:53:33.302 | INFO | no-id | Generated API key
2025-12-07 20:53:33.304 | WARNING | no-id | Weak secret detected
2025-12-07 20:53:33.307 | WARNING | no-id | Secret rotation needed
2025-12-07 20:53:33.672 | INFO | no-id | üîá Console tracing disabled in development (reducing log noise)
2025-12-07 20:53:33.744 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.749 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.749 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.763 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.767 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.772 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.776 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.777 | DEBUG | no-id | Cache GET error for test:key: Redis error
2025-12-07 20:53:33.784 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.789 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.795 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.799 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.800 | ERROR | no-id | Cache SET error for test:key: Redis error
2025-12-07 20:53:33.804 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.808 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.812 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.812 | ERROR | no-id | Cache CLEAR error for None: Redis error
2025-12-07 20:53:33.818 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.825 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.827 | ERROR | no-id | Cache DELETE error for test:key: Redis error
2025-12-07 20:53:33.831 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.836 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:33.855 | ERROR | no-id | Error executing atomic INCR script on test:fallback: Lua error
Traceback (most recent call last):

  File "/opt/anaconda3/bin/pytest", line 8, in <module>
    sys.exit(console_main())
    ‚îÇ   ‚îÇ    ‚îî <function console_main at 0x1018b1d00>
    ‚îÇ   ‚îî <built-in function exit>
    ‚îî <module 'sys' (built-in)>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 192, in console_main
    code = main()
           ‚îî <function main at 0x1018b1bc0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/config/__init__.py", line 169, in main
    ret: Union[ExitCode, int] = config.hook.pytest_cmdline_main(
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_cmdline_main'>
         ‚îÇ     ‚îÇ                ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
         ‚îÇ     ‚îÇ                ‚îî <_pytest.config.Config object at 0x101c3ec50>
         ‚îÇ     ‚îî <enum 'ExitCode'>
         ‚îî typing.Union
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_cmdline_main'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_cmdline_main'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'config': <_pytest.config.Config object at 0x101c3ec50>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_cmdline_main'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<_pytest.config.Config object at 0x101c3ec50>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 318, in pytest_cmdline_main
    return wrap_session(config, _main)
           ‚îÇ            ‚îÇ       ‚îî <function _main at 0x101978040>
           ‚îÇ            ‚îî <_pytest.config.Config object at 0x101c3ec50>
           ‚îî <function wrap_session at 0x101953f60>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 271, in wrap_session
    session.exitstatus = doit(config, session) or 0
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îÇ       ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=3 testscollected=1593>
    ‚îÇ       ‚îÇ            ‚îÇ    ‚îî <_pytest.config.Config object at 0x101c3ec50>
    ‚îÇ       ‚îÇ            ‚îî <function _main at 0x101978040>
    ‚îÇ       ‚îî <ExitCode.OK: 0>
    ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=3 testscollected=1593>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 325, in _main
    config.hook.pytest_runtestloop(session=session)
    ‚îÇ      ‚îÇ    ‚îÇ                          ‚îî <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=3 testscollected=1593>
    ‚îÇ      ‚îÇ    ‚îî <HookCaller 'pytest_runtestloop'>
    ‚îÇ      ‚îî <_pytest.config.compat.PathAwareHookProxy object at 0x100de6c50>
    ‚îî <_pytest.config.Config object at 0x101c3ec50>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=3 testscollected=1593>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtestloop'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtestloop'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'session': <Session toni exitstatus=<ExitCode.OK: 0> testsfailed=3 testscollected=1593>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.p...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtestloop'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Session toni exitstatus=<ExitCode.OK: 0> testsfailed=3 testscollected=1593>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py'>>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/main.py", line 350, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    ‚îÇ    ‚îÇ                                        ‚îÇ              ‚îî <Function test_acquire_lock>
    ‚îÇ    ‚îÇ                                        ‚îî <Function test_incr_with_ttl>
    ‚îÇ    ‚îî <member 'config' of 'Node' objects>
    ‚îî <Function test_incr_with_ttl>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_incr_with_ttl>, 'nextitem': <Function test_acquire_lock>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_protocol'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_protocol'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_incr_with_ttl>, 'nextitem': <Function test_acquire_lock>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_protocol'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_incr_with_ttl>, <Function test_acquire_lock>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 114, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    ‚îÇ               ‚îÇ              ‚îî <Function test_acquire_lock>
    ‚îÇ               ‚îî <Function test_incr_with_ttl>
    ‚îî <function runtestprotocol at 0x101953100>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 133, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îÇ             ‚îî True
    ‚îÇ       ‚îÇ      ‚îÇ               ‚îî <Function test_incr_with_ttl>
    ‚îÇ       ‚îÇ      ‚îî <function call_and_report at 0x1019534c0>
    ‚îÇ       ‚îî <method 'append' of 'list' objects>
    ‚îî [<TestReport 'tests/test_utils.py::TestRedisOperations::test_incr_with_ttl' when='setup' outcome='passed'>]
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 222, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           ‚îÇ                 ‚îÇ     ‚îÇ       ‚îî {}
           ‚îÇ                 ‚îÇ     ‚îî 'call'
           ‚îÇ                 ‚îî <Function test_incr_with_ttl>
           ‚îî <function call_runtest_hook at 0x1019536a0>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 261, in call_runtest_hook
    return CallInfo.from_call(
           ‚îÇ        ‚îî <classmethod(<function CallInfo.from_call at 0x101953920>)>
           ‚îî <class '_pytest.runner.CallInfo'>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
            ‚îÇ        ‚îÇ          ‚îî <function call_runtest_hook.<locals>.<lambda> at 0x11dac7560>
            ‚îÇ        ‚îî +TResult
            ‚îî typing.Optional
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            ‚îÇ          ‚îÇ       ‚îî {}
            ‚îÇ          ‚îî <Function test_incr_with_ttl>
            ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'item': <Function test_incr_with_ttl>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_runtest_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_runtest_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî False
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'item': <Function test_incr_with_ttl>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/ru...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_runtest_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_incr_with_ttl>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/run...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
    ‚îÇ    ‚îî <function Function.runtest at 0x1019ba2a0>
    ‚îî <Function test_incr_with_ttl>
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    ‚îÇ    ‚îÇ                                   ‚îî <Function test_incr_with_ttl>
    ‚îÇ    ‚îî <property object at 0x1018cd8a0>
    ‚îî <Function test_incr_with_ttl>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îÇ                  ‚îî {'pyfuncitem': <Function test_incr_with_ttl>}
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îÇ    ‚îî <member '_hookimpls' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ     ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îÇ         ‚îÇ    ‚îî <member 'name' of 'HookCaller' objects>
           ‚îÇ    ‚îÇ         ‚îî <HookCaller 'pytest_pyfunc_call'>
           ‚îÇ    ‚îî <member '_hookexec' of 'HookCaller' objects>
           ‚îî <HookCaller 'pytest_pyfunc_call'>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îÇ       ‚îî True
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îÇ        ‚îî {'pyfuncitem': <Function test_incr_with_ttl>}
           ‚îÇ    ‚îÇ               ‚îÇ          ‚îî [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/py...
           ‚îÇ    ‚îÇ               ‚îî 'pytest_pyfunc_call'
           ‚îÇ    ‚îî <function _multicall at 0x101224900>
           ‚îî <_pytest.config.PytestPluginManager object at 0x1019d5690>
  File "/opt/anaconda3/lib/python3.11/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ‚îÇ         ‚îÇ         ‚îî [<Function test_incr_with_ttl>]
          ‚îÇ         ‚îî <member 'function' of 'HookImpl' objects>
          ‚îî <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/opt/anaconda3/lib/python3.11/site-packages/_pytest/pyt...
  File "/opt/anaconda3/lib/python3.11/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ‚îÇ              ‚îî {'redis_client': FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x11dbecdd0>,db=0>>>}
             ‚îî <function TestRedisOperations.test_incr_with_ttl at 0x11db2be20>
  File "/opt/anaconda3/lib/python3.11/site-packages/pytest_asyncio/plugin.py", line 532, in inner
    _loop.run_until_complete(task)
    ‚îÇ     ‚îÇ                  ‚îî <Task pending name='Task-2350' coro=<TestRedisOperations.test_incr_with_ttl() running at /Users/pablo/Desktop/toni/tests/test...
    ‚îÇ     ‚îî <function BaseEventLoop.run_until_complete at 0x102c0e840>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    ‚îÇ    ‚îî <function BaseEventLoop.run_forever at 0x102c0e7a0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    ‚îÇ    ‚îî <function BaseEventLoop._run_once at 0x102c105e0>
    ‚îî <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/opt/anaconda3/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    ‚îÇ      ‚îî <function Handle._run at 0x102ba93a0>
    ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
  File "/opt/anaconda3/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îÇ    ‚îî <member '_args' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îÇ           ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
    ‚îÇ    ‚îÇ            ‚îÇ    ‚îî <member '_callback' of 'Handle' objects>
    ‚îÇ    ‚îÇ            ‚îî <Handle Task.task_wakeup(<Future cancelled>)>
    ‚îÇ    ‚îî <member '_context' of 'Handle' objects>
    ‚îî <Handle Task.task_wakeup(<Future cancelled>)>

  File "/Users/pablo/Desktop/toni/tests/test_utils.py", line 198, in test_incr_with_ttl
    result = await incr_with_ttl(redis_client, "test:fallback", 1, 3600)
                   ‚îÇ             ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x11dbecdd0>,db=0>>>
                   ‚îî <function incr_with_ttl at 0x10b1c4220>

> File "/Users/pablo/Desktop/toni/app/utils.py", line 124, in incr_with_ttl
    result = await redis.eval(INCR_EXPIRE_SCRIPT, 1, key, str(amount), str(ttl))
                   ‚îÇ     ‚îÇ    ‚îÇ                      ‚îÇ        ‚îÇ            ‚îî 3600
                   ‚îÇ     ‚îÇ    ‚îÇ                      ‚îÇ        ‚îî 1
                   ‚îÇ     ‚îÇ    ‚îÇ                      ‚îî 'test:fallback'
                   ‚îÇ     ‚îÇ    ‚îî "\nlocal key = KEYS[1]\nlocal amount = tonumber(ARGV[1])\nlocal ttl = tonumber(ARGV[2])\nlocal v = redis.call('INCRBY', key, ...
                   ‚îÇ     ‚îî <MagicMock name='eval' id='4794011408'>
                   ‚îî FakeRedis<ConnectionPool<FakeConnection<server=<fakeredis._server.FakeServer object at 0x11dbecdd0>,db=0>>>

  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 1124, in __call__
    return self._mock_call(*args, **kwargs)
           ‚îÇ    ‚îÇ           ‚îÇ       ‚îî {}
           ‚îÇ    ‚îÇ           ‚îî ("\nlocal key = KEYS[1]\nlocal amount = tonumber(ARGV[1])\nlocal ttl = tonumber(ARGV[2])\nlocal v = redis.call('INCRBY', key,...
           ‚îÇ    ‚îî <function CallableMixin._mock_call at 0x102cad760>
           ‚îî <MagicMock name='eval' id='4794011408'>
  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 1128, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ‚îÇ    ‚îÇ                   ‚îÇ       ‚îî {}
           ‚îÇ    ‚îÇ                   ‚îî ("\nlocal key = KEYS[1]\nlocal amount = tonumber(ARGV[1])\nlocal ttl = tonumber(ARGV[2])\nlocal v = redis.call('INCRBY', key,...
           ‚îÇ    ‚îî <function CallableMixin._execute_mock_call at 0x102cad8a0>
           ‚îî <MagicMock name='eval' id='4794011408'>
  File "/opt/anaconda3/lib/python3.11/unittest/mock.py", line 1183, in _execute_mock_call
    raise effect
          ‚îî Exception('Lua error')

Exception: Lua error
2025-12-07 20:53:35.750 | INFO | no-id | Usage incremented for user123: -> 1
2025-12-07 20:53:35.751 | INFO | no-id | Usage incremented for user123: -> 2
2025-12-07 20:53:35.783 | WARNING | no-id | Could not acquire lock to update keys for user user456
2025-12-07 20:53:35.786 | ERROR | no-id | Error migrating user to multi-key system: API key must be at least 16 characters
2025-12-07 20:53:35.797 | ERROR | no-id | Error migrating user to multi-key system: API key must be at least 16 characters
2025-12-07 20:53:35.803 | INFO | no-id | Usage incremented for user123: -> 1
2025-12-07 20:53:35.803 | INFO | no-id | Usage incremented for user123: -> 2
2025-12-07 20:53:35.804 | INFO | no-id | Usage incremented for user123: -> 3
2025-12-07 20:53:35.805 | INFO | no-id | Usage incremented for user123: -> 4
2025-12-07 20:53:35.805 | INFO | no-id | Usage incremented for user123: -> 5
2025-12-07 20:53:35.819 | INFO | no-id | Usage incremented for user123: -> 1
2025-12-07 20:53:35.819 | INFO | no-id | Usage incremented for user123: -> 2
2025-12-07 20:53:35.820 | INFO | no-id | Usage incremented for user123: -> 3
2025-12-07 20:53:35.820 | INFO | no-id | Usage incremented for user123: -> 4
2025-12-07 20:53:35.820 | INFO | no-id | Usage incremented for user123: -> 5
2025-12-07 20:53:35.820 | INFO | no-id | Usage incremented for user123: -> 6
2025-12-07 20:53:35.820 | INFO | no-id | Usage incremented for user123: -> 7
2025-12-07 20:53:35.821 | INFO | no-id | Usage incremented for user123: -> 8
2025-12-07 20:53:35.821 | INFO | no-id | Usage incremented for user123: -> 9
2025-12-07 20:53:35.821 | INFO | no-id | Usage incremented for user123: -> 10
2025-12-07 20:53:35.833 | DEBUG | no-id | No integer in legacy raw usage key %s
2025-12-07 20:53:35.834 | DEBUG | no-id | No integer in hashed usage key %s
2025-12-07 20:53:35.834 | DEBUG | no-id | No integer in legacy raw usage key %s
2025-12-07 20:53:35.834 | DEBUG | no-id | No integer in hashed usage key %s
2025-12-07 20:53:35.858 | ERROR | no-id | Error parsing API key data: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-12-07 20:53:35.889 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:35.890 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:53:35.893 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:35.894 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:53:35.894 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:53:35.895 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:53:35.895 | WARNING | no-id | Circuit breaker OPENED: smtp:mx.example.com
2025-12-07 20:53:35.896 | DEBUG | no-id | Circuit breaker open: smtp:mx.example.com
2025-12-07 20:53:35.899 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:35.900 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:53:35.900 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:53:35.900 | DEBUG | no-id | Circuit breaker failure recorded: smtp:mx.example.com
2025-12-07 20:53:35.903 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:35.905 | INFO | no-id | Circuit breaker half-open: smtp:mx.example.com
2025-12-07 20:53:35.907 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:35.908 | DEBUG | no-id | Circuit breaker open: smtp:host1.com
2025-12-07 20:53:35.910 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:35.911 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:35.914 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:35.915 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:35.919 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:35.920 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:35.923 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:35.923 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:35.928 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:35.928 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:35.936 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:53:35.936 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:53:35.936 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:53:35.936 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:53:35.938 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:53:35.939 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:53:35.939 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:53:35.941 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:53:35.941 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:53:36.487 | DEBUG | no-id | Retry 1/5 for eventual_success sleeping 0.013s due to Temporary failure
2025-12-07 20:53:36.501 | DEBUG | no-id | Retrying eventual_success attempt 2/5
2025-12-07 20:53:36.501 | DEBUG | no-id | Retry 2/5 for eventual_success sleeping 0.026s due to Temporary failure
2025-12-07 20:53:36.528 | DEBUG | no-id | Retrying eventual_success attempt 3/5
2025-12-07 20:53:36.530 | DEBUG | no-id | Retry 1/3 for always_fail sleeping 0.011s due to Always fails
2025-12-07 20:53:36.543 | DEBUG | no-id | Retrying always_fail attempt 2/3
2025-12-07 20:53:36.543 | DEBUG | no-id | Retry 2/3 for always_fail sleeping 0.021s due to Always fails
2025-12-07 20:53:36.565 | DEBUG | no-id | Retrying always_fail attempt 3/3
2025-12-07 20:53:36.565 | DEBUG | no-id | Retry 3/3 for always_fail sleeping 0.044s due to Always fails
2025-12-07 20:53:36.614 | DEBUG | no-id | Retry 1/5 for fail_twice sleeping 0.010s due to Fail 1
2025-12-07 20:53:36.625 | DEBUG | no-id | Retrying fail_twice attempt 2/5
2025-12-07 20:53:36.625 | DEBUG | no-id | Retry 2/5 for fail_twice sleeping 0.024s due to Fail 2
2025-12-07 20:53:36.651 | DEBUG | no-id | Retrying fail_twice attempt 3/5
2025-12-07 20:53:36.655 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:53:36.659 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:53:36.661 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.256s due to Primary failed
2025-12-07 20:53:36.919 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:53:36.921 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.503s due to Primary failed
2025-12-07 20:53:37.426 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:53:37.428 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.151s due to Primary failed
2025-12-07 20:53:38.581 | DEBUG | no-id | Async MX primary failed for example.com: Primary failed
2025-12-07 20:53:38.591 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:53:38.598 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.291s due to No MX
2025-12-07 20:53:38.891 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:53:38.893 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.607s due to No MX
2025-12-07 20:53:39.502 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:53:39.504 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.115s due to No MX
2025-12-07 20:53:40.622 | DEBUG | no-id | Async MX primary failed for example.com: No MX
2025-12-07 20:53:40.625 | DEBUG | no-id | Retry 1/3 for AsyncMock sleeping 0.261s due to No MX fallback
2025-12-07 20:53:40.887 | DEBUG | no-id | Retrying AsyncMock attempt 2/3
2025-12-07 20:53:40.889 | DEBUG | no-id | Retry 2/3 for AsyncMock sleeping 0.543s due to No MX fallback
2025-12-07 20:53:41.435 | DEBUG | no-id | Retrying AsyncMock attempt 3/3
2025-12-07 20:53:41.437 | DEBUG | no-id | Retry 3/3 for AsyncMock sleeping 1.187s due to No MX fallback
2025-12-07 20:53:42.626 | DEBUG | no-id | Fallback MX query failed for example.com: No MX fallback
2025-12-07 20:53:43.695 | WARNING | no-id | SMTP check timeout for %s
2025-12-07 20:53:43.707 | ERROR | no-id | SMTP wrapper unexpected error: %s
2025-12-07 20:53:43.750 | ERROR | no-id | Sync domain check failed for %s: %s
2025-12-07 20:53:43.754 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:43.754 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:43.756 | DEBUG | no-id | Cache GET error for mx:example.com: Redis error
2025-12-07 20:53:43.759 | DEBUG | no-id | Cache GET error for domain:test.com: Redis error
2025-12-07 20:53:43.762 | DEBUG | no-id | Cache GET error for smtp:mail.example.com: Redis error
2025-12-07 20:53:43.765 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:43.766 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:43.766 | ERROR | no-id | Cache SET error for mx:test.com: Redis SET error
2025-12-07 20:53:43.770 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:43.770 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:43.777 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:43.777 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:43.782 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:43.782 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:43.782 | ERROR | no-id | Cache CLEAR error for mx:: Redis error
2025-12-07 20:53:43.785 | ERROR | no-id | Cache CLEAR error for None: Redis error
2025-12-07 20:53:43.787 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:53:43.790 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:53:43.790 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:53:43.792 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:53:43.792 | WARNING | no-id | MX host %s is non-public IP: %s
2025-12-07 20:53:43.821 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:43.822 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:43.825 | WARNING | no-id | SMTP checks rate-limited for host %s
2025-12-07 20:53:43.830 | DEBUG | no-id | Retry 1/3 for <lambda> sleeping 0.286s due to Connection failed
2025-12-07 20:53:44.118 | DEBUG | no-id | Retrying <lambda> attempt 2/3
2025-12-07 20:53:44.120 | DEBUG | no-id | Retry 2/3 for <lambda> sleeping 0.529s due to Connection failed
2025-12-07 20:53:44.652 | DEBUG | no-id | Retrying <lambda> attempt 3/3
2025-12-07 20:53:44.654 | DEBUG | no-id | Retry 3/3 for <lambda> sleeping 1.047s due to Connection failed
2025-12-07 20:53:45.703 | DEBUG | no-id | SMTP connection attempt failed for mx.example.com:587 ‚Äî Connection failed
2025-12-07 20:53:45.706 | DEBUG | no-id | Retry 1/3 for <lambda> sleeping 0.324s due to Connection failed
2025-12-07 20:53:46.032 | DEBUG | no-id | Retrying <lambda> attempt 2/3
2025-12-07 20:53:46.034 | DEBUG | no-id | Retry 2/3 for <lambda> sleeping 0.551s due to Connection failed
2025-12-07 20:53:46.586 | DEBUG | no-id | Retrying <lambda> attempt 3/3
2025-12-07 20:53:46.589 | DEBUG | no-id | Retry 3/3 for <lambda> sleeping 1.287s due to Connection failed
2025-12-07 20:53:47.878 | DEBUG | no-id | SMTP connection attempt failed for mx.example.com:465 ‚Äî Connection failed
2025-12-07 20:53:48.004 | DEBUG | no-id | STARTTLS attempt failed for mx.example.com:587 ‚Äî TLS failed
2025-12-07 20:53:48.021 | ERROR | no-id | Unexpected SMTP error for mx.example.com:25 ‚Äî Error
2025-12-07 20:53:48.029 | WARNING | no-id | Blocked dangerous MX host: %s
2025-12-07 20:53:48.043 | DEBUG | no-id | Transient SMTP error for %s:%d (attempt %d): %s
2025-12-07 20:53:48.572 | DEBUG | no-id | Transient SMTP error for %s:%d (attempt %d): %s
2025-12-07 20:53:49.081 | DEBUG | no-id | Transient SMTP error for %s:%d (attempt %d): %s
2025-12-07 20:53:50.121 | ERROR | no-id | Unexpected SMTP error for mx.example.com:465 ‚Äî 'SMTP_SSL' object has no attribute 'timeout'
2025-12-07 20:53:50.141 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:50.142 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:50.146 | INFO | no-id | UnifiedCache initialized
2025-12-07 20:53:50.146 | INFO | no-id | Initialized PerHostCircuitBreaker for smtp
2025-12-07 20:53:50.157 | INFO | no-id | Circuit breaker open for %s
2025-12-07 20:53:50.162 | WARNING | no-id | Unsafe MX host: %s
2025-12-07 20:53:50.168 | DEBUG | no-id | MX %s has no public IP
2025-12-07 20:53:50.181 | DEBUG | no-id | Connection failed to mx1.example.com: Failed mx1
2025-12-07 20:53:50.189 | INFO | no-id | Using custom nameservers: ['10.0.0.1']
2025-12-07 20:53:50.192 | INFO | no-id | No DNS nameservers configured, using public DNS: ['8.8.8.8', '8.8.4.4', '1.1.1.1']
2025-12-07 20:53:50.195 | INFO | no-id | Using custom nameservers: ['1.1.1.1', '1.0.0.1']
2025-12-07 20:53:50.202 | DEBUG | no-id | Async MX primary failed for test.com: Async fail
2025-12-07 20:53:50.206 | DEBUG | no-id | Async MX primary failed for fail.com: Async fail
2025-12-07 20:53:50.207 | DEBUG | no-id | Fallback MX query failed for fail.com: Sync fail
2025-12-07 20:53:50.217 | DEBUG | no-id | Async TXT primary failed for test.com: Timeout
2025-12-07 20:53:50.351 | ERROR | no-id | Rate limit check failed: Redis error
2025-12-07 20:53:50.393 | ERROR | no-id | Rate limit check failed: 'NoneType' object has no attribute 'get'
2025-12-07 20:53:50.578 | DEBUG | no-id | Invalid reputation value invalid
2025-12-07 20:53:50.588 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:53:50.589 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.589 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.593 | INFO | no-id | Email validation | User: test_user | Plan: PREMIUM | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:50.593 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:53:50.593 | INFO | no-id | 47128283-075f-4554-8270-f312426fe1c7 | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:53:50.593 | INFO | no-id | Validation 47128283-075f-4554-8270-f312426fe1c7 completed successfully
2025-12-07 20:53:50.601 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:53:50.601 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.601 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.605 | INFO | no-id | Email validation | User: test_user | Plan: PREMIUM | Email: timeout@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:50.606 | INFO | no-id | 27c1bd09-259d-40bf-a136-157a7c07df17 | Pre-validation spam trap check | Email: timeout@example.com | Is trap: False | Confidence: 0.0
2025-12-07 20:53:50.606 | WARNING | no-id | Validation timeout | Email: timeout@example.com | Elapsed: 0.00s | Timeout: 45.0s | Plan: PREMIUM
2025-12-07 20:53:50.607 | INFO | no-id | Validation completed with timeout fallback | Email: timeout@example.com | Valid: True | Elapsed: 0.00s | Plan: PREMIUM
2025-12-07 20:53:50.613 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch
2025-12-07 20:53:50.614 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.614 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.618 | INFO | no-id | Batch validation requested by: test_user (Plan: PREMIUM)
2025-12-07 20:53:50.620 | INFO | no-id | Usage incremented for test_user: -> <AsyncMock name='mock.incrby()' id='5056204624'>
2025-12-07 20:53:50.626 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch
2025-12-07 20:53:50.626 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.626 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.630 | DEBUG | no-id | Could not extract plan from token: DecodeError: Not enough segments
2025-12-07 20:53:50.631 | WARNING | no-id | Validation Error | Count: 1 | Details: [{"field": "body.emails", "message": "List should have at least 1 item after validation, not 0", "type": "too_short", "input": []}] | Trace: None | Plan: UNKNOWN | Path: /validate/batch
2025-12-07 20:53:50.638 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:53:50.638 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.639 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.642 | INFO | no-id | Email validation | User: test_user | Plan: PREMIUM | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:50.643 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:53:50.643 | INFO | no-id | ee4ecfa5-41a5-4cf5-8143-a9428eab06b6 | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:53:50.643 | WARNING | no-id | API Exception | Email: test@example.com | Error: Test error | Elapsed: 0.00s
2025-12-07 20:53:50.643 | WARNING | no-id | APIException | Email: test@example.com | Type: test_error | Detail: Test error | Elapsed: 0.00s
2025-12-07 20:53:50.651 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch
2025-12-07 20:53:50.651 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.651 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.655 | INFO | no-id | Batch validation requested by: test_user (Plan: PREMIUM)
2025-12-07 20:53:50.656 | INFO | no-id | Usage incremented for test_user: -> <AsyncMock name='mock.incrby()' id='4793434896'>
2025-12-07 20:53:50.663 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch
2025-12-07 20:53:50.664 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.664 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.669 | INFO | no-id | Batch validation requested by: test_user (Plan: PREMIUM)
2025-12-07 20:53:50.671 | INFO | no-id | Usage incremented for test_user: -> <AsyncMock name='mock.incrby()' id='4790759632'>
2025-12-07 20:53:50.677 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/stats/usage
2025-12-07 20:53:50.677 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.677 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.687 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/health
2025-12-07 20:53:50.687 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.687 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.696 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/health
2025-12-07 20:53:50.696 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.696 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.706 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch/upload
2025-12-07 20:53:50.707 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.707 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.711 | INFO | no-id | Upload requested by: test_user - File: emails.csv
2025-12-07 20:53:50.719 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch/upload
2025-12-07 20:53:50.719 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.720 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.724 | INFO | no-id | Upload requested by: test_user - File: emails.txt
2025-12-07 20:53:50.733 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch/upload
2025-12-07 20:53:50.733 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.733 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.738 | INFO | no-id | Upload requested by: test_user - File: emails.csv
2025-12-07 20:53:50.748 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/batch/upload
2025-12-07 20:53:50.748 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.748 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.752 | INFO | no-id | Upload requested by: test_user - File: emails.csv
2025-12-07 20:53:50.759 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:53:50.759 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.759 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.764 | DEBUG | no-id | Could not extract plan from token: DecodeError: Not enough segments
2025-12-07 20:53:50.764 | WARNING | no-id | Validation Error | Count: 1 | Details: [{"field": "body", "message": "Input should be a valid dictionary or object to extract fields from", "type": "model_attributes_type", "input": "not json"}] | Trace: None | Plan: UNKNOWN | Path: /validate/email
2025-12-07 20:53:50.770 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:53:50.771 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.771 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.775 | INFO | no-id | Email validation | User: free_user | Plan: FREE | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:50.775 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:53:50.775 | INFO | no-id | 9effde93-966e-4254-9b9e-fe4b2a6637df | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:53:50.776 | INFO | no-id | Validation 9effde93-966e-4254-9b9e-fe4b2a6637df completed successfully
2025-12-07 20:53:50.783 | INFO | no-id | Rate limit check | IP: unknown | Path: /validate/email
2025-12-07 20:53:50.783 | INFO | no-id | Redis available: False
2025-12-07 20:53:50.783 | WARNING | no-id | ‚ö†Ô∏è Redis unavailable - using local fallback for global rate limit
2025-12-07 20:53:50.788 | INFO | no-id | Email validation | User: enterprise_user | Plan: ENTERPRISE | Email: test@example.com | Env: production | SMTP: False | DNS: False
2025-12-07 20:53:50.788 | DEBUG | no-id | Spam trap check cache hit for test@example.com
2025-12-07 20:53:50.788 | INFO | no-id | 9130f2e3-1738-4ef6-9f47-d4908ce1ec8b | Pre-validation spam trap check | Email: test@example.com | Is trap: False | Confidence: 0.5
2025-12-07 20:53:50.788 | INFO | no-id | Validation 9130f2e3-1738-4ef6-9f47-d4908ce1ec8b completed successfully
2025-12-07 20:53:50.837 | WARNING | no-id | Path traversal attempt detected: ../../../etc/passwd
2025-12-07 20:53:51.023 | DEBUG | no-id | Could not extract plan: cannot import name 'Mapping' from 'collections' (/opt/anaconda3/lib/python3.11/collections/__init__.py)
2025-12-07 20:53:51.024 | INFO | no-id | 77e744d9-480f-42c0-a5dd-9f601d359c27 | Format validation passed | Email: val***@e***.com
2025-12-07 20:53:51.024 | INFO | no-id | 77e744d9-480f-42c0-a5dd-9f601d359c27 | Checking spam traps...
2025-12-07 20:53:51.024 | INFO | no-id | 77e744d9-480f-42c0-a5dd-9f601d359c27 | Spam trap check completed | is_trap=False, confidence=0.0, type=None
2025-12-07 20:53:51.024 | INFO | no-id | [HIBP] ‚úÖ Starting HIBP check for val***@e***.com
2025-12-07 20:53:51.024 | INFO | no-id | [HIBP] Making async HTTP request to HIBP API...
2025-12-07 20:53:51.270 | INFO | no-id | [HIBP] Response status: 404
2025-12-07 20:53:51.272 | INFO | no-id | [HIBP] Email NOT in breach
2025-12-07 20:53:51.276 | INFO | no-id | [HIBP] Result cached
2025-12-07 20:53:51.276 | INFO | no-id | [HIBP] ‚úÖ Result: {'in_breach': False, 'breach_count': 0, 'breaches': [], 'cached': False, 'checked_at': '2025-12-07T19:53:51.272614Z', 'risk_level': 'low'}
2025-12-07 20:53:51.277 | INFO | no-id | [77e744d9-480f-42c0-a5dd-9f601d359c27] HIBP check complete | In breach: False | Count: 0
2025-12-07 20:53:51.277 | INFO | no-id | 77e744d9-480f-42c0-a5dd-9f601d359c27 | Analyzing provider...
2025-12-07 20:53:51.278 | INFO | no-id | [77e744d9-480f-42c0-a5dd-9f601d359c27] Provider analysis complete | Provider: google | SPF: pass | DKIM: pass | Reputation: 0.9
2025-12-07 20:53:51.278 | INFO | no-id | [77e744d9-480f-42c0-a5dd-9f601d359c27] Role email check | Is role: False | Type: None
2025-12-07 20:53:51.278 | DEBUG | no-id | First validation for valid@example.com, marking in cache
2025-12-07 20:53:51.279 | ERROR | no-id | [77e744d9-480f-42c0-a5dd-9f601d359c27] Catch-all detection error: detect_catch_all_domain() got an unexpected keyword argument 'redis'
2025-12-07 20:53:51.279 | INFO | no-id | [77e744d9-480f-42c0-a5dd-9f601d359c27] Unified risk scoring | Score: 0/100 | Level: low | Confidence: 50.00% | Factors: {}
2025-12-07 20:53:51.279 | INFO | no-id | Validation 77e744d9-480f-42c0-a5dd-9f601d359c27 completed successfully
2025-12-07 20:53:51.284 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:53:51.295 | DEBUG | no-id | Could not extract plan: cannot import name 'Mapping' from 'collections' (/opt/anaconda3/lib/python3.11/collections/__init__.py)
2025-12-07 20:53:51.295 | INFO | no-id | 90cc8ab8-5c8b-4be3-b15f-b65b8d35b2a4 | Format validation passed | Email: ***invalid***
2025-12-07 20:53:51.296 | WARNING | no-id | 90cc8ab8-5c8b-4be3-b15f-b65b8d35b2a4 | Typo detected: gmil.com ‚Üí gmail.com (confidence: 90%)
2025-12-07 20:53:51.298 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:53:51.306 | DEBUG | no-id | Could not extract plan: cannot import name 'Mapping' from 'collections' (/opt/anaconda3/lib/python3.11/collections/__init__.py)
2025-12-07 20:53:51.307 | INFO | no-id | 2cac32be-fb73-4624-aafb-5d72201ed294 | Format validation passed | Email: tem***@t***.com
2025-12-07 20:53:51.307 | WARNING | no-id | Disposable email detected: temp@trash.com
2025-12-07 20:53:51.308 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:53:51.316 | DEBUG | no-id | Could not extract plan: cannot import name 'Mapping' from 'collections' (/opt/anaconda3/lib/python3.11/collections/__init__.py)
2025-12-07 20:53:51.317 | INFO | no-id | b21077f2-6aad-49a9-a5a2-05cd5faa355b | Format validation passed | Email: tra***@e***.com
2025-12-07 20:53:51.317 | INFO | no-id | b21077f2-6aad-49a9-a5a2-05cd5faa355b | Checking spam traps...
2025-12-07 20:53:51.317 | INFO | no-id | b21077f2-6aad-49a9-a5a2-05cd5faa355b | Spam trap check completed | is_trap=True, confidence=0.95, type=honeypot
2025-12-07 20:53:51.317 | WARNING | no-id | b21077f2-6aad-49a9-a5a2-05cd5faa355b | SPAM TRAP DETECTED | Email: trap@example.com | Type: honeypot | Confidence: 0.95
2025-12-07 20:53:51.319 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:53:51.330 | DEBUG | no-id | Could not extract plan: cannot import name 'Mapping' from 'collections' (/opt/anaconda3/lib/python3.11/collections/__init__.py)
2025-12-07 20:53:51.330 | INFO | no-id | f6e31079-dfa6-404d-a4f6-b7c1671f35ec | Format validation passed | Email: pwn***@e***.com
2025-12-07 20:53:51.331 | INFO | no-id | f6e31079-dfa6-404d-a4f6-b7c1671f35ec | Checking spam traps...
2025-12-07 20:53:51.331 | INFO | no-id | f6e31079-dfa6-404d-a4f6-b7c1671f35ec | Spam trap check completed | is_trap=False, confidence=0.0, type=None
2025-12-07 20:53:51.331 | INFO | no-id | [f6e31079-dfa6-404d-a4f6-b7c1671f35ec] HIBP check complete | In breach: True | Count: 5
2025-12-07 20:53:51.331 | INFO | no-id | f6e31079-dfa6-404d-a4f6-b7c1671f35ec | Analyzing provider...
2025-12-07 20:53:51.332 | INFO | no-id | [f6e31079-dfa6-404d-a4f6-b7c1671f35ec] Provider analysis complete | Provider: generic | SPF: none | DKIM: none | Reputation: 0.5
2025-12-07 20:53:51.332 | INFO | no-id | [f6e31079-dfa6-404d-a4f6-b7c1671f35ec] Role email check | Is role: False | Type: None
2025-12-07 20:53:51.332 | WARNING | no-id | [f6e31079-dfa6-404d-a4f6-b7c1671f35ec] Risk score increased due to breach
2025-12-07 20:53:51.333 | DEBUG | no-id | First validation for pwned@example.com, marking in cache
2025-12-07 20:53:51.333 | DEBUG | no-id | [f6e31079-dfa6-404d-a4f6-b7c1671f35ec] Catch-all check skipped (check_smtp=false)
2025-12-07 20:53:51.333 | INFO | no-id | [f6e31079-dfa6-404d-a4f6-b7c1671f35ec] Unified risk scoring | Score: 55/100 | Level: high | Confidence: 92.50% | Factors: {'smtp_failed': 30, 'data_breach': 25}
2025-12-07 20:53:51.334 | INFO | no-id | Validation f6e31079-dfa6-404d-a4f6-b7c1671f35ec completed successfully
2025-12-07 20:53:51.335 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:53:51.344 | DEBUG | no-id | Could not extract plan: cannot import name 'Mapping' from 'collections' (/opt/anaconda3/lib/python3.11/collections/__init__.py)
2025-12-07 20:53:51.344 | INFO | no-id | 320e2184-d8db-4109-b957-3ae0ba7960c9 | Format validation passed | Email: cac***@e***.com
2025-12-07 20:53:51.344 | INFO | no-id | 320e2184-d8db-4109-b957-3ae0ba7960c9 | Checking spam traps...
2025-12-07 20:53:51.344 | INFO | no-id | 320e2184-d8db-4109-b957-3ae0ba7960c9 | Spam trap check completed | is_trap=False, confidence=0.0, type=None
2025-12-07 20:53:51.344 | INFO | no-id | 320e2184-d8db-4109-b957-3ae0ba7960c9 | Analyzing provider...
2025-12-07 20:53:51.345 | INFO | no-id | [320e2184-d8db-4109-b957-3ae0ba7960c9] Provider analysis complete | Provider: google | SPF: pass | DKIM: pass | Reputation: 0.9
2025-12-07 20:53:51.345 | INFO | no-id | [320e2184-d8db-4109-b957-3ae0ba7960c9] Role email check | Is role: False | Type: None
2025-12-07 20:53:51.345 | DEBUG | no-id | Validation cache HIT for cached@example.com
2025-12-07 20:53:51.346 | ERROR | no-id | [320e2184-d8db-4109-b957-3ae0ba7960c9] Catch-all detection error: detect_catch_all_domain() got an unexpected keyword argument 'redis'
2025-12-07 20:53:51.346 | INFO | no-id | [320e2184-d8db-4109-b957-3ae0ba7960c9] Unified risk scoring | Score: 0/100 | Level: low | Confidence: 50.00% | Factors: {}
2025-12-07 20:53:51.346 | INFO | no-id | Validation 320e2184-d8db-4109-b957-3ae0ba7960c9 completed successfully
2025-12-07 20:53:51.347 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:53:51.543 | DEBUG | no-id | Concurrency limit for PREMIUM: 5
2025-12-07 20:53:51.545 | DEBUG | no-id | Current concurrency for user123: 5, limit: 5
2025-12-07 20:53:51.549 | DEBUG | no-id | Concurrency limit for PREMIUM: 5
2025-12-07 20:53:51.549 | DEBUG | no-id | Current concurrency for user123: 2, limit: 5
2025-12-07 20:53:51.553 | DEBUG | no-id | Error cleaning up concurrency limits: '<=' not supported between instances of 'AsyncMock' and 'int'
2025-12-07 20:53:51.582 | INFO | no-id | Created webhook e271b25e-fa15-4242-bc4b-736184453e6b for user test_user_123
2025-12-07 20:53:51.591 | INFO | no-id | Created webhook f0f51807-9c0c-470b-a961-d67e2a8766a3 for user test_user_123
2025-12-07 20:53:51.599 | ERROR | no-id | Failed to create webhook: Redis error
2025-12-07 20:53:51.608 | INFO | no-id | Created webhook 57e3a375-520e-4f9e-ba1c-2c7cee763d40 for user test_user_123
2025-12-07 20:53:51.643 | ERROR | no-id | Failed to list webhooks: Redis error
2025-12-07 20:53:51.675 | ERROR | no-id | Failed to get webhook: Redis error
2025-12-07 20:53:51.684 | INFO | no-id | Updated webhook c63f71c7-e318-4b91-adaf-cc74804d395c
2025-12-07 20:53:51.694 | INFO | no-id | Updated webhook 93d4ca92-a1b9-441b-9b70-3bdbd75a0bf0
2025-12-07 20:53:51.703 | INFO | no-id | Updated webhook 73cedde4-491c-4a49-86bc-7911a135a84a
2025-12-07 20:53:51.712 | INFO | no-id | Updated webhook 9d70b0f1-7a5b-402b-8217-0315efc6d30e
2025-12-07 20:53:51.713 | INFO | no-id | Updated webhook 9d70b0f1-7a5b-402b-8217-0315efc6d30e
2025-12-07 20:53:51.738 | ERROR | no-id | Failed to update webhook: Redis error
2025-12-07 20:53:51.749 | INFO | no-id | Deleted webhook 800dd63b-a2fe-482c-8258-33057f011c7e
2025-12-07 20:53:51.774 | ERROR | no-id | Failed to delete webhook: Redis error
2025-12-07 20:53:51.784 | INFO | no-id | Test webhook sent to bd8d694e-8bd0-4eb4-ba89-86c86c68b041
2025-12-07 20:53:51.794 | ERROR | no-id | Test webhook failed: Connection timeout
